<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Véleményezés Debug</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- DÁP Design System - Inter betűtípus -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app" class="container mt-5">
        <h1>Véleményezés Komponens Debug</h1>

        <div class="alert alert-info">
            <h5>Debug információk:</h5>
            <ul>
                <li>Vue betöltve: {{ vueLoaded }}</li>
                <li>VahapMockData létezik: {{ mockDataExists }}</li>
                <li>velemenyezes objektum: {{ velemenyezesExists }}</li>
                <li>velemenyeztetes_feladatok: {{ feladatokExists }}</li>
            </ul>
        </div>

        <wf-velemenyezes
            v-if="componentReady"
            :ugy="testUgy"
            :step-data="{}"
            @action="handleAction"
            @complete="handleComplete">
        </wf-velemenyezes>

        <div v-else class="alert alert-warning">
            Komponens nem elérhető. Ellenőrizd a console-t!
        </div>
    </div>

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- VAHAP Központi Fájlok -->
    <script src="assets/js/vihar-config.js"></script>
    <script src="assets/js/vihar-common.js"></script>
    <script src="assets/js/vihar-mock-data.js"></script>

    <!-- Véleményezés Komponens -->
    <script src="assets/js/components/workflow/wf-velemenyezes.js"></script>

    <script>
        const { createApp } = Vue;

        const app = createApp({
            data() {
                return {
                    vueLoaded: typeof Vue !== 'undefined',
                    mockDataExists: typeof VahapMockData !== 'undefined',
                    velemenyezesExists: typeof VahapMockData !== 'undefined' && !!VahapMockData.velemenyezes,
                    feladatokExists: typeof VahapMockData !== 'undefined' &&
                                    !!VahapMockData.velemenyezes &&
                                    !!VahapMockData.velemenyezes.velemenyeztetes_feladatok,
                    componentReady: typeof WfVelemenyezes !== 'undefined',
                    testUgy: {
                        ugyazonosito: 'VAHAP-V-2024-TEST',
                        ugytipus: 'V-044'
                    }
                };
            },
            methods: {
                handleAction(data) {
                    console.log('Action:', data);
                },
                handleComplete(data) {
                    console.log('Complete:', data);
                    alert('Workflow complete!');
                }
            },
            mounted() {
                console.log('=== DEBUG INFO ===');
                console.log('Vue:', typeof Vue);
                console.log('VahapMockData:', typeof VahapMockData);
                console.log('WfVelemenyezes:', typeof WfVelemenyezes);

                if (typeof VahapMockData !== 'undefined') {
                    console.log('VahapMockData.velemenyezes:', VahapMockData.velemenyezes);
                    if (VahapMockData.velemenyezes) {
                        console.log('velemenyeztetes_feladatok:', VahapMockData.velemenyezes.velemenyeztetes_feladatok);
                    }
                }
            }
        });

        // Komponens regisztrálás
        if (typeof WfVelemenyezes !== 'undefined') {
            app.component('wf-velemenyezes', WfVelemenyezes);
            console.log('✅ WfVelemenyezes komponens regisztrálva');
        } else {
            console.error('❌ WfVelemenyezes nem található!');
        }

        app.mount('#app');
    </script>
</body>
</html>
