var Gz=Object.defineProperty;var Zz=(e,t,a)=>t in e?Gz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Ft=(e,t,a)=>Zz(e,typeof t!="symbol"?t+"":t,a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(a,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),a}var n2={exports:{}},r0={},i2={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),Xz=Symbol.for("react.portal"),Qz=Symbol.for("react.fragment"),ew=Symbol.for("react.strict_mode"),tw=Symbol.for("react.profiler"),sw=Symbol.for("react.provider"),aw=Symbol.for("react.context"),rw=Symbol.for("react.forward_ref"),nw=Symbol.for("react.suspense"),iw=Symbol.for("react.memo"),lw=Symbol.for("react.lazy"),Yv=Symbol.iterator;function ow(e){return e===null||typeof e!="object"?null:(e=Yv&&e[Yv]||e["@@iterator"],typeof e=="function"?e:null)}var l2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o2=Object.assign,c2={};function _c(e,t,a){this.props=e,this.context=t,this.refs=c2,this.updater=a||l2}_c.prototype.isReactComponent={};_c.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_c.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function d2(){}d2.prototype=_c.prototype;function Gp(e,t,a){this.props=e,this.context=t,this.refs=c2,this.updater=a||l2}var Zp=Gp.prototype=new d2;Zp.constructor=Gp;o2(Zp,_c.prototype);Zp.isPureReactComponent=!0;var Xv=Array.isArray,u2=Object.prototype.hasOwnProperty,Yp={current:null},h2={key:!0,ref:!0,__self:!0,__source:!0};function m2(e,t,a){var r,n={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)u2.call(t,r)&&!h2.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(o===1)n.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:wu,type:e,key:i,ref:l,props:n,_owner:Yp.current}}function cw(e,t){return{$$typeof:wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xp(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu}function dw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var Qv=/\/+/g;function cf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dw(""+e.key):t.toString(36)}function Yh(e,t,a,r,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case wu:case Xz:l=!0}}if(l)return l=e,n=n(l),e=r===""?"."+cf(l,0):r,Xv(n)?(a="",e!=null&&(a=e.replace(Qv,"$&/")+"/"),Yh(n,t,a,"",function(d){return d})):n!=null&&(Xp(n)&&(n=cw(n,a+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(Qv,"$&/")+"/")+e)),t.push(n)),1;if(l=0,r=r===""?".":r+":",Xv(e))for(var o=0;o<e.length;o++){i=e[o];var c=r+cf(i,o);l+=Yh(i,t,a,c,n)}else if(c=ow(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=r+cf(i,o++),l+=Yh(i,t,a,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function xh(e,t,a){if(e==null)return e;var r=[],n=0;return Yh(e,r,"","",function(i){return t.call(a,i,n++)}),r}function uw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ta={current:null},Xh={transition:null},hw={ReactCurrentDispatcher:Ta,ReactCurrentBatchConfig:Xh,ReactCurrentOwner:Yp};function f2(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:xh,forEach:function(e,t,a){xh(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return xh(e,function(){t++}),t},toArray:function(e){return xh(e,function(t){return t})||[]},only:function(e){if(!Xp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jt.Component=_c;jt.Fragment=Qz;jt.Profiler=tw;jt.PureComponent=Gp;jt.StrictMode=ew;jt.Suspense=nw;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hw;jt.act=f2;jt.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=o2({},e.props),n=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Yp.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)u2.call(t,c)&&!h2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:wu,type:e.type,key:n,ref:i,props:r,_owner:l}};jt.createContext=function(e){return e={$$typeof:aw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sw,_context:e},e.Consumer=e};jt.createElement=m2;jt.createFactory=function(e){var t=m2.bind(null,e);return t.type=e,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(e){return{$$typeof:rw,render:e}};jt.isValidElement=Xp;jt.lazy=function(e){return{$$typeof:lw,_payload:{_status:-1,_result:e},_init:uw}};jt.memo=function(e,t){return{$$typeof:iw,type:e,compare:t===void 0?null:t}};jt.startTransition=function(e){var t=Xh.transition;Xh.transition={};try{e()}finally{Xh.transition=t}};jt.unstable_act=f2;jt.useCallback=function(e,t){return Ta.current.useCallback(e,t)};jt.useContext=function(e){return Ta.current.useContext(e)};jt.useDebugValue=function(){};jt.useDeferredValue=function(e){return Ta.current.useDeferredValue(e)};jt.useEffect=function(e,t){return Ta.current.useEffect(e,t)};jt.useId=function(){return Ta.current.useId()};jt.useImperativeHandle=function(e,t,a){return Ta.current.useImperativeHandle(e,t,a)};jt.useInsertionEffect=function(e,t){return Ta.current.useInsertionEffect(e,t)};jt.useLayoutEffect=function(e,t){return Ta.current.useLayoutEffect(e,t)};jt.useMemo=function(e,t){return Ta.current.useMemo(e,t)};jt.useReducer=function(e,t,a){return Ta.current.useReducer(e,t,a)};jt.useRef=function(e){return Ta.current.useRef(e)};jt.useState=function(e){return Ta.current.useState(e)};jt.useSyncExternalStore=function(e,t,a){return Ta.current.useSyncExternalStore(e,t,a)};jt.useTransition=function(){return Ta.current.useTransition()};jt.version="18.3.1";i2.exports=jt;var B=i2.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw=B,fw=Symbol.for("react.element"),gw=Symbol.for("react.fragment"),pw=Object.prototype.hasOwnProperty,xw=mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vw={key:!0,ref:!0,__self:!0,__source:!0};function g2(e,t,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)pw.call(t,r)&&!vw.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:fw,type:e,key:i,ref:l,props:n,_owner:xw.current}}r0.Fragment=gw;r0.jsx=g2;r0.jsxs=g2;n2.exports=r0;var s=n2.exports,p2={exports:{}},dr={},x2={exports:{}},v2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,le){var ye=V.length;V.push(le);e:for(;0<ye;){var be=ye-1>>>1,C=V[be];if(0<n(C,le))V[be]=le,V[ye]=C,ye=be;else break e}}function a(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var le=V[0],ye=V.pop();if(ye!==le){V[0]=ye;e:for(var be=0,C=V.length,H=C>>>1;be<H;){var W=2*(be+1)-1,Q=V[W],re=W+1,ue=V[re];if(0>n(Q,ye))re<C&&0>n(ue,Q)?(V[be]=ue,V[re]=ye,be=re):(V[be]=Q,V[W]=ye,be=W);else if(re<C&&0>n(ue,ye))V[be]=ue,V[re]=ye,be=re;else break e}}return le}function n(V,le){var ye=V.sortIndex-le.sortIndex;return ye!==0?ye:V.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],h=1,g=null,p=3,f=!1,k=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(V){for(var le=a(d);le!==null;){if(le.callback===null)r(d);else if(le.startTime<=V)r(d),le.sortIndex=le.expirationTime,t(c,le);else break;le=a(d)}}function N(V){if(_=!1,z(V),!k)if(a(c)!==null)k=!0,ee($);else{var le=a(d);le!==null&&ce(N,le.startTime-V)}}function $(V,le){k=!1,_&&(_=!1,x(D),D=-1),f=!0;var ye=p;try{for(z(le),g=a(c);g!==null&&(!(g.expirationTime>le)||V&&!y());){var be=g.callback;if(typeof be=="function"){g.callback=null,p=g.priorityLevel;var C=be(g.expirationTime<=le);le=e.unstable_now(),typeof C=="function"?g.callback=C:g===a(c)&&r(c),z(le)}else r(c);g=a(c)}if(g!==null)var H=!0;else{var W=a(d);W!==null&&ce(N,W.startTime-le),H=!1}return H}finally{g=null,p=ye,f=!1}}var q=!1,G=null,D=-1,I=5,R=-1;function y(){return!(e.unstable_now()-R<I)}function A(){if(G!==null){var V=e.unstable_now();R=V;var le=!0;try{le=G(!0,V)}finally{le?E():(q=!1,G=null)}}else q=!1}var E;if(typeof j=="function")E=function(){j(A)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,M=L.port2;L.port1.onmessage=A,E=function(){M.postMessage(null)}}else E=function(){w(A,0)};function ee(V){G=V,q||(q=!0,E())}function ce(V,le){D=w(function(){V(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){k||f||(k=!0,ee($))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return a(c)},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var le=3;break;default:le=p}var ye=p;p=le;try{return V()}finally{p=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,le){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ye=p;p=V;try{return le()}finally{p=ye}},e.unstable_scheduleCallback=function(V,le,ye){var be=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?be+ye:be):ye=be,V){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ye+C,V={id:h++,callback:le,priorityLevel:V,startTime:ye,expirationTime:C,sortIndex:-1},ye>be?(V.sortIndex=ye,t(d,V),a(c)===null&&V===a(d)&&(_?(x(D),D=-1):_=!0,ce(N,ye-be))):(V.sortIndex=C,t(c,V),k||f||(k=!0,ee($))),V},e.unstable_shouldYield=y,e.unstable_wrapCallback=function(V){var le=p;return function(){var ye=p;p=le;try{return V.apply(this,arguments)}finally{p=ye}}}})(v2);x2.exports=v2;var yw=x2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw=B,or=yw;function Le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y2=new Set,qd={};function ro(e,t){hc(e,t),hc(e+"Capture",t)}function hc(e,t){for(qd[e]=t,e=0;e<t.length;e++)y2.add(t[e])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wg=Object.prototype.hasOwnProperty,kw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ey={},ty={};function jw(e){return wg.call(ty,e)?!0:wg.call(ey,e)?!1:kw.test(e)?ty[e]=!0:(ey[e]=!0,!1)}function zw(e,t,a,r){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ww(e,t,a,r){if(t===null||typeof t>"u"||zw(e,t,a,r))return!0;if(r)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pa(e,t,a,r,n,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var ca={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ca[e]=new Pa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ca[t]=new Pa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ca[e]=new Pa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ca[e]=new Pa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ca[e]=new Pa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ca[e]=new Pa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ca[e]=new Pa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ca[e]=new Pa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ca[e]=new Pa(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qp=/[\-:]([a-z])/g;function ex(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qp,ex);ca[t]=new Pa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qp,ex);ca[t]=new Pa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qp,ex);ca[t]=new Pa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ca[e]=new Pa(e,1,!1,e.toLowerCase(),null,!1,!1)});ca.xlinkHref=new Pa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ca[e]=new Pa(e,1,!1,e.toLowerCase(),null,!0,!0)});function tx(e,t,a,r){var n=ca.hasOwnProperty(t)?ca[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ww(t,a,n,r)&&(a=null),r||n===null?jw(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):n.mustUseProperty?e[n.propertyName]=a===null?n.type===3?!1:"":a:(t=n.attributeName,r=n.attributeNamespace,a===null?e.removeAttribute(t):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,r?e.setAttributeNS(r,t,a):e.setAttribute(t,a))))}var ai=bw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vh=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),sx=Symbol.for("react.strict_mode"),Ng=Symbol.for("react.profiler"),b2=Symbol.for("react.provider"),k2=Symbol.for("react.context"),ax=Symbol.for("react.forward_ref"),_g=Symbol.for("react.suspense"),Sg=Symbol.for("react.suspense_list"),rx=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),j2=Symbol.for("react.offscreen"),sy=Symbol.iterator;function cd(e){return e===null||typeof e!="object"?null:(e=sy&&e[sy]||e["@@iterator"],typeof e=="function"?e:null)}var hs=Object.assign,df;function jd(e){if(df===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);df=t&&t[1]||""}return`
`+df+e}var uf=!1;function hf(e,t){if(!e||uf)return"";uf=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=r.stack.split(`
`),l=n.length-1,o=i.length-1;1<=l&&0<=o&&n[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==i[o]){var c=`
`+n[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{uf=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?jd(e):""}function Nw(e){switch(e.tag){case 5:return jd(e.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return e=hf(e.type,!1),e;case 11:return e=hf(e.type.render,!1),e;case 1:return e=hf(e.type,!0),e;default:return""}}function Ag(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bo:return"Fragment";case Ro:return"Portal";case Ng:return"Profiler";case sx:return"StrictMode";case _g:return"Suspense";case Sg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k2:return(e.displayName||"Context")+".Consumer";case b2:return(e._context.displayName||"Context")+".Provider";case ax:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rx:return t=e.displayName||null,t!==null?t:Ag(e.type)||"Memo";case Si:t=e._payload,e=e._init;try{return Ag(e(t))}catch{}}return null}function _w(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ag(t);case 8:return t===sx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sw(e){var t=z2(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yh(e){e._valueTracker||(e._valueTracker=Sw(e))}function w2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=z2(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function bm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Eg(e,t){var a=t.checked;return hs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function ay(e,t){var a=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;a=Yi(t.value!=null?t.value:a),e._wrapperState={initialChecked:r,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function N2(e,t){t=t.checked,t!=null&&tx(e,"checked",t,!1)}function Cg(e,t){N2(e,t);var a=Yi(t.value),r=t.type;if(a!=null)r==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lg(e,t.type,a):t.hasOwnProperty("defaultValue")&&Lg(e,t.type,Yi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ry(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Lg(e,t,a){(t!=="number"||bm(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var zd=Array.isArray;function Xo(e,t,a,r){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Yi(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Tg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Le(91));return hs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ny(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(Le(92));if(zd(a)){if(1<a.length)throw Error(Le(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:Yi(a)}}function _2(e,t){var a=Yi(t.value),r=Yi(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),r!=null&&(e.defaultValue=""+r)}function iy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function S2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?S2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bh,A2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,a,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bh=bh||document.createElement("div"),bh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wd(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Aw=["Webkit","ms","Moz","O"];Object.keys(Cd).forEach(function(e){Aw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cd[t]=Cd[e]})});function E2(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Cd.hasOwnProperty(e)&&Cd[e]?(""+t).trim():t+"px"}function C2(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var r=a.indexOf("--")===0,n=E2(a,t[a],r);a==="float"&&(a="cssFloat"),r?e.setProperty(a,n):e[a]=n}}var Ew=hs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ig(e,t){if(t){if(Ew[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Le(62))}}function Dg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=null;function nx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fg=null,Qo=null,ec=null;function ly(e){if(e=Su(e)){if(typeof Fg!="function")throw Error(Le(280));var t=e.stateNode;t&&(t=c0(t),Fg(e.stateNode,e.type,t))}}function L2(e){Qo?ec?ec.push(e):ec=[e]:Qo=e}function T2(){if(Qo){var e=Qo,t=ec;if(ec=Qo=null,ly(e),t)for(e=0;e<t.length;e++)ly(t[e])}}function P2(e,t){return e(t)}function I2(){}var mf=!1;function D2(e,t,a){if(mf)return e(t,a);mf=!0;try{return P2(e,t,a)}finally{mf=!1,(Qo!==null||ec!==null)&&(I2(),T2())}}function Jd(e,t){var a=e.stateNode;if(a===null)return null;var r=c0(a);if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(Le(231,t,typeof a));return a}var Og=!1;if(Zn)try{var dd={};Object.defineProperty(dd,"passive",{get:function(){Og=!0}}),window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch{Og=!1}function Cw(e,t,a,r,n,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(a,d)}catch(h){this.onError(h)}}var Ld=!1,km=null,jm=!1,Rg=null,Lw={onError:function(e){Ld=!0,km=e}};function Tw(e,t,a,r,n,i,l,o,c){Ld=!1,km=null,Cw.apply(Lw,arguments)}function Pw(e,t,a,r,n,i,l,o,c){if(Tw.apply(this,arguments),Ld){if(Ld){var d=km;Ld=!1,km=null}else throw Error(Le(198));jm||(jm=!0,Rg=d)}}function no(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function M2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oy(e){if(no(e)!==e)throw Error(Le(188))}function Iw(e){var t=e.alternate;if(!t){if(t=no(e),t===null)throw Error(Le(188));return t!==e?null:e}for(var a=e,r=t;;){var n=a.return;if(n===null)break;var i=n.alternate;if(i===null){if(r=n.return,r!==null){a=r;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return oy(n),e;if(i===r)return oy(n),t;i=i.sibling}throw Error(Le(188))}if(a.return!==r.return)a=n,r=i;else{for(var l=!1,o=n.child;o;){if(o===a){l=!0,a=n,r=i;break}if(o===r){l=!0,r=n,a=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===a){l=!0,a=i,r=n;break}if(o===r){l=!0,r=i,a=n;break}o=o.sibling}if(!l)throw Error(Le(189))}}if(a.alternate!==r)throw Error(Le(190))}if(a.tag!==3)throw Error(Le(188));return a.stateNode.current===a?e:t}function F2(e){return e=Iw(e),e!==null?O2(e):null}function O2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=O2(e);if(t!==null)return t;e=e.sibling}return null}var R2=or.unstable_scheduleCallback,cy=or.unstable_cancelCallback,Dw=or.unstable_shouldYield,Mw=or.unstable_requestPaint,Ss=or.unstable_now,Fw=or.unstable_getCurrentPriorityLevel,ix=or.unstable_ImmediatePriority,B2=or.unstable_UserBlockingPriority,zm=or.unstable_NormalPriority,Ow=or.unstable_LowPriority,U2=or.unstable_IdlePriority,n0=null,gn=null;function Rw(e){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(n0,e,void 0,(e.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:$w,Bw=Math.log,Uw=Math.LN2;function $w(e){return e>>>=0,e===0?32:31-(Bw(e)/Uw|0)|0}var kh=64,jh=4194304;function wd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wm(e,t){var a=e.pendingLanes;if(a===0)return 0;var r=0,n=e.suspendedLanes,i=e.pingedLanes,l=a&268435455;if(l!==0){var o=l&~n;o!==0?r=wd(o):(i&=l,i!==0&&(r=wd(i)))}else l=a&~n,l!==0?r=wd(l):i!==0&&(r=wd(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(r&4&&(r|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)a=31-Wr(t),n=1<<a,r|=e[a],t&=~n;return r}function Hw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vw(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Wr(i),o=1<<l,c=n[l];c===-1?(!(o&a)||o&r)&&(n[l]=Hw(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Bg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $2(){var e=kh;return kh<<=1,!(kh&4194240)&&(kh=64),e}function ff(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Nu(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wr(t),e[t]=a}function Kw(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<a;){var n=31-Wr(a),i=1<<n;t[n]=0,r[n]=-1,e[n]=-1,a&=~i}}function lx(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-Wr(a),n=1<<r;n&t|e[r]&t&&(e[r]|=t),a&=~n}}var Rt=0;function H2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var V2,ox,K2,q2,W2,Ug=!1,zh=[],Ri=null,Bi=null,Ui=null,Gd=new Map,Zd=new Map,Ci=[],qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dy(e,t){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Gd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(t.pointerId)}}function ud(e,t,a,r,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Su(t),t!==null&&ox(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Ww(e,t,a,r,n){switch(t){case"focusin":return Ri=ud(Ri,e,t,a,r,n),!0;case"dragenter":return Bi=ud(Bi,e,t,a,r,n),!0;case"mouseover":return Ui=ud(Ui,e,t,a,r,n),!0;case"pointerover":var i=n.pointerId;return Gd.set(i,ud(Gd.get(i)||null,e,t,a,r,n)),!0;case"gotpointercapture":return i=n.pointerId,Zd.set(i,ud(Zd.get(i)||null,e,t,a,r,n)),!0}return!1}function J2(e){var t=Bl(e.target);if(t!==null){var a=no(t);if(a!==null){if(t=a.tag,t===13){if(t=M2(a),t!==null){e.blockedOn=t,W2(e.priority,function(){K2(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=$g(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Mg=r,a.target.dispatchEvent(r),Mg=null}else return t=Su(a),t!==null&&ox(t),e.blockedOn=a,!1;t.shift()}return!0}function uy(e,t,a){Qh(e)&&a.delete(t)}function Jw(){Ug=!1,Ri!==null&&Qh(Ri)&&(Ri=null),Bi!==null&&Qh(Bi)&&(Bi=null),Ui!==null&&Qh(Ui)&&(Ui=null),Gd.forEach(uy),Zd.forEach(uy)}function hd(e,t){e.blockedOn===t&&(e.blockedOn=null,Ug||(Ug=!0,or.unstable_scheduleCallback(or.unstable_NormalPriority,Jw)))}function Yd(e){function t(n){return hd(n,e)}if(0<zh.length){hd(zh[0],e);for(var a=1;a<zh.length;a++){var r=zh[a];r.blockedOn===e&&(r.blockedOn=null)}}for(Ri!==null&&hd(Ri,e),Bi!==null&&hd(Bi,e),Ui!==null&&hd(Ui,e),Gd.forEach(t),Zd.forEach(t),a=0;a<Ci.length;a++)r=Ci[a],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ci.length&&(a=Ci[0],a.blockedOn===null);)J2(a),a.blockedOn===null&&Ci.shift()}var tc=ai.ReactCurrentBatchConfig,Nm=!0;function Gw(e,t,a,r){var n=Rt,i=tc.transition;tc.transition=null;try{Rt=1,cx(e,t,a,r)}finally{Rt=n,tc.transition=i}}function Zw(e,t,a,r){var n=Rt,i=tc.transition;tc.transition=null;try{Rt=4,cx(e,t,a,r)}finally{Rt=n,tc.transition=i}}function cx(e,t,a,r){if(Nm){var n=$g(e,t,a,r);if(n===null)wf(e,t,r,_m,a),dy(e,r);else if(Ww(n,e,t,a,r))r.stopPropagation();else if(dy(e,r),t&4&&-1<qw.indexOf(e)){for(;n!==null;){var i=Su(n);if(i!==null&&V2(i),i=$g(e,t,a,r),i===null&&wf(e,t,r,_m,a),i===n)break;n=i}n!==null&&r.stopPropagation()}else wf(e,t,r,null,a)}}var _m=null;function $g(e,t,a,r){if(_m=null,e=nx(r),e=Bl(e),e!==null)if(t=no(e),t===null)e=null;else if(a=t.tag,a===13){if(e=M2(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _m=e,null}function G2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fw()){case ix:return 1;case B2:return 4;case zm:case Ow:return 16;case U2:return 536870912;default:return 16}default:return 16}}var Di=null,dx=null,em=null;function Z2(){if(em)return em;var e,t=dx,a=t.length,r,n="value"in Di?Di.value:Di.textContent,i=n.length;for(e=0;e<a&&t[e]===n[e];e++);var l=a-e;for(r=1;r<=l&&t[a-r]===n[i-r];r++);return em=n.slice(e,1<r?1-r:void 0)}function tm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wh(){return!0}function hy(){return!1}function ur(e){function t(a,r,n,i,l){this._reactName=a,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(a=e[o],this[o]=a?a(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wh:hy,this.isPropagationStopped=hy,this}return hs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wh)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wh)},persist:function(){},isPersistent:wh}),t}var Sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ux=ur(Sc),_u=hs({},Sc,{view:0,detail:0}),Yw=ur(_u),gf,pf,md,i0=hs({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==md&&(md&&e.type==="mousemove"?(gf=e.screenX-md.screenX,pf=e.screenY-md.screenY):pf=gf=0,md=e),gf)},movementY:function(e){return"movementY"in e?e.movementY:pf}}),my=ur(i0),Xw=hs({},i0,{dataTransfer:0}),Qw=ur(Xw),eN=hs({},_u,{relatedTarget:0}),xf=ur(eN),tN=hs({},Sc,{animationName:0,elapsedTime:0,pseudoElement:0}),sN=ur(tN),aN=hs({},Sc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rN=ur(aN),nN=hs({},Sc,{data:0}),fy=ur(nN),iN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oN[e])?!!t[e]:!1}function hx(){return cN}var dN=hs({},_u,{key:function(e){if(e.key){var t=iN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hx,charCode:function(e){return e.type==="keypress"?tm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uN=ur(dN),hN=hs({},i0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=ur(hN),mN=hs({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hx}),fN=ur(mN),gN=hs({},Sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),pN=ur(gN),xN=hs({},i0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=ur(xN),yN=[9,13,27,32],mx=Zn&&"CompositionEvent"in window,Td=null;Zn&&"documentMode"in document&&(Td=document.documentMode);var bN=Zn&&"TextEvent"in window&&!Td,Y2=Zn&&(!mx||Td&&8<Td&&11>=Td),py=" ",xy=!1;function X2(e,t){switch(e){case"keyup":return yN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uo=!1;function kN(e,t){switch(e){case"compositionend":return Q2(t);case"keypress":return t.which!==32?null:(xy=!0,py);case"textInput":return e=t.data,e===py&&xy?null:e;default:return null}}function jN(e,t){if(Uo)return e==="compositionend"||!mx&&X2(e,t)?(e=Z2(),em=dx=Di=null,Uo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y2&&t.locale!=="ko"?null:t.data;default:return null}}var zN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zN[e.type]:t==="textarea"}function ek(e,t,a,r){L2(r),t=Sm(t,"onChange"),0<t.length&&(a=new ux("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Pd=null,Xd=null;function wN(e){uk(e,0)}function l0(e){var t=Vo(e);if(w2(t))return e}function NN(e,t){if(e==="change")return t}var tk=!1;if(Zn){var vf;if(Zn){var yf="oninput"in document;if(!yf){var yy=document.createElement("div");yy.setAttribute("oninput","return;"),yf=typeof yy.oninput=="function"}vf=yf}else vf=!1;tk=vf&&(!document.documentMode||9<document.documentMode)}function by(){Pd&&(Pd.detachEvent("onpropertychange",sk),Xd=Pd=null)}function sk(e){if(e.propertyName==="value"&&l0(Xd)){var t=[];ek(t,Xd,e,nx(e)),D2(wN,t)}}function _N(e,t,a){e==="focusin"?(by(),Pd=t,Xd=a,Pd.attachEvent("onpropertychange",sk)):e==="focusout"&&by()}function SN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return l0(Xd)}function AN(e,t){if(e==="click")return l0(t)}function EN(e,t){if(e==="input"||e==="change")return l0(t)}function CN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gr=typeof Object.is=="function"?Object.is:CN;function Qd(e,t){if(Gr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var n=a[r];if(!wg.call(t,n)||!Gr(e[n],t[n]))return!1}return!0}function ky(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jy(e,t){var a=ky(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ky(a)}}function ak(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ak(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rk(){for(var e=window,t=bm();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=bm(e.document)}return t}function fx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LN(e){var t=rk(),a=e.focusedElem,r=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&ak(a.ownerDocument.documentElement,a)){if(r!==null&&fx(a)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=a.textContent.length,i=Math.min(r.start,n);r=r.end===void 0?i:Math.min(r.end,n),!e.extend&&i>r&&(n=r,r=i,i=n),n=jy(a,i);var l=jy(a,r);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TN=Zn&&"documentMode"in document&&11>=document.documentMode,$o=null,Hg=null,Id=null,Vg=!1;function zy(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vg||$o==null||$o!==bm(r)||(r=$o,"selectionStart"in r&&fx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Id&&Qd(Id,r)||(Id=r,r=Sm(Hg,"onSelect"),0<r.length&&(t=new ux("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=$o)))}function Nh(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ho={animationend:Nh("Animation","AnimationEnd"),animationiteration:Nh("Animation","AnimationIteration"),animationstart:Nh("Animation","AnimationStart"),transitionend:Nh("Transition","TransitionEnd")},bf={},nk={};Zn&&(nk=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function o0(e){if(bf[e])return bf[e];if(!Ho[e])return e;var t=Ho[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in nk)return bf[e]=t[a];return e}var ik=o0("animationend"),lk=o0("animationiteration"),ok=o0("animationstart"),ck=o0("transitionend"),dk=new Map,wy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(e,t){dk.set(e,t),ro(t,[e])}for(var kf=0;kf<wy.length;kf++){var jf=wy[kf],PN=jf.toLowerCase(),IN=jf[0].toUpperCase()+jf.slice(1);tl(PN,"on"+IN)}tl(ik,"onAnimationEnd");tl(lk,"onAnimationIteration");tl(ok,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(ck,"onTransitionEnd");hc("onMouseEnter",["mouseout","mouseover"]);hc("onMouseLeave",["mouseout","mouseover"]);hc("onPointerEnter",["pointerout","pointerover"]);hc("onPointerLeave",["pointerout","pointerover"]);ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function Ny(e,t,a){var r=e.type||"unknown-event";e.currentTarget=a,Pw(r,t,void 0,e),e.currentTarget=null}function uk(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],n=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&n.isPropagationStopped())break e;Ny(n,o,d),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&n.isPropagationStopped())break e;Ny(n,o,d),i=c}}}if(jm)throw e=Rg,jm=!1,Rg=null,e}function ss(e,t){var a=t[Gg];a===void 0&&(a=t[Gg]=new Set);var r=e+"__bubble";a.has(r)||(hk(t,e,2,!1),a.add(r))}function zf(e,t,a){var r=0;t&&(r|=4),hk(a,e,r,t)}var _h="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[_h]){e[_h]=!0,y2.forEach(function(a){a!=="selectionchange"&&(DN.has(a)||zf(a,!1,e),zf(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_h]||(t[_h]=!0,zf("selectionchange",!1,t))}}function hk(e,t,a,r){switch(G2(t)){case 1:var n=Gw;break;case 4:n=Zw;break;default:n=cx}a=n.bind(null,t,a,e),n=void 0,!Og||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function wf(e,t,a,r,n){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Bl(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}D2(function(){var d=i,h=nx(a),g=[];e:{var p=dk.get(e);if(p!==void 0){var f=ux,k=e;switch(e){case"keypress":if(tm(a)===0)break e;case"keydown":case"keyup":f=uN;break;case"focusin":k="focus",f=xf;break;case"focusout":k="blur",f=xf;break;case"beforeblur":case"afterblur":f=xf;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=my;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fN;break;case ik:case lk:case ok:f=sN;break;case ck:f=pN;break;case"scroll":f=Yw;break;case"wheel":f=vN;break;case"copy":case"cut":case"paste":f=rN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=gy}var _=(t&4)!==0,w=!_&&e==="scroll",x=_?p!==null?p+"Capture":null:p;_=[];for(var j=d,z;j!==null;){z=j;var N=z.stateNode;if(z.tag===5&&N!==null&&(z=N,x!==null&&(N=Jd(j,x),N!=null&&_.push(tu(j,N,z)))),w)break;j=j.return}0<_.length&&(p=new f(p,k,null,a,h),g.push({event:p,listeners:_}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&a!==Mg&&(k=a.relatedTarget||a.fromElement)&&(Bl(k)||k[Yn]))break e;if((f||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,f?(k=a.relatedTarget||a.toElement,f=d,k=k?Bl(k):null,k!==null&&(w=no(k),k!==w||k.tag!==5&&k.tag!==6)&&(k=null)):(f=null,k=d),f!==k)){if(_=my,N="onMouseLeave",x="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(_=gy,N="onPointerLeave",x="onPointerEnter",j="pointer"),w=f==null?p:Vo(f),z=k==null?p:Vo(k),p=new _(N,j+"leave",f,a,h),p.target=w,p.relatedTarget=z,N=null,Bl(h)===d&&(_=new _(x,j+"enter",k,a,h),_.target=z,_.relatedTarget=w,N=_),w=N,f&&k)t:{for(_=f,x=k,j=0,z=_;z;z=wo(z))j++;for(z=0,N=x;N;N=wo(N))z++;for(;0<j-z;)_=wo(_),j--;for(;0<z-j;)x=wo(x),z--;for(;j--;){if(_===x||x!==null&&_===x.alternate)break t;_=wo(_),x=wo(x)}_=null}else _=null;f!==null&&_y(g,p,f,_,!1),k!==null&&w!==null&&_y(g,w,k,_,!0)}}e:{if(p=d?Vo(d):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var $=NN;else if(vy(p))if(tk)$=EN;else{$=SN;var q=_N}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&($=AN);if($&&($=$(e,d))){ek(g,$,a,h);break e}q&&q(e,p,d),e==="focusout"&&(q=p._wrapperState)&&q.controlled&&p.type==="number"&&Lg(p,"number",p.value)}switch(q=d?Vo(d):window,e){case"focusin":(vy(q)||q.contentEditable==="true")&&($o=q,Hg=d,Id=null);break;case"focusout":Id=Hg=$o=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,zy(g,a,h);break;case"selectionchange":if(TN)break;case"keydown":case"keyup":zy(g,a,h)}var G;if(mx)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Uo?X2(e,a)&&(D="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(D="onCompositionStart");D&&(Y2&&a.locale!=="ko"&&(Uo||D!=="onCompositionStart"?D==="onCompositionEnd"&&Uo&&(G=Z2()):(Di=h,dx="value"in Di?Di.value:Di.textContent,Uo=!0)),q=Sm(d,D),0<q.length&&(D=new fy(D,e,null,a,h),g.push({event:D,listeners:q}),G?D.data=G:(G=Q2(a),G!==null&&(D.data=G)))),(G=bN?kN(e,a):jN(e,a))&&(d=Sm(d,"onBeforeInput"),0<d.length&&(h=new fy("onBeforeInput","beforeinput",null,a,h),g.push({event:h,listeners:d}),h.data=G))}uk(g,t)})}function tu(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Sm(e,t){for(var a=t+"Capture",r=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Jd(e,a),i!=null&&r.unshift(tu(e,i,n)),i=Jd(e,t),i!=null&&r.push(tu(e,i,n))),e=e.return}return r}function wo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _y(e,t,a,r,n){for(var i=t._reactName,l=[];a!==null&&a!==r;){var o=a,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,n?(c=Jd(a,i),c!=null&&l.unshift(tu(a,c,o))):n||(c=Jd(a,i),c!=null&&l.push(tu(a,c,o)))),a=a.return}l.length!==0&&e.push({event:t,listeners:l})}var MN=/\r\n?/g,FN=/\u0000|\uFFFD/g;function Sy(e){return(typeof e=="string"?e:""+e).replace(MN,`
`).replace(FN,"")}function Sh(e,t,a){if(t=Sy(t),Sy(e)!==t&&a)throw Error(Le(425))}function Am(){}var Kg=null,qg=null;function Wg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jg=typeof setTimeout=="function"?setTimeout:void 0,ON=typeof clearTimeout=="function"?clearTimeout:void 0,Ay=typeof Promise=="function"?Promise:void 0,RN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ay<"u"?function(e){return Ay.resolve(null).then(e).catch(BN)}:Jg;function BN(e){setTimeout(function(){throw e})}function Nf(e,t){var a=t,r=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){e.removeChild(n),Yd(t);return}r--}else a!=="$"&&a!=="$?"&&a!=="$!"||r++;a=n}while(a);Yd(t)}function $i(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ey(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var Ac=Math.random().toString(36).slice(2),hn="__reactFiber$"+Ac,su="__reactProps$"+Ac,Yn="__reactContainer$"+Ac,Gg="__reactEvents$"+Ac,UN="__reactListeners$"+Ac,$N="__reactHandles$"+Ac;function Bl(e){var t=e[hn];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Yn]||a[hn]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Ey(e);e!==null;){if(a=e[hn])return a;e=Ey(e)}return t}e=a,a=e.parentNode}return null}function Su(e){return e=e[hn]||e[Yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Le(33))}function c0(e){return e[su]||null}var Zg=[],Ko=-1;function sl(e){return{current:e}}function ns(e){0>Ko||(e.current=Zg[Ko],Zg[Ko]=null,Ko--)}function Qt(e,t){Ko++,Zg[Ko]=e.current,e.current=t}var Xi={},ka=sl(Xi),Ua=sl(!1),Zl=Xi;function mc(e,t){var a=e.type.contextTypes;if(!a)return Xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in a)n[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function $a(e){return e=e.childContextTypes,e!=null}function Em(){ns(Ua),ns(ka)}function Cy(e,t,a){if(ka.current!==Xi)throw Error(Le(168));Qt(ka,t),Qt(Ua,a)}function mk(e,t,a){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return a;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(Le(108,_w(e)||"Unknown",n));return hs({},a,r)}function Cm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xi,Zl=ka.current,Qt(ka,e),Qt(Ua,Ua.current),!0}function Ly(e,t,a){var r=e.stateNode;if(!r)throw Error(Le(169));a?(e=mk(e,t,Zl),r.__reactInternalMemoizedMergedChildContext=e,ns(Ua),ns(ka),Qt(ka,e)):ns(Ua),Qt(Ua,a)}var Un=null,d0=!1,_f=!1;function fk(e){Un===null?Un=[e]:Un.push(e)}function HN(e){d0=!0,fk(e)}function al(){if(!_f&&Un!==null){_f=!0;var e=0,t=Rt;try{var a=Un;for(Rt=1;e<a.length;e++){var r=a[e];do r=r(!0);while(r!==null)}Un=null,d0=!1}catch(n){throw Un!==null&&(Un=Un.slice(e+1)),R2(ix,al),n}finally{Rt=t,_f=!1}}return null}var qo=[],Wo=0,Lm=null,Tm=0,kr=[],jr=0,Yl=null,Kn=1,qn="";function Il(e,t){qo[Wo++]=Tm,qo[Wo++]=Lm,Lm=e,Tm=t}function gk(e,t,a){kr[jr++]=Kn,kr[jr++]=qn,kr[jr++]=Yl,Yl=e;var r=Kn;e=qn;var n=32-Wr(r)-1;r&=~(1<<n),a+=1;var i=32-Wr(t)+n;if(30<i){var l=n-n%5;i=(r&(1<<l)-1).toString(32),r>>=l,n-=l,Kn=1<<32-Wr(t)+n|a<<n|r,qn=i+e}else Kn=1<<i|a<<n|r,qn=e}function gx(e){e.return!==null&&(Il(e,1),gk(e,1,0))}function px(e){for(;e===Lm;)Lm=qo[--Wo],qo[Wo]=null,Tm=qo[--Wo],qo[Wo]=null;for(;e===Yl;)Yl=kr[--jr],kr[jr]=null,qn=kr[--jr],kr[jr]=null,Kn=kr[--jr],kr[jr]=null}var ir=null,ar=null,ls=!1,Kr=null;function pk(e,t){var a=Nr(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function Ty(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ir=e,ar=$i(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ir=e,ar=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Yl!==null?{id:Kn,overflow:qn}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Nr(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,ir=e,ar=null,!0):!1;default:return!1}}function Yg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xg(e){if(ls){var t=ar;if(t){var a=t;if(!Ty(e,t)){if(Yg(e))throw Error(Le(418));t=$i(a.nextSibling);var r=ir;t&&Ty(e,t)?pk(r,a):(e.flags=e.flags&-4097|2,ls=!1,ir=e)}}else{if(Yg(e))throw Error(Le(418));e.flags=e.flags&-4097|2,ls=!1,ir=e}}}function Py(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ir=e}function Ah(e){if(e!==ir)return!1;if(!ls)return Py(e),ls=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wg(e.type,e.memoizedProps)),t&&(t=ar)){if(Yg(e))throw xk(),Error(Le(418));for(;t;)pk(e,t),t=$i(t.nextSibling)}if(Py(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){ar=$i(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}ar=null}}else ar=ir?$i(e.stateNode.nextSibling):null;return!0}function xk(){for(var e=ar;e;)e=$i(e.nextSibling)}function fc(){ar=ir=null,ls=!1}function xx(e){Kr===null?Kr=[e]:Kr.push(e)}var VN=ai.ReactCurrentBatchConfig;function fd(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Le(309));var r=a.stateNode}if(!r)throw Error(Le(147,e));var n=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=n.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Le(284));if(!a._owner)throw Error(Le(290,e))}return e}function Eh(e,t){throw e=Object.prototype.toString.call(t),Error(Le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iy(e){var t=e._init;return t(e._payload)}function vk(e){function t(x,j){if(e){var z=x.deletions;z===null?(x.deletions=[j],x.flags|=16):z.push(j)}}function a(x,j){if(!e)return null;for(;j!==null;)t(x,j),j=j.sibling;return null}function r(x,j){for(x=new Map;j!==null;)j.key!==null?x.set(j.key,j):x.set(j.index,j),j=j.sibling;return x}function n(x,j){return x=qi(x,j),x.index=0,x.sibling=null,x}function i(x,j,z){return x.index=z,e?(z=x.alternate,z!==null?(z=z.index,z<j?(x.flags|=2,j):z):(x.flags|=2,j)):(x.flags|=1048576,j)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,j,z,N){return j===null||j.tag!==6?(j=Pf(z,x.mode,N),j.return=x,j):(j=n(j,z),j.return=x,j)}function c(x,j,z,N){var $=z.type;return $===Bo?h(x,j,z.props.children,N,z.key):j!==null&&(j.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Si&&Iy($)===j.type)?(N=n(j,z.props),N.ref=fd(x,j,z),N.return=x,N):(N=om(z.type,z.key,z.props,null,x.mode,N),N.ref=fd(x,j,z),N.return=x,N)}function d(x,j,z,N){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=If(z,x.mode,N),j.return=x,j):(j=n(j,z.children||[]),j.return=x,j)}function h(x,j,z,N,$){return j===null||j.tag!==7?(j=Wl(z,x.mode,N,$),j.return=x,j):(j=n(j,z),j.return=x,j)}function g(x,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Pf(""+j,x.mode,z),j.return=x,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case vh:return z=om(j.type,j.key,j.props,null,x.mode,z),z.ref=fd(x,null,j),z.return=x,z;case Ro:return j=If(j,x.mode,z),j.return=x,j;case Si:var N=j._init;return g(x,N(j._payload),z)}if(zd(j)||cd(j))return j=Wl(j,x.mode,z,null),j.return=x,j;Eh(x,j)}return null}function p(x,j,z,N){var $=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return $!==null?null:o(x,j,""+z,N);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case vh:return z.key===$?c(x,j,z,N):null;case Ro:return z.key===$?d(x,j,z,N):null;case Si:return $=z._init,p(x,j,$(z._payload),N)}if(zd(z)||cd(z))return $!==null?null:h(x,j,z,N,null);Eh(x,z)}return null}function f(x,j,z,N,$){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(z)||null,o(j,x,""+N,$);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case vh:return x=x.get(N.key===null?z:N.key)||null,c(j,x,N,$);case Ro:return x=x.get(N.key===null?z:N.key)||null,d(j,x,N,$);case Si:var q=N._init;return f(x,j,z,q(N._payload),$)}if(zd(N)||cd(N))return x=x.get(z)||null,h(j,x,N,$,null);Eh(j,N)}return null}function k(x,j,z,N){for(var $=null,q=null,G=j,D=j=0,I=null;G!==null&&D<z.length;D++){G.index>D?(I=G,G=null):I=G.sibling;var R=p(x,G,z[D],N);if(R===null){G===null&&(G=I);break}e&&G&&R.alternate===null&&t(x,G),j=i(R,j,D),q===null?$=R:q.sibling=R,q=R,G=I}if(D===z.length)return a(x,G),ls&&Il(x,D),$;if(G===null){for(;D<z.length;D++)G=g(x,z[D],N),G!==null&&(j=i(G,j,D),q===null?$=G:q.sibling=G,q=G);return ls&&Il(x,D),$}for(G=r(x,G);D<z.length;D++)I=f(G,x,D,z[D],N),I!==null&&(e&&I.alternate!==null&&G.delete(I.key===null?D:I.key),j=i(I,j,D),q===null?$=I:q.sibling=I,q=I);return e&&G.forEach(function(y){return t(x,y)}),ls&&Il(x,D),$}function _(x,j,z,N){var $=cd(z);if(typeof $!="function")throw Error(Le(150));if(z=$.call(z),z==null)throw Error(Le(151));for(var q=$=null,G=j,D=j=0,I=null,R=z.next();G!==null&&!R.done;D++,R=z.next()){G.index>D?(I=G,G=null):I=G.sibling;var y=p(x,G,R.value,N);if(y===null){G===null&&(G=I);break}e&&G&&y.alternate===null&&t(x,G),j=i(y,j,D),q===null?$=y:q.sibling=y,q=y,G=I}if(R.done)return a(x,G),ls&&Il(x,D),$;if(G===null){for(;!R.done;D++,R=z.next())R=g(x,R.value,N),R!==null&&(j=i(R,j,D),q===null?$=R:q.sibling=R,q=R);return ls&&Il(x,D),$}for(G=r(x,G);!R.done;D++,R=z.next())R=f(G,x,D,R.value,N),R!==null&&(e&&R.alternate!==null&&G.delete(R.key===null?D:R.key),j=i(R,j,D),q===null?$=R:q.sibling=R,q=R);return e&&G.forEach(function(A){return t(x,A)}),ls&&Il(x,D),$}function w(x,j,z,N){if(typeof z=="object"&&z!==null&&z.type===Bo&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case vh:e:{for(var $=z.key,q=j;q!==null;){if(q.key===$){if($=z.type,$===Bo){if(q.tag===7){a(x,q.sibling),j=n(q,z.props.children),j.return=x,x=j;break e}}else if(q.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Si&&Iy($)===q.type){a(x,q.sibling),j=n(q,z.props),j.ref=fd(x,q,z),j.return=x,x=j;break e}a(x,q);break}else t(x,q);q=q.sibling}z.type===Bo?(j=Wl(z.props.children,x.mode,N,z.key),j.return=x,x=j):(N=om(z.type,z.key,z.props,null,x.mode,N),N.ref=fd(x,j,z),N.return=x,x=N)}return l(x);case Ro:e:{for(q=z.key;j!==null;){if(j.key===q)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){a(x,j.sibling),j=n(j,z.children||[]),j.return=x,x=j;break e}else{a(x,j);break}else t(x,j);j=j.sibling}j=If(z,x.mode,N),j.return=x,x=j}return l(x);case Si:return q=z._init,w(x,j,q(z._payload),N)}if(zd(z))return k(x,j,z,N);if(cd(z))return _(x,j,z,N);Eh(x,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,j!==null&&j.tag===6?(a(x,j.sibling),j=n(j,z),j.return=x,x=j):(a(x,j),j=Pf(z,x.mode,N),j.return=x,x=j),l(x)):a(x,j)}return w}var gc=vk(!0),yk=vk(!1),Pm=sl(null),Im=null,Jo=null,vx=null;function yx(){vx=Jo=Im=null}function bx(e){var t=Pm.current;ns(Pm),e._currentValue=t}function Qg(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function sc(e,t){Im=e,vx=Jo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ra=!0),e.firstContext=null)}function Ar(e){var t=e._currentValue;if(vx!==e)if(e={context:e,memoizedValue:t,next:null},Jo===null){if(Im===null)throw Error(Le(308));Jo=e,Im.dependencies={lanes:0,firstContext:e}}else Jo=Jo.next=e;return t}var Ul=null;function kx(e){Ul===null?Ul=[e]:Ul.push(e)}function bk(e,t,a,r){var n=t.interleaved;return n===null?(a.next=a,kx(t)):(a.next=n.next,n.next=a),t.interleaved=a,Xn(e,r)}function Xn(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Ai=!1;function jx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hi(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,At&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Xn(e,a)}return n=r.interleaved,n===null?(t.next=t,kx(r)):(t.next=n.next,n.next=t),r.interleaved=t,Xn(e,a)}function sm(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,lx(e,a)}}function Dy(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var n=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var l={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};i===null?n=i=l:i=i.next=l,a=a.next}while(a!==null);i===null?n=i=t:i=i.next=t}else n=i=t;a={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Dm(e,t,a,r){var n=e.updateQueue;Ai=!1;var i=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(i!==null){var g=n.baseState;l=0,h=d=c=null,o=i;do{var p=o.lane,f=o.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,_=o;switch(p=t,f=a,_.tag){case 1:if(k=_.payload,typeof k=="function"){g=k.call(f,g,p);break e}g=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=_.payload,p=typeof k=="function"?k.call(f,g,p):k,p==null)break e;g=hs({},g,p);break e;case 2:Ai=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=n.effects,p===null?n.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=f,c=g):h=h.next=f,l|=p;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;p=o,o=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(h===null&&(c=g),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);Ql|=l,e.lanes=l,e.memoizedState=g}}function My(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=a,typeof n!="function")throw Error(Le(191,n));n.call(r)}}}var Au={},pn=sl(Au),au=sl(Au),ru=sl(Au);function $l(e){if(e===Au)throw Error(Le(174));return e}function zx(e,t){switch(Qt(ru,t),Qt(au,e),Qt(pn,Au),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pg(t,e)}ns(pn),Qt(pn,t)}function pc(){ns(pn),ns(au),ns(ru)}function jk(e){$l(ru.current);var t=$l(pn.current),a=Pg(t,e.type);t!==a&&(Qt(au,e),Qt(pn,a))}function wx(e){au.current===e&&(ns(pn),ns(au))}var ds=sl(0);function Mm(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sf=[];function Nx(){for(var e=0;e<Sf.length;e++)Sf[e]._workInProgressVersionPrimary=null;Sf.length=0}var am=ai.ReactCurrentDispatcher,Af=ai.ReactCurrentBatchConfig,Xl=0,us=null,Hs=null,Gs=null,Fm=!1,Dd=!1,nu=0,KN=0;function ma(){throw Error(Le(321))}function _x(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Gr(e[a],t[a]))return!1;return!0}function Sx(e,t,a,r,n,i){if(Xl=i,us=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,am.current=e===null||e.memoizedState===null?GN:ZN,e=a(r,n),Dd){i=0;do{if(Dd=!1,nu=0,25<=i)throw Error(Le(301));i+=1,Gs=Hs=null,t.updateQueue=null,am.current=YN,e=a(r,n)}while(Dd)}if(am.current=Om,t=Hs!==null&&Hs.next!==null,Xl=0,Gs=Hs=us=null,Fm=!1,t)throw Error(Le(300));return e}function Ax(){var e=nu!==0;return nu=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gs===null?us.memoizedState=Gs=e:Gs=Gs.next=e,Gs}function Er(){if(Hs===null){var e=us.alternate;e=e!==null?e.memoizedState:null}else e=Hs.next;var t=Gs===null?us.memoizedState:Gs.next;if(t!==null)Gs=t,Hs=e;else{if(e===null)throw Error(Le(310));Hs=e,e={memoizedState:Hs.memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},Gs===null?us.memoizedState=Gs=e:Gs=Gs.next=e}return Gs}function iu(e,t){return typeof t=="function"?t(e):t}function Ef(e){var t=Er(),a=t.queue;if(a===null)throw Error(Le(311));a.lastRenderedReducer=e;var r=Hs,n=r.baseQueue,i=a.pending;if(i!==null){if(n!==null){var l=n.next;n.next=i.next,i.next=l}r.baseQueue=n=i,a.pending=null}if(n!==null){i=n.next,r=r.baseState;var o=l=null,c=null,d=i;do{var h=d.lane;if((Xl&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=g,l=r):c=c.next=g,us.lanes|=h,Ql|=h}d=d.next}while(d!==null&&d!==i);c===null?l=r:c.next=o,Gr(r,t.memoizedState)||(Ra=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,a.lastRenderedState=r}if(e=a.interleaved,e!==null){n=e;do i=n.lane,us.lanes|=i,Ql|=i,n=n.next;while(n!==e)}else n===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function Cf(e){var t=Er(),a=t.queue;if(a===null)throw Error(Le(311));a.lastRenderedReducer=e;var r=a.dispatch,n=a.pending,i=t.memoizedState;if(n!==null){a.pending=null;var l=n=n.next;do i=e(i,l.action),l=l.next;while(l!==n);Gr(i,t.memoizedState)||(Ra=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,r]}function zk(){}function wk(e,t){var a=us,r=Er(),n=t(),i=!Gr(r.memoizedState,n);if(i&&(r.memoizedState=n,Ra=!0),r=r.queue,Ex(Sk.bind(null,a,r,e),[e]),r.getSnapshot!==t||i||Gs!==null&&Gs.memoizedState.tag&1){if(a.flags|=2048,lu(9,_k.bind(null,a,r,n,t),void 0,null),Xs===null)throw Error(Le(349));Xl&30||Nk(a,t,n)}return n}function Nk(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=us.updateQueue,t===null?(t={lastEffect:null,stores:null},us.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function _k(e,t,a,r){t.value=a,t.getSnapshot=r,Ak(t)&&Ek(e)}function Sk(e,t,a){return a(function(){Ak(t)&&Ek(e)})}function Ak(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Gr(e,a)}catch{return!0}}function Ek(e){var t=Xn(e,1);t!==null&&Jr(t,e,1,-1)}function Fy(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:e},t.queue=e,e=e.dispatch=JN.bind(null,us,e),[t.memoizedState,e]}function lu(e,t,a,r){return e={tag:e,create:t,destroy:a,deps:r,next:null},t=us.updateQueue,t===null?(t={lastEffect:null,stores:null},us.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e)),e}function Ck(){return Er().memoizedState}function rm(e,t,a,r){var n=dn();us.flags|=e,n.memoizedState=lu(1|t,a,void 0,r===void 0?null:r)}function u0(e,t,a,r){var n=Er();r=r===void 0?null:r;var i=void 0;if(Hs!==null){var l=Hs.memoizedState;if(i=l.destroy,r!==null&&_x(r,l.deps)){n.memoizedState=lu(t,a,i,r);return}}us.flags|=e,n.memoizedState=lu(1|t,a,i,r)}function Oy(e,t){return rm(8390656,8,e,t)}function Ex(e,t){return u0(2048,8,e,t)}function Lk(e,t){return u0(4,2,e,t)}function Tk(e,t){return u0(4,4,e,t)}function Pk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ik(e,t,a){return a=a!=null?a.concat([e]):null,u0(4,4,Pk.bind(null,t,e),a)}function Cx(){}function Dk(e,t){var a=Er();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&_x(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function Mk(e,t){var a=Er();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&_x(t,r[1])?r[0]:(e=e(),a.memoizedState=[e,t],e)}function Fk(e,t,a){return Xl&21?(Gr(a,t)||(a=$2(),us.lanes|=a,Ql|=a,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ra=!0),e.memoizedState=a)}function qN(e,t){var a=Rt;Rt=a!==0&&4>a?a:4,e(!0);var r=Af.transition;Af.transition={};try{e(!1),t()}finally{Rt=a,Af.transition=r}}function Ok(){return Er().memoizedState}function WN(e,t,a){var r=Ki(e);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},Rk(e))Bk(t,a);else if(a=bk(e,t,a,r),a!==null){var n=Aa();Jr(a,e,r,n),Uk(a,t,r)}}function JN(e,t,a){var r=Ki(e),n={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rk(e))Bk(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,a);if(n.hasEagerState=!0,n.eagerState=o,Gr(o,l)){var c=t.interleaved;c===null?(n.next=n,kx(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}a=bk(e,t,n,r),a!==null&&(n=Aa(),Jr(a,e,r,n),Uk(a,t,r))}}function Rk(e){var t=e.alternate;return e===us||t!==null&&t===us}function Bk(e,t){Dd=Fm=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Uk(e,t,a){if(a&4194240){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,lx(e,a)}}var Om={readContext:Ar,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},GN={readContext:Ar,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Ar,useEffect:Oy,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,rm(4194308,4,Pk.bind(null,t,e),a)},useLayoutEffect:function(e,t){return rm(4194308,4,e,t)},useInsertionEffect:function(e,t){return rm(4,2,e,t)},useMemo:function(e,t){var a=dn();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var r=dn();return t=a!==void 0?a(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WN.bind(null,us,e),[r.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:Fy,useDebugValue:Cx,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=Fy(!1),t=e[0];return e=qN.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var r=us,n=dn();if(ls){if(a===void 0)throw Error(Le(407));a=a()}else{if(a=t(),Xs===null)throw Error(Le(349));Xl&30||Nk(r,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,Oy(Sk.bind(null,r,i,e),[e]),r.flags|=2048,lu(9,_k.bind(null,r,i,a,t),void 0,null),a},useId:function(){var e=dn(),t=Xs.identifierPrefix;if(ls){var a=qn,r=Kn;a=(r&~(1<<32-Wr(r)-1)).toString(32)+a,t=":"+t+"R"+a,a=nu++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=KN++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ZN={readContext:Ar,useCallback:Dk,useContext:Ar,useEffect:Ex,useImperativeHandle:Ik,useInsertionEffect:Lk,useLayoutEffect:Tk,useMemo:Mk,useReducer:Ef,useRef:Ck,useState:function(){return Ef(iu)},useDebugValue:Cx,useDeferredValue:function(e){var t=Er();return Fk(t,Hs.memoizedState,e)},useTransition:function(){var e=Ef(iu)[0],t=Er().memoizedState;return[e,t]},useMutableSource:zk,useSyncExternalStore:wk,useId:Ok,unstable_isNewReconciler:!1},YN={readContext:Ar,useCallback:Dk,useContext:Ar,useEffect:Ex,useImperativeHandle:Ik,useInsertionEffect:Lk,useLayoutEffect:Tk,useMemo:Mk,useReducer:Cf,useRef:Ck,useState:function(){return Cf(iu)},useDebugValue:Cx,useDeferredValue:function(e){var t=Er();return Hs===null?t.memoizedState=e:Fk(t,Hs.memoizedState,e)},useTransition:function(){var e=Cf(iu)[0],t=Er().memoizedState;return[e,t]},useMutableSource:zk,useSyncExternalStore:wk,useId:Ok,unstable_isNewReconciler:!1};function $r(e,t){if(e&&e.defaultProps){t=hs({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function ep(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:hs({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var h0={isMounted:function(e){return(e=e._reactInternals)?no(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var r=Aa(),n=Ki(e),i=Wn(r,n);i.payload=t,a!=null&&(i.callback=a),t=Hi(e,i,n),t!==null&&(Jr(t,e,n,r),sm(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=Aa(),n=Ki(e),i=Wn(r,n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=Hi(e,i,n),t!==null&&(Jr(t,e,n,r),sm(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Aa(),r=Ki(e),n=Wn(a,r);n.tag=2,t!=null&&(n.callback=t),t=Hi(e,n,r),t!==null&&(Jr(t,e,r,a),sm(t,e,r))}};function Ry(e,t,a,r,n,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Qd(a,r)||!Qd(n,i):!0}function $k(e,t,a){var r=!1,n=Xi,i=t.contextType;return typeof i=="object"&&i!==null?i=Ar(i):(n=$a(t)?Zl:ka.current,r=t.contextTypes,i=(r=r!=null)?mc(e,n):Xi),t=new t(a,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=h0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function By(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&h0.enqueueReplaceState(t,t.state,null)}function tp(e,t,a,r){var n=e.stateNode;n.props=a,n.state=e.memoizedState,n.refs={},jx(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Ar(i):(i=$a(t)?Zl:ka.current,n.context=mc(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ep(e,t,i,a),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&h0.enqueueReplaceState(n,n.state,null),Dm(e,a,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function xc(e,t){try{var a="",r=t;do a+=Nw(r),r=r.return;while(r);var n=a}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function Lf(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function sp(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var XN=typeof WeakMap=="function"?WeakMap:Map;function Hk(e,t,a){a=Wn(-1,a),a.tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){Bm||(Bm=!0,hp=r),sp(e,t)},a}function Vk(e,t,a){a=Wn(-1,a),a.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;a.payload=function(){return r(n)},a.callback=function(){sp(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(a.callback=function(){sp(e,t),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),a}function Uy(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new XN;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(a)||(n.add(a),e=h_.bind(null,e,t,a),t.then(e,e))}function $y(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hy(e,t,a,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Wn(-1,1),t.tag=2,Hi(a,t,1))),a.lanes|=1),e)}var QN=ai.ReactCurrentOwner,Ra=!1;function _a(e,t,a,r){t.child=e===null?yk(t,null,a,r):gc(t,e.child,a,r)}function Vy(e,t,a,r,n){a=a.render;var i=t.ref;return sc(t,n),r=Sx(e,t,a,r,i,n),a=Ax(),e!==null&&!Ra?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Qn(e,t,n)):(ls&&a&&gx(t),t.flags|=1,_a(e,t,r,n),t.child)}function Ky(e,t,a,r,n){if(e===null){var i=a.type;return typeof i=="function"&&!Ox(i)&&i.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=i,Kk(e,t,i,r,n)):(e=om(a.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var l=i.memoizedProps;if(a=a.compare,a=a!==null?a:Qd,a(l,r)&&e.ref===t.ref)return Qn(e,t,n)}return t.flags|=1,e=qi(i,r),e.ref=t.ref,e.return=t,t.child=e}function Kk(e,t,a,r,n){if(e!==null){var i=e.memoizedProps;if(Qd(i,r)&&e.ref===t.ref)if(Ra=!1,t.pendingProps=r=i,(e.lanes&n)!==0)e.flags&131072&&(Ra=!0);else return t.lanes=e.lanes,Qn(e,t,n)}return ap(e,t,a,r,n)}function qk(e,t,a){var r=t.pendingProps,n=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Zo,sr),sr|=a;else{if(!(a&1073741824))return e=i!==null?i.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qt(Zo,sr),sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:a,Qt(Zo,sr),sr|=r}else i!==null?(r=i.baseLanes|a,t.memoizedState=null):r=a,Qt(Zo,sr),sr|=r;return _a(e,t,n,a),t.child}function Wk(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function ap(e,t,a,r,n){var i=$a(a)?Zl:ka.current;return i=mc(t,i),sc(t,n),a=Sx(e,t,a,r,i,n),r=Ax(),e!==null&&!Ra?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Qn(e,t,n)):(ls&&r&&gx(t),t.flags|=1,_a(e,t,a,n),t.child)}function qy(e,t,a,r,n){if($a(a)){var i=!0;Cm(t)}else i=!1;if(sc(t,n),t.stateNode===null)nm(e,t),$k(t,a,r),tp(t,a,r,n),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=a.contextType;typeof d=="object"&&d!==null?d=Ar(d):(d=$a(a)?Zl:ka.current,d=mc(t,d));var h=a.getDerivedStateFromProps,g=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==d)&&By(t,l,r,d),Ai=!1;var p=t.memoizedState;l.state=p,Dm(t,r,l,n),c=t.memoizedState,o!==r||p!==c||Ua.current||Ai?(typeof h=="function"&&(ep(t,a,h,r),c=t.memoizedState),(o=Ai||Ry(t,a,o,r,p,c,d))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=d,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,kk(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:$r(t.type,o),l.props=d,g=t.pendingProps,p=l.context,c=a.contextType,typeof c=="object"&&c!==null?c=Ar(c):(c=$a(a)?Zl:ka.current,c=mc(t,c));var f=a.getDerivedStateFromProps;(h=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==g||p!==c)&&By(t,l,r,c),Ai=!1,p=t.memoizedState,l.state=p,Dm(t,r,l,n);var k=t.memoizedState;o!==g||p!==k||Ua.current||Ai?(typeof f=="function"&&(ep(t,a,f,r),k=t.memoizedState),(d=Ai||Ry(t,a,d,r,p,k,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,k,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,k,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),l.props=r,l.state=k,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return rp(e,t,a,r,i,n)}function rp(e,t,a,r,n,i){Wk(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return n&&Ly(t,a,!1),Qn(e,t,i);r=t.stateNode,QN.current=t;var o=l&&typeof a.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=gc(t,e.child,null,i),t.child=gc(t,null,o,i)):_a(e,t,o,i),t.memoizedState=r.state,n&&Ly(t,a,!0),t.child}function Jk(e){var t=e.stateNode;t.pendingContext?Cy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cy(e,t.context,!1),zx(e,t.containerInfo)}function Wy(e,t,a,r,n){return fc(),xx(n),t.flags|=256,_a(e,t,a,r),t.child}var np={dehydrated:null,treeContext:null,retryLane:0};function ip(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gk(e,t,a){var r=t.pendingProps,n=ds.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Qt(ds,n&1),e===null)return Xg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=g0(l,r,0,null),e=Wl(e,r,a,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ip(a),t.memoizedState=np,e):Lx(t,l));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return e_(e,t,l,r,o,n,a);if(i){i=r.fallback,l=t.mode,n=e.child,o=n.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=qi(n,c),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=qi(o,i):(i=Wl(i,l,a,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?ip(a):{baseLanes:l.baseLanes|a,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~a,t.memoizedState=np,r}return i=e.child,e=i.sibling,r=qi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=a),r.return=t,r.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=r,t.memoizedState=null,r}function Lx(e,t){return t=g0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ch(e,t,a,r){return r!==null&&xx(r),gc(t,e.child,null,a),e=Lx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function e_(e,t,a,r,n,i,l){if(a)return t.flags&256?(t.flags&=-257,r=Lf(Error(Le(422))),Ch(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,n=t.mode,r=g0({mode:"visible",children:r.children},n,0,null),i=Wl(i,n,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&gc(t,e.child,null,l),t.child.memoizedState=ip(l),t.memoizedState=np,i);if(!(t.mode&1))return Ch(e,t,l,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Le(419)),r=Lf(i,r,void 0),Ch(e,t,l,r)}if(o=(l&e.childLanes)!==0,Ra||o){if(r=Xs,r!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|l)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Xn(e,n),Jr(r,e,n,-1))}return Fx(),r=Lf(Error(Le(421))),Ch(e,t,l,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=m_.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,ar=$i(n.nextSibling),ir=t,ls=!0,Kr=null,e!==null&&(kr[jr++]=Kn,kr[jr++]=qn,kr[jr++]=Yl,Kn=e.id,qn=e.overflow,Yl=t),t=Lx(t,r.children),t.flags|=4096,t)}function Jy(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qg(e.return,t,a)}function Tf(e,t,a,r,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=a,i.tailMode=n)}function Zk(e,t,a){var r=t.pendingProps,n=r.revealOrder,i=r.tail;if(_a(e,t,r.children,a),r=ds.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jy(e,a,t);else if(e.tag===19)Jy(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Qt(ds,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&Mm(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Tf(t,!1,n,a,i);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Mm(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Tf(t,!0,a,null,i);break;case"together":Tf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ql|=t.lanes,!(a&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Le(153));if(t.child!==null){for(e=t.child,a=qi(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=qi(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function t_(e,t,a){switch(t.tag){case 3:Jk(t),fc();break;case 5:jk(t);break;case 1:$a(t.type)&&Cm(t);break;case 4:zx(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Qt(Pm,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Qt(ds,ds.current&1),t.flags|=128,null):a&t.child.childLanes?Gk(e,t,a):(Qt(ds,ds.current&1),e=Qn(e,t,a),e!==null?e.sibling:null);Qt(ds,ds.current&1);break;case 19:if(r=(a&t.childLanes)!==0,e.flags&128){if(r)return Zk(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Qt(ds,ds.current),r)break;return null;case 22:case 23:return t.lanes=0,qk(e,t,a)}return Qn(e,t,a)}var Yk,lp,Xk,Qk;Yk=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};lp=function(){};Xk=function(e,t,a,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,$l(pn.current);var i=null;switch(a){case"input":n=Eg(e,n),r=Eg(e,r),i=[];break;case"select":n=hs({},n,{value:void 0}),r=hs({},r,{value:void 0}),i=[];break;case"textarea":n=Tg(e,n),r=Tg(e,r),i=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Am)}Ig(a,r);var l;a=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(l in o)o.hasOwnProperty(l)&&(a||(a={}),a[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qd.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(a||(a={}),a[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(a||(a={}),a[l]=c[l])}else a||(i||(i=[]),i.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ss("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}a&&(i=i||[]).push("style",a);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Qk=function(e,t,a,r){a!==r&&(t.flags|=4)};function gd(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fa(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function s_(e,t,a){var r=t.pendingProps;switch(px(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fa(t),null;case 1:return $a(t.type)&&Em(),fa(t),null;case 3:return r=t.stateNode,pc(),ns(Ua),ns(ka),Nx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ah(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kr!==null&&(gp(Kr),Kr=null))),lp(e,t),fa(t),null;case 5:wx(t);var n=$l(ru.current);if(a=t.type,e!==null&&t.stateNode!=null)Xk(e,t,a,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Le(166));return fa(t),null}if(e=$l(pn.current),Ah(t)){r=t.stateNode,a=t.type;var i=t.memoizedProps;switch(r[hn]=t,r[su]=i,e=(t.mode&1)!==0,a){case"dialog":ss("cancel",r),ss("close",r);break;case"iframe":case"object":case"embed":ss("load",r);break;case"video":case"audio":for(n=0;n<Nd.length;n++)ss(Nd[n],r);break;case"source":ss("error",r);break;case"img":case"image":case"link":ss("error",r),ss("load",r);break;case"details":ss("toggle",r);break;case"input":ay(r,i),ss("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ss("invalid",r);break;case"textarea":ny(r,i),ss("invalid",r)}Ig(a,i),n=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Sh(r.textContent,o,e),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Sh(r.textContent,o,e),n=["children",""+o]):qd.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ss("scroll",r)}switch(a){case"input":yh(r),ry(r,i,!0);break;case"textarea":yh(r),iy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Am)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=S2(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(a,{is:r.is}):(e=l.createElement(a),a==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,a),e[hn]=t,e[su]=r,Yk(e,t,!1,!1),t.stateNode=e;e:{switch(l=Dg(a,r),a){case"dialog":ss("cancel",e),ss("close",e),n=r;break;case"iframe":case"object":case"embed":ss("load",e),n=r;break;case"video":case"audio":for(n=0;n<Nd.length;n++)ss(Nd[n],e);n=r;break;case"source":ss("error",e),n=r;break;case"img":case"image":case"link":ss("error",e),ss("load",e),n=r;break;case"details":ss("toggle",e),n=r;break;case"input":ay(e,r),n=Eg(e,r),ss("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=hs({},r,{value:void 0}),ss("invalid",e);break;case"textarea":ny(e,r),n=Tg(e,r),ss("invalid",e);break;default:n=r}Ig(a,n),o=n;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?C2(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&A2(e,c)):i==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Wd(e,c):typeof c=="number"&&Wd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ss("scroll",e):c!=null&&tx(e,i,c,l))}switch(a){case"input":yh(e),ry(e,r,!1);break;case"textarea":yh(e),iy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Xo(e,!!r.multiple,i,!1):r.defaultValue!=null&&Xo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Am)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fa(t),null;case 6:if(e&&t.stateNode!=null)Qk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Le(166));if(a=$l(ru.current),$l(pn.current),Ah(t)){if(r=t.stateNode,a=t.memoizedProps,r[hn]=t,(i=r.nodeValue!==a)&&(e=ir,e!==null))switch(e.tag){case 3:Sh(r.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sh(r.nodeValue,a,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(a.nodeType===9?a:a.ownerDocument).createTextNode(r),r[hn]=t,t.stateNode=r}return fa(t),null;case 13:if(ns(ds),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ls&&ar!==null&&t.mode&1&&!(t.flags&128))xk(),fc(),t.flags|=98560,i=!1;else if(i=Ah(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Le(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Le(317));i[hn]=t}else fc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fa(t),i=!1}else Kr!==null&&(gp(Kr),Kr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ds.current&1?Ks===0&&(Ks=3):Fx())),t.updateQueue!==null&&(t.flags|=4),fa(t),null);case 4:return pc(),lp(e,t),e===null&&eu(t.stateNode.containerInfo),fa(t),null;case 10:return bx(t.type._context),fa(t),null;case 17:return $a(t.type)&&Em(),fa(t),null;case 19:if(ns(ds),i=t.memoizedState,i===null)return fa(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)gd(i,!1);else{if(Ks!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Mm(e),l!==null){for(t.flags|=128,gd(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=a,a=t.child;a!==null;)i=a,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Qt(ds,ds.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ss()>vc&&(t.flags|=128,r=!0,gd(i,!1),t.lanes=4194304)}else{if(!r)if(e=Mm(l),e!==null){if(t.flags|=128,r=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),gd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ls)return fa(t),null}else 2*Ss()-i.renderingStartTime>vc&&a!==1073741824&&(t.flags|=128,r=!0,gd(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(a=i.last,a!==null?a.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ss(),t.sibling=null,a=ds.current,Qt(ds,r?a&1|2:a&1),t):(fa(t),null);case 22:case 23:return Mx(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?sr&1073741824&&(fa(t),t.subtreeFlags&6&&(t.flags|=8192)):fa(t),null;case 24:return null;case 25:return null}throw Error(Le(156,t.tag))}function a_(e,t){switch(px(t),t.tag){case 1:return $a(t.type)&&Em(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pc(),ns(Ua),ns(ka),Nx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wx(t),null;case 13:if(ns(ds),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Le(340));fc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ns(ds),null;case 4:return pc(),null;case 10:return bx(t.type._context),null;case 22:case 23:return Mx(),null;case 24:return null;default:return null}}var Lh=!1,ya=!1,r_=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Go(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(r){vs(e,t,r)}else a.current=null}function op(e,t,a){try{a()}catch(r){vs(e,t,r)}}var Gy=!1;function n_(e,t){if(Kg=Nm,e=rk(),fx(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var l=0,o=-1,c=-1,d=0,h=0,g=e,p=null;t:for(;;){for(var f;g!==a||n!==0&&g.nodeType!==3||(o=l+n),g!==i||r!==0&&g.nodeType!==3||(c=l+r),g.nodeType===3&&(l+=g.nodeValue.length),(f=g.firstChild)!==null;)p=g,g=f;for(;;){if(g===e)break t;if(p===a&&++d===n&&(o=l),p===i&&++h===r&&(c=l),(f=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=f}a=o===-1||c===-1?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(qg={focusedElem:e,selectionRange:a},Nm=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var _=k.memoizedProps,w=k.memoizedState,x=t.stateNode,j=x.getSnapshotBeforeUpdate(t.elementType===t.type?_:$r(t.type,_),w);x.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(N){vs(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return k=Gy,Gy=!1,k}function Md(e,t,a){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&op(t,a,i)}n=n.next}while(n!==r)}}function m0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var r=a.create;a.destroy=r()}a=a.next}while(a!==t)}}function cp(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function ej(e){var t=e.alternate;t!==null&&(e.alternate=null,ej(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hn],delete t[su],delete t[Gg],delete t[UN],delete t[$N])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tj(e){return e.tag===5||e.tag===3||e.tag===4}function Zy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dp(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Am));else if(r!==4&&(e=e.child,e!==null))for(dp(e,t,a),e=e.sibling;e!==null;)dp(e,t,a),e=e.sibling}function up(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(up(e,t,a),e=e.sibling;e!==null;)up(e,t,a),e=e.sibling}var na=null,Hr=!1;function ki(e,t,a){for(a=a.child;a!==null;)sj(e,t,a),a=a.sibling}function sj(e,t,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(n0,a)}catch{}switch(a.tag){case 5:ya||Go(a,t);case 6:var r=na,n=Hr;na=null,ki(e,t,a),na=r,Hr=n,na!==null&&(Hr?(e=na,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):na.removeChild(a.stateNode));break;case 18:na!==null&&(Hr?(e=na,a=a.stateNode,e.nodeType===8?Nf(e.parentNode,a):e.nodeType===1&&Nf(e,a),Yd(e)):Nf(na,a.stateNode));break;case 4:r=na,n=Hr,na=a.stateNode.containerInfo,Hr=!0,ki(e,t,a),na=r,Hr=n;break;case 0:case 11:case 14:case 15:if(!ya&&(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var i=n,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&op(a,t,l),n=n.next}while(n!==r)}ki(e,t,a);break;case 1:if(!ya&&(Go(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(o){vs(a,t,o)}ki(e,t,a);break;case 21:ki(e,t,a);break;case 22:a.mode&1?(ya=(r=ya)||a.memoizedState!==null,ki(e,t,a),ya=r):ki(e,t,a);break;default:ki(e,t,a)}}function Yy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new r_),t.forEach(function(r){var n=f_.bind(null,e,r);a.has(r)||(a.add(r),r.then(n,n))})}}function Or(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var n=a[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:na=o.stateNode,Hr=!1;break e;case 3:na=o.stateNode.containerInfo,Hr=!0;break e;case 4:na=o.stateNode.containerInfo,Hr=!0;break e}o=o.return}if(na===null)throw Error(Le(160));sj(i,l,n),na=null,Hr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){vs(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aj(t,e),t=t.sibling}function aj(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(t,e),ln(e),r&4){try{Md(3,e,e.return),m0(3,e)}catch(_){vs(e,e.return,_)}try{Md(5,e,e.return)}catch(_){vs(e,e.return,_)}}break;case 1:Or(t,e),ln(e),r&512&&a!==null&&Go(a,a.return);break;case 5:if(Or(t,e),ln(e),r&512&&a!==null&&Go(a,a.return),e.flags&32){var n=e.stateNode;try{Wd(n,"")}catch(_){vs(e,e.return,_)}}if(r&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,l=a!==null?a.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&N2(n,i),Dg(o,l);var d=Dg(o,i);for(l=0;l<c.length;l+=2){var h=c[l],g=c[l+1];h==="style"?C2(n,g):h==="dangerouslySetInnerHTML"?A2(n,g):h==="children"?Wd(n,g):tx(n,h,g,d)}switch(o){case"input":Cg(n,i);break;case"textarea":_2(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Xo(n,!!i.multiple,f,!1):p!==!!i.multiple&&(i.defaultValue!=null?Xo(n,!!i.multiple,i.defaultValue,!0):Xo(n,!!i.multiple,i.multiple?[]:"",!1))}n[su]=i}catch(_){vs(e,e.return,_)}}break;case 6:if(Or(t,e),ln(e),r&4){if(e.stateNode===null)throw Error(Le(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(_){vs(e,e.return,_)}}break;case 3:if(Or(t,e),ln(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Yd(t.containerInfo)}catch(_){vs(e,e.return,_)}break;case 4:Or(t,e),ln(e);break;case 13:Or(t,e),ln(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Ix=Ss())),r&4&&Yy(e);break;case 22:if(h=a!==null&&a.memoizedState!==null,e.mode&1?(ya=(d=ya)||h,Or(t,e),ya=d):Or(t,e),ln(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Oe=e,h=e.child;h!==null;){for(g=Oe=h;Oe!==null;){switch(p=Oe,f=p.child,p.tag){case 0:case 11:case 14:case 15:Md(4,p,p.return);break;case 1:Go(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){r=p,a=p.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(_){vs(r,a,_)}}break;case 5:Go(p,p.return);break;case 22:if(p.memoizedState!==null){Qy(g);continue}}f!==null?(f.return=p,Oe=f):Qy(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{n=g.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=g.stateNode,c=g.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=E2("display",l))}catch(_){vs(e,e.return,_)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(_){vs(e,e.return,_)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Or(t,e),ln(e),r&4&&Yy(e);break;case 21:break;default:Or(t,e),ln(e)}}function ln(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(tj(a)){var r=a;break e}a=a.return}throw Error(Le(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Wd(n,""),r.flags&=-33);var i=Zy(e);up(e,i,n);break;case 3:case 4:var l=r.stateNode.containerInfo,o=Zy(e);dp(e,o,l);break;default:throw Error(Le(161))}}catch(c){vs(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function i_(e,t,a){Oe=e,rj(e)}function rj(e,t,a){for(var r=(e.mode&1)!==0;Oe!==null;){var n=Oe,i=n.child;if(n.tag===22&&r){var l=n.memoizedState!==null||Lh;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||ya;o=Lh;var d=ya;if(Lh=l,(ya=c)&&!d)for(Oe=n;Oe!==null;)l=Oe,c=l.child,l.tag===22&&l.memoizedState!==null?eb(n):c!==null?(c.return=l,Oe=c):eb(n);for(;i!==null;)Oe=i,rj(i),i=i.sibling;Oe=n,Lh=o,ya=d}Xy(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Oe=i):Xy(e)}}function Xy(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ya||m0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ya)if(a===null)r.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:$r(t.type,a.memoizedProps);r.componentDidUpdate(n,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&My(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}My(t,l,a)}break;case 5:var o=t.stateNode;if(a===null&&t.flags&4){a=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&Yd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}ya||t.flags&512&&cp(t)}catch(p){vs(t,t.return,p)}}if(t===e){Oe=null;break}if(a=t.sibling,a!==null){a.return=t.return,Oe=a;break}Oe=t.return}}function Qy(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Oe=a;break}Oe=t.return}}function eb(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{m0(4,t)}catch(c){vs(t,a,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){vs(t,n,c)}}var i=t.return;try{cp(t)}catch(c){vs(t,i,c)}break;case 5:var l=t.return;try{cp(t)}catch(c){vs(t,l,c)}}}catch(c){vs(t,t.return,c)}if(t===e){Oe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Oe=o;break}Oe=t.return}}var l_=Math.ceil,Rm=ai.ReactCurrentDispatcher,Tx=ai.ReactCurrentOwner,_r=ai.ReactCurrentBatchConfig,At=0,Xs=null,Is=null,la=0,sr=0,Zo=sl(0),Ks=0,ou=null,Ql=0,f0=0,Px=0,Fd=null,Fa=null,Ix=0,vc=1/0,Rn=null,Bm=!1,hp=null,Vi=null,Th=!1,Mi=null,Um=0,Od=0,mp=null,im=-1,lm=0;function Aa(){return At&6?Ss():im!==-1?im:im=Ss()}function Ki(e){return e.mode&1?At&2&&la!==0?la&-la:VN.transition!==null?(lm===0&&(lm=$2()),lm):(e=Rt,e!==0||(e=window.event,e=e===void 0?16:G2(e.type)),e):1}function Jr(e,t,a,r){if(50<Od)throw Od=0,mp=null,Error(Le(185));Nu(e,a,r),(!(At&2)||e!==Xs)&&(e===Xs&&(!(At&2)&&(f0|=a),Ks===4&&Li(e,la)),Ha(e,r),a===1&&At===0&&!(t.mode&1)&&(vc=Ss()+500,d0&&al()))}function Ha(e,t){var a=e.callbackNode;Vw(e,t);var r=wm(e,e===Xs?la:0);if(r===0)a!==null&&cy(a),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(a!=null&&cy(a),t===1)e.tag===0?HN(tb.bind(null,e)):fk(tb.bind(null,e)),RN(function(){!(At&6)&&al()}),a=null;else{switch(H2(r)){case 1:a=ix;break;case 4:a=B2;break;case 16:a=zm;break;case 536870912:a=U2;break;default:a=zm}a=hj(a,nj.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function nj(e,t){if(im=-1,lm=0,At&6)throw Error(Le(327));var a=e.callbackNode;if(ac()&&e.callbackNode!==a)return null;var r=wm(e,e===Xs?la:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$m(e,r);else{t=r;var n=At;At|=2;var i=lj();(Xs!==e||la!==t)&&(Rn=null,vc=Ss()+500,ql(e,t));do try{d_();break}catch(o){ij(e,o)}while(!0);yx(),Rm.current=i,At=n,Is!==null?t=0:(Xs=null,la=0,t=Ks)}if(t!==0){if(t===2&&(n=Bg(e),n!==0&&(r=n,t=fp(e,n))),t===1)throw a=ou,ql(e,0),Li(e,r),Ha(e,Ss()),a;if(t===6)Li(e,r);else{if(n=e.current.alternate,!(r&30)&&!o_(n)&&(t=$m(e,r),t===2&&(i=Bg(e),i!==0&&(r=i,t=fp(e,i))),t===1))throw a=ou,ql(e,0),Li(e,r),Ha(e,Ss()),a;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(Le(345));case 2:Dl(e,Fa,Rn);break;case 3:if(Li(e,r),(r&130023424)===r&&(t=Ix+500-Ss(),10<t)){if(wm(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){Aa(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Jg(Dl.bind(null,e,Fa,Rn),t);break}Dl(e,Fa,Rn);break;case 4:if(Li(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var l=31-Wr(r);i=1<<l,l=t[l],l>n&&(n=l),r&=~i}if(r=n,r=Ss()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*l_(r/1960))-r,10<r){e.timeoutHandle=Jg(Dl.bind(null,e,Fa,Rn),r);break}Dl(e,Fa,Rn);break;case 5:Dl(e,Fa,Rn);break;default:throw Error(Le(329))}}}return Ha(e,Ss()),e.callbackNode===a?nj.bind(null,e):null}function fp(e,t){var a=Fd;return e.current.memoizedState.isDehydrated&&(ql(e,t).flags|=256),e=$m(e,t),e!==2&&(t=Fa,Fa=a,t!==null&&gp(t)),e}function gp(e){Fa===null?Fa=e:Fa.push.apply(Fa,e)}function o_(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var r=0;r<a.length;r++){var n=a[r],i=n.getSnapshot;n=n.value;try{if(!Gr(i(),n))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Li(e,t){for(t&=~Px,t&=~f0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-Wr(t),r=1<<a;e[a]=-1,t&=~r}}function tb(e){if(At&6)throw Error(Le(327));ac();var t=wm(e,0);if(!(t&1))return Ha(e,Ss()),null;var a=$m(e,t);if(e.tag!==0&&a===2){var r=Bg(e);r!==0&&(t=r,a=fp(e,r))}if(a===1)throw a=ou,ql(e,0),Li(e,t),Ha(e,Ss()),a;if(a===6)throw Error(Le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dl(e,Fa,Rn),Ha(e,Ss()),null}function Dx(e,t){var a=At;At|=1;try{return e(t)}finally{At=a,At===0&&(vc=Ss()+500,d0&&al())}}function eo(e){Mi!==null&&Mi.tag===0&&!(At&6)&&ac();var t=At;At|=1;var a=_r.transition,r=Rt;try{if(_r.transition=null,Rt=1,e)return e()}finally{Rt=r,_r.transition=a,At=t,!(At&6)&&al()}}function Mx(){sr=Zo.current,ns(Zo)}function ql(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ON(a)),Is!==null)for(a=Is.return;a!==null;){var r=a;switch(px(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Em();break;case 3:pc(),ns(Ua),ns(ka),Nx();break;case 5:wx(r);break;case 4:pc();break;case 13:ns(ds);break;case 19:ns(ds);break;case 10:bx(r.type._context);break;case 22:case 23:Mx()}a=a.return}if(Xs=e,Is=e=qi(e.current,null),la=sr=t,Ks=0,ou=null,Px=f0=Ql=0,Fa=Fd=null,Ul!==null){for(t=0;t<Ul.length;t++)if(a=Ul[t],r=a.interleaved,r!==null){a.interleaved=null;var n=r.next,i=a.pending;if(i!==null){var l=i.next;i.next=n,r.next=l}a.pending=r}Ul=null}return e}function ij(e,t){do{var a=Is;try{if(yx(),am.current=Om,Fm){for(var r=us.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Fm=!1}if(Xl=0,Gs=Hs=us=null,Dd=!1,nu=0,Tx.current=null,a===null||a.return===null){Ks=1,ou=t,Is=null;break}e:{var i=e,l=a.return,o=a,c=t;if(t=la,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=$y(l);if(f!==null){f.flags&=-257,Hy(f,l,o,i,t),f.mode&1&&Uy(i,d,t),t=f,c=d;var k=t.updateQueue;if(k===null){var _=new Set;_.add(c),t.updateQueue=_}else k.add(c);break e}else{if(!(t&1)){Uy(i,d,t),Fx();break e}c=Error(Le(426))}}else if(ls&&o.mode&1){var w=$y(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Hy(w,l,o,i,t),xx(xc(c,o));break e}}i=c=xc(c,o),Ks!==4&&(Ks=2),Fd===null?Fd=[i]:Fd.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Hk(i,c,t);Dy(i,x);break e;case 1:o=c;var j=i.type,z=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Vi===null||!Vi.has(z)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Vk(i,o,t);Dy(i,N);break e}}i=i.return}while(i!==null)}cj(a)}catch($){t=$,Is===a&&a!==null&&(Is=a=a.return);continue}break}while(!0)}function lj(){var e=Rm.current;return Rm.current=Om,e===null?Om:e}function Fx(){(Ks===0||Ks===3||Ks===2)&&(Ks=4),Xs===null||!(Ql&268435455)&&!(f0&268435455)||Li(Xs,la)}function $m(e,t){var a=At;At|=2;var r=lj();(Xs!==e||la!==t)&&(Rn=null,ql(e,t));do try{c_();break}catch(n){ij(e,n)}while(!0);if(yx(),At=a,Rm.current=r,Is!==null)throw Error(Le(261));return Xs=null,la=0,Ks}function c_(){for(;Is!==null;)oj(Is)}function d_(){for(;Is!==null&&!Dw();)oj(Is)}function oj(e){var t=uj(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?cj(e):Is=t,Tx.current=null}function cj(e){var t=e;do{var a=t.alternate;if(e=t.return,t.flags&32768){if(a=a_(a,t),a!==null){a.flags&=32767,Is=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ks=6,Is=null;return}}else if(a=s_(a,t,sr),a!==null){Is=a;return}if(t=t.sibling,t!==null){Is=t;return}Is=t=e}while(t!==null);Ks===0&&(Ks=5)}function Dl(e,t,a){var r=Rt,n=_r.transition;try{_r.transition=null,Rt=1,u_(e,t,a,r)}finally{_r.transition=n,Rt=r}return null}function u_(e,t,a,r){do ac();while(Mi!==null);if(At&6)throw Error(Le(327));a=e.finishedWork;var n=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(Le(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(Kw(e,i),e===Xs&&(Is=Xs=null,la=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Th||(Th=!0,hj(zm,function(){return ac(),null})),i=(a.flags&15990)!==0,a.subtreeFlags&15990||i){i=_r.transition,_r.transition=null;var l=Rt;Rt=1;var o=At;At|=4,Tx.current=null,n_(e,a),aj(a,e),LN(qg),Nm=!!Kg,qg=Kg=null,e.current=a,i_(a),Mw(),At=o,Rt=l,_r.transition=i}else e.current=a;if(Th&&(Th=!1,Mi=e,Um=n),i=e.pendingLanes,i===0&&(Vi=null),Rw(a.stateNode),Ha(e,Ss()),t!==null)for(r=e.onRecoverableError,a=0;a<t.length;a++)n=t[a],r(n.value,{componentStack:n.stack,digest:n.digest});if(Bm)throw Bm=!1,e=hp,hp=null,e;return Um&1&&e.tag!==0&&ac(),i=e.pendingLanes,i&1?e===mp?Od++:(Od=0,mp=e):Od=0,al(),null}function ac(){if(Mi!==null){var e=H2(Um),t=_r.transition,a=Rt;try{if(_r.transition=null,Rt=16>e?16:e,Mi===null)var r=!1;else{if(e=Mi,Mi=null,Um=0,At&6)throw Error(Le(331));var n=At;for(At|=4,Oe=e.current;Oe!==null;){var i=Oe,l=i.child;if(Oe.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Oe=d;Oe!==null;){var h=Oe;switch(h.tag){case 0:case 11:case 15:Md(8,h,i)}var g=h.child;if(g!==null)g.return=h,Oe=g;else for(;Oe!==null;){h=Oe;var p=h.sibling,f=h.return;if(ej(h),h===d){Oe=null;break}if(p!==null){p.return=f,Oe=p;break}Oe=f}}}var k=i.alternate;if(k!==null){var _=k.child;if(_!==null){k.child=null;do{var w=_.sibling;_.sibling=null,_=w}while(_!==null)}}Oe=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Oe=l;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Md(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Oe=x;break e}Oe=i.return}}var j=e.current;for(Oe=j;Oe!==null;){l=Oe;var z=l.child;if(l.subtreeFlags&2064&&z!==null)z.return=l,Oe=z;else e:for(l=j;Oe!==null;){if(o=Oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:m0(9,o)}}catch($){vs(o,o.return,$)}if(o===l){Oe=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Oe=N;break e}Oe=o.return}}if(At=n,al(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(n0,e)}catch{}r=!0}return r}finally{Rt=a,_r.transition=t}}return!1}function sb(e,t,a){t=xc(a,t),t=Hk(e,t,1),e=Hi(e,t,1),t=Aa(),e!==null&&(Nu(e,1,t),Ha(e,t))}function vs(e,t,a){if(e.tag===3)sb(e,e,a);else for(;t!==null;){if(t.tag===3){sb(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vi===null||!Vi.has(r))){e=xc(a,e),e=Vk(t,e,1),t=Hi(t,e,1),e=Aa(),t!==null&&(Nu(t,1,e),Ha(t,e));break}}t=t.return}}function h_(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),t=Aa(),e.pingedLanes|=e.suspendedLanes&a,Xs===e&&(la&a)===a&&(Ks===4||Ks===3&&(la&130023424)===la&&500>Ss()-Ix?ql(e,0):Px|=a),Ha(e,t)}function dj(e,t){t===0&&(e.mode&1?(t=jh,jh<<=1,!(jh&130023424)&&(jh=4194304)):t=1);var a=Aa();e=Xn(e,t),e!==null&&(Nu(e,t,a),Ha(e,a))}function m_(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),dj(e,a)}function f_(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(t),dj(e,a)}var uj;uj=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ua.current)Ra=!0;else{if(!(e.lanes&a)&&!(t.flags&128))return Ra=!1,t_(e,t,a);Ra=!!(e.flags&131072)}else Ra=!1,ls&&t.flags&1048576&&gk(t,Tm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nm(e,t),e=t.pendingProps;var n=mc(t,ka.current);sc(t,a),n=Sx(null,t,r,e,n,a);var i=Ax();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$a(r)?(i=!0,Cm(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,jx(t),n.updater=h0,t.stateNode=n,n._reactInternals=t,tp(t,r,e,a),t=rp(null,t,r,!0,i,a)):(t.tag=0,ls&&i&&gx(t),_a(null,t,n,a),t=t.child),t;case 16:r=t.elementType;e:{switch(nm(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=p_(r),e=$r(r,e),n){case 0:t=ap(null,t,r,e,a);break e;case 1:t=qy(null,t,r,e,a);break e;case 11:t=Vy(null,t,r,e,a);break e;case 14:t=Ky(null,t,r,$r(r.type,e),a);break e}throw Error(Le(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:$r(r,n),ap(e,t,r,n,a);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:$r(r,n),qy(e,t,r,n,a);case 3:e:{if(Jk(t),e===null)throw Error(Le(387));r=t.pendingProps,i=t.memoizedState,n=i.element,kk(e,t),Dm(t,r,null,a);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=xc(Error(Le(423)),t),t=Wy(e,t,r,a,n);break e}else if(r!==n){n=xc(Error(Le(424)),t),t=Wy(e,t,r,a,n);break e}else for(ar=$i(t.stateNode.containerInfo.firstChild),ir=t,ls=!0,Kr=null,a=yk(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fc(),r===n){t=Qn(e,t,a);break e}_a(e,t,r,a)}t=t.child}return t;case 5:return jk(t),e===null&&Xg(t),r=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,l=n.children,Wg(r,n)?l=null:i!==null&&Wg(r,i)&&(t.flags|=32),Wk(e,t),_a(e,t,l,a),t.child;case 6:return e===null&&Xg(t),null;case 13:return Gk(e,t,a);case 4:return zx(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gc(t,null,r,a):_a(e,t,r,a),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:$r(r,n),Vy(e,t,r,n,a);case 7:return _a(e,t,t.pendingProps,a),t.child;case 8:return _a(e,t,t.pendingProps.children,a),t.child;case 12:return _a(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Qt(Pm,r._currentValue),r._currentValue=l,i!==null)if(Gr(i.value,l)){if(i.children===n.children&&!Ua.current){t=Qn(e,t,a);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Wn(-1,a&-a),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=a,c=i.alternate,c!==null&&(c.lanes|=a),Qg(i.return,a,t),o.lanes|=a;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Le(341));l.lanes|=a,o=l.alternate,o!==null&&(o.lanes|=a),Qg(l,a,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}_a(e,t,n.children,a),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,sc(t,a),n=Ar(n),r=r(n),t.flags|=1,_a(e,t,r,a),t.child;case 14:return r=t.type,n=$r(r,t.pendingProps),n=$r(r.type,n),Ky(e,t,r,n,a);case 15:return Kk(e,t,t.type,t.pendingProps,a);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:$r(r,n),nm(e,t),t.tag=1,$a(r)?(e=!0,Cm(t)):e=!1,sc(t,a),$k(t,r,n),tp(t,r,n,a),rp(null,t,r,!0,e,a);case 19:return Zk(e,t,a);case 22:return qk(e,t,a)}throw Error(Le(156,t.tag))};function hj(e,t){return R2(e,t)}function g_(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(e,t,a,r){return new g_(e,t,a,r)}function Ox(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p_(e){if(typeof e=="function")return Ox(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ax)return 11;if(e===rx)return 14}return 2}function qi(e,t){var a=e.alternate;return a===null?(a=Nr(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function om(e,t,a,r,n,i){var l=2;if(r=e,typeof e=="function")Ox(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Bo:return Wl(a.children,n,i,t);case sx:l=8,n|=8;break;case Ng:return e=Nr(12,a,t,n|2),e.elementType=Ng,e.lanes=i,e;case _g:return e=Nr(13,a,t,n),e.elementType=_g,e.lanes=i,e;case Sg:return e=Nr(19,a,t,n),e.elementType=Sg,e.lanes=i,e;case j2:return g0(a,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b2:l=10;break e;case k2:l=9;break e;case ax:l=11;break e;case rx:l=14;break e;case Si:l=16,r=null;break e}throw Error(Le(130,e==null?e:typeof e,""))}return t=Nr(l,a,t,n),t.elementType=e,t.type=r,t.lanes=i,t}function Wl(e,t,a,r){return e=Nr(7,e,r,t),e.lanes=a,e}function g0(e,t,a,r){return e=Nr(22,e,r,t),e.elementType=j2,e.lanes=a,e.stateNode={isHidden:!1},e}function Pf(e,t,a){return e=Nr(6,e,null,t),e.lanes=a,e}function If(e,t,a){return t=Nr(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function x_(e,t,a,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ff(0),this.expirationTimes=ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Rx(e,t,a,r,n,i,l,o,c){return e=new x_(e,t,a,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Nr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},jx(i),e}function v_(e,t,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:r==null?null:""+r,children:e,containerInfo:t,implementation:a}}function mj(e){if(!e)return Xi;e=e._reactInternals;e:{if(no(e)!==e||e.tag!==1)throw Error(Le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Le(171))}if(e.tag===1){var a=e.type;if($a(a))return mk(e,a,t)}return t}function fj(e,t,a,r,n,i,l,o,c){return e=Rx(a,r,!0,e,n,i,l,o,c),e.context=mj(null),a=e.current,r=Aa(),n=Ki(a),i=Wn(r,n),i.callback=t??null,Hi(a,i,n),e.current.lanes=n,Nu(e,n,r),Ha(e,r),e}function p0(e,t,a,r){var n=t.current,i=Aa(),l=Ki(n);return a=mj(a),t.context===null?t.context=a:t.pendingContext=a,t=Wn(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hi(n,t,l),e!==null&&(Jr(e,n,l,i),sm(e,n,l)),l}function Hm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ab(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Bx(e,t){ab(e,t),(e=e.alternate)&&ab(e,t)}function y_(){return null}var gj=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ux(e){this._internalRoot=e}x0.prototype.render=Ux.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Le(409));p0(e,t,null,null)};x0.prototype.unmount=Ux.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;eo(function(){p0(null,e,null,null)}),t[Yn]=null}};function x0(e){this._internalRoot=e}x0.prototype.unstable_scheduleHydration=function(e){if(e){var t=q2();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ci.length&&t!==0&&t<Ci[a].priority;a++);Ci.splice(a,0,e),a===0&&J2(e)}};function $x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rb(){}function b_(e,t,a,r,n){if(n){if(typeof r=="function"){var i=r;r=function(){var d=Hm(l);i.call(d)}}var l=fj(t,r,e,0,null,!1,!1,"",rb);return e._reactRootContainer=l,e[Yn]=l.current,eu(e.nodeType===8?e.parentNode:e),eo(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var d=Hm(c);o.call(d)}}var c=Rx(e,0,!1,null,null,!1,!1,"",rb);return e._reactRootContainer=c,e[Yn]=c.current,eu(e.nodeType===8?e.parentNode:e),eo(function(){p0(t,c,a,r)}),c}function y0(e,t,a,r,n){var i=a._reactRootContainer;if(i){var l=i;if(typeof n=="function"){var o=n;n=function(){var c=Hm(l);o.call(c)}}p0(t,l,e,n)}else l=b_(a,t,e,n,r);return Hm(l)}V2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=wd(t.pendingLanes);a!==0&&(lx(t,a|1),Ha(t,Ss()),!(At&6)&&(vc=Ss()+500,al()))}break;case 13:eo(function(){var r=Xn(e,1);if(r!==null){var n=Aa();Jr(r,e,1,n)}}),Bx(e,1)}};ox=function(e){if(e.tag===13){var t=Xn(e,134217728);if(t!==null){var a=Aa();Jr(t,e,134217728,a)}Bx(e,134217728)}};K2=function(e){if(e.tag===13){var t=Ki(e),a=Xn(e,t);if(a!==null){var r=Aa();Jr(a,e,t,r)}Bx(e,t)}};q2=function(){return Rt};W2=function(e,t){var a=Rt;try{return Rt=e,t()}finally{Rt=a}};Fg=function(e,t,a){switch(t){case"input":if(Cg(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var n=c0(r);if(!n)throw Error(Le(90));w2(r),Cg(r,n)}}}break;case"textarea":_2(e,a);break;case"select":t=a.value,t!=null&&Xo(e,!!a.multiple,t,!1)}};P2=Dx;I2=eo;var k_={usingClientEntryPoint:!1,Events:[Su,Vo,c0,L2,T2,Dx]},pd={findFiberByHostInstance:Bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j_={bundleType:pd.bundleType,version:pd.version,rendererPackageName:pd.rendererPackageName,rendererConfig:pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F2(e),e===null?null:e.stateNode},findFiberByHostInstance:pd.findFiberByHostInstance||y_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{n0=Ph.inject(j_),gn=Ph}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_;dr.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$x(t))throw Error(Le(200));return v_(e,t,null,a)};dr.createRoot=function(e,t){if(!$x(e))throw Error(Le(299));var a=!1,r="",n=gj;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Rx(e,1,!1,null,null,a,!1,r,n),e[Yn]=t.current,eu(e.nodeType===8?e.parentNode:e),new Ux(t)};dr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Le(188)):(e=Object.keys(e).join(","),Error(Le(268,e)));return e=F2(t),e=e===null?null:e.stateNode,e};dr.flushSync=function(e){return eo(e)};dr.hydrate=function(e,t,a){if(!v0(t))throw Error(Le(200));return y0(null,e,t,!0,a)};dr.hydrateRoot=function(e,t,a){if(!$x(e))throw Error(Le(405));var r=a!=null&&a.hydratedSources||null,n=!1,i="",l=gj;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onRecoverableError!==void 0&&(l=a.onRecoverableError)),t=fj(t,null,e,1,a??null,n,!1,i,l),e[Yn]=t.current,eu(e),r)for(e=0;e<r.length;e++)a=r[e],n=a._getVersion,n=n(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new x0(t)};dr.render=function(e,t,a){if(!v0(t))throw Error(Le(200));return y0(null,e,t,!1,a)};dr.unmountComponentAtNode=function(e){if(!v0(e))throw Error(Le(40));return e._reactRootContainer?(eo(function(){y0(null,null,e,!1,function(){e._reactRootContainer=null,e[Yn]=null})}),!0):!1};dr.unstable_batchedUpdates=Dx;dr.unstable_renderSubtreeIntoContainer=function(e,t,a,r){if(!v0(a))throw Error(Le(200));if(e==null||e._reactInternals===void 0)throw Error(Le(38));return y0(e,t,a,!1,r)};dr.version="18.3.1-next-f1338f8080-20240426";function pj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pj)}catch(e){console.error(e)}}pj(),p2.exports=dr;var z_=p2.exports,xj,nb=z_;xj=nb.createRoot,nb.hydrateRoot;function se({children:e,className:t="",onClick:a,hover:r=!1}){const n="bg-white rounded-lg shadow-md p-6",i=r?"hover:shadow-xl hover:scale-[1.02] transition-all cursor-pointer":"",l=a?"cursor-pointer":"";return s.jsx("div",{className:`${n} ${i} ${l} ${t}`,onClick:a,children:e})}function Qi({columns:e,data:t,onRowClick:a}){return s.jsx("div",{className:"overflow-x-auto",role:"region","aria-label":"Adattábla",children:s.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[s.jsx("thead",{className:"bg-neutral-100",children:s.jsx("tr",{children:e.map(r=>s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-neutral-700 uppercase tracking-wider",children:r.label},r.key))})}),s.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:e.length,className:"px-6 py-8 text-center text-neutral-600",children:"Nincs megjeleníthető adat"})}):t.map((r,n)=>s.jsx("tr",{onClick:()=>a==null?void 0:a(r),className:a?"hover:bg-neutral-50 cursor-pointer focus-within:bg-neutral-50":"",tabIndex:a?0:void 0,onKeyPress:i=>{a&&(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),a(r))},children:e.map(i=>s.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${i.className||"text-neutral-900"}`,children:i.render?i.render(r[i.key],r):String(r[i.key]??"-")},i.key))},n))})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(e,t)=>{const a=B.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},h)=>B.createElement("svg",{ref:h,...w_,width:n,height:n,stroke:r,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${N_(e)}`,o].join(" "),...d},[...t.map(([g,p])=>B.createElement(g,p)),...Array.isArray(c)?c:[c]]));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Ie("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=Ie("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=Ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Ie("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Ie("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Ie("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"1vg67v"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Ie("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=Ie("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Ie("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Ie("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=Ie("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Ie("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Ie("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=Ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=Ie("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Ie("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Ie("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=Ie("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=Ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=Ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=Ie("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Ie("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=Ie("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=Ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function q_({title:e,onBack:t}){return s.jsx("header",{className:"bg-primary-600 text-white shadow-lg",role:"banner","aria-label":"Oldal fejléc",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yc,{className:"h-8 w-8","aria-hidden":"true",focusable:"false"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"VAHAP"}),s.jsx("p",{className:"text-sm text-primary-100",children:"Vasúti és Hajózási Integrált Hatósági Rendszer"})]})]}),t&&s.jsxs("button",{onClick:t,className:"px-4 py-2 bg-white text-primary-700 rounded-md hover:bg-primary-50 transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-primary-600 flex items-center gap-2","aria-label":"Főoldal",children:[s.jsx(Eu,{className:"h-5 w-5","aria-hidden":"true"}),"Főoldal"]})]}),e!=="Szerepkör választás"&&e!=="Főoldal"&&s.jsx("div",{className:"mt-4 border-t border-primary-500 pt-3",children:s.jsx("h2",{className:"text-xl font-semibold",children:e})})]})})}function Jx({aktualisNezet:e,onNezetValtas:t}){return s.jsxs("div",{className:"inline-flex rounded-md border border-neutral-300 bg-white shadow-sm",children:[s.jsx("button",{onClick:()=>t("lista"),className:`p-2 rounded-l-md transition-colors ${e==="lista"?"bg-primary-600 text-white":"text-neutral-600 hover:bg-neutral-100"}`,"aria-label":"Lista nézet",title:"Lista nézet",children:s.jsx(I_,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>t("csempe"),className:`p-2 rounded-r-md transition-colors border-l border-neutral-300 ${e==="csempe"?"bg-primary-600 text-white":"text-neutral-600 hover:bg-neutral-100"}`,"aria-label":"Csempe nézet",title:"Csempe nézet",children:s.jsx(P_,{className:"h-5 w-5"})})]})}function oa({type:e,value:t}){const a=t.toLowerCase(),i=e==="statusz"?(o=>{switch(a){case"piszkozat":return"bg-gray-100 text-gray-700 border border-gray-300";case"beküldött":case"benyújtva":case"érkeztetés alatt":return"bg-blue-100 text-blue-800 border border-blue-300";case"eljárás elindult":return"bg-blue-100 text-blue-800 border border-blue-300";case"eljárás folyamatban":case"folyamatban":case"formai vizsgálat":case"tartalmi vizsgálat":case"feldolgozás alatt":return"bg-yellow-100 text-yellow-900 border border-yellow-300";case"hiánypótlás":case"hiánypótlás szükséges":return"bg-orange-100 text-orange-900 border border-orange-400";case"döntéshozatal":case"döntés-előkészítés":case"véleményezés":case"kivizsgálás alatt":return"bg-purple-100 text-purple-800 border border-purple-300";case"eljárás befejezve":case"ügylezáró irat elküldve":case"okmány elküldve":case"okmány átadva":case"lezárva":case"lezárt":case"jóváhagyva":case"hatályos":return"bg-green-100 text-green-800 border border-green-300";case"elutasítva":case"elutasított":return"bg-red-100 text-red-800 border border-red-300";case"aktív":return"bg-green-100 text-green-800 border border-green-300";case"felfüggesztett":case"módosítás alatt":return"bg-orange-100 text-orange-900 border border-orange-400";case"visszavont":case"hatályon kívül":return"bg-neutral-100 text-neutral-700 border border-neutral-300";default:return"bg-neutral-100 text-neutral-800 border border-neutral-300"}})():(o=>{switch(a){case"alacsony":return"bg-neutral-100 text-neutral-700 border border-neutral-300";case"normál":case"normal":return"bg-blue-100 text-blue-800 border border-blue-300";case"magas":return"bg-orange-100 text-orange-800 border border-orange-400";case"sürgős":case"surgos":case"kritikus":return"bg-red-100 text-red-800 border border-red-400";default:return"bg-neutral-100 text-neutral-800 border border-neutral-300"}})(),l=e==="statusz"?`Ügy státusza: ${t}`:`Prioritás: ${t}`;return s.jsx("span",{className:`px-3 py-1 rounded-md text-xs font-semibold uppercase ${i}`,role:"status","aria-label":l,children:t})}function W_({ugy:e,onClick:t,showUgyfelNev:a=!0}){var d;const r=new Date(e.hataridoDatum),n=new Date,i=Math.ceil((r.getTime()-n.getTime())/(1e3*60*60*24)),l=i<=7&&i>=0,c=e.statusz==="hiánypótlás"?{ikon:Jt,szin:"text-warning-600",bgSzin:"bg-warning-50",borderSzin:"border-warning-300",uzenet:"Hiánypótlás szükséges",akcio:!0}:e.statusz==="folyamatban"&&e.workflow_fazis==="tenyallas_tisztazas"?{ikon:Ea,szin:"text-accent-600",bgSzin:"bg-accent-50",borderSzin:"border-accent-300",uzenet:"Nyilatkozattétel szükséges",akcio:!0}:e.statusz==="lezárt"&&e.dontesi_dokumentum==="Engedélyező határozat"?{ikon:Pe,szin:"text-success-700",bgSzin:"bg-success-50",borderSzin:"border-success-300",uzenet:"Engedélyezve",akcio:!1}:e.statusz==="lezárt"&&e.dontesi_dokumentum==="Elutasító végzés"?{ikon:Jt,szin:"text-error-700",bgSzin:"bg-error-50",borderSzin:"border-error-300",uzenet:"Elutasítva",akcio:!1}:e.statusz==="döntéshozatal"?{ikon:bt,szin:"text-primary-600",bgSzin:"bg-primary-50",borderSzin:"border-primary-300",uzenet:"Döntés folyamatban",akcio:!1}:null;return s.jsxs(se,{hover:!0,onClick:t,className:`relative ${c?`${c.bgSzin} border-2 ${c.borderSzin}`:""}`,children:[e.uj&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:"px-2 py-1 bg-error-500 text-white text-xs font-bold rounded",children:"ÚJ"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("span",{className:"text-xs font-mono bg-primary-100 text-primary-800 px-2 py-1 rounded border border-primary-300",children:e.ugyAzonosito})}),s.jsx("h3",{className:"font-bold text-neutral-900 text-lg mb-1",children:e.ugytuekNev||"Vasúti alkalmassági vizsgálat"}),e.iktatoszam&&s.jsxs("p",{className:"text-xs text-neutral-500",children:["Iktatószám: ",e.iktatoszam]})]}),a&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-700",children:[s.jsx(os,{className:"h-4 w-4 text-neutral-500"}),s.jsx("span",{className:"font-medium",children:e.ugyfelNev}),((d=e.workflow_adatok)==null?void 0:d.tomeges_kerelem)&&s.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-accent-100 text-accent-800 text-xs font-semibold rounded flex items-center gap-1",children:[s.jsx(Ca,{className:"h-3 w-3"}),"Tömeges (",e.workflow_adatok.kollegak_szama," fő)"]})]}),!a&&e.letrehozva&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600",children:[s.jsx(De,{className:"h-4 w-4 text-neutral-500"}),s.jsxs("span",{children:["Benyújtva: ",new Date(e.letrehozva).toLocaleDateString("hu-HU")]})]}),s.jsxs("div",{className:`flex items-center gap-2 text-sm ${l?"text-warning-700 font-semibold":"text-neutral-600"}`,children:[s.jsx(cr,{className:"h-4 w-4"}),s.jsxs("span",{children:["Határidő: ",r.toLocaleDateString("hu-HU")]}),l&&s.jsxs("span",{className:"text-xs bg-warning-100 px-2 py-0.5 rounded",children:[i," nap!"]})]}),c&&s.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-md border ${c.borderSzin} ${c.bgSzin}`,children:[s.jsx(c.ikon,{className:`h-5 w-5 ${c.szin} flex-shrink-0`}),s.jsx("span",{className:`text-sm font-semibold ${c.szin}`,children:c.uzenet}),c.akcio&&s.jsx("span",{className:"text-xs bg-white px-2 py-0.5 rounded ml-auto",children:"Kattints!"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-neutral-200",children:[s.jsx(oa,{type:"statusz",value:e.statusz}),s.jsx(oa,{type:"prioritas",value:e.prioritas})]})]})]})}function J_({ugytipusok:e,onSelect:t,title:a,subtitle:r}){const[n,i]=B.useState(""),[l,o]=B.useState("mind"),[c]=B.useState(12),[d,h]=B.useState(1),g=B.useMemo(()=>{let j=e;if(n.trim()){const z=n.toLowerCase();j=j.filter(N=>N.kod.toLowerCase().includes(z)||N.nev.toLowerCase().includes(z)||N.leiras.toLowerCase().includes(z))}return l==="implementalt"?j=j.filter(z=>z.implementalt):l==="fejlesztes-alatt"&&(j=j.filter(z=>!z.implementalt)),j},[e,n,l]),p=Math.ceil(g.length/c),f=g.slice((d-1)*c,d*c),k=B.useMemo(()=>({osszes:e.length,implementalt:e.filter(j=>j.implementalt).length,fejlesztesAlatt:e.filter(j=>!j.implementalt).length}),[e]),_=()=>{i(""),h(1)},w=j=>{o(j),h(1)},x=j=>{j.implementalt&&t(j)};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:a||"Válasszon eljárástípust"}),r&&s.jsx("p",{className:"text-neutral-600",children:r})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(se,{className:"bg-neutral-50 border border-neutral-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Összes eljárástípus"}),s.jsx("p",{className:"text-3xl font-bold text-neutral-900",children:k.osszes})]}),s.jsx(De,{className:"h-10 w-10 text-neutral-400","aria-hidden":"true"})]})}),s.jsx(se,{className:"bg-success-50 border border-success-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-success-700 mb-1",children:"Elérhető"}),s.jsx("p",{className:"text-3xl font-bold text-success-800",children:k.implementalt})]}),s.jsx(Pe,{className:"h-10 w-10 text-success-500","aria-hidden":"true"})]})}),s.jsx(se,{className:"bg-warning-50 border border-warning-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-warning-700 mb-1",children:"Fejlesztés alatt"}),s.jsx("p",{className:"text-3xl font-bold text-warning-800",children:k.fejlesztesAlatt})]}),s.jsx(bt,{className:"h-10 w-10 text-warning-500","aria-hidden":"true"})]})})]}),s.jsxs(se,{className:"bg-white mb-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"ugytipus-kereses",className:"sr-only",children:"Eljárástípus keresése"}),s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400","aria-hidden":"true"}),s.jsx("input",{id:"ugytipus-kereses",type:"text",placeholder:"Keresés kód, megnevezés vagy leírás alapján...",value:n,onChange:j=>{i(j.target.value),h(1)},className:"w-full pl-10 pr-10 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),n&&s.jsx("button",{onClick:_,className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600","aria-label":"Keresés törlése",children:s.jsx(es,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bc,{className:"h-5 w-5 text-neutral-500","aria-hidden":"true"}),s.jsxs("div",{className:"flex gap-2",role:"group","aria-label":"Státusz szűrő",children:[s.jsxs("button",{onClick:()=>w("mind"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="mind"?"bg-neutral-800 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,"aria-pressed":l==="mind",children:["Mind (",k.osszes,")"]}),s.jsxs("button",{onClick:()=>w("implementalt"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="implementalt"?"bg-success-600 text-white":"bg-success-50 text-success-700 hover:bg-success-100"}`,"aria-pressed":l==="implementalt",children:["Elérhető (",k.implementalt,")"]}),s.jsxs("button",{onClick:()=>w("fejlesztes-alatt"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="fejlesztes-alatt"?"bg-warning-600 text-white":"bg-warning-50 text-warning-700 hover:bg-warning-100"}`,"aria-pressed":l==="fejlesztes-alatt",children:["Hamarosan (",k.fejlesztesAlatt,")"]})]})]})]}),n&&s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:s.jsxs("p",{className:"text-sm text-neutral-600",children:[s.jsx("span",{className:"font-semibold text-neutral-900",children:g.length})," találat",n&&` "${n}" keresésre`]})})]}),f.length===0?s.jsxs(se,{className:"bg-neutral-50 text-center py-16",children:[s.jsx(De,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4","aria-hidden":"true"}),s.jsx("p",{className:"text-lg font-medium text-neutral-700 mb-2",children:"Nincs találat"}),s.jsx("p",{className:"text-neutral-600",children:"Próbáljon más keresési feltételt vagy módosítsa a szűrőket."}),n&&s.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-medium",children:"Keresés törlése"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:f.map(j=>s.jsxs(se,{hover:j.implementalt,className:`${j.implementalt?"bg-white border-2 border-success-200 hover:border-success-500 cursor-pointer":"bg-neutral-50 border-2 border-neutral-200 opacity-75"}`,onClick:()=>x(j),children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${j.implementalt?"bg-success-100":"bg-neutral-200"}`,children:s.jsx(De,{className:`h-6 w-6 ${j.implementalt?"text-success-700":"text-neutral-500"}`,"aria-hidden":"true"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:`text-xs font-mono px-2 py-1 rounded border ${j.implementalt?"bg-success-50 text-success-800 border-success-300":"bg-neutral-100 text-neutral-700 border-neutral-300"}`,children:j.kod}),s.jsx("span",{className:`text-xs px-2 py-1 rounded font-semibold ${j.implementalt?"bg-success-600 text-white":"bg-warning-500 text-white"}`,children:j.implementalt?"Elérhető":"Hamarosan"})]}),s.jsx("h3",{className:`font-bold text-base mb-2 ${j.implementalt?"text-neutral-900":"text-neutral-700"}`,children:j.nev}),s.jsx("p",{className:`text-sm line-clamp-2 ${j.implementalt?"text-neutral-600":"text-neutral-500"}`,children:j.leiras})]})]}),s.jsx("button",{disabled:!j.implementalt,className:`w-full mt-2 py-2 rounded-md font-semibold transition-colors ${j.implementalt?"bg-success-600 text-white hover:bg-success-700 focus:outline-none focus:ring-2 focus:ring-success-500 focus:ring-offset-2":"bg-neutral-300 text-neutral-600 cursor-not-allowed"}`,"aria-label":`${j.kod} eljárás ${j.implementalt?"indítása":"fejlesztés alatt"}`,children:j.implementalt?"Eljárás indítása →":"Fejlesztés alatt"})]},j.id))}),p>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>h(Math.max(1,d-1)),disabled:d===1,className:"px-4 py-2 bg-white border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium","aria-label":"Előző oldal",children:"← Előző"}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,p)},(j,z)=>{let N;return p<=5||d<=3?N=z+1:d>=p-2?N=p-4+z:N=d-2+z,s.jsx("button",{onClick:()=>h(N),className:`w-10 h-10 rounded-md font-medium transition-colors ${d===N?"bg-primary-600 text-white":"bg-white border border-neutral-300 text-neutral-700 hover:bg-neutral-50"}`,"aria-label":`${N}. oldal`,"aria-current":d===N?"page":void 0,children:N},N)})}),s.jsx("button",{onClick:()=>h(Math.min(p,d+1)),disabled:d===p,className:"px-4 py-2 bg-white border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium","aria-label":"Következő oldal",children:"Következő →"})]}),s.jsxs("p",{className:"text-center text-sm text-neutral-600 mt-4",children:[d,". oldal / ",p," | Összesen: ",g.length," eljárástípus"]})]})]})}const G_=[{id:"ut1",kod:"V-044",nev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",modul:"vasúti",leiras:"Mozdonyvezetői munkakörre irányuló előzetes egészségi alkalmassági vizsgálati eljárás.",aktiv:!0,implementalt:!0},{id:"ut2",kod:"V-021",nev:"Vasúti járművek üzembe helyezési engedélye",modul:"vasúti",leiras:"Mozdonyok és vagonok műszaki vizsgálata és engedélyezése.",aktiv:!0,implementalt:!1},{id:"ut3",kod:"V-033",nev:"Vasúti pálya-engedélyezési eljárás",modul:"vasúti",leiras:"Vasúti pályaszakaszok forgalomba helyezési engedélye.",aktiv:!0,implementalt:!1},{id:"ut4",kod:"H-052",nev:"Hajózási engedélyek kiadása",modul:"hajózási",leiras:"Belvízi és tengeri hajók üzembe helyezési engedélyezési eljárása.",aktiv:!0,implementalt:!1},{id:"ut5",kod:"H-018",nev:"Hajóskapitányi vizsga engedélyezés",modul:"hajózási",leiras:"Hajóskapitányi képesítés megszerzésére irányuló eljárás.",aktiv:!0,implementalt:!1}],Z_=[{id:"a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-001",iktatoszam:"VHF/2025/001234",ugyfelId:"1",ugyfelNev:"MÁV-START Zrt.",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Döntéshozatal",prioritas:"Magas",leiras:"Tömeges kérelem - 80 fő mozdonyvezetői munkakörre irányuló előzetes alkalmassági vizsgálat. Vezetői jóváhagyásra vár.",letrehozva:"2025-10-05T14:27:00Z",hataridoDatum:"2025-10-15",tomegesKerelem:!0,szemelySzam:80,megjegyzesek:[{id:"m1",szerzo:"Szabó Anna",datum:"2025-10-05T14:30:00Z",szoveg:"Kérelem beérkezett, érkeztetés megtörtént. Iktatószám: VHF/2025/001234"},{id:"m2",szerzo:"Szabó Anna",datum:"2025-10-06T10:15:00Z",szoveg:"Formai és tartalmi vizsgálat elvégezve. Minden dokumentum rendben, hiánypótlás nem szükséges."},{id:"m3",szerzo:"Szabó Anna",datum:"2025-10-08T16:20:00Z",szoveg:"VNY024 nyilvántartás ellenőrzés befejezve. 78 fő alkalmas, 2 fő korlátozással alkalmas (szemüvegviselési kötelezettség)."},{id:"m4",szerzo:"Szabó Anna",datum:"2025-10-10T14:30:00Z",szoveg:"Döntési javaslat elkészítve, vezetői véleményezésre továbbítva."}],kollegak:Array.from({length:80},(e,t)=>({id:`kollega-${t+1}`,nev:`Kolléga ${t+1}`,szuletesiHely:"Budapest",szuletesiDatum:`198${Math.floor(Math.random()*10)}-0${Math.floor(Math.random()*9)+1}-${10+Math.floor(Math.random()*18)}`,anyjaNeveNev:`Anya ${t+1}`,tervezettMunkakor:"Mozdonyvezetői munkakör",dontes:"Folyamatban"}))},{id:"b2c3d4e5-f6a7-4b8c-9d0e-1f2a3b4c5d6e",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-003",iktatoszam:"VHF/2025/001245",ugyfelId:"1",ugyfelNev:"Nagy Tamás",ugyintezoId:"3",ugyintezoNev:"Kovács János",statusz:"Döntéshozatal",prioritas:"Normál",leiras:"Mozdonyvezetői munkakör alkalmassági vizsgálat - egyéni kérelem. Minden dokumentum rendben.",letrehozva:"2025-10-01T09:30:00Z",hataridoDatum:"2025-10-20",megjegyzesek:[{id:"m1b",szerzo:"Kovács János",datum:"2025-10-01T09:35:00Z",szoveg:"Egyéni kérelem regisztrálva. Érkeztetés és iktatás megtörtént."},{id:"m2b",szerzo:"Kovács János",datum:"2025-10-02T14:00:00Z",szoveg:"Hatáskör és illetékesség rendben. Formai vizsgálat: megfelelő."},{id:"m3b",szerzo:"Kovács János",datum:"2025-10-05T11:30:00Z",szoveg:"Tartalmi vizsgálat befejezve. Tanúsító szervezet igazolása hiteles, VNY024 adat rendben. Kérelmező alkalmas, korlátozás nélkül."},{id:"m4b",szerzo:"Kovács János",datum:"2025-10-09T11:20:00Z",szoveg:"Döntési javaslat elkészítve: engedélyező határozat javaslat. Vezetői jóváhagyásra vár."}]},{id:"c3d4e5f6-a7b8-4c9d-0e1f-2a3b4c5d6e7f",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-004",iktatoszam:"VHF/2025/001256",ugyfelId:"1",ugyfelNev:"ZÁHONY Zrt.",ugyintezoId:"3",ugyintezoNev:"Nagy Péter",statusz:"Döntéshozatal",prioritas:"Normál",leiras:"Tömeges kérelem - 12 fő tolatásvezetői munkakörre. Vezetői véleményezésre vár.",letrehozva:"2025-09-28T11:00:00Z",hataridoDatum:"2025-10-28",tomegesKerelem:!0,szemelySzam:12,megjegyzesek:[{id:"m1c",szerzo:"Nagy Péter",datum:"2025-09-28T11:10:00Z",szoveg:"ZÁHONY Zrt. tömeges kérelem beérkezett. 12 fő tolatásvezetői munkakör. Érkeztetés rendben."},{id:"m2c",szerzo:"Nagy Péter",datum:"2025-09-30T15:00:00Z",szoveg:"Formai és tartalmi vizsgálat megkezdve. Valamennyi kötelező melléklet csatolva."},{id:"m3c",szerzo:"Nagy Péter",datum:"2025-10-03T10:20:00Z",szoveg:"VNY024 adatbázis ellenőrzés: 11 fő alkalmas korlátozás nélkül, 1 fő hallókészülék használati kötelezettséggel alkalmas."},{id:"m4c",szerzo:"Nagy Péter",datum:"2025-10-08T16:45:00Z",szoveg:"Döntési javaslat elkészült. Díjfizetés ellenőrzött és rendben. Vezetői jóváhagyásra továbbítva."}],kollegak:Array.from({length:12},(e,t)=>({id:`kollega-u1c-${t+1}`,nev:`Kolléga ${t+1}`,szuletesiHely:"Záhony",szuletesiDatum:`198${Math.floor(Math.random()*10)}-0${Math.floor(Math.random()*9)+1}-${10+Math.floor(Math.random()*18)}`,anyjaNeveNev:`Anya ${t+1}`,tervezettMunkakor:"Tolatásvezetői munkakör",dontes:"Folyamatban"}))},{id:"d4e5f6a7-b8c9-4d0e-1f2a-3b4c5d6e7f8a",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-002",iktatoszam:"VHF/2025/001128",ugyfelId:"1",ugyfelNev:"Kovács János",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Hiánypótlás",prioritas:"Magas",leiras:"Segédmozdonyvezetői munkakör alkalmassági vizsgálat - hiánypótlás szükséges.",letrehozva:"2025-09-20T10:15:00Z",hataridoDatum:"2025-10-15"},{id:"e5f6a7b8-c9d0-4e1f-2a3b-4c5d6e7f8a9b",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2024-087",iktatoszam:"VHF/2024/002456",ugyfelId:"1",ugyfelNev:"GYSEV Zrt.",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Lezárva",prioritas:"Normál",leiras:"Tömeges kérelem - 45 fő tolatásvezetői munkakörre. 43 fő engedélyezve, 2 fő elutasítva.",letrehozva:"2024-08-10T09:00:00Z",hataridoDatum:"2024-09-10",lezarva:"2024-09-05T16:30:00Z",tomegesKerelem:!0,szemelySzam:45,engedelyezettSzemely:43,elutasitottSzemely:2,kollegak:[...Array.from({length:43},(e,t)=>({id:`kollega-u3-${t+1}`,nev:`Kolléga ${t+1}`,szuletesiHely:"Győr",szuletesiDatum:`198${Math.floor(Math.random()*10)}-0${Math.floor(Math.random()*9)+1}-${10+Math.floor(Math.random()*18)}`,anyjaNeveNev:`Anya ${t+1}`,tervezettMunkakor:"Tolatásvezetői munkakör",dontes:"Engedélyezett"})),{id:"kollega-u3-44",nev:"Nagy Béla",szuletesiHely:"Győr",szuletesiDatum:"1992-03-15",anyjaNeveNev:"Nagy Mária",tervezettMunkakor:"Tolatásvezetői munkakör",dontes:"Elutasítva",elutasitasIndoka:"VÉ vizsgálat alapján: látásélesség nem megfelelő (VNY024 nyilvántartás szerint korlátozás)",megjegyzes:"2024-09-05: Szemüveges vizsgálat ajánlott, 6 hónap múlva újra jelentkezhet"},{id:"kollega-u3-45",nev:"Kiss Antal",szuletesiHely:"Győr",szuletesiDatum:"1988-11-22",anyjaNeveNev:"Kiss Erzsébet",tervezettMunkakor:"Tolatásvezetői munkakör",dontes:"Elutasítva",elutasitasIndoka:"VÉ vizsgálat alapján: halláscsökkenés meghaladja a megengedett határértéket",megjegyzes:"2024-09-05: Szakorvosi konzultáció szükséges, hallókészülék használata ajánlott"}]},{id:"f6a7b8c9-d0e1-4f2a-3b4c-5d6e7f8a9b0c",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-004",iktatoszam:"VHF/2025/001456",ugyfelId:"1",ugyfelNev:"Nagy Péter",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Tartalmi vizsgálat",prioritas:"Magas",leiras:"Mozdonyvezetői munkakör alkalmassági vizsgálat - nyilatkozattétel szükséges egészségügyi kérdésekben.",letrehozva:"2025-09-28T09:15:00Z",hataridoDatum:"2025-10-18"},{id:"a7b8c9d0-e1f2-4a3b-4c5d-6e7f8a9b0c1d",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-005",iktatoszam:"VHF/2025/001567",ugyfelId:"1",ugyfelNev:"Tóth Mária",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Elutasítva",prioritas:"Normál",leiras:"Mozdonyvezetői munkakör alkalmassági vizsgálat - elutasítva egészségügyi okok miatt.",letrehozva:"2025-09-01T10:15:00Z",hataridoDatum:"2025-10-01",lezarva:"2025-09-28T14:20:00Z"},{id:"b8c9d0e1-f2a3-4b4c-5d6e-7f8a9b0c1d2e",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-006",iktatoszam:"VHF/2025/001678",ugyfelId:"1",ugyfelNev:"Kiss László",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Döntés-előkészítés",prioritas:"Magas",leiras:"Segédmozdonyvezetői munkakör alkalmassági vizsgálat - döntési javaslat előkészítés alatt.",letrehozva:"2025-10-02T08:45:00Z",hataridoDatum:"2025-11-02"},{id:"c9d0e1f2-a3b4-4c5d-6e7f-8a9b0c1d2e3f",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-007",iktatoszam:"VHF/2025/001789",ugyfelId:"1",ugyfelNev:"Szabó Eszter",statusz:"Benyújtva",prioritas:"Alacsony",leiras:"Tolatásvezetői munkakör előzetes alkalmassági vizsgálat.",letrehozva:"2025-10-09T15:20:00Z",hataridoDatum:"2025-11-09"},{id:"d0e1f2a3-b4c5-4d6e-7f8a-9b0c1d2e3f4a",ugytuekId:"ut1",ugytuekKod:"V-044",ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:"V044-2025-008",iktatoszam:"VHF/2025/001890",ugyfelId:"1",ugyfelNev:"Horváth Gábor",ugyintezoId:"3",ugyintezoNev:"Szabó Anna",statusz:"Érkeztetés alatt",prioritas:"Normál",leiras:"Mozdonyvezetői munkakör alkalmassági vizsgálat - érkeztetés EKEIDR rendszerben.",letrehozva:"2025-10-10T11:05:00Z",hataridoDatum:"2025-11-10"},{id:"e1f2a3b4-c5d6-4e7f-8a9b-0c1d2e3f4a5b",ugytuekId:"ut2",ugytuekKod:"V-021",ugytuekNev:"Vasúti járművek üzembe helyezési engedélye",ugyAzonosito:"V021-2025-001",iktatoszam:"VHF/2025/001991",ugyfelId:"1",ugyfelNev:"Varga Tamás",statusz:"Benyújtva",prioritas:"Normál",targy:"Villamos mozdony üzembe helyezési engedély",leiras:"Új villamos mozdony típus üzembe helyezési engedély kérelem.",letrehozva:"2025-10-01T13:45:00Z",hataridoDatum:"2025-12-01"}],Y_=[{id:"ny1",tipus:"jármű",azonosito:"V-2025-001",adatok:{tipus:"villamos mozdony",uzemeltetó:"MÁV Zrt.",gyartasi_ev:2020,gyarto:"Siemens Mobility",maximalis_sebesseg:160},statusz:"aktív"},{id:"ny2",tipus:"jármű",azonosito:"V-2025-002",adatok:{tipus:"személykocsi",uzemeltetó:"GYSEV Zrt.",gyartasi_ev:2018,gyarto:"Stadler",ferohely:80},statusz:"aktív"},{id:"ny3",tipus:"hajó",azonosito:"H-2025-001",adatok:{tipus:"teherhajó",kapacitas_tonna:500,gyartasi_ev:2019,hajozasi_terulet:"belvízi",hossz_m:85},statusz:"aktív"},{id:"ny4",tipus:"hajó",azonosito:"H-2025-002",adatok:{tipus:"személyszállító",kapacitas_fo:150,gyartasi_ev:2021,hajozasi_terulet:"tengeri",hossz_m:45},statusz:"aktív"},{id:"ny5",tipus:"engedély",azonosito:"E-2025-001",adatok:{tipus:"üzembe_helyezési",ervenyesseg:"2025-12-31",kibocsato:"VAHAP Hatóság",korlatok:"csak belföldi használatra"},statusz:"aktív"}],X_="modulepreload",Q_=function(e){return"/"+e},ob={},Wi=function(t,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=Q_(c),c in ob)return;ob[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":X_,d||(g.as="script"),g.crossOrigin="",g.href=c,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((p,f)=>{g.addEventListener("load",p),g.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},e4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Wi(async()=>{const{default:r}=await Promise.resolve().then(()=>Cc);return{default:r}},void 0).then(({default:r})=>r(...a)):t=fetch,(...a)=>t(...a)};class Gx extends Error{constructor(t,a="FunctionsError",r){super(t),this.name=a,this.context=r}}class t4 extends Gx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cb extends Gx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class db extends Gx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(bp||(bp={}));var s4=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};class a4{constructor(t,{headers:a={},customFetch:r,region:n=bp.Any}={}){this.url=t,this.headers=a,this.region=n,this.fetch=e4(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var r;return s4(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:l}=a;let o={},{region:c}=a;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(o["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(o["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:h}).catch(_=>{throw new t4(_)}),p=g.headers.get("x-relay-error");if(p&&p==="true")throw new cb(g);if(!g.ok)throw new db(g);let f=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return f==="application/json"?k=yield g.json():f==="application/octet-stream"?k=yield g.blob():f==="text/event-stream"?k=g:f==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(n){return{data:null,error:n,response:n instanceof db||n instanceof cb?n.context:void 0}}})}}var Oa={},Zx={},k0={},Cu={},j0={},z0={},r4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jc=r4();const n4=jc.fetch,_j=jc.fetch.bind(jc),Sj=jc.Headers,i4=jc.Request,l4=jc.Response,Cc=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sj,Request:i4,Response:l4,default:_j,fetch:n4},Symbol.toStringTag,{value:"Module"})),o4=Yz(Cc);var w0={};Object.defineProperty(w0,"__esModule",{value:!0});let c4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};w0.default=c4;var Aj=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z0,"__esModule",{value:!0});const d4=Aj(o4),u4=Aj(w0);let h4=class{constructor(t){var a,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(a=t.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=d4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=new Headers(this.headers),this.headers.set(t,a),this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c,d;let h=null,g=null,p=null,f=i.status,k=i.statusText;if(i.ok){if(this.method!=="HEAD"){const j=await i.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const w=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,f=406,k="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await i.text();try{h=JSON.parse(w),Array.isArray(h)&&i.status===404&&(g=[],h=null,f=200,k="OK")}catch{i.status===404&&w===""?(f=204,k="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,f=200,k="OK"),h&&this.shouldThrowOnError)throw new u4.default(h)}return{error:h,data:g,count:p,status:f,statusText:k}});return this.shouldThrowOnError||(n=n.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,a)}returns(){return this}overrideTypes(){return this}};z0.default=h4;var m4=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j0,"__esModule",{value:!0});const f4=m4(z0);let g4=class extends f4.default{select(t){let a=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:a=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${a?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:r=a}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,a,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:a=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,a?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};j0.default=g4;var p4=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cu,"__esModule",{value:!0});const x4=p4(j0);let v4=class extends x4.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const r=Array.from(new Set(a)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${l}.${a}`),this}match(t){return Object.entries(t).forEach(([a,r])=>{this.url.searchParams.append(a,`eq.${r}`)}),this}not(t,a,r){return this.url.searchParams.append(t,`not.${a}.${r}`),this}or(t,{foreignTable:a,referencedTable:r=a}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,a,r){return this.url.searchParams.append(t,`${a}.${r}`),this}};Cu.default=v4;var y4=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k0,"__esModule",{value:!0});const xd=y4(Cu);let b4=class{constructor(t,{headers:a={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(a),this.schema=r,this.fetch=n}select(t,{head:a=!1,count:r}={}){const n=a?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new xd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:a,defaultToNull:r=!0}={}){var n;const i="POST";if(a&&this.headers.append("Prefer",`count=${a}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new xd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:a,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new xd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:a}={}){var r;const n="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new xd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var a;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new xd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};k0.default=b4;var Ej=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zx,"__esModule",{value:!0});const k4=Ej(k0),j4=Ej(Cu);let z4=class Cj{constructor(t,{headers:a={},schema:r,fetch:n}={}){this.url=t,this.headers=new Headers(a),this.schemaName=r,this.fetch=n}from(t){const a=new URL(`${this.url}/${t}`);return new k4.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Cj(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:r=!1,get:n=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let d;r||n?(o=r?"HEAD":"GET",Object.entries(a).filter(([g,p])=>p!==void 0).map(([g,p])=>[g,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([g,p])=>{c.searchParams.append(g,p)})):(o="POST",d=a);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new j4.default({method:o,url:c,headers:h,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Zx.default=z4;var Lc=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.PostgrestError=Oa.PostgrestBuilder=Oa.PostgrestTransformBuilder=Oa.PostgrestFilterBuilder=Oa.PostgrestQueryBuilder=Oa.PostgrestClient=void 0;const Lj=Lc(Zx);Oa.PostgrestClient=Lj.default;const Tj=Lc(k0);Oa.PostgrestQueryBuilder=Tj.default;const Pj=Lc(Cu);Oa.PostgrestFilterBuilder=Pj.default;const Ij=Lc(j0);Oa.PostgrestTransformBuilder=Ij.default;const Dj=Lc(z0);Oa.PostgrestBuilder=Dj.default;const Mj=Lc(w0);Oa.PostgrestError=Mj.default;var w4=Oa.default={PostgrestClient:Lj.default,PostgrestQueryBuilder:Tj.default,PostgrestFilterBuilder:Pj.default,PostgrestTransformBuilder:Ij.default,PostgrestBuilder:Dj.default,PostgrestError:Mj.default};const{PostgrestClient:N4,PostgrestQueryBuilder:dC,PostgrestFilterBuilder:uC,PostgrestTransformBuilder:hC,PostgrestBuilder:mC,PostgrestError:fC}=w4;class _4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const r=a.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const r=this.getWebSocketConstructor();return new r(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const S4="2.15.5",A4=`realtime-js/${S4}`,E4="1.0.0",kp=1e4,C4=1e3,L4=100;var Rd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rd||(Rd={}));var Us;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Us||(Us={}));var Vr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vr||(Vr={}));var jp;(function(e){e.websocket="websocket"})(jp||(jp={}));var Ol;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ol||(Ol={}));class T4{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,a,r)}_decodeBroadcast(t,a,r){const n=a.getUint8(1),i=a.getUint8(2);let l=this.HEADER_LENGTH+2;const o=r.decode(t.slice(l,l+n));l=l+n;const c=r.decode(t.slice(l,l+i));l=l+i;const d=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class Fj{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xt||(Xt={}));const ub=(e,t,a={})=>{var r;const n=(r=a.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,l)=>(i[l]=P4(l,e,t,n),i),{})},P4=(e,t,a,r)=>{const n=t.find(o=>o.name===e),i=n==null?void 0:n.type,l=a[e];return i&&!r.includes(i)?Oj(i,l):zp(l)},Oj=(e,t)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return F4(t,a)}switch(e){case Xt.bool:return I4(t);case Xt.float4:case Xt.float8:case Xt.int2:case Xt.int4:case Xt.int8:case Xt.numeric:case Xt.oid:return D4(t);case Xt.json:case Xt.jsonb:return M4(t);case Xt.timestamp:return O4(t);case Xt.abstime:case Xt.date:case Xt.daterange:case Xt.int4range:case Xt.int8range:case Xt.money:case Xt.reltime:case Xt.text:case Xt.time:case Xt.timestamptz:case Xt.timetz:case Xt.tsrange:case Xt.tstzrange:return zp(t);default:return zp(t)}},zp=e=>e,I4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},M4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},F4=(e,t)=>{if(typeof e!="string")return e;const a=e.length-1,r=e[a];if(e[0]==="{"&&r==="}"){let i;const l=e.slice(1,a);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Oj(t,o))}return e},O4=e=>typeof e=="string"?e.replace(" ","T"):e,Rj=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Of{constructor(t,a,r={},n=kp){this.channel=t,this.event=a,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var r;return this._hasReceived(t)&&a((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var hb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(hb||(hb={}));class Bd{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bd.syncState(this.state,n,i,l),this.pendingDiffs.forEach(c=>{this.state=Bd.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Bd.syncDiff(this.state,n,i,l),o())}),this.onJoin((n,i,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:l})}),this.onLeave((n,i,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,r,n){const i=this.cloneDeep(t),l=this.transformState(a),o={},c={};return this.map(i,(d,h)=>{l[d]||(c[d]=h)}),this.map(l,(d,h)=>{const g=i[d];if(g){const p=h.map(w=>w.presence_ref),f=g.map(w=>w.presence_ref),k=h.filter(w=>f.indexOf(w.presence_ref)<0),_=g.filter(w=>p.indexOf(w.presence_ref)<0);k.length>0&&(o[d]=k),_.length>0&&(c[d]=_)}else o[d]=h}),this.syncDiff(i,{joins:o,leaves:c},r,n)}static syncDiff(t,a,r,n){const{joins:i,leaves:l}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var d;const h=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),h.length>0){const g=t[o].map(f=>f.presence_ref),p=h.filter(f=>g.indexOf(f.presence_ref)<0);t[o].unshift(...p)}r(o,h,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const h=c.map(g=>g.presence_ref);d=d.filter(g=>h.indexOf(g.presence_ref)<0),t[o]=d,n(o,d,c),d.length===0&&delete t[o]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(r=>a(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,r)=>{const n=t[r];return"metas"in n?a[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):a[r]=n,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mb||(mb={}));var Ud;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ud||(Ud={}));var Bn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Bn||(Bn={}));class Yx{constructor(t,a={config:{}},r){this.topic=t,this.params=a,this.socket=r,this.bindings={},this.state=Us.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Of(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new Fj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Us.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Us.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Us.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Us.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Us.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Bd(this),this.broadcastEndpointURL=Rj(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Us.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[Ud.PRESENCE]&&this.bindings[Ud.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},p={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Bn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Bn.CLOSED)),this.updateJoinPayload(Object.assign({config:p},g)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:f})=>{var k;if(this.socket.setAuth(),f===void 0){t==null||t(Bn.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,w=(k=_==null?void 0:_.length)!==null&&k!==void 0?k:0,x=[];for(let j=0;j<w;j++){const z=_[j],{filter:{event:N,schema:$,table:q,filter:G}}=z,D=f&&f[j];if(D&&D.event===N&&D.schema===$&&D.table===q&&D.filter===G)x.push(Object.assign(Object.assign({},z),{id:D.id}));else{this.unsubscribe(),this.state=Us.errored,t==null||t(Bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Bn.SUBSCRIBED);return}}).receive("error",f=>{this.state=Us.errored,t==null||t(Bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,r){return this.state===Us.joined&&t===Ud.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,a,r)}async send(t,a={}){var r,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=a.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Us.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Of(this,Vr.leave,{},t),r.receive("ok",()=>{a(),n("ok")}).receive("timeout",()=>{a(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Us.closed,this.bindings={}}async _fetchWithTimeout(t,a,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:n.signal}));return clearTimeout(i),l}_push(t,a,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Of(this,t,a,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>L4){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,r){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,r){var n,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:h}=Vr;if(r&&[o,c,d,h].indexOf(l)>=0&&r!==this._joinRef())return;let p=this._onMessage(l,a,r);if(a&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var k,_,w;return((k=f.filter)===null||k===void 0?void 0:k.event)==="*"||((w=(_=f.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(f=>f.callback(p,r)):(i=this.bindings[l])===null||i===void 0||i.filter(f=>{var k,_,w,x,j,z;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in f){const N=f.id,$=(k=f.filter)===null||k===void 0?void 0:k.event;return N&&((_=a.ids)===null||_===void 0?void 0:_.includes(N))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((w=a.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(j=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return N==="*"||N===((z=a==null?void 0:a.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===l}).map(f=>{if(typeof p=="object"&&"ids"in p){const k=p.data,{schema:_,table:w,commit_timestamp:x,type:j,errors:z}=k;p=Object.assign(Object.assign({},{schema:_,table:w,commit_timestamp:x,eventType:j,new:{},old:{},errors:z}),this._getPayloadRecords(k))}f.callback(p,r)})}_isClosed(){return this.state===Us.closed}_isJoined(){return this.state===Us.joined}_isJoining(){return this.state===Us.joining}_isLeaving(){return this.state===Us.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,r){const n=t.toLocaleLowerCase(),i={type:n,filter:a,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,a){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Yx.isEqual(n.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const r in t)if(t[r]!==a[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vr.close,{},t)}_onError(t){this._on(Vr.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Us.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=ub(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=ub(t.columns,t.old_record)),a}}const Rf=()=>{},Ih={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},R4=[1e3,2e3,5e3,1e4],B4=1e4,U4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $4{constructor(t,a){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kp,this.transport=null,this.heartbeatIntervalMs=Ih.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rf,this.ref=0,this.reconnectTimer=null,this.logger=Rf,this.conn=null,this.sendBuffer=[],this.serializer=new T4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...l)=>Wi(async()=>{const{default:o}=await Promise.resolve().then(()=>Cc);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((r=a==null?void 0:a.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${jp.websocket}`,this.httpEndpoint=Rj(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:E4}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,r){this.logger(t,a,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Rd.connecting:return Ol.Connecting;case Rd.open:return Ol.Open;case Rd.closing:return Ol.Closing;default:return Ol.Closed}}isConnected(){return this.connectionState()===Ol.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const r=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Yx(`realtime:${t}`,a,this);return this.channels.push(i),i}}push(t){const{topic:a,event:r,payload:n,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${a} ${r} (${i})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(C4,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Ih.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:l}=a,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${n} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,i,l)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vr.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(a);return`${t}${r}${n}`}_workerObjectUrl(t){let a;if(t)a=t;else{const r=new Blob([U4],{type:"application/javascript"});a=URL.createObjectURL(r)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(t=null){let a;t?a=t:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(r=>{const n={access_token:a,version:A4};a&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(Vr.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(a)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Fj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ih.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var a,r,n,i,l,o,c,d,h;if(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:kp,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Ih.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Rf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:g=>R4[g-1]||B4,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,p)=>p(JSON.stringify(g)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Xx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $s(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class H4 extends Xx{constructor(t,a,r){super(t),this.name="StorageApiError",this.status=a,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wp extends Xx{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var V4=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};const Bj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Wi(async()=>{const{default:r}=await Promise.resolve().then(()=>Cc);return{default:r}},void 0).then(({default:r})=>r(...a)):t=fetch,(...a)=>t(...a)},K4=()=>V4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wi(()=>Promise.resolve().then(()=>Cc),void 0)).Response:Response}),Np=e=>{if(Array.isArray(e))return e.map(a=>Np(a));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([a,r])=>{const n=a.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=Np(r)}),t},q4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var io=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};const Bf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),W4=(e,t,a)=>io(void 0,void 0,void 0,function*(){const r=yield K4();e instanceof r&&!(a!=null&&a.noResolveJson)?e.json().then(n=>{const i=e.status||500,l=(n==null?void 0:n.statusCode)||i+"";t(new H4(Bf(n),i,l))}).catch(n=>{t(new wp(Bf(n),n))}):t(new wp(Bf(e),e))}),J4=(e,t,a,r)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?n:(q4(r)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(r)):n.body=r,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),a))};function Lu(e,t,a,r,n,i){return io(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(a,J4(t,r,n,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>W4(c,o,r))})})}function Jm(e,t,a,r){return io(this,void 0,void 0,function*(){return Lu(e,"GET",t,a,r)})}function un(e,t,a,r,n){return io(this,void 0,void 0,function*(){return Lu(e,"POST",t,r,n,a)})}function _p(e,t,a,r,n){return io(this,void 0,void 0,function*(){return Lu(e,"PUT",t,r,n,a)})}function G4(e,t,a,r){return io(this,void 0,void 0,function*(){return Lu(e,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),r)})}function Uj(e,t,a,r,n){return io(this,void 0,void 0,function*(){return Lu(e,"DELETE",t,r,n,a)})}var Na=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};const Z4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Y4{constructor(t,a={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=a,this.bucketId=r,this.fetch=Bj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,a,r,n){return Na(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},fb),n);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const d=this._removeEmptyFolders(a),h=this._getFinalPath(d),g=yield(t=="PUT"?_p:un)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($s(i))return{data:null,error:i};throw i}})}upload(t,a,r){return Na(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,r)})}uploadToSignedUrl(t,a,r,n){return Na(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:fb.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const g=yield _p(this.fetch,o.toString(),c,{headers:h});return{data:{path:i,fullPath:g.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if($s(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,a){return Na(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const n=Object.assign({},this.headers);a!=null&&a.upsert&&(n["x-upsert"]="true");const i=yield un(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Xx("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}update(t,a,r){return Na(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,r)})}move(t,a,r){return Na(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}copy(t,a,r){return Na(this,void 0,void 0,function*(){try{return{data:{path:(yield un(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}createSignedUrl(t,a,r){return Na(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield un(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:a},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}createSignedUrls(t,a,r){return Na(this,void 0,void 0,function*(){try{const n=yield un(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}download(t,a){return Na(this,void 0,void 0,function*(){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Jm(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($s(o))return{data:null,error:o};throw o}})}info(t){return Na(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const r=yield Jm(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Np(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}exists(t){return Na(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield G4(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r)&&r instanceof wp){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,a){const r=this._getFinalPath(t),n=[],i=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";i!==""&&n.push(i);const o=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}remove(t){return Na(this,void 0,void 0,function*(){try{return{data:yield Uj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}list(t,a,r){return Na(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Z4),a),{prefix:t||""});return{data:yield un(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($s(n))return{data:null,error:n};throw n}})}listV2(t,a){return Na(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield un(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},a),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const X4="2.12.1",Q4={"X-Client-Info":`storage-js/${X4}`};var No=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};class e3{constructor(t,a={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Q4),a),this.fetch=Bj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return No(this,void 0,void 0,function*(){try{return{data:yield Jm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($s(t))return{data:null,error:t};throw t}})}getBucket(t){return No(this,void 0,void 0,function*(){try{return{data:yield Jm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return No(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}updateBucket(t,a){return No(this,void 0,void 0,function*(){try{return{data:yield _p(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}emptyBucket(t){return No(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}deleteBucket(t){return No(this,void 0,void 0,function*(){try{return{data:yield Uj(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($s(a))return{data:null,error:a};throw a}})}}class t3 extends e3{constructor(t,a={},r,n){super(t,a,r,n)}from(t){return new Y4(this.url,this.headers,t,this.fetch)}}const s3="2.57.4";let Sd="";typeof Deno<"u"?Sd="deno":typeof document<"u"?Sd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sd="react-native":Sd="node";const a3={"X-Client-Info":`supabase-js-${Sd}/${s3}`},r3={headers:a3},n3={schema:"public"},i3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},l3={};var o3=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};const c3=e=>{let t;return e?t=e:typeof fetch>"u"?t=_j:t=fetch,(...a)=>t(...a)},d3=()=>typeof Headers>"u"?Sj:Headers,u3=(e,t,a)=>{const r=c3(a),n=d3();return(i,l)=>o3(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new n(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},l),{headers:d}))})};var h3=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};function m3(e){return e.endsWith("/")?e:e+"/"}function f3(e,t){var a,r;const{db:n,auth:i,realtime:l,global:o}=e,{db:c,auth:d,realtime:h,global:g}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),o),{headers:Object.assign(Object.assign({},(a=g==null?void 0:g.headers)!==null&&a!==void 0?a:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>h3(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function g3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(m3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const $j="2.71.1",Do=30*1e3,Sp=3,Uf=Sp*Do,p3="http://localhost:9999",x3="supabase.auth.token",v3={"X-Client-Info":`gotrue-js/${$j}`},Ap="X-Supabase-Api-Version",Hj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},y3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,b3=10*60*1e3;class Qx extends Error{constructor(t,a,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=r}}function xt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class k3 extends Qx{constructor(t,a,r){super(t,a,r),this.name="AuthApiError",this.status=a,this.code=r}}function j3(e){return xt(e)&&e.name==="AuthApiError"}class Vj extends Qx{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class nl extends Qx{constructor(t,a,r,n){super(t,r,n),this.name=a,this.status=r}}class Ni extends nl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z3(e){return xt(e)&&e.name==="AuthSessionMissingError"}class Dh extends nl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mh extends nl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fh extends nl{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function w3(e){return xt(e)&&e.name==="AuthImplicitGrantRedirectError"}class gb extends nl{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ep extends nl{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function $f(e){return xt(e)&&e.name==="AuthRetryableFetchError"}class pb extends nl{constructor(t,a,r){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=r}}class Cp extends nl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xb=` 	
\r=`.split(""),N3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xb.length;t+=1)e[xb[t].charCodeAt(0)]=-2;for(let t=0;t<Gm.length;t+=1)e[Gm[t].charCodeAt(0)]=t;return e})();function vb(e,t,a){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;a(Gm[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;a(Gm[r]),t.queuedBits-=6}}function Kj(e,t,a){const r=N3[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function yb(e){const t=[],a=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=l=>{A3(l,r,a)};for(let l=0;l<e.length;l+=1)Kj(e.charCodeAt(l),n,i);return t.join("")}function _3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function S3(e,t){for(let a=0;a<e.length;a+=1){let r=e.charCodeAt(a);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(e.charCodeAt(a+1)-56320&65535|n)+65536,a+=1}_3(r,t)}}function A3(e,t,a){if(t.utf8seq===0){if(e<=127){a(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function E3(e){const t=[],a={queue:0,queuedBits:0},r=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Kj(e.charCodeAt(n),a,r);return new Uint8Array(t)}function C3(e){const t=[];return S3(e,a=>t.push(a)),new Uint8Array(t)}function L3(e){const t=[],a={queue:0,queuedBits:0},r=n=>{t.push(n)};return e.forEach(n=>vb(n,a,r)),vb(null,a,r),t.join("")}function T3(e){return Math.round(Date.now()/1e3)+e}function P3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ur=()=>typeof window<"u"&&typeof document<"u",Ll={tested:!1,writable:!1},qj=()=>{if(!Ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ll.tested)return Ll.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ll.tested=!0,Ll.writable=!0}catch{Ll.tested=!0,Ll.writable=!1}return Ll.writable};function I3(e){const t={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return a.searchParams.forEach((r,n)=>{t[n]=r}),t}const Wj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Wi(async()=>{const{default:r}=await Promise.resolve().then(()=>Cc);return{default:r}},void 0).then(({default:r})=>r(...a)):t=fetch,(...a)=>t(...a)},D3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mo=async(e,t,a)=>{await e.setItem(t,JSON.stringify(a))},Tl=async(e,t)=>{const a=await e.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},ji=async(e,t)=>{await e.removeItem(t)};class N0{constructor(){this.promise=new N0.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}N0.promiseConstructor=Promise;function Hf(e){const t=e.split(".");if(t.length!==3)throw new Cp("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!y3.test(t[r]))throw new Cp("JWT not in base64url format");return{header:JSON.parse(yb(t[0])),payload:JSON.parse(yb(t[1])),signature:E3(t[2]),raw:{header:t[0],payload:t[1]}}}async function M3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function F3(e,t){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){r(l);return}}catch(l){if(!t(i,l)){n(l);return}}})()})}function O3(e){return("0"+e.toString(16)).substr(-2)}function R3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=a.length;let n="";for(let i=0;i<56;i++)n+=a.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,O3).join("")}async function B3(e){const a=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",a),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function U3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await B3(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _o(e,t,a=!1){const r=R3();let n=r;a&&(n+="/PASSWORD_RECOVERY"),await Mo(e,`${t}-code-verifier`,n);const i=await U3(r);return[i,r===i?"plain":"s256"]}const $3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function H3(e){const t=e.headers.get(Ap);if(!t||!t.match($3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function V3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function K3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const q3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function So(e){if(!q3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vf(){const e={};return new Proxy(e,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const r=a.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bb(e){return JSON.parse(JSON.stringify(e))}var W3=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};const Ml=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),J3=[502,503,504];async function kb(e){var t;if(!D3(e))throw new Ep(Ml(e),0);if(J3.includes(e.status))throw new Ep(Ml(e),e.status);let a;try{a=await e.json()}catch(i){throw new Vj(Ml(i),i)}let r;const n=H3(e);if(n&&n.getTime()>=Hj["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?r=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(r=a.error_code),r){if(r==="weak_password")throw new pb(Ml(a),e.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ni}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new pb(Ml(a),e.status,a.weak_password.reasons);throw new k3(Ml(a),e.status||500,r)}const G3=(e,t,a,r)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),a))};async function kt(e,t,a,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Ap]||(i[Ap]=Hj["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Z3(e,t,a+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Z3(e,t,a,r,n,i){const l=G3(t,r,n,i);let o;try{o=await e(a,Object.assign({},l))}catch(c){throw console.error(c),new Ep(Ml(c),0)}if(o.ok||await kb(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await kb(c)}}function On(e){var t;let a=null;e6(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=T3(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:a,user:r},error:null}}function jb(e){const t=On(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,r)=>a&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ti(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Y3(e){return{data:e,error:null}}function X3(e){const{action_link:t,email_otp:a,hashed_token:r,redirect_to:n,verification_type:i}=e,l=W3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:a,hashed_token:r,redirect_to:n,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Q3(e){return e}function e6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kf=["global","local","others"];var t6=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};class s6{constructor({url:t="",headers:a={},fetch:r}){this.url=t,this.headers=a,this.fetch=Wj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=Kf[0]){if(Kf.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kf.join(", ")}`);try{return await kt(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,a={}){try{return await kt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ti})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:a}=t,r=t6(t,["options"]),n=Object.assign(Object.assign({},r),a);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await kt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:X3,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(xt(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await kt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ti})}catch(a){if(xt(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,r,n,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},h=await kt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Q3});if(h.error)throw h.error;const g=await h.json(),p=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,f=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(k=>{const _=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(k.split(";")[1].split("=")[1]);d[`${w}Page`]=_}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},g),d),error:null}}catch(d){if(xt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){So(t);try{return await kt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ti})}catch(a){if(xt(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){So(t);try{return await kt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:Ti})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,a=!1){So(t);try{return await kt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ti})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){So(t.userId);try{const{data:a,error:r}=await kt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:a,error:r}}catch(a){if(xt(a))return{data:null,error:a};throw a}}async _deleteFactor(t){So(t.userId),So(t.id);try{return{data:await kt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}}}function zb(e={}){return{getItem:t=>e[t]||null,setItem:(t,a)=>{e[t]=a},removeItem:t=>{delete e[t]}}}function a6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ao={debug:!!(globalThis&&qj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class r6 extends Jj{}async function n6(e,t,a){Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await a()}finally{Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new r6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ao.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}a6();const i6={url:p3,storageKey:x3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:v3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wb(e,t,a){return await a()}const Eo={};class mu{constructor(t){var a,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mu.nextInstanceID,mu.nextInstanceID+=1,this.instanceID>0&&Ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},i6),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new s6({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Wj(n.fetch),this.lock=n.lock||wb,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ur()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=n6:this.lock=wb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:qj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zb(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=zb(this.memoryStorage)),Ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=Eo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Eo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Eo[this.storageKey]=Object.assign(Object.assign({},Eo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$j}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=I3(window.location.href);let r="none";if(this._isImplicitGrantCallback(a)?r="implicit":await this._isPKCECallback(a)&&(r="pkce"),Ur()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(a,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),w3(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return xt(a)?{error:a}:{error:new Vj("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,r,n;try{const i=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:On}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var a,r,n;try{let i;if("email"in t){const{email:h,password:g,options:p}=t;let f=null,k=null;this.flowType==="pkce"&&([f,k]=await _o(this.storage,this.storageKey)),i=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:g,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:k},xform:On})}else if("phone"in t){const{phone:h,password:g,options:p}=t;i=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:g,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:On})}else throw new Mh("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let a;if("email"in t){const{email:i,password:l,options:o}=t;a=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jb})}else if("phone"in t){const{phone:i,password:l,options:o}=t;a=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jb})}else throw new Mh("You must provide either an email or phone number and a password");const{data:r,error:n}=a;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Dh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(a){if(xt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,r,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,r,n,i,l,o,c,d,h,g,p,f;let k,_;if("message"in t)k=t.message,_=t.signature;else{const{chain:w,wallet:x,statement:j,options:z}=t;let N;if(Ur())if(typeof x=="object")N=x;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))N=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const $=new URL((a=z==null?void 0:z.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in N&&N.signIn){const q=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z==null?void 0:z.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),j?{statement:j}:null));let G;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")G=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)G=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)k=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),_=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${$.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(n=(r=z==null?void 0:z.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=z==null?void 0:z.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((l=z==null?void 0:z.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((o=z==null?void 0:z.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((c=z==null?void 0:z.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((d=z==null?void 0:z.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((g=(h=z==null?void 0:z.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||g===void 0)&&g.length?["Resources",...z.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const q=await N.signMessage(new TextEncoder().encode(k),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=q}}try{const{data:w,error:x}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:L3(_)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:On});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Dh}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(xt(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const a=await Tl(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(a??"").split("/");try{const{data:i,error:l}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:On});if(await ji(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Dh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:l})}catch(i){if(xt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:a,provider:r,token:n,access_token:i,nonce:l}=t,o=await kt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:On}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Dh}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(xt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,r,n,i,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await _o(this.storage,this.storageKey));const{error:g}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:h}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Mh("You must provide either an email or phone number.")}catch(o){if(xt(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var a,r;try{let n,i;"options"in t&&(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:o}=await kt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:On});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(xt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var a,r,n;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await _o(this.storage,this.storageKey)),await kt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Y3})}catch(i){if(xt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:r}=t;if(r)throw r;if(!a)throw new Ni;const{error:n}=await kt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:i}=t,{error:l}=await kt(this.fetch,"POST",a,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:n,options:i}=t,{data:l,error:o}=await kt(this.fetch,"POST",a,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Mh("You must provide either an email or phone number and a type")}catch(a){if(xt(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await a()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=a();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await Tl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Uf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await Tl(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Vf()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,h)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ti}):await this._useSession(async a=>{var r,n,i;const{data:l,error:o}=a;if(o)throw o;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ni}:await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ti})})}catch(a){if(xt(a))return z3(a)&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Ni;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await _o(this.storage,this.storageKey));const{data:d,error:h}=await kt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Ti});if(h)throw h;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ni;const a=Date.now()/1e3;let r=a,n=!0,i=null;const{payload:l}=Hf(t.access_token);if(l.exp&&(r=l.exp,n=r<=a),n){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-a,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(a){if(xt(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var r;if(!t){const{data:l,error:o}=a;if(o)throw o;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ni;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(xt(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!Ur())throw new Fh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new gb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fh("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new gb("No code detected.");const{data:j,error:z}=await this._exchangeCodeForSession(t.code);if(z)throw z;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!i||!o||!l||!d)throw new Fh("No session defined in URL");const h=Math.round(Date.now()/1e3),g=parseInt(o);let p=h+g;c&&(p=parseInt(c));const f=p-h;f*1e3<=Do&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${g}s`);const k=p-g;h-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,p,h):h-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,p,h);const{data:_,error:w}=await this._getUser(i);if(w)throw w;const x={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:g,expires_at:p,refresh_token:l,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(xt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await Tl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var r;const{data:n,error:i}=a;if(i)return{error:i};const l=(r=n.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(j3(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=P3(),r={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async a=>{var r,n;try{const{data:{session:i},error:l}=a;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,a={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await _o(this.storage,this.storageKey,!0));try{return await kt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(i){if(xt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:a,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(xt(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:r,error:n}=await this._useSession(async i=>{var l,o,c,d,h;const{data:g,error:p}=i;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await kt(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return Ur()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(xt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var r,n;const{data:i,error:l}=a;if(l)throw l;return await kt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(a){if(xt(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const r=Date.now();return await F3(async n=>(n>0&&await M3(200*Math.pow(2,n-1)),this._debug(a,"refreshing attempt",n),await kt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:On})),(n,i)=>{const l=200*Math.pow(2,n);return i&&$f(i)&&Date.now()+l-r<Do})}catch(r){if(this._debug(a,"error",r),xt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",r),Ur()&&!a.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,a;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Tl(this.storage,this.storageKey);if(n&&this.userStorage){let l=await Tl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await Mo(this.userStorage,this.storageKey+"-user",l)),n.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Vf()}else if(n&&!n.user&&!n.user){const l=await Tl(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await ji(this.storage,this.storageKey+"-user"),await Mo(this.storage,this.storageKey,n)):n.user=Vf()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((a=n.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Uf;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Uf}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),$f(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(n.access_token);!o&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var a,r;if(!t)throw new Ni;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new N0;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Ni;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),xt(i)){const l={session:null,error:i};return $f(i)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,a,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",a,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:a});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,a)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),r=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&a.user&&await Mo(this.userStorage,this.storageKey+"-user",{user:a.user});const n=Object.assign({},a);delete n.user;const i=bb(n);await Mo(this.storage,this.storageKey,i)}else{const n=bb(a);await Mo(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await ji(this.storage,this.storageKey),await ji(this.storage,this.storageKey+"-code-verifier"),await ji(this.storage,this.storageKey+"-user"),this.userStorage&&await ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Do);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:r}}=a;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/Do);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Do}ms, refresh threshold is ${Sp} ticks`),n<=Sp&&await this._callRefreshToken(r.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,r){const n=[`provider=${encodeURIComponent(a)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await _o(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var r;const{data:n,error:i}=a;return i?{data:null,error:i}:await kt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(a){if(xt(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var r,n;const{data:i,error:l}=a;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await kt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(xt(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var r;const{data:n,error:i}=a;if(i)return{data:null,error:i};const{data:l,error:o}=await kt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(a){if(xt(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var r;const{data:n,error:i}=a;return i?{data:null,error:i}:await kt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(a){if(xt(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const r=(t==null?void 0:t.factors)||[],n=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,r;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Hf(n.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((r=(a=n.user.factors)===null||a===void 0?void 0:a.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,a={keys:[]}){let r=a.keys.find(o=>o.kid===t);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+b3>n)return r;const{data:i,error:l}=await kt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,a={}){try{let r=t;if(!r){const{data:f,error:k}=await this.getSession();if(k||!f.session)return{data:null,error:k};r=f.session.access_token}const{header:n,payload:i,signature:l,raw:{header:o,payload:c}}=Hf(r);a!=null&&a.allowExpired||V3(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:n,signature:l},error:null}}const h=K3(n.alg),g=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,g,l,C3(`${o}.${c}`)))throw new Cp("Invalid JWT signature");return{data:{claims:i,header:n,signature:l},error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}}mu.nextInstanceID=0;const l6=mu;class o6 extends l6{constructor(t){super(t)}}var c6=function(e,t,a,r){function n(i){return i instanceof a?i:new a(function(l){l(i)})}return new(a||(a=Promise))(function(i,l){function o(h){try{d(r.next(h))}catch(g){l(g)}}function c(h){try{d(r.throw(h))}catch(g){l(g)}}function d(h){h.done?i(h.value):n(h.value).then(o,c)}d((r=r.apply(e,t||[])).next())})};class d6{constructor(t,a,r){var n,i,l;this.supabaseUrl=t,this.supabaseKey=a;const o=g3(t);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:n3,realtime:l3,auth:Object.assign(Object.assign({},i3),{storageKey:c}),global:r3},h=f3(r??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=u3(a,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new N4(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new t3(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new a4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},r={}){return this.rest.rpc(t,a,r)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return c6(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(a=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:l,flowType:o,lock:c,debug:d},h,g){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o6({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:l,autoRefreshToken:t,persistSession:a,detectSessionInUrl:r,storage:n,userStorage:i,flowType:o,lock:c,debug:d,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,r)=>{this._handleTokenChanged(a,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,a,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ev=(e,t,a)=>new d6(e,t,a);function u6(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}u6()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const h6=ev("https://wybmcykpsbkwpapputbw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind5Ym1jeWtwc2Jrd3BhcHB1dGJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDc0MzAsImV4cCI6MjA3NTY4MzQzMH0.2qjVgR3EXIlKq-KMKj6Xx_W4wFuSC6kJwhyJvJg3_6Q");async function m6(e){await new Promise(n=>setTimeout(n,500+Math.random()*1e3));const t=new Date().getFullYear(),a=Math.floor(1e4+Math.random()*9e4);return{sikeres:!0,erkezteto_szam:`ÉRK/${t}/${a}`}}async function f6(e){await new Promise(n=>setTimeout(n,300+Math.random()*700));const t=new Date().getFullYear(),a=Math.floor(1e4+Math.random()*9e4);let r;if(e.elozmeny_iktatoszam){const n=Math.floor(1+Math.random()*99);r=`${e.elozmeny_iktatoszam}/${n}`}else r=`ÉKM/VHF/${t}/${a}`;return{sikeres:!0,iktatoszam:r}}async function g6(e){try{const{data:t,error:a}=await h6.from("vny024_vasutegeszseugyi_nyilvantartas").select("*").eq("nev",e.nev).eq("szuletesi_datum",e.szuletesi_datum).eq("anyja_neve",e.anyja_neve).order("vizsgalat_datuma",{ascending:!1});return a?(console.error("VNY024 lekérdezési hiba:",a),[]):t||[]}catch(t){return console.error("VNY024 lekérdezési hiba:",t),[]}}async function p6(e){const t=await g6(e);if(t.length===0)return{van_korabbi_vizsgalat:!1,osszes_vizsgalat_szam:0};const a=t[0];return{van_korabbi_vizsgalat:!0,utolso_vizsgalat:a,osszes_vizsgalat_szam:t.length,aktualis_alkalmasság:a.alkalmasság,aktualis_korlatozasok:a.korlatozasok||[],ervenyesseg_statusz:a.ervenyesseg_statusz}}const x6="https://wybmcykpsbkwpapputbw.supabase.co",v6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind5Ym1jeWtwc2Jrd3BhcHB1dGJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDc0MzAsImV4cCI6MjA3NTY4MzQzMH0.2qjVgR3EXIlKq-KMKj6Xx_W4wFuSC6kJwhyJvJg3_6Q",xe=ev(x6,v6);class y6{async osszeFelhasznalo(){const{data:t,error:a}=await xe.from("felhasznalok").select("*").order("nev");if(a)throw console.error("Hiba a felhasználók lekérdezésekor:",a),a;return t||[]}async felhasznaloJogokkal(t){const{data:a,error:r}=await xe.from("felhasznalok").select("*").eq("id",t).single();if(r)throw console.error("Hiba a felhasználó lekérdezésekor:",r),r;const{data:n,error:i}=await xe.from("jogosultsagok").select("*").eq("felhasznalo_id",t).order("modul");if(i)throw console.error("Hiba a jogosultságok lekérdezésekor:",i),i;return{...a,jogosultsagok:n||[]}}async ujFelhasznalo(t){const{data:a,error:r}=await xe.from("felhasznalok").insert([t]).select().single();if(r)throw console.error("Hiba az új felhasználó létrehozásakor:",r),r;return a}async frissitFelhasznalo(t,a){const{data:r,error:n}=await xe.from("felhasznalok").update(a).eq("id",t).select().single();if(n)throw console.error("Hiba a felhasználó frissítésekor:",n),n;return r}async torolFelhasznalo(t){const{error:a}=await xe.from("felhasznalok").delete().eq("id",t);if(a)throw console.error("Hiba a felhasználó törlésekor:",a),a}async ujJogosultsag(t){const{data:a,error:r}=await xe.from("jogosultsagok").insert([t]).select().single();if(r)throw console.error("Hiba az új jogosultság létrehozásakor:",r),r;return a}async frissitJogosultsag(t,a){const{data:r,error:n}=await xe.from("jogosultsagok").update(a).eq("id",t).select().single();if(n)throw console.error("Hiba a jogosultság frissítésekor:",n),n;return r}async torolJogosultsag(t){const{error:a}=await xe.from("jogosultsagok").delete().eq("id",t);if(a)throw console.error("Hiba a jogosultság törlésekor:",a),a}async felhasznaloJogosultsagai(t,a){const{data:r,error:n}=await xe.from("jogosultsagok").select("*").eq("felhasznalo_id",t).eq("modul",a).eq("aktiv",!0).order("ervenyesseg_kezdete",{ascending:!1});if(n)throw console.error("Hiba a jogosultságok lekérdezésekor:",n),n;return r||[]}async ellenorizJogosultsag(t,a,r){const{data:n,error:i}=await xe.from("jogosultsagok").select("jogok").eq("felhasznalo_id",t).eq("modul",a).eq("aktiv",!0).gte("ervenyesseg_vege",new Date().toISOString()).or("ervenyesseg_vege.is.null");return i?(console.error("Hiba a jogosultság ellenőrzésekor:",i),!1):!n||n.length===0?!1:n.some(l=>l.jogok.includes(r))}async modulStatisztika(t){const{data:a,error:r}=await xe.from("jogosultsagok").select("felhasznalo_id, szerepkor, ervenyesseg_vege, aktiv").eq("modul",t);if(r)throw console.error("Hiba a modul statisztika lekérdezésekor:",r),r;const n=new Set((a==null?void 0:a.map(d=>d.felhasznalo_id))||[]),i=new Set((a==null?void 0:a.filter(d=>d.aktiv).map(d=>d.felhasznalo_id))||[]),l={};a==null||a.forEach(d=>{l[d.szerepkor]=(l[d.szerepkor]||0)+1});const o=new Date().toISOString(),c=(a==null?void 0:a.filter(d=>d.ervenyesseg_vege&&d.ervenyesseg_vege<o).length)||0;return{osszes_felhasznalo:n.size,aktiv_felhasznalo:i.size,szerepkorok:l,lejart_jogosultsagok:c}}}const Vn=new y6;function b6({rendszer:e,onClose:t,onBejelentkezes:a,onRegisztracio:r}){B.useState(null);const[n,i]=B.useState(null),l=e==="vasúti"?"VIHAR - Vasúti Hatósági Rendszer":"VIHAR - Hajózási Hatósági Rendszer",o=d=>{i(n===d?null:d)},c=(d,h)=>{a(d,h)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true",onClick:t,children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex",onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"flex-1 p-8 bg-white overflow-y-auto",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-xl",children:"iD"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-neutral-900",children:"Bejelentkezés"}),s.jsx("p",{className:"text-neutral-600 text-sm mt-0.5",children:"Válasszon azonosítási módot!"})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors","aria-label":"Bezárás",children:s.jsx(es,{className:"h-6 w-6 text-neutral-600"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>o("DAP"),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl p-5 text-left transition-all font-semibold text-lg shadow-md",children:"DÁP mobilalkalmazás"}),s.jsxs("div",{className:"border-2 border-indigo-400 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>o("UGYFELKAPU"),className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 p-5 text-left transition-all font-semibold text-lg flex items-center justify-between",children:[s.jsx("span",{children:"Ügyfélkapu+"}),n==="UGYFELKAPU"?s.jsx(du,{className:"h-5 w-5"}):s.jsx(Ws,{className:"h-5 w-5"})]}),n==="UGYFELKAPU"&&s.jsxs("div",{className:"bg-white p-4 space-y-2 border-t border-indigo-200",children:[s.jsxs("button",{onClick:()=>c("UGYFELKAPU_HITELES","ügyfél"),className:"w-full bg-white hover:bg-indigo-50 text-indigo-700 border border-indigo-300 rounded-lg p-3 text-left transition-all font-medium flex items-center gap-2",children:[s.jsx($_,{className:"h-5 w-5"}),"Ügyfélkapu+ hitelesítő alkalmazással"]}),s.jsxs("button",{onClick:()=>c("UGYFELKAPU_EMAIL","ügyfél"),className:"w-full bg-white hover:bg-indigo-50 text-indigo-700 border border-indigo-300 rounded-lg p-3 text-left transition-all font-medium flex items-center gap-2",children:[s.jsx(Kx,{className:"h-5 w-5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{children:"Ügyfélkapu+ e-mailes kóddal"}),s.jsx("div",{className:"text-xs text-indigo-500 font-normal mt-0.5",children:"Demo: Kovács János (demo@vasut.hu)"})]})]})]})]}),s.jsxs("div",{className:"border-2 border-blue-400 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>o("KEYCLOAK"),className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-700 p-5 text-left transition-all font-semibold text-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(kc,{className:"h-6 w-6"}),s.jsx("span",{children:"Belső SSO (Keycloak)"})]}),n==="KEYCLOAK"?s.jsx(du,{className:"h-5 w-5"}):s.jsx(Ws,{className:"h-5 w-5"})]}),n==="KEYCLOAK"&&s.jsxs("div",{className:"bg-white p-4 space-y-2 border-t border-blue-200",children:[s.jsxs("button",{onClick:()=>c("KEYCLOAK_2FA","ügyintéző"),className:"w-full bg-white hover:bg-blue-50 text-blue-700 border border-blue-300 rounded-lg p-3 text-left transition-all font-medium flex items-center gap-2",children:[s.jsx(T_,{className:"h-5 w-5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{children:"Kétfaktoros hitelesítés (2FA)"}),s.jsx("div",{className:"text-xs text-blue-500 font-normal mt-0.5",children:"Belső ügyintézők és adminisztrátorok részére"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs text-blue-700",children:[s.jsx("p",{className:"font-medium mb-1",children:"ℹ️ Keycloak authentikáció"}),s.jsx("p",{children:"Felhasználónév, jelszó és kétfaktoros azonosító kód szükséges a bejelentkezéshez."})]})]})]}),s.jsxs("div",{className:"flex gap-4 pt-2",children:[s.jsx("a",{href:"#",className:"flex-1 text-center text-indigo-700 hover:text-indigo-900 font-medium py-3 underline",onClick:d=>{d.preventDefault(),alert("Súgó és dokumentáció hamarosan elérhető")},children:"Súgó"}),r&&s.jsx("a",{href:"#",className:"flex-1 text-center text-green-700 hover:text-green-900 font-semibold py-3 underline",onClick:d=>{d.preventDefault(),r()},children:"Regisztráció"})]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-neutral-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3 uppercase tracking-wide",children:"Demo szerepkör választás"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:()=>c("DAP","ügyfél"),className:"px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm",children:"Ügyfél"}),s.jsx("button",{onClick:()=>c("DAP","ügyintéző"),className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm",children:"Ügyintéző"}),s.jsx("button",{onClick:()=>c("DAP","szignáló"),className:"px-4 py-2.5 bg-orange-600 hover:bg-orange-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm",children:"Szignáló"}),s.jsx("button",{onClick:()=>c("DAP","vezető"),className:"px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm",children:"Vezető"}),s.jsx("button",{onClick:()=>c("DAP","admin"),className:"px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm col-span-2",children:"Admin"})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2 text-center",children:"Demo környezet - válasszon szerepkört a teszteléshez"})]})]}),s.jsxs("div",{className:"hidden lg:block w-[450px] bg-gradient-to-br from-indigo-50 to-blue-50 p-8 border-l border-indigo-100",children:[s.jsxs("div",{className:"bg-blue-100 rounded-xl p-6 mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-blue-900 mb-3 flex items-center gap-2",children:[s.jsx(kc,{className:"h-6 w-6"}),"Belső SSO Keycloak 2FA"]}),s.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mb-4",children:"A hatósági dolgozók számára elérhető kétfaktoros bejelentkezés Keycloak SSO rendszeren keresztül. Fokozott biztonság TOTP alapú második faktoros azonosítással."}),s.jsx("a",{href:"#",className:"text-blue-700 font-semibold text-sm hover:underline",children:"További információk →"})]}),s.jsxs("div",{className:"bg-indigo-100 rounded-xl p-6 mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-indigo-900 mb-3",children:"Váltson Ügyfélkapu+-ra!"}),s.jsx("p",{className:"text-indigo-800 text-sm leading-relaxed mb-4",children:"Állítsa be a kétfaktoros azonosítást, és jelentkezzen be biztonságosabban, hitelesítő alkalmazással vagy e-mailes kóddal."}),s.jsx("a",{href:"#",className:"text-indigo-700 font-semibold text-sm hover:underline",children:"További információk →"})]}),s.jsxs("div",{className:"bg-indigo-600 rounded-xl p-6 text-white",children:[s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Töltse le a Digitális Állampolgár mobilalkalmazást!"}),s.jsx("p",{className:"text-indigo-100 text-sm leading-relaxed mb-4",children:"Az alkalmazással felhasználónév és jelszó nélkül, QR-kód beolvasásával jelentkezhet be."}),s.jsx("div",{className:"bg-white rounded-lg p-4 mb-4",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"w-32 h-32 bg-neutral-200 rounded-lg flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-neutral-500 text-center",children:["QR kód",s.jsx("br",{}),"mock"]})})})}),s.jsx("a",{href:"#",className:"text-white font-semibold text-sm hover:underline",children:"További információk →"}),s.jsxs("div",{className:"mt-6 flex gap-3",children:[s.jsxs("a",{href:"#",className:"flex-1 bg-black hover:bg-neutral-800 text-white rounded-lg px-4 py-2 text-xs font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx("span",{children:"Letölthető az"}),s.jsx("span",{className:"font-bold",children:"App Store-ból"})]}),s.jsxs("a",{href:"#",className:"flex-1 bg-black hover:bg-neutral-800 text-white rounded-lg px-4 py-2 text-xs font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx("span",{children:"SZEREZD MEG:"}),s.jsx("span",{className:"font-bold",children:"Google Play"})]})]})]}),s.jsxs("div",{className:"mt-6 text-xs text-neutral-600 text-center",children:[s.jsx("p",{className:"font-semibold mb-1",children:l}),s.jsx("p",{children:"Biztonságos és modern azonosítás"})]})]})]})})}function k6(e){const t=new Date().getFullYear(),a={maganszemely:"MAG",jogi_szemely_kepviselo:"JOG",megbizott:"MEG"}[e]||"XXX",r=Math.floor(Math.random()*9e3)+1e3;return`EP-${t}-${a}-${r}`}async function j6(e){try{const{data:t,error:a}=await xe.from("regisztralt_felhasznalok").select("email").eq("email",e.email).maybeSingle();if(a)return console.error("Email ellenőrzési hiba:",a),{success:!1,error:"Adatbázis hiba az email ellenőrzése során"};if(t)return{success:!1,error:"Ez az email cím már regisztrálva van"};const r=k6(e.regisztracio_tipus),n=e.regisztracio_tipus==="maganszemely"&&(e.azonositas_mod==="kau"||e.azonositas_mod==="dap"),{data:i,error:l}=await xe.from("regisztralt_felhasznalok").insert({regisztracio_tipus:e.regisztracio_tipus,azonositas_mod:e.azonositas_mod,epersonal_id:r,email:e.email,teljes_nev:e.teljes_nev,szervezet_nev:e.szervezet_nev,adatok:e.adatok,allapot:"aktiv",jovahagyva:n}).select().single();return l?(console.error("Regisztrációs hiba:",l),{success:!1,error:"Hiba történt a regisztráció során"}):{success:!0,data:i}}catch(t){return console.error("Váratlan hiba a regisztráció során:",t),{success:!1,error:"Váratlan hiba történt"}}}const fu=["Kiss","Nagy","Szabó","Tóth","Varga","Horváth","Kovács","Molnár","Balogh","Farkas"],Zm=["János","László","István","Péter","Gábor","Zoltán","András","Ferenc","József","Tamás"],Ym=["Anna","Mária","Éva","Katalin","Erzsébet","Judit","Andrea","Zsuzsa","Ilona","Margit"],Gj=["Budapest","Debrecen","Szeged","Pécs","Győr","Miskolc","Kecskemét","Székesfehérvár","Szombathely","Nyíregyháza"],Zj=["Kossuth utca","Petőfi utca","Rákóczi út","Arany János utca","Dózsa György út","Bem tér","Jókai utca","Szabadság tér"];function as(e){return e[Math.floor(Math.random()*e.length)]}function Ys(e,t){return Math.floor(Math.random()*(t-e+1))+e}function z6(e,t){const a=Ys(e,t),r=String(Ys(1,12)).padStart(2,"0"),n=String(Ys(1,28)).padStart(2,"0");return`${a}-${r}-${n}`}function w6(){const e=as(fu),t=Math.random()>.5?as(Zm):as(Ym),a=as(Gj);return{nev:`${e} ${t}`,anyja_neve:`${as(fu)} ${as(Ym)}`,szul_hely:a,szul_ido:z6(1970,2e3),email:`${e.toLowerCase()}.${t.toLowerCase()}@email.hu`,telefon:`+36-${Ys(20,70)}-${Ys(100,999)}-${Ys(1e3,9999)}`,lakcim:`${Ys(1e3,9999)} ${a}, ${as(Zj)} ${Ys(1,100)}.`}}function N6(){const e=["Rail","Vasút","Trans","Cargo","Express","Tech","Service","Industrial"],t=["Kft.","Zrt.","Bt.","Nonprofit Kft."],a=as(Gj),r=as(fu),n=Math.random()>.5?as(Zm):as(Ym),i=`${as(e)}${as(e)} ${as(t)}`;return{kepviselo_nev:`${r} ${n}`,szervezet_nev:i,adoszam:`${Ys(1e7,99999999)}-2-${Ys(40,44)}`,cegjegyzek:`01-${Ys(10,19)}-${Ys(1e5,999999)}`,szekhely:`${Ys(1e3,9999)} ${a}, ${as(Zj)} ${Ys(1,100)}.`,email:`${r.toLowerCase()}.${n.toLowerCase()}@${i.split(" ")[0].toLowerCase()}.hu`}}function _6(){const e=as(fu),t=Math.random()>.5?as(Zm):as(Ym),a=["Rail","Vasút","Trans","Cargo","Express"],r=["Kft.","Zrt."],n=`${as(a)}${as(a)} ${as(r)}`,i=["ügyfélszolgálati munkatárs","jogi képviselő","asszisztens","ügyintéző","koordinátor"],l=["kérelem_benyújtás","ügyek_megtekintése","hiánypótlás","dokumentumok_kezelése"],o=Ys(1,3),c=[];for(let d=0;d<o;d++){const h=as(l);c.includes(h)||c.push(h)}return{nev:`${e} ${t}`,email:`${e.toLowerCase()}.${t.toLowerCase()}@${n.split(" ")[0].toLowerCase()}.hu`,telefon:`+36-${Ys(20,70)}-${Ys(100,999)}-${Ys(1e3,9999)}`,szervezet:n,megbizo:`${as(fu)} ${as(Zm)}`,beosztas:as(i),jogosultsagok:c}}const S6=[{nev:"Kiss Anna",anyja_neve:"Nagy Éva",szul_hely:"Budapest",szul_ido:"1985-03-15",email:"kiss.anna@email.hu",telefon:"+36-30-123-4567",lakcim:"1056 Budapest, Váci utca 12. 3/5"},{nev:"Szabó Péter",anyja_neve:"Kovács Mária",szul_hely:"Debrecen",szul_ido:"1990-07-22",email:"szabo.peter@email.hu",telefon:"+36-20-987-6543",lakcim:"4032 Debrecen, Kossuth utca 45."},{nev:"Tóth Zoltán",anyja_neve:"Horváth Ilona",szul_hely:"Szeged",szul_ido:"1978-11-08",email:"toth.zoltan@email.hu",telefon:"+36-70-555-1234",lakcim:"6720 Szeged, Kálvária sugárút 8."}],A6=[{nev:"MÁV Vasútépítő Kft.",adoszam:"12345678-2-41",cegjegyzek:"01-09-123456",szekhely:"1087 Budapest, Könyves Kálmán körút 54-60.",kepviselo:"Kiss Anna"},{nev:"Railtech Mérnöki Iroda Zrt.",adoszam:"98765432-2-44",cegjegyzek:"01-10-987654",szekhely:"1132 Budapest, Váci út 76.",kepviselo:"Szabó Péter"},{nev:"VasútTanúsító Nonprofit Kft.",adoszam:"45678912-2-43",cegjegyzek:"01-09-456789",szekhely:"1054 Budapest, Akadémia utca 17.",kepviselo:"Tóth Zoltán"}],E6=[{nev:"Varga Mária",email:"varga.maria@mavkft.hu",telefon:"+36-30-111-2222",szervezet:"MÁV Vasútépítő Kft.",megbizo:"Kovács János",beosztas:"ügyfélszolgálati munkatárs",jogosultsagok:["kérelem_benyújtás","ügyek_megtekintése"]},{nev:"Lakatos István",email:"lakatos.istvan@railtech.hu",telefon:"+36-20-333-4444",szervezet:"Railtech Mérnöki Iroda Zrt.",megbizo:"Nagy Éva",beosztas:"jogi képviselő",jogosultsagok:["kérelem_benyújtás","ügyek_megtekintése","hiánypótlás"]},{nev:"Molnár Eszter",email:"molnar.eszter@mavkft.hu",telefon:"+36-70-555-6666",szervezet:"MÁV Vasútépítő Kft.",megbizo:"Kovács János",beosztas:"asszisztens",jogosultsagok:["kérelem_benyújtás"]}];function C6({rendszer:e,onClose:t,onSikeres:a}){const[r,n]=B.useState("tipus"),[i,l]=B.useState(null),[o,c]=B.useState(null),[d,h]=B.useState(null),[g,p]=B.useState(null),[f,k]=B.useState(null),[_,w]=B.useState(!1),[x,j]=B.useState(!1),[z,N]=B.useState(null),[$,q]=B.useState(null),G=e==="vasúti"?"VIHAR - Vasúti Hatósági Rendszer":"VIHAR - Hajózási Hatósági Rendszer",D=V=>{l(V),n("azonositas")},I=V=>{c(V),i==="maganszemely"?n("termeszetes_adatok"):i==="jogi_szemely_kepviselo"?n("jogi_adatok"):i==="megbizott"&&n("megbizott_adatok")},R=V=>{h(V),n("osszegzes")},y=V=>{p(V),n("osszegzes")},A=V=>{k(V),n("osszegzes")},E=()=>{const V=w6();h(V),n("osszegzes")},L=()=>{const V=N6();p({nev:V.szervezet_nev,adoszam:V.adoszam,cegjegyzek:V.cegjegyzek,szekhely:V.szekhely,kepviselo:V.kepviselo_nev}),n("osszegzes")},M=()=>{const V=_6();k(V),n("osszegzes")},ee=async()=>{if(!(!i||!o)){j(!0),N(null);try{let V;if(i==="maganszemely"&&d)V={regisztracio_tipus:"maganszemely",azonositas_mod:o,email:d.email,teljes_nev:d.nev,adatok:{anyja_neve:d.anyja_neve,szul_hely:d.szul_hely,szul_ido:d.szul_ido,telefon:d.telefon,lakcim:d.lakcim}};else if(i==="jogi_szemely_kepviselo"&&g)V={regisztracio_tipus:"jogi_szemely_kepviselo",azonositas_mod:o,email:`${g.kepviselo.toLowerCase().replace(" ",".")}@${g.nev.split(" ")[0].toLowerCase()}.hu`,teljes_nev:g.kepviselo,szervezet_nev:g.nev,adatok:{adoszam:g.adoszam,cegjegyzek:g.cegjegyzek,szekhely:g.szekhely,kepviselo_beosztas:"ügyvezető"}};else if(i==="megbizott"&&f)V={regisztracio_tipus:"megbizott",azonositas_mod:o,email:f.email,teljes_nev:f.nev,szervezet_nev:f.szervezet,adatok:{megbizo_nev:f.megbizo,telefon:f.telefon,beosztas:f.beosztas,jogosultsagok:f.jogosultsagok}};else{N("Hibás regisztrációs adatok"),j(!1);return}const le=await j6(V);le.success&&le.data?(q(le.data.epersonal_id),w(!0),setTimeout(()=>{a()},3e3)):N(le.error||"Ismeretlen hiba történt a regisztráció során")}catch(V){console.error("Regisztráció hiba:",V),N("Váratlan hiba történt a regisztráció során")}finally{j(!1)}}},ce=()=>{r==="azonositas"?(n("tipus"),l(null)):r==="termeszetes_adatok"||r==="jogi_adatok"||r==="megbizott_adatok"?(n("azonositas"),c(null)):r==="osszegzes"&&(i==="maganszemely"?(n("termeszetes_adatok"),h(null)):i==="jogi_szemely_kepviselo"?(n("jogi_adatok"),p(null)):i==="megbizott"&&(n("megbizott_adatok"),k(null)))};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true",onClick:t,children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:V=>V.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:s.jsx(os,{className:"h-6 w-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Regisztráció"}),s.jsx("p",{className:"text-sm text-green-50",children:G})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors","aria-label":"Bezárás",children:s.jsx(es,{className:"h-6 w-6"})})]})}),s.jsx("div",{className:"bg-neutral-50 px-6 py-4 border-b border-neutral-200",children:s.jsxs("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:[s.jsxs("div",{className:`flex items-center gap-2 ${r==="tipus"?"text-green-600 font-semibold":"text-neutral-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r==="tipus"?"bg-green-600 text-white":"bg-neutral-200"}`,children:"1"}),s.jsx("span",{className:"text-sm",children:"Típus"})]}),s.jsx(Ws,{className:"h-4 w-4 text-neutral-400"}),s.jsxs("div",{className:`flex items-center gap-2 ${r==="azonositas"?"text-green-600 font-semibold":"text-neutral-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r==="azonositas"?"bg-green-600 text-white":"bg-neutral-200"}`,children:"2"}),s.jsx("span",{className:"text-sm",children:"Azonosítás"})]}),s.jsx(Ws,{className:"h-4 w-4 text-neutral-400"}),s.jsxs("div",{className:`flex items-center gap-2 ${r==="termeszetes_adatok"||r==="jogi_adatok"||r==="megbizott_adatok"?"text-green-600 font-semibold":"text-neutral-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r==="termeszetes_adatok"||r==="jogi_adatok"||r==="megbizott_adatok"?"bg-green-600 text-white":"bg-neutral-200"}`,children:"3"}),s.jsx("span",{className:"text-sm",children:"Adatok"})]}),s.jsx(Ws,{className:"h-4 w-4 text-neutral-400"}),s.jsxs("div",{className:`flex items-center gap-2 ${r==="osszegzes"?"text-green-600 font-semibold":"text-neutral-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r==="osszegzes"?"bg-green-600 text-white":"bg-neutral-200"}`,children:"4"}),s.jsx("span",{className:"text-sm",children:"Összegzés"})]})]})}),s.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 250px)"},children:[r==="tipus"&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-6",children:"Válassza ki a regisztráció típusát"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{onClick:()=>D("maganszemely"),className:"w-full bg-white border-2 border-green-300 hover:border-green-500 hover:bg-green-50 rounded-xl p-6 text-left transition-all",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(os,{className:"h-8 w-8 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-bold text-neutral-900 mb-2",children:"Magánszemély"}),s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:"Természetes személy regisztrációja saját nevében történő ügyintézéshez"}),s.jsxs("ul",{className:"text-xs text-neutral-500 space-y-1",children:[s.jsx("li",{children:"• ePersonalID generálás"}),s.jsx("li",{children:"• Személyes fiók létrehozása"}),s.jsx("li",{children:"• Később képviselhet jogi személyeket"})]})]})]})}),s.jsx("button",{onClick:()=>D("jogi_szemely_kepviselo"),className:"w-full bg-white border-2 border-blue-300 hover:border-blue-500 hover:bg-blue-50 rounded-xl p-6 text-left transition-all",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(yc,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-bold text-neutral-900 mb-2",children:"Jogi személy / Szervezet"}),s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:"Cég vagy szervezet regisztrációja (természetes személy fiókkal kell rendelkeznie)"}),s.jsxs("ul",{className:"text-xs text-neutral-500 space-y-1",children:[s.jsx("li",{children:"• Képviselő azonosítása szükséges"}),s.jsx("li",{children:"• Hivatalos dokumentumok csatolása"}),s.jsx("li",{children:"• Ügyintézői jóváhagyás szükséges"})]})]})]})}),s.jsx("button",{onClick:()=>D("megbizott"),className:"w-full bg-white border-2 border-orange-300 hover:border-orange-500 hover:bg-orange-50 rounded-xl p-6 text-left transition-all",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(De,{className:"h-8 w-8 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-bold text-neutral-900 mb-2",children:"Megbízott személy"}),s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:"Jogosultságkezelő szerepkör - meghatalmazással rendelkező ügyintéző"}),s.jsxs("ul",{className:"text-xs text-neutral-500 space-y-1",children:[s.jsx("li",{children:"• Jogi személy nevében eljárás"}),s.jsx("li",{children:"• Meghatalmazás/megbízólevél alapján"}),s.jsx("li",{children:"• Korlátozott jogosultságok"})]})]})]})})]}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Fontos információ"}),s.jsx("p",{children:"Csak természetes személy nyithat fiókot a rendszerben. Jogi személy és megbízott regisztrációjához már rendelkeznie kell személyes fiókkal."})]})]})})]}),r==="azonositas"&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Válassza ki az azonosítási módot"}),s.jsxs("p",{className:"text-sm text-neutral-600 mb-6",children:[i==="maganszemely"&&"Természetes személy azonosítása",i==="jogi_szemely_kepviselo"&&"Képviselő azonosítása a jogi személy regisztrációjához",i==="megbizott"&&"Megbízott személy azonosítása"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>I("kau"),className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white rounded-xl p-4 text-left transition-all",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-1",children:"Ügyfélkapu+ (KAÜ)"}),s.jsx("p",{className:"text-sm text-green-50",children:"Automatikus azonosítás, azonnali aktiválás"})]}),s.jsx(Ws,{className:"h-6 w-6"})]})}),s.jsx("button",{onClick:()=>I("dap"),className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-xl p-4 text-left transition-all",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-1",children:"Digitális Állampolgár (DÁP)"}),s.jsx("p",{className:"text-sm text-blue-50",children:"Automatikus azonosítás, azonnali aktiválás"})]}),s.jsx(Ws,{className:"h-6 w-6"})]})}),s.jsx("button",{onClick:()=>I("szemelyesen"),className:"w-full bg-white border-2 border-neutral-300 hover:border-neutral-400 hover:bg-neutral-50 rounded-xl p-4 text-left transition-all",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-neutral-900 mb-1",children:"Személyes / Videós azonosítás"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Ügyintézői közreműködéssel, jóváhagyás szükséges"})]}),s.jsx(Ws,{className:"h-6 w-6 text-neutral-400"})]})}),s.jsx("button",{onClick:()=>I("edig"),className:"w-full bg-white border-2 border-neutral-300 hover:border-neutral-400 hover:bg-neutral-50 rounded-xl p-4 text-left transition-all",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-neutral-900 mb-1",children:"Digitális aláírás (eIDAS)"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Hitelesítésszolgáltató tanúsítvánnyal"})]}),s.jsx(Ws,{className:"h-6 w-6 text-neutral-400"})]})})]}),s.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-amber-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Demo mód"}),s.jsx("p",{children:"Az automatikus módok (KAÜ, DÁP) azonnali regisztrációt eredményeznek mockolt adatokkal."})]})]})})]}),r==="termeszetes_adatok"&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Válasszon egy teszt személyt"}),s.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Demo környezetben - válasszon az alábbi mockolt személyek közül, vagy adja meg manuálisan az adatokat"}),s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:E,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-xl p-4 text-left transition-all shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ff,{className:"h-6 w-6"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-1",children:"Random személy generálása"}),s.jsx("p",{className:"text-sm text-blue-50",children:"Véletlenszerű tesztadatok gyors kitöltéshez"})]})]}),s.jsx(Ws,{className:"h-6 w-6"})]})})}),s.jsxs("div",{className:"my-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 border-t border-neutral-300"}),s.jsx("span",{className:"text-sm text-neutral-500 font-medium",children:"vagy válasszon mockolt adatot"}),s.jsx("div",{className:"flex-1 border-t border-neutral-300"})]}),s.jsx("div",{className:"space-y-3",children:S6.map((V,le)=>s.jsx("button",{onClick:()=>R(V),className:"w-full bg-white border-2 border-neutral-200 hover:border-green-400 hover:bg-green-50 rounded-xl p-5 text-left transition-all",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-lg text-neutral-900 mb-3",children:V.nev}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Anyja neve:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.anyja_neve})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Születési hely:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.szul_hely})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Születési idő:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.szul_ido})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Email:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.email})]})]})]}),s.jsx(Ws,{className:"h-6 w-6 text-neutral-400 flex-shrink-0 ml-4"})]})},le))})]}),r==="jogi_adatok"&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Válasszon egy teszt szervezetet"}),s.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Demo környezetben - random generálás vagy mockolt adatok"}),s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:L,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-xl p-4 text-left transition-all shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ff,{className:"h-6 w-6"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-1",children:"Random szervezet generálása"}),s.jsx("p",{className:"text-sm text-blue-50",children:"Véletlenszerű cégadatok gyors kitöltéshez"})]})]}),s.jsx(Ws,{className:"h-6 w-6"})]})})}),s.jsxs("div",{className:"my-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 border-t border-neutral-300"}),s.jsx("span",{className:"text-sm text-neutral-500 font-medium",children:"vagy válasszon mockolt adatot"}),s.jsx("div",{className:"flex-1 border-t border-neutral-300"})]}),s.jsx("div",{className:"space-y-3",children:A6.map((V,le)=>s.jsx("button",{onClick:()=>y(V),className:"w-full bg-white border-2 border-neutral-200 hover:border-blue-400 hover:bg-blue-50 rounded-xl p-5 text-left transition-all",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-lg text-neutral-900 mb-3",children:V.nev}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Adószám:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.adoszam})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Cégjegyzék:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.cegjegyzek})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Székhely:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.szekhely})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Képviselő:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.kepviselo})]})]})]}),s.jsx(Ws,{className:"h-6 w-6 text-neutral-400 flex-shrink-0 ml-4"})]})},le))})]}),r==="megbizott_adatok"&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Válasszon egy teszt megbízott személyt"}),s.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Demo környezetben - random generálás vagy mockolt adatok"}),s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:M,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-xl p-4 text-left transition-all shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ff,{className:"h-6 w-6"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg mb-1",children:"Random megbízott generálása"}),s.jsx("p",{className:"text-sm text-blue-50",children:"Véletlenszerű megbízotti adatok gyors kitöltéshez"})]})]}),s.jsx(Ws,{className:"h-6 w-6"})]})})}),s.jsxs("div",{className:"my-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 border-t border-neutral-300"}),s.jsx("span",{className:"text-sm text-neutral-500 font-medium",children:"vagy válasszon mockolt adatot"}),s.jsx("div",{className:"flex-1 border-t border-neutral-300"})]}),s.jsx("div",{className:"space-y-3",children:E6.map((V,le)=>s.jsx("button",{onClick:()=>A(V),className:"w-full bg-white border-2 border-neutral-200 hover:border-orange-400 hover:bg-orange-50 rounded-xl p-5 text-left transition-all",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-lg text-neutral-900 mb-3",children:V.nev}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Email:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Telefon:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.telefon})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Szervezet:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.szervezet})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Megbízó:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.megbizo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Beosztás:"}),s.jsx("p",{className:"text-neutral-700 font-medium",children:V.beosztas})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Jogosultságok:"}),s.jsx("p",{className:"text-neutral-700 font-medium text-xs",children:V.jogosultsagok.join(", ")})]})]})]}),s.jsx(Ws,{className:"h-6 w-6 text-neutral-400 flex-shrink-0 ml-4"})]})},le))})]}),r==="osszegzes"&&!_&&s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-6",children:"Regisztráció összegzése"}),s.jsx("div",{className:"bg-neutral-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-neutral-500",children:"Regisztráció típusa:"}),s.jsxs("p",{className:"text-lg font-semibold text-neutral-900",children:[i==="maganszemely"&&"Magánszemély",i==="jogi_szemely_kepviselo"&&"Jogi személy képviselője",i==="megbizott"&&"Megbízott személy"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-neutral-500",children:"Azonosítási mód:"}),s.jsxs("p",{className:"text-lg font-semibold text-neutral-900",children:[o==="kau"&&"Ügyfélkapu+ (KAÜ)",o==="dap"&&"Digitális Állampolgár (DÁP)",o==="szemelyesen"&&"Személyes / Videós azonosítás",o==="edig"&&"Digitális aláírás (eIDAS)"]})]}),s.jsxs("div",{className:"border-t border-neutral-200 pt-4",children:[i==="maganszemely"&&d&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Személyes adatok:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Név:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.nev})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Anyja neve:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.anyja_neve})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Születési hely:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.szul_hely})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Születési idő:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.szul_ido})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Email:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Telefon:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.telefon})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Lakcím:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:d.lakcim})]})]})]}),i==="jogi_szemely_kepviselo"&&g&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Szervezet adatai:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Név:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:g.nev})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Adószám:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:g.adoszam})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Cégjegyzék:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:g.cegjegyzek})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Székhely:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:g.szekhely})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Képviselő:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:g.kepviselo})]})]})]}),i==="megbizott"&&f&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Megbízott adatai:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Név:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:f.nev})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Email:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:f.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Telefon:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:f.telefon})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Szervezet:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:f.szervezet})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Megbízó:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:f.megbizo})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-500",children:"Beosztás:"}),s.jsx("p",{className:"text-neutral-900 font-medium",children:f.beosztas})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-neutral-500",children:"Jogosultságok:"}),s.jsx("p",{className:"text-neutral-900 font-medium text-xs",children:f.jogosultsagok.join(", ")})]})]})]})]})]})}),z&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-red-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Hiba történt"}),s.jsx("p",{children:z})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-green-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Szolgáltatási feltételek"}),s.jsx("p",{children:"A regisztrációval elfogadja a VIHAR rendszer használati feltételeit és adatvédelmi szabályzatát."})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:ce,disabled:x,className:"flex-1 px-6 py-3 bg-neutral-200 hover:bg-neutral-300 text-neutral-700 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Vissza"}),s.jsxs("button",{onClick:ee,disabled:x,className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[x&&s.jsx(jj,{className:"h-5 w-5 animate-spin"}),x?"Regisztráció folyamatban...":"Regisztráció véglegesítése"]})]})]}),_&&s.jsxs("div",{className:"max-w-md mx-auto text-center py-12",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4",children:s.jsx(E_,{className:"h-12 w-12 text-green-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Sikeres regisztráció!"}),s.jsxs("p",{className:"text-neutral-600 mb-4",children:[i==="maganszemely"&&"Magánszemély fiókja sikeresen létrehozva.",i==="jogi_szemely_kepviselo"&&"Jogi személy képviselő regisztrációs kérelme elküldve ügyintézői jóváhagyásra.",i==="megbizott"&&"Megbízott személy regisztrációja sikeres."]}),$&&s.jsxs("div",{className:"inline-block bg-blue-100 border border-blue-300 rounded-lg px-6 py-3 mb-4",children:[s.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:"ePersonalID"}),s.jsx("p",{className:"text-xl font-bold text-blue-900 font-mono",children:$})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Következő lépések:"}),s.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[s.jsx("li",{children:"• Email megerősítés elküldve a megadott címre"}),s.jsx("li",{children:"• Bejelentkezés a választott azonosítási móddal"}),i==="jogi_szemely_kepviselo"&&s.jsx("li",{children:"• Várakozás az ügyintézői jóváhagyásra (1-2 munkanap)"}),i==="megbizott"&&s.jsx("li",{children:"• Megbízó jóváhagyása szükséges a jogosultságok aktiválásához"})]})]}),s.jsx("p",{className:"text-sm text-neutral-500",children:"Átirányítás a bejelentkezéshez..."})]})]}),r!=="tipus"&&r!=="osszegzes"&&!_&&s.jsx("div",{className:"border-t border-neutral-200 p-4 bg-neutral-50",children:s.jsx("button",{onClick:ce,className:"px-6 py-2 bg-neutral-200 hover:bg-neutral-300 text-neutral-700 rounded-lg font-medium transition-colors",children:"Vissza"})})]})})}function L6({onRendszerInditas:e}){const[t,a]=B.useState(null),[r,n]=B.useState(null),i=[{id:1,datum:"2025. október 8.",cim:"Új vasúti biztonsági előírások léptek életbe",leiras:"A 2025. október 1-jétől hatályos új EU rendelet szerint minden vasúti járműnek meg kell felelnie a fokozott biztonsági követelményeknek.",kategoria:"Jogszabály",rendszer:"vasúti"},{id:2,datum:"2025. október 5.",cim:"Hajózási engedélyek online benyújtása",leiras:"Mostantól a hajózási engedélykérelmek teljes egészében elektronikusan is benyújthatók a VAHAP rendszeren keresztül.",kategoria:"Szolgáltatás",rendszer:"hajózási"},{id:3,datum:"2025. október 1.",cim:"Karbantartási időszak - október 15.",leiras:"Tervezett rendszerkarbantartás miatt október 15-én 22:00 és 24:00 között a VAHAP rendszer nem lesz elérhető.",kategoria:"Rendszer",rendszer:"közös"}],l=[{kerdes:"Hogyan nyújthatok be engedélykérelmet?",valasz:'Válassza ki a megfelelő rendszert (Vasúti vagy Hajózási), jelentkezzen be, majd kattintson az "Új kérelem benyújtása" gombra.'},{kerdes:"Mennyi az engedély ügyintézési ideje?",valasz:"Az átlagos ügyintézési idő 30-45 munkanap, sürgős eljárás esetén 15 munkanap."},{kerdes:"Milyen dokumentumokat kell csatolnom?",valasz:"Műszaki dokumentáció, gyártói tanúsítvány, biztosítási kötvény és tulajdonjog igazolás szükséges."}],o=(h,g)=>{t&&(e(t,h,g),a(null))},c=()=>{t&&(n(t),a(null))},d=()=>{n(null),alert("Regisztráció sikeres! Most már bejelentkezhet a rendszerbe.")};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx("div",{className:"bg-primary-600 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"VAHAP Központi Portál"}),s.jsx("p",{className:"text-xl text-primary-100 max-w-3xl",children:"Vasúti és Hajózási Integrált Hatósági Rendszer - Válasszon az alábbi szakrendszerek közül"})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-10",children:[s.jsx("h2",{className:"text-3xl font-bold text-neutral-900 mb-6",children:"Szakrendszerek"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[s.jsx(se,{className:"bg-white border-2 border-primary-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"bg-primary-100 p-4 rounded-lg",children:s.jsx(wj,{className:"h-12 w-12 text-primary-600","aria-hidden":"true"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-neutral-900",children:"Vasúti Hatósági Szakrendszer"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Alrendszerek és ügytípusok kezelése"})]})]}),s.jsxs("div",{className:"bg-neutral-50 rounded-md p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-neutral-800 mb-2",children:"Elérhető alrendszerek:"}),s.jsxs("ul",{className:"space-y-1 text-sm text-neutral-700",children:[s.jsx("li",{children:"• Járművezetői alkalmassági vizsgálatok"}),s.jsx("li",{children:"• Járműengedélyezési eljárások"}),s.jsx("li",{children:"• Műszaki felülvizsgálatok"}),s.jsx("li",{children:"• Nyilvántartások kezelése"})]})]}),s.jsxs("button",{onClick:()=>a("vasúti"),className:"w-full py-3 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold flex items-center justify-center gap-2 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2","aria-label":"Vasúti szakrendszer indítása - bejelentkezés szükséges",children:["Szakrendszer indítása",s.jsx(Vm,{className:"h-5 w-5","aria-hidden":"true"})]})]})}),s.jsx(se,{className:"bg-white border-2 border-accent-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"bg-accent-100 p-4 rounded-lg",children:s.jsx(U_,{className:"h-12 w-12 text-accent-600","aria-hidden":"true"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-neutral-900",children:"Hajózási Hatósági Szakrendszer"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Alrendszerek és ügytípusok kezelése"})]})]}),s.jsxs("div",{className:"bg-neutral-50 rounded-md p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-neutral-800 mb-2",children:"Elérhető alrendszerek:"}),s.jsxs("ul",{className:"space-y-1 text-sm text-neutral-700",children:[s.jsx("li",{children:"• Hajóengedélyezési eljárások"}),s.jsx("li",{children:"• Biztonsági felülvizsgálatok"}),s.jsx("li",{children:"• Hajónyilvántartások kezelése"}),s.jsx("li",{children:"• Nemzetközi tanúsítványok"})]})]}),s.jsxs("button",{onClick:()=>a("hajózási"),className:"w-full py-3 bg-accent-600 text-white rounded-md hover:bg-accent-700 font-semibold flex items-center justify-center gap-2 transition-colors focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2","aria-label":"Hajózási szakrendszer indítása - bejelentkezés szükséges",children:["Szakrendszer indítása",s.jsx(Vm,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]}),s.jsxs("div",{className:"mb-10",children:[s.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Hírek és közlemények"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(h=>s.jsxs(se,{hover:!0,className:"bg-white",children:[s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-md ${h.kategoria==="Jogszabály"?"bg-error-100 text-error-800":h.kategoria==="Szolgáltatás"?"bg-success-100 text-success-800":"bg-neutral-200 text-neutral-800"}`,children:h.kategoria})}),s.jsx("p",{className:"text-xs text-neutral-500 mb-2",children:h.datum}),s.jsx("h4",{className:"font-bold text-neutral-900 mb-2",children:h.cim}),s.jsx("p",{className:"text-sm text-neutral-600",children:h.leiras})]},h.id))})]}),s.jsx("div",{className:"mb-10 bg-warning-50 border-l-4 border-warning-500 rounded-md p-6",role:"alert",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-6 w-6 text-warning-600 flex-shrink-0 mt-1","aria-hidden":"true"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-neutral-900 mb-2",children:"Fontos tájékoztatás"}),s.jsx("p",{className:"text-sm text-neutral-700 mb-2",children:"A 2025. november 1-jétől az összes engedélykérelmet kizárólag elektronikus formában fogadunk el. Kérjük, regisztráljon a VAHAP rendszerbe időben!"})]})]})}),s.jsxs("div",{className:"mb-10",children:[s.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Gyakran Ismételt Kérdések (GYIK)"}),s.jsx(se,{className:"bg-white",children:s.jsx("div",{className:"space-y-6",children:l.map((h,g)=>s.jsxs("div",{className:g>0?"border-t border-neutral-200 pt-6":"",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-2",children:h.kerdes}),s.jsx("p",{className:"text-sm text-neutral-600",children:h.valasz})]},g))})})]}),s.jsx("div",{className:"bg-primary-700 text-white rounded-lg p-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-3",children:"Ügyfélszolgálat"}),s.jsx("p",{className:"text-sm text-primary-100 mb-2",children:"Hétfő - Péntek: 8:00 - 16:00"}),s.jsx("p",{className:"text-sm text-primary-100",children:"Telefon: +36 1 234 5678"}),s.jsx("p",{className:"text-sm text-primary-100",children:"Email: ugyfelszolgalat@vahap.gov.hu"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-3",children:"Hasznos linkek"}),s.jsxs("ul",{className:"text-sm text-primary-100 space-y-2",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white underline",children:"Felhasználói kézikönyv"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white underline",children:"Jogszabályok"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white underline",children:"Letölthető űrlapok"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-3",children:"Címünk"}),s.jsxs("p",{className:"text-sm text-primary-100",children:["Építési és Közlekedési Minisztérium",s.jsx("br",{}),"Vasúti Hatósági Főosztály",s.jsx("br",{}),"1054 Budapest, Alkotmány u. 5-7."]})]})]})})]})]}),t&&s.jsx(b6,{rendszer:t,onClose:()=>a(null),onBejelentkezes:o,onRegisztracio:c}),r&&s.jsx(C6,{rendszer:r,onClose:()=>n(null),onSikeres:d})]})}class T6{async mentes(t,a,r,n="kerelem"){const{data:i,error:l}=await xe.from("kerelem_piszkozatok").select("*").eq("email",t).eq("ugytuek_kod",a).maybeSingle();if(l)throw console.error("Hiba a piszkozat keresésekor:",l),l;if(i){const{data:d,error:h}=await xe.from("kerelem_piszkozatok").update({piszkozat_adatok:r,workflow_lepes:n}).eq("id",i.id).select().single();if(h)throw console.error("Hiba a piszkozat frissítésekor:",h),h;return d}const{data:o,error:c}=await xe.from("kerelem_piszkozatok").insert([{email:t,ugytuek_kod:a,piszkozat_adatok:r,workflow_lepes:n}]).select().single();if(c)throw console.error("Hiba a piszkozat létrehozásakor:",c),c;return o}async betoltes(t,a){const{data:r,error:n}=await xe.from("kerelem_piszkozatok").select("*").eq("email",t).eq("ugytuek_kod",a).maybeSingle();if(n)throw console.error("Hiba a piszkozat betöltésekor:",n),n;return r}async osszesPiszkozat(t){const{data:a,error:r}=await xe.from("kerelem_piszkozatok").select("*").eq("email",t).order("utolso_mentes",{ascending:!1});if(r)throw console.error("Hiba a piszkozatok lekérdezésekor:",r),r;return a||[]}async torles(t){const{error:a}=await xe.from("kerelem_piszkozatok").delete().eq("id",t);if(a)throw console.error("Hiba a piszkozat törlésekor:",a),a}async torlesUgytipusAlapjan(t,a){const{error:r}=await xe.from("kerelem_piszkozatok").delete().eq("email",t).eq("ugytuek_kod",a);if(r)throw console.error("Hiba a piszkozat törlésekor:",r),r}}const Lp=new T6,Oh={kerellemTargya:"elozetes_egeszsegi",kérelmező:{cegNeve:"",cimSzekhely:"",cegjegyzekszam:"",kepviseloMeghatalmazottNeve:"",ugyintezoTelefon:"",iktatoszam:""},munkavállaló:{nev:"",szuletesiHely:"",szuletesiIdo:"",anyjaNeve:"",tajSzam:"",lakcim:"",ertesitesiCim:"u.a.",vasutiJarmuvezIgazolvSzam:"",munkakorBetoltendoMunkakor:""},mellekletek:{bankiAtutalasiBizonylatEredeti:0,bankiAtutalasiBizonylatMasolat:0,minositestTartalmazoTanusitvanyEredeti:0,vasutiJarmuvezIgazolvMasolat:0,egyebDokumentumok:[]},mellekletFajlok:[],munkavallaloDatum:new Date().toISOString().split("T")[0],munkavallaloAlairas:!1,kerelmezoDatum:new Date().toISOString().split("T")[0],kérelmezőAlairas:!1};function Yj({onSubmit:e,onCancel:t,modusz:a="kitoltes",kezdetiAdatok:r}){const n=a==="olvasas",i=a==="kitoltes"?"KÉRELEM LAP kitöltése":a==="rogzites"?"KÉRELEM LAP rögzítése (ügyintézői)":"KÉRELEM LAP megtekintése",[l,o]=B.useState(()=>{const E="kérelmező",L="munkavállaló";return{...Oh,...r,[E]:{...Oh[E],...(r==null?void 0:r[E])||{}},[L]:{...Oh[L],...(r==null?void 0:r[L])||{}},mellekletek:{...Oh.mellekletek,...(r==null?void 0:r.mellekletek)||{}}}}),[c,d]=B.useState([]),[h,g]=B.useState({nev:"",leiras:""}),[p,f]=B.useState(!1),[k,_]=B.useState(!1),[w,x]=B.useState(!1);B.useEffect(()=>{if(n||r)return;(async()=>{try{const L=await Lp.betoltes("demo@vasut.hu","V-044");if(L&&L.piszkozat_adatok){const M=L.piszkozat_adatok;o(ee=>({...ee,...M,kérelmező:{...ee.kérelmező,...M.kérelmező||{}},munkavállaló:{...ee.munkavállaló,...M.munkavállaló||{}},mellekletek:{...ee.mellekletek,...M.mellekletek||{}}}))}}catch(L){console.error("Piszkozat betöltési hiba:",L)}})()},[n,r]);const j=async()=>{if(!n){x(!0);try{await Lp.mentes("demo@vasut.hu","V-044",l,"kerelem_kitoltes"),_(!0),setTimeout(()=>_(!1),3e3)}catch(E){console.error("Piszkozat mentési hiba:",E),alert("Hiba történt a piszkozat mentése során. Kérjük próbálja újra!")}finally{x(!1)}}},z=(E,L,M)=>{o(ee=>({...ee,[E]:{...ee[E],[L]:M}})),d([])},N=(E,L)=>{o(M=>({...M,[E]:L})),d([])},$=E=>{if(E.target.files){const L=Array.from(E.target.files);o(M=>({...M,mellekletFajlok:[...M.mellekletFajlok,...L]}))}},q=E=>{o(L=>({...L,mellekletFajlok:L.mellekletFajlok.filter((M,ee)=>ee!==E)}))},G=()=>{if(!h.nev.trim()){d(["Egyéb dokumentum neve kötelező"]);return}o(E=>({...E,mellekletek:{...E.mellekletek,egyebDokumentumok:[...E.mellekletek.egyebDokumentumok,{...h}]}})),g({nev:"",leiras:""}),d([])},D=E=>{o(L=>({...L,mellekletek:{...L.mellekletek,egyebDokumentumok:L.mellekletek.egyebDokumentumok.filter((M,ee)=>ee!==E)}}))},I=()=>{const E=[];return l.kérelmező.cegNeve.trim()||E.push("Cég neve kötelező"),l.kérelmező.cimSzekhely.trim()||E.push("Székhely címe kötelező"),l.kérelmező.ugyintezoTelefon.trim()||E.push("Ügyintéző telefonszám kötelező"),l.munkavállaló.nev.trim()||E.push("Munkavállaló neve kötelező"),l.munkavállaló.szuletesiHely.trim()||E.push("Születési hely kötelező"),l.munkavállaló.szuletesiIdo.trim()||E.push("Születési idő kötelező"),l.munkavállaló.anyjaNeve.trim()||E.push("Anyja neve kötelező"),l.munkavállaló.tajSzam.trim()||E.push("TAJ szám kötelező"),l.munkavállaló.lakcim.trim()||E.push("Lakcím kötelező"),l.munkavállaló.munkakorBetoltendoMunkakor.trim()||E.push("Munkakör megadása kötelező"),l.munkavallaloAlairas||E.push("Munkavállaló hozzájárulása kötelező"),l.kérelmezőAlairas||E.push("Kérelmező aláírása kötelező"),d(E),E.length===0},R=()=>{I()&&e(l)},y=()=>{f(!0)},A=()=>{const E=new File(["Mock bizonylat"],"banki_bizonylat.pdf",{type:"application/pdf"}),L=new File(["Mock tanúsítvány"],"tanusitvany.pdf",{type:"application/pdf"});o({kerellemTargya:"elozetes_egeszsegi",kérelmező:{cegNeve:"MÁV-START Vasúti Személyszállító Zrt.",cimSzekhely:"1087 Budapest, Könyves Kálmán krt. 54-60.",cegjegyzekszam:"01-10-042463",kepviseloMeghatalmazottNeve:"Dr. Nagy Péter",ugyintezoTelefon:"+36 1 511 4600",iktatoszam:""},munkavállaló:{nev:"Tesztelő János",szuletesiHely:"Budapest",szuletesiIdo:"1985-05-15",anyjaNeve:"Tesztelő Mária",tajSzam:"123 456 789",lakcim:"1087 Budapest, Könyves Kálmán krt. 12-14.",ertesitesiCim:"u.a.",vasutiJarmuvezIgazolvSzam:"VJ-123456",munkakorBetoltendoMunkakor:"Mozdonyvezetői munkakör"},mellekletek:{bankiAtutalasiBizonylatEredeti:1,bankiAtutalasiBizonylatMasolat:0,minositestTartalmazoTanusitvanyEredeti:1,vasutiJarmuvezIgazolvMasolat:1,egyebDokumentumok:[]},mellekletFajlok:[E,L],munkavallaloDatum:new Date().toISOString().split("T")[0],munkavallaloAlairas:!1,kerelmezoDatum:new Date().toISOString().split("T")[0],kérelmezőAlairas:!1}),d([]),f(!1)};return s.jsxs(s.Fragment,{children:[p&&s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4",children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Regisztrációs adatok előnézete"}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Az alábbi adatok kerülnek betöltésre a regisztrációjából"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-primary-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-primary-900",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Regisztrációs adatok betöltése"}),s.jsx("p",{children:"A rendszer a regisztrációkor megadott adatokat fogja betölteni a kérelem űrlapba. Ezzel időt takaríthat meg, nem kell újra begépelni az alapadatokat."})]})]})}),s.jsxs(se,{children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(yc,{className:"h-5 w-5 text-primary-600"}),"Kérelmező (Munkáltató) adatok"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Cég neve:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"MÁV-START Vasúti Személyszállító Zrt."})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Cégjegyzékszám:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"01-10-042463"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("span",{className:"text-neutral-600",children:"Székhely címe:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"1087 Budapest, Könyves Kálmán krt. 54-60."})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Képviselő neve:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"Dr. Nagy Péter"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Ügyintéző telefon:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"+36 1 511 4600"})]})]})]}),s.jsxs(se,{children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-primary-600"}),"Munkavállaló adatok"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Név:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"Tesztelő János"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Születési hely:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"Budapest"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Születési idő:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"1985-05-15"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Anyja neve:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"Tesztelő Mária"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"TAJ szám:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"123 456 789"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Vasúti járművezetői igazolvány:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"VJ-123456"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("span",{className:"text-neutral-600",children:"Lakcím:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"1087 Budapest, Könyves Kálmán krt. 12-14."})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Munkakör:"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:"Mozdonyvezetői munkakör"})]})]})]}),s.jsxs(se,{className:"bg-neutral-50",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Melléklet információk"]}),s.jsxs("div",{className:"text-sm text-neutral-700 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600"}),s.jsx("span",{children:"Banki átutalási bizonylat (eredeti): 1 db"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600"}),s.jsx("span",{children:"Minősítést tartalmazó tanúsítvány (eredeti): 1 db"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600"}),s.jsx("span",{children:"Vasúti járművezetői igazolvány (másolat): 1 db"})]}),s.jsx("div",{className:"mt-3 p-3 bg-warning-50 border border-warning-200 rounded-md",children:s.jsxs("p",{className:"text-xs text-warning-900",children:[s.jsx("strong",{children:"Figyelem:"})," A fájlok szimulált példafájlok. A tényleges dokumentumokat később kell feltölteni."]})})]})]})]}),s.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-neutral-200 px-6 py-4 flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 border border-neutral-300 rounded-md hover:bg-neutral-50 font-medium",children:"Mégsem"}),s.jsxs("button",{onClick:A,className:"px-6 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 font-semibold flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Adatok betöltése"]})]})]})}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-md transition-colors",disabled:n,children:[s.jsx(ei,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Vissza"})]})}),s.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:i}),s.jsx("p",{className:"text-neutral-600",children:"Vasúti járművezetők előzetes alkalmassági vizsgálata (V-044)"}),!n&&k&&s.jsxs("p",{className:"text-sm text-success-600 flex items-center gap-1 mt-1",children:[s.jsx(Pe,{className:"h-4 w-4"}),"Piszkozat sikeresen mentve"]})]}),!n&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:j,disabled:w,className:"px-4 py-2 bg-neutral-600 text-white rounded-md hover:bg-neutral-700 disabled:bg-neutral-400 flex items-center gap-2 font-medium text-sm",title:"Piszkozat mentése",children:[s.jsx(yn,{className:"h-4 w-4"}),w?"Mentés...":"Piszkozat mentése"]}),s.jsxs("button",{onClick:y,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 font-medium text-sm",title:"Regisztrációs adatok betöltése",children:[s.jsx(yn,{className:"h-4 w-4"}),"Regisztrációs adatok lekérése"]})]})]}),s.jsx(se,{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-2 border-primary-300 mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-primary-900 mb-2",children:"ÉPÍTÉSI ÉS KÖZLEKEDÉSI MINISZTÉRIUM"}),s.jsx("p",{className:"text-sm text-primary-800 mb-1",children:"Közlekedési Hatósági Ügyekért Felelős Helyettes Államtitkárság"}),s.jsx("p",{className:"text-sm font-semibold text-primary-900",children:"Vasúti Hatósági Főosztály"}),s.jsxs("div",{className:"mt-3 text-xs text-primary-700 space-y-1",children:[s.jsx("p",{children:"cím: 1442 Budapest, Pf.: 89. • telefon: +36 (1) 474-1761"}),s.jsx("p",{children:"KRID: 162737765 EKMVHF"})]})]})}),c.length>0&&s.jsx(se,{className:"bg-error-50 border-2 border-error-200 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-error-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-error-900 mb-1",children:"Hiányzó vagy hibás adatok"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-error-700 space-y-1",children:c.map((E,L)=>s.jsx("li",{children:E},L))})]})]})}),s.jsxs(se,{className:"bg-white mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"A kérelem tárgya, amelyben a hatóság döntését kérem"]}),s.jsx("p",{className:"text-sm text-neutral-600 mb-4 italic",children:'A kérelem tárgyát szíveskedjék "X"-el jelölni!'}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-start gap-3 p-3 border-2 border-neutral-200 rounded-md hover:border-primary-300 cursor-pointer transition-colors",children:[s.jsx("input",{type:"radio",name:"kerellemTargya",value:"elozetes_egeszsegi",checked:l.kerellemTargya==="elozetes_egeszsegi",onChange:E=>N("kerellemTargya",E.target.value),disabled:n,className:"mt-1 h-5 w-5 text-primary-600"}),s.jsx("div",{children:s.jsx("span",{className:"font-medium text-neutral-900",children:"Előzetes egészségi alkalmassági vizsgálat"})})]}),s.jsxs("label",{className:"flex items-start gap-3 p-3 border-2 border-neutral-200 rounded-md hover:border-primary-300 cursor-pointer transition-colors",children:[s.jsx("input",{type:"radio",name:"kerellemTargya",value:"munkakorvaltozas_elotti",checked:l.kerellemTargya==="munkakorvaltozas_elotti",onChange:E=>N("kerellemTargya",E.target.value),disabled:n,className:"mt-1 h-5 w-5 text-primary-600"}),s.jsx("div",{children:s.jsx("span",{className:"font-medium text-neutral-900",children:"Munkakörváltozás előtti vizsgálat"})})]}),s.jsxs("label",{className:"flex items-start gap-3 p-3 border-2 border-neutral-200 rounded-md hover:border-primary-300 cursor-pointer transition-colors",children:[s.jsx("input",{type:"radio",name:"kerellemTargya",value:"hat_honapon_tul_ismetelten",checked:l.kerellemTargya==="hat_honapon_tul_ismetelten",onChange:E=>N("kerellemTargya",E.target.value),disabled:n,className:"mt-1 h-5 w-5 text-primary-600"}),s.jsx("div",{children:s.jsx("span",{className:"font-medium text-neutral-900",children:"Hat hónapon túl ismételten foglalkoztatott"})})]})]})]}),s.jsxs(se,{className:"bg-white mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(yc,{className:"h-5 w-5 text-primary-600"}),"1. A kérelmező (munkáltató) adatai"]}),s.jsx("p",{className:"text-xs text-neutral-500 mb-4 italic",children:"Kérjük, több jogosult esetén minden jogosult töltsön ki Kérelem Lapot."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Cég neve ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("input",{type:"text",value:l.kérelmező.cegNeve,onChange:E=>z("kérelmező","cegNeve",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"MÁV-START Zrt."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Címe (székhely) ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Km,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:l.kérelmező.cimSzekhely,onChange:E=>z("kérelmező","cimSzekhely",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"1087 Budapest, Könyves Kálmán krt. 54-60."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Cégjegyzékszám, bírósági bejegyzés száma (szervezetek esetén)"}),s.jsxs("div",{className:"relative",children:[s.jsx(L_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:l.kérelmező.cegjegyzekszam,onChange:E=>z("kérelmező","cegjegyzekszam",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"01-10-042463"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"A képviselő, meghatalmazott neve (ha van)"}),s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:l.kérelmező.kepviseloMeghatalmazottNeve,onChange:E=>z("kérelmező","kepviseloMeghatalmazottNeve",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"Dr. Nagy Péter"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Ügyintéző telefonszám (melyen elérhető) ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(qx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"tel",value:l.kérelmező.ugyintezoTelefon,onChange:E=>z("kérelmező","ugyintezoTelefon",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"+36 1 511 4600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Iktatószám"}),s.jsx("input",{type:"text",value:l.kérelmező.iktatoszam,onChange:E=>z("kérelmező","iktatoszam",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"Automatikusan kerül kitöltésre"})]})]})]}),s.jsxs(se,{className:"bg-white mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-primary-600"}),"2. A munkavállaló (leendő) adatai"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Neve (születéskori neve) ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("input",{type:"text",value:l.munkavállaló.nev,onChange:E=>z("munkavállaló","nev",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"Tesztelő János"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Születési hely ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("input",{type:"text",value:l.munkavállaló.szuletesiHely,onChange:E=>z("munkavállaló","szuletesiHely",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"Budapest"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Születési idő ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"date",value:l.munkavállaló.szuletesiIdo,onChange:E=>z("munkavállaló","szuletesiIdo",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Anyja neve ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("input",{type:"text",value:l.munkavállaló.anyjaNeve,onChange:E=>z("munkavállaló","anyjaNeve",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"Tesztelő Mária"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["TAJ-száma ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:l.munkavállaló.tajSzam,onChange:E=>z("munkavállaló","tajSzam",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"123 456 789"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Címe (lakcím) ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Km,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:l.munkavállaló.lakcim,onChange:E=>z("munkavállaló","lakcim",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"1087 Budapest, Könyves Kálmán krt. 12-14."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:'Értesítési címe (ha megegyezik: "u.a.")'}),s.jsx("input",{type:"text",value:l.munkavállaló.ertesitesiCim,onChange:E=>z("munkavállaló","ertesitesiCim",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"u.a."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Vasúti járművezetői igazolvány száma (ha van)"}),s.jsx("input",{type:"text",value:l.munkavállaló.vasutiJarmuvezIgazolvSzam,onChange:E=>z("munkavállaló","vasutiJarmuvezIgazolvSzam",E.target.value),disabled:n,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",placeholder:"VJ-123456"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Munkakör/betöltendő munkakör ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(rc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsxs("select",{value:l.munkavállaló.munkakorBetoltendoMunkakor,onChange:E=>z("munkavállaló","munkakorBetoltendoMunkakor",E.target.value),disabled:n,className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100",children:[s.jsx("option",{value:"",children:"Válasszon..."}),s.jsx("option",{value:"Mozdonyvezetői munkakör",children:"Mozdonyvezetői munkakör"}),s.jsx("option",{value:"Segédmozdonyvezetői munkakör",children:"Segédmozdonyvezetői munkakör"}),s.jsx("option",{value:"Tolatásvezetői munkakör",children:"Tolatásvezetői munkakör"})]})]})]})]}),!n&&s.jsx("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:s.jsxs("div",{className:"bg-accent-50 border border-accent-300 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("input",{type:"checkbox",id:"munkavallaloAlairas",checked:l.munkavallaloAlairas,onChange:E=>N("munkavallaloAlairas",E.target.checked),className:"mt-1 h-4 w-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),s.jsxs("label",{htmlFor:"munkavallaloAlairas",className:"text-sm text-neutral-700",children:[s.jsx("span",{className:"text-error-600",children:"*"})," Aláírásommal hozzájárulok megadott személyes adataimnak, a hivatal által, jogszabályi felhatalmazás alapján való kezeléséhez és felhasználásához.",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{children:"Büntetőjogi felelősségem teljes tudatában kijelentem,"})," hogy a fenti adatok megfelelnek a valóságnak és minden szükséges információt rendelkezésre bocsátottam."]})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-neutral-600 mb-1",children:"Dátum:"}),s.jsx("input",{type:"date",value:l.munkavallaloDatum,onChange:E=>N("munkavallaloDatum",E.target.value),className:"px-3 py-1 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})})]})})]}),s.jsxs(se,{className:"bg-white mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5 text-primary-600"}),"3. A csatolt mellékletek felsorolása"]}),s.jsx("p",{className:"text-xs text-neutral-500 mb-4 italic",children:'Kérjük, a "☐" jelbe darabszámot írjon.'}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Banki átutalási bizonylat a hatósági minősítés díjának megfizetéséről"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Eredeti (db):"}),s.jsx("input",{type:"number",min:"0",value:l.mellekletek.bankiAtutalasiBizonylatEredeti,onChange:E=>z("mellekletek","bankiAtutalasiBizonylatEredeti",parseInt(E.target.value)||0),disabled:n,className:"w-20 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Másolat (db):"}),s.jsx("input",{type:"number",min:"0",value:l.mellekletek.bankiAtutalasiBizonylatMasolat,onChange:E=>z("mellekletek","bankiAtutalasiBizonylatMasolat",parseInt(E.target.value)||0),disabled:n,className:"w-20 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Minősítést tartalmazó tanúsítvány"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Eredeti (db):"}),s.jsx("input",{type:"number",min:"0",value:l.mellekletek.minositestTartalmazoTanusitvanyEredeti,onChange:E=>z("mellekletek","minositestTartalmazoTanusitvanyEredeti",parseInt(E.target.value)||0),disabled:n,className:"w-20 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Vasúti járművezetői igazolvány másolata (ha van)"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Másolat (db):"}),s.jsx("input",{type:"number",min:"0",value:l.mellekletek.vasutiJarmuvezIgazolvMasolat,onChange:E=>z("mellekletek","vasutiJarmuvezIgazolvMasolat",parseInt(E.target.value)||0),disabled:n,className:"w-20 px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]})]})]}),!n&&s.jsxs("div",{className:"pt-4 border-t border-neutral-200",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Egyéb dokumentumok"}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-md p-4 mb-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-neutral-700 mb-1",children:"Dokumentum neve"}),s.jsx("input",{type:"text",value:h.nev,onChange:E=>g({...h,nev:E.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md text-sm",placeholder:"pl. Előző munkahelyi igazolás"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-neutral-700 mb-1",children:"Leírás (opcionális)"}),s.jsx("input",{type:"text",value:h.leiras,onChange:E=>g({...h,leiras:E.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md text-sm",placeholder:"Rövid leírás"})]})]}),s.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm font-medium",children:"Hozzáadás"})]}),l.mellekletek.egyebDokumentumok.length>0&&s.jsx("div",{className:"space-y-2",children:l.mellekletek.egyebDokumentumok.map((E,L)=>s.jsxs("div",{className:"flex items-center justify-between bg-neutral-100 p-3 rounded-md",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm text-neutral-900",children:E.nev}),E.leiras&&s.jsx("p",{className:"text-xs text-neutral-600",children:E.leiras})]}),s.jsx("button",{type:"button",onClick:()=>D(L),className:"text-error-600 hover:text-error-700 text-sm font-medium",children:"Törlés"})]},L))})]}),!n&&s.jsxs("div",{className:"pt-4 border-t border-neutral-200",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Dokumentumok feltöltése"}),s.jsx("input",{type:"file",id:"file-upload",multiple:!0,onChange:$,className:"hidden",accept:".pdf,.jpg,.jpeg,.png"}),s.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center gap-2 px-4 py-2 bg-neutral-100 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-200 cursor-pointer font-medium",children:[s.jsx(bn,{className:"h-4 w-4"}),"Fájl feltöltése"]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Elfogadott formátumok: PDF, JPG, PNG (max. 10 MB / fájl)"}),l.mellekletFajlok.length>0&&s.jsx("div",{className:"mt-4 space-y-2",children:l.mellekletFajlok.map((E,L)=>s.jsxs("div",{className:"flex items-center justify-between bg-success-50 border border-success-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600"}),s.jsx("span",{className:"text-sm text-neutral-900",children:E.name}),s.jsxs("span",{className:"text-xs text-neutral-500",children:["(",(E.size/1024/1024).toFixed(2)," MB)"]})]}),s.jsx("button",{onClick:()=>q(L),className:"text-error-600 hover:text-error-700 text-sm font-medium",children:"Törlés"})]},L))})]})]}),!n&&s.jsx("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:s.jsxs("div",{className:"bg-primary-50 border border-primary-300 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx("input",{type:"checkbox",id:"kérelmezőAlairas",checked:l.kérelmezőAlairas,onChange:E=>N("kérelmezőAlairas",E.target.checked),className:"mt-1 h-4 w-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),s.jsxs("label",{htmlFor:"kérelmezőAlairas",className:"text-sm text-neutral-700",children:[s.jsx("span",{className:"text-error-600",children:"*"})," Kérelmező vagy képviselő, illetve meghatalmazott aláírása és pecsétje (P.H.)"]})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-neutral-600 mb-1",children:"Dátum:"}),s.jsx("input",{type:"date",value:l.kerelmezoDatum,onChange:E=>N("kerelmezoDatum",E.target.value),className:"px-3 py-1 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})})]})})]}),!n&&s.jsxs("div",{className:"flex justify-between items-center mt-8",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 bg-white border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 font-medium",children:"Mégsem"}),s.jsxs("button",{onClick:R,className:"px-8 py-3 bg-success-600 text-white rounded-md hover:bg-success-700 font-bold text-lg flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Kérelem benyújtása"]})]}),n&&s.jsx("div",{className:"flex justify-center mt-8",children:s.jsx("button",{onClick:t,className:"px-8 py-3 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-bold text-lg",children:"Vissza"})})]})]})}function Xj({kerelemAdatok:e,onVissza:t}){return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:t,className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 font-medium",children:"← Vissza az ellenőrzéshez"})}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"border-b border-neutral-200 pb-4 mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-neutral-900 flex items-center gap-2",children:[s.jsx(De,{className:"h-6 w-6 text-primary-600"}),"V-044 Kérelem adatlap - Vasútegészségügyi vizsgálat"]}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"A vasúti járművezetők előzetes alkalmassági vizsgálata"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2 bg-primary-50 p-3 rounded-lg",children:[s.jsx(cu,{className:"h-5 w-5 text-primary-600"}),"I. KÉRELMEZŐ (munkáltató, cég) adatai"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Cég neve"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.munkaltatoNev)||(e==null?void 0:e.szervezetNev)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Címe (székhely)"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.munkaltatoCim)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Cégjegyzékszám"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.cegjegyzekszam)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Képviselő / Meghatalmazott neve"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.kepviselo)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Ügyintéző telefonszáma"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.telefon)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Iktatószám"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.iktatoszam)||"Lesz generálva"})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2 bg-secondary-50 p-3 rounded-lg",children:[s.jsx(os,{className:"h-5 w-5 text-secondary-600"}),"II. MUNKAVÁLLALÓ adatai"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ml-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Név"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.kerelemzoNev)||(e==null?void 0:e.teljesNev)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Születési hely"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.szuletesiHely)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Születési idő"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.szuletesiDatum)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Anyja neve"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.anyjaNeveNev)||(e==null?void 0:e.anyjaNeve)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"TAJ szám"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.tajSzam)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Lakcím"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.lakcim)||"Nincs megadva"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Értesítési cím"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.ertesitesiCim)||"u.a."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Vasúti járművezető igazolvány száma"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.vasutiIgazolvany)||"Nincs megadva"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Munkakör (betöltendő munkakör)"}),s.jsx("p",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.tervezettMunkakor)||(e==null?void 0:e.munkakor)||"Nincs megadva"})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2 bg-accent-50 p-3 rounded-lg",children:[s.jsx(Jn,{className:"h-5 w-5 text-accent-600"}),"III. KÉRELEM TÁRGYA"]}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"px-4 py-2 bg-neutral-50 border border-neutral-200 rounded-md text-neutral-900",children:(e==null?void 0:e.vizsgalatTipusa)==="elozetes"||(e==null?void 0:e.vizsgalatTipusa)==="elozo"?"Előzetes egészségi, pszichológiai és alkalmassági vizsgálat":(e==null?void 0:e.vizsgalatTipusa)==="idoszakos"?"Időszakos egészségi, pszichológiai és alkalmassági vizsgálat":(e==null?void 0:e.vizsgalatTipusa)==="soron_kivuli"?"Soron kívüli egészségi, pszichológiai és alkalmassági vizsgálat":"Előzetes egészségi, pszichológiai és alkalmassági vizsgálat"})})]}),s.jsx("div",{className:"border-t border-neutral-200 pt-6 mt-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-2",children:"Munkavállaló"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-neutral-600",children:"Dátum:"}),s.jsx("p",{className:"font-medium text-neutral-900",children:(e==null?void 0:e.datum)||new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-success-600",children:[s.jsx(Jn,{className:"h-4 w-4"}),s.jsx("span",{children:"Aláírva"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-2",children:"Kérelmező (munkáltató)"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-neutral-600",children:"Dátum:"}),s.jsx("p",{className:"font-medium text-neutral-900",children:(e==null?void 0:e.datum)||new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-success-600",children:[s.jsx(Jn,{className:"h-4 w-4"}),s.jsx("span",{children:"Aláírva"})]})]})]})]})})]})]})}function P6({kollegak:e,osszesen:t,engedelyezett:a,elutasitott:r}){const[n,i]=B.useState(!1),[l,o]=B.useState(""),[c,d]=B.useState("Mind"),h=e.filter(k=>{const _=k.nev.toLowerCase().includes(l.toLowerCase()),w=c==="Mind"||k.dontes===c;return _&&w}),g=n?h:h.slice(0,5),p={Engedélyezett:"bg-success-100 text-success-800 border-success-300",Elutasítva:"bg-error-100 text-error-800 border-error-300",Folyamatban:"bg-warning-100 text-warning-800 border-warning-300"},f={Engedélyezett:s.jsx(Pe,{className:"h-4 w-4"}),Elutasítva:s.jsx(Qs,{className:"h-4 w-4"}),Folyamatban:s.jsx(bt,{className:"h-4 w-4"})};return s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 flex items-center gap-2",children:[s.jsx(Ca,{className:"h-5 w-5 text-primary-600"}),"Kérelmezett személyek (",t," fő)"]}),(a!==void 0||r!==void 0)&&s.jsxs("div",{className:"flex gap-3 text-sm",children:[a!==void 0&&s.jsxs("div",{className:"flex items-center gap-1 text-success-700",children:[s.jsx(Pe,{className:"h-4 w-4"}),s.jsxs("span",{className:"font-semibold",children:[a," engedélyezett"]})]}),r!==void 0&&r>0&&s.jsxs("div",{className:"flex items-center gap-1 text-error-700",children:[s.jsx(Qs,{className:"h-4 w-4"}),s.jsxs("span",{className:"font-semibold",children:[r," elutasítva"]})]})]})]}),s.jsxs("div",{className:"mb-4 space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"}),s.jsx("input",{type:"text",value:l,onChange:k=>o(k.target.value),placeholder:"Keresés név alapján...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsx("div",{className:"flex gap-2",children:["Mind","Engedélyezett","Elutasítva","Folyamatban"].map(k=>s.jsx("button",{onClick:()=>d(k),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c===k?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:k},k))})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-neutral-50 border-b-2 border-neutral-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-neutral-700",children:"#"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-neutral-700",children:"Név"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-neutral-700",children:"Születési dátum"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-neutral-700",children:"Munkakör"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-neutral-700",children:"Státusz"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-neutral-700",children:"Megjegyzés"})]})}),s.jsx("tbody",{className:"divide-y divide-neutral-200",children:g.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-neutral-500",children:"Nincs találat a keresési feltételeknek"})}):g.map((k,_)=>s.jsxs("tr",{className:"hover:bg-neutral-50",children:[s.jsx("td",{className:"px-4 py-3 text-neutral-600 font-mono text-xs",children:e.indexOf(k)+1}),s.jsx("td",{className:"px-4 py-3 font-medium text-neutral-900",children:k.nev}),s.jsx("td",{className:"px-4 py-3 text-neutral-600",children:k.szuletesiDatum}),s.jsx("td",{className:"px-4 py-3 text-neutral-600",children:k.tervezettMunkakor}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md border text-xs font-semibold ${k.dontes?p[k.dontes]:p.Folyamatban}`,children:[k.dontes?f[k.dontes]:f.Folyamatban,k.dontes||"Folyamatban"]})}),s.jsxs("td",{className:"px-4 py-3 text-neutral-600 text-xs",children:[k.dontes==="Elutasítva"&&k.elutasitasIndoka&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-error-700 font-medium",children:k.elutasitasIndoka}),k.megjegyzes&&s.jsx("p",{className:"text-neutral-500 italic",children:k.megjegyzes})]}),k.dontes==="Engedélyezett"&&k.megjegyzes&&s.jsx("p",{className:"text-neutral-500 italic",children:k.megjegyzes})]})]},k.id))})]})}),h.length>5&&s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx("button",{onClick:()=>i(!n),className:"flex items-center gap-2 px-4 py-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 rounded-md font-medium transition-colors",children:n?s.jsxs(s.Fragment,{children:[s.jsx(xp,{className:"h-4 w-4"}),"Kevesebb mutatása"]}):s.jsxs(s.Fragment,{children:[s.jsx(du,{className:"h-4 w-4"}),"Összes mutatása (",h.length-5," további)"]})})})]})}function I6({dokumentumok:e}){const t=i=>{switch(i){case"határozat":return s.jsx(Pe,{className:"h-5 w-5 text-success-600"});case"vegzes":return s.jsx(Jt,{className:"h-5 w-5 text-warning-600"});case"igazolas":return s.jsx(De,{className:"h-5 w-5 text-primary-600"});default:return s.jsx(C_,{className:"h-5 w-5 text-neutral-600"})}},a=i=>{switch(i){case"határozat":return"Határozat";case"vegzes":return"Végzés";case"igazolas":return"Igazolás";case"hiranypotlas_felszolitas":return"Hiánypótlási felszólítás";case"egyeb":return"Egyéb dokumentum";default:return"Dokumentum"}},r=i=>{switch(i){case"vegleges":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-success-100 text-success-800 text-xs font-semibold rounded",children:[s.jsx(Pe,{className:"h-3 w-3"}),"Végleges"]});case"tervezet":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-warning-100 text-warning-800 text-xs font-semibold rounded",children:[s.jsx(Jt,{className:"h-3 w-3"}),"Tervezet"]});case"lejart":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-error-100 text-error-800 text-xs font-semibold rounded",children:[s.jsx(Qs,{className:"h-3 w-3"}),"Lejárt"]});default:return null}},n=i=>{const l=`
    ╔════════════════════════════════════════════════════════════╗
    ║                     ${a(i.tipus).toUpperCase()}                       ║
    ╚════════════════════════════════════════════════════════════╝

    Dokumentum azonosító: ${i.id}
    Dokumentum neve: ${i.nev}
    Státusz: ${i.statusz}
    Kiállítás dátuma: ${i.datum}

    ${i.leiras||""}

    ────────────────────────────────────────────────────────────

    Ez egy MOCK PDF dokumentum.
    Valós környezetben itt jelenne meg a határozat/végzés/igazolás
    teljes szövege, kiadmányozó aláírással és pecséttel.

    ────────────────────────────────────────────────────────────

    Az ÉKM Vasúti Hatósági Főosztály hivatalos dokumentuma.
    Elektronikusan aláírt és hitelesített.

    Elektronikus időbélyegző: ${new Date().toISOString()}
    `,o=new Blob([l],{type:"text/plain;charset=utf-8"}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=`${i.nev.replace(/\s+/g,"_")}.txt`,c.click(),console.log("Dokumentum letöltve:",i.nev)};return e.length===0?s.jsxs("div",{className:"text-center py-8 text-neutral-500",children:[s.jsx(De,{className:"h-12 w-12 mx-auto mb-3 text-neutral-400"}),s.jsx("p",{className:"text-sm",children:"Még nincs elérhető dokumentum"})]}):s.jsx("div",{className:"space-y-3",children:e.map(i=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-neutral-50 hover:bg-neutral-100 rounded-lg border border-neutral-200 transition-colors",children:[s.jsxs("div",{className:"flex items-start gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"bg-white p-3 rounded-lg border border-neutral-200 flex-shrink-0",children:t(i.tipus)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 text-sm",children:i.nev}),r(i.statusz)]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-neutral-600 mb-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(De,{className:"h-3 w-3"}),a(i.tipus)]}),s.jsx("span",{children:"•"}),s.jsx("span",{children:i.datum}),s.jsx("span",{children:"•"}),s.jsx("span",{children:i.meret})]}),i.leiras&&s.jsx("p",{className:"text-xs text-neutral-500 mt-1 line-clamp-2",children:i.leiras})]})]}),s.jsxs("button",{onClick:()=>n(i),disabled:i.statusz==="lejart",className:`ml-4 px-4 py-2 rounded-md font-medium text-sm flex items-center gap-2 flex-shrink-0 transition-colors ${i.statusz==="lejart"?"bg-neutral-200 text-neutral-500 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"}`,title:i.statusz==="lejart"?"Ez a dokumentum már nem érvényes":"Dokumentum letöltése",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]},i.id))})}class D6{async ugyEsemenyei(t){const{data:a,error:r}=await xe.from("ugy_esemenyek").select("*").eq("ugy_id",t).order("datum",{ascending:!0});if(r)throw console.error("Hiba az ügy eseményeinek lekérdezésekor:",r),r;return a||[]}async letrehoz(t){const{data:a,error:r}=await xe.from("ugy_esemenyek").insert([t]).select().single();if(r)throw console.error("Hiba az esemény létrehozásakor:",r),r;return a}async tobbLetrehoz(t){const{data:a,error:r}=await xe.from("ugy_esemenyek").insert(t).select();if(r)throw console.error("Hiba az események létrehozásakor:",r),r;return a||[]}async legutobbiEsemenyek(t=50){const{data:a,error:r}=await xe.from("ugy_esemenyek").select("*").order("datum",{ascending:!1}).limit(t);if(r)throw console.error("Hiba a legutóbbi események lekérdezésekor:",r),r;return a||[]}async esemenyekTipusAlapjan(t,a){const{data:r,error:n}=await xe.from("ugy_esemenyek").select("*").eq("ugy_id",t).eq("esemeny_tipus",a).order("datum",{ascending:!0});if(n)throw console.error("Hiba az események szűrésekor:",n),n;return r||[]}async statisztika(t){const a=await this.ugyEsemenyei(t);if(a.length===0)return{osszes:0,tipus_szerint:{}};const r={};a.forEach(i=>{r[i.esemeny_tipus]=(r[i.esemeny_tipus]||0)+1});let n;if(a.length>1){const i=new Date(a[0].datum).getTime();n=(new Date(a[a.length-1].datum).getTime()-i)/1e3/60/(a.length-1)}return{osszes:a.length,tipus_szerint:r,elso_esemeny:a[0],utolso_esemeny:a[a.length-1],atlagos_idotavolsag_perc:n}}async timeline(t){const a=await this.ugyEsemenyei(t);return a.map((r,n)=>{let i;if(n>0){const l=new Date(a[n-1].datum).getTime(),o=new Date(r.datum).getTime(),c=Math.floor((o-l)/1e3/60);c<60?i=`${c} perc`:c<1440?i=`${Math.floor(c/60)} óra`:i=`${Math.floor(c/1440)} nap`}return{esemeny:r,eltelt_ido:i}})}async szereploEsemenyei(t,a){const{data:r,error:n}=await xe.from("ugy_esemenyek").select("*").eq("ugy_id",t).eq("szereplo",a).order("datum",{ascending:!0});if(n)throw console.error("Hiba a szereplő eseményeinek lekérdezésekor:",n),n;return r||[]}async esemenyekDatumTartomany(t,a,r){const{data:n,error:i}=await xe.from("ugy_esemenyek").select("*").eq("ugy_id",t).gte("datum",a).lte("datum",r).order("datum",{ascending:!0});if(i)throw console.error("Hiba a dátum tartomány szerinti szűréskor:",i),i;return n||[]}async kereses(t,a){const{data:r,error:n}=await xe.from("ugy_esemenyek").select("*").eq("ugy_id",t).ilike("esemeny_leiras",`%${a}%`).order("datum",{ascending:!0});if(n)throw console.error("Hiba az események keresésekor:",n),n;return r||[]}async naplozKerelemEsemeny(t,a,r,n){const i={rogzites:"Kérelem adatrögzítés megkezdve",veglegesites:"Kérelem véglegesítve",benyujtas:"Kérelem benyújtva"},l={rogzites:"kerelem_rogzites",veglegesites:"kerelem_veglegesites",benyujtas:"kerelem_benyujtas"};return this.letrehoz({ugy_id:t,esemeny_tipus:l[a],esemeny_leiras:i[a],szereplo:r,datum:new Date().toISOString(),metaadatok:n})}async naplozVizsgalatEsemeny(t,a,r,n,i,l){const o={hataskor:"hataskor_vizsgalat",formai:"formai_vizsgalat",tartalmi:"tartalmi_vizsgalat"},d=`${{hataskor:"Hatáskör és illetékesség vizsgálat",formai:"Formai megfelelőség vizsgálat",tartalmi:"Tartalmi megfelelőség vizsgálat"}[a]} - ${n}${i?": "+i:""}`;return this.letrehoz({ugy_id:t,esemeny_tipus:o[a],esemeny_leiras:d,szereplo:r,datum:new Date().toISOString(),metaadatok:{...l,eredmeny:n}})}async naplozDontesEsemeny(t,a,r,n,i){const l={javaslat:"dontesi_javaslat",vezetoi_jovahagyas:"vezetoi_jovahagyas",vezetoi_elutasitas:"vezetoi_elutasitas",donteshozatal:"donteshozatal"};return this.letrehoz({ugy_id:t,esemeny_tipus:l[a],esemeny_leiras:n,szereplo:r,datum:new Date().toISOString(),metaadatok:i})}async naplozStatuszValtozas(t,a,r,n){return this.letrehoz({ugy_id:t,esemeny_tipus:"statusz_valtozas",esemeny_leiras:`Ügy státusza megváltozott: ${a} → ${r}`,szereplo:n,datum:new Date().toISOString(),metaadatok:{regi_statusz:a,uj_statusz:r}})}async exportJSON(t){const a=await this.ugyEsemenyei(t);return JSON.stringify(a,null,2)}async exportCSV(t){const a=await this.ugyEsemenyei(t);if(a.length===0)return"";const r=`Dátum,Esemény típus,Leírás,Szereplő
`,n=a.map(i=>`"${new Date(i.datum).toLocaleString("hu-HU")}","${i.esemeny_tipus}","${i.esemeny_leiras}","${i.szereplo}"`).join(`
`);return r+n}async hianypotlasElozmenyei(t,a){const r=await xe.from("ugy_esemenyek").select("*").eq("ugy_id",t).in("esemeny_tipus",["hianypotlas_felszolitas","hianypotlas_benyujtas","hianypotlas_ellenorzes"]).order("datum",{ascending:!1});if(r.error)return console.error("Hiba a hiánypótlási események lekérdezésekor:",r.error),{osszes_hianypotlas:0,osszes_felszolitas:[],osszes_benyujtas:[]};const n=r.data||[],i=a?n.filter(g=>{var p,f;return((p=g.metaadatok)==null?void 0:p.tipus)===a||((f=g.metaadatok)==null?void 0:f.hianypotlas_tipus)===a}):n,l=i.filter(g=>g.esemeny_tipus==="hianypotlas_felszolitas"),o=i.filter(g=>g.esemeny_tipus==="hianypotlas_benyujtas"),c=i.filter(g=>g.esemeny_tipus==="hianypotlas_ellenorzes"),d=i.length>0?i[0]:void 0,h=c.length>0?c[0]:void 0;return{osszes_hianypotlas:o.length,legutolso_hianypotlas:d,osszes_felszolitas:l,osszes_benyujtas:o,utolso_ellenorzes:h}}}const La=new D6;function lo({ugyId:e,ugyAzonosito:t,readonly:a=!1,workflowLepes:r}){const[n,i]=B.useState([]),[l,o]=B.useState("mind"),[c,d]=B.useState(!0),[h,g]=B.useState({osszes:0,tervezet:0,jovahagyva:0,kikuldve:0,dokumentumtar:0});B.useEffect(()=>{console.log("🔍 UgyDokumentumKezelo betöltve:",{ugyId:e,ugyAzonosito:t}),p()},[e]);const p=async()=>{console.log("📄 Dokumentumok betöltése kezdődik...",{ugyId:e,ugyAzonosito:t}),d(!0);try{const z=[],{data:N,error:$}=await xe.from("dokumentum_tervezetek").select("*").eq("ugy_id",e).order("created_at",{ascending:!1});$?console.error("Tervezetek lekérdezési hiba:",$):N&&N.forEach(y=>{const A=y.workflow_lepes||"Döntéshozatal";z.push({id:y.id,tipus:"tervezet",cim:y.dokumentum_cim||"Címtelen dokumentum",altipus:f(y.tervezet_tipus),statusz:y.statusz||"draft",datum:y.created_at,letrehozta:y.letrehozta_ugyintezo_nev||"Ismeretlen",workflow_lepes:A})});const{data:q,error:G}=await xe.from("kerelem_piszkozatok").select("*").eq("ugy_id",e).order("created_at",{ascending:!1});!G&&q&&q.forEach(y=>{z.push({id:y.id,tipus:"kerelem",cim:y.ugytipus_kod+" Kérelem",altipus:"Kérelem dokumentum",statusz:y.statusz||"piszkozat",datum:y.created_at,letrehozta:"Ügyfél",workflow_lepes:"Kérelem benyújtása"})});const{data:D,error:I}=await xe.from("dokumentumtar_ugytuek_kapcsolat").select(`
          dokumentum_id,
          kapcsolat_tipus,
          created_at,
          dokumentumtar_dokumentum!inner(
            id,
            nev,
            leiras,
            fajl_nev,
            fajl_url,
            fajl_tipus,
            created_at
          )
        `).eq("ugy_azonosito",t);!I&&D&&D.forEach(y=>{const A=y.dokumentumtar_dokumentum;z.push({id:A.id,tipus:"dokumentumtar",cim:A.nev,altipus:y.kapcsolat_tipus||"Kapcsolódó dokumentum",statusz:"aktiv",datum:A.created_at,letrehozta:"Rendszer",fajl_url:A.fajl_url,fajl_nev:A.fajl_nev,workflow_lepes:"Dokumentumtár"})}),z.sort((y,A)=>new Date(A.datum).getTime()-new Date(y.datum).getTime()),console.log("✅ Dokumentumok betöltve:",z.length,"db",z),i(z);const R={osszes:z.length,tervezet:z.filter(y=>y.tipus==="tervezet").length,jovahagyva:z.filter(y=>y.statusz==="jovahagyva").length,kikuldve:z.filter(y=>y.statusz==="kikuldve").length,dokumentumtar:z.filter(y=>y.tipus==="dokumentumtar").length};console.log("📊 Statisztikák:",R),g(R)}catch(z){console.error("❌ Dokumentumok betöltési hiba:",z)}finally{d(!1)}},f=z=>({határozat:"Határozat",vegzes:"Végzés",igazolas:"Igazolás",tajekozatas:"Tájékoztatás",hirdetmeny:"Hirdetmény",hianypotlas_formai:"Hiánypótlás (formai)",hianypotlas_tartalmi:"Hiánypótlás (tartalmi)"})[z]||z,k=z=>{switch(z){case"tervezet":return"bg-blue-100 text-blue-800 border-blue-300";case"kerelem":return"bg-green-100 text-green-800 border-green-300";case"dokumentumtar":return"bg-purple-100 text-purple-800 border-purple-300";case"hianypotlas":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"bejovo":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_=z=>{switch(z){case"jovahagyva":case"kikuldve":case"aktiv":case"vegleges":return"bg-green-100 text-green-800 border-green-300";case"jovahagyasra_var":case"iktatas_kesz":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"elutasitva":return"bg-red-100 text-red-800 border-red-300";case"draft":case"piszkozat":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},w=z=>({draft:"Piszkozat",piszkozat:"Piszkozat",iktatas_kesz:"Iktatásra kész",jovahagyasra_var:"Jóváhagyásra vár",jovahagyva:"Jóváhagyva",elutasitva:"Elutasítva",kikuldve:"Kiküldve",aktiv:"Aktív",vegleges:"Végleges"})[z]||z,x=z=>{switch(z){case"jovahagyva":case"kikuldve":case"aktiv":case"vegleges":return s.jsx(Pe,{className:"w-4 h-4"});case"jovahagyasra_var":case"iktatas_kesz":return s.jsx(bt,{className:"w-4 h-4"});case"elutasitva":return s.jsx(Qs,{className:"w-4 h-4"});case"draft":case"piszkozat":return s.jsx(Ec,{className:"w-4 h-4"});default:return s.jsx(De,{className:"w-4 h-4"})}},j=n.filter(z=>!r||z.workflow_lepes===r).filter(z=>l==="mind"||z.tipus===l);return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bt,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Dokumentumok betöltése..."})]})}):s.jsxs("div",{className:"space-y-6",children:[!r&&s.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[s.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o("mind"),children:s.jsxs("div",{className:"text-center",children:[s.jsx(De,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:h.osszes}),s.jsx("p",{className:"text-sm text-gray-600",children:"Összes dokumentum"})]})}),s.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o("tervezet"),children:s.jsxs("div",{className:"text-center",children:[s.jsx(De,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.tervezet}),s.jsx("p",{className:"text-sm text-gray-600",children:"Tervezet"})]})}),s.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Pe,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.jovahagyva}),s.jsx("p",{className:"text-sm text-gray-600",children:"Jóváhagyva"})]})}),s.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bn,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.kikuldve}),s.jsx("p",{className:"text-sm text-gray-600",children:"Kiküldve"})]})}),s.jsx(se,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>o("dokumentumtar"),children:s.jsxs("div",{className:"text-center",children:[s.jsx(De,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.dokumentumtar}),s.jsx("p",{className:"text-sm text-gray-600",children:"Dokumentumtár"})]})})]}),!r&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>o("mind"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="mind"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["Összes (",n.length,")"]}),s.jsxs("button",{onClick:()=>o("tervezet"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="tervezet"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["Hivatalos iratok (",n.filter(z=>z.tipus==="tervezet").length,")"]}),s.jsxs("button",{onClick:()=>o("kerelem"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="kerelem"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["Kérelmek (",n.filter(z=>z.tipus==="kerelem").length,")"]}),s.jsxs("button",{onClick:()=>o("dokumentumtar"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="dokumentumtar"?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["Dokumentumtár (",n.filter(z=>z.tipus==="dokumentumtar").length,")"]})]}),s.jsxs(se,{children:[!r&&s.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(De,{className:"w-6 h-6 text-blue-600"}),"Dokumentumok (",j.length,")"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Az ügyhöz kapcsolódó összes dokumentum egy helyen"})]}),j.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Jt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 text-lg",children:"Nincs megjeleníthető dokumentum"})]}):s.jsx("div",{className:"space-y-3",children:j.map(z=>s.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-lg border-2 text-xs font-semibold ${k(z.tipus)}`,children:z.tipus.toUpperCase()}),s.jsxs("span",{className:`px-3 py-1 rounded-lg border-2 text-xs font-semibold flex items-center gap-1 ${_(z.statusz)}`,children:[x(z.statusz),w(z.statusz)]}),z.workflow_lepes&&s.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium",children:["📍 ",z.workflow_lepes]})]}),s.jsx("h4",{className:"font-bold text-lg text-gray-800 mb-1",children:z.cim}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:z.altipus}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["👤 ",z.letrehozta]}),s.jsxs("span",{children:["📅 ",new Date(z.datum).toLocaleString("hu-HU")]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>{alert("Dokumentum megtekintése: "+z.cim)},className:"flex items-center gap-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[s.jsx(ba,{className:"w-4 h-4"}),"Megtekintés"]}),z.fajl_url&&s.jsxs("button",{onClick:()=>window.open(z.fajl_url,"_blank"),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:[s.jsx(ys,{className:"w-4 h-4"}),"Letöltés"]})]})]})},z.id))})]}),!a&&s.jsx(se,{children:s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors cursor-pointer",children:[s.jsx(bn,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"Dokumentum feltöltése"}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Kapcsolódó dokumentumok feltöltése az ügyhöz"}),s.jsxs("button",{onClick:()=>{alert("Dokumentum feltöltés funkció hamarosan")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mx-auto",children:[s.jsx(rl,{className:"w-5 h-5"}),"Új dokumentum feltöltése"]})]})})]})}const Nb=[{id:1,nev:"Kérelem benyújtva",ikon:De,szin:"accent"},{id:2,nev:"Érkeztetés",ikon:Pe,szin:"success"},{id:3,nev:"Formai vizsgálat",ikon:De,szin:"primary"},{id:4,nev:"Tartalmi vizsgálat",ikon:De,szin:"primary"},{id:5,nev:"Döntés-előkészítés",ikon:bt,szin:"warning"},{id:6,nev:"Határozat",ikon:Pe,szin:"success"}];function Qj({ugy:e,onClose:t,onHianypotlasInditas:a,onTenyallasInditas:r}){var k,_;const[n,i]=B.useState([]),[l,o]=B.useState(!1),c=()=>{t&&t()};B.useEffect(()=>{(async()=>{try{const x=await La.ugyEsemenyei(e.id);i(x),o(!0)}catch(x){console.error("Hiba az események betöltésekor:",x),o(!0)}})()},[e.id]),B.useEffect(()=>{const w=x=>{x.key==="Escape"&&c()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[t]);const h=(w=>({beérkezett:1,folyamatban:3,hiánypótlás:3,döntéshozatal:5,lezárt:6,elutasítva:6})[w]||1)(e.statusz),g=e.statusz==="hiánypótlás",p=e.statusz==="folyamatban"&&e.workflow_fazis==="tenyallas_tisztazas",f=e.statusz==="lezárt"||e.statusz==="elutasítva"||e.statusz==="hiánypótlás"?[{id:"DOK-001",nev:"Hiánypótlási felszólítás",tipus:"hiranypotlas_felszolitas",statusz:"vegleges",datum:"2025-10-08",meret:"245 KB",leiras:"A hatóság hiánypótlási felszólítása a hiányzó dokumentumok pótlására."},...e.statusz==="lezárt"&&e.dontesi_dokumentum!=="Elutasító végzés"?[{id:"DOK-002",nev:"Határozat - Engedélyezés",tipus:"határozat",statusz:"vegleges",datum:"2025-10-15",meret:"512 KB",leiras:"A vasúti járművezető alkalmassági vizsgálat pozitív elbírálásáról szóló határozat."},{id:"DOK-003",nev:"Igazolás - Alkalmassági engedély",tipus:"igazolas",statusz:"vegleges",datum:"2025-10-15",meret:"128 KB",leiras:"Hivatalos igazolás az alkalmassági vizsgálat sikerességéről."}]:[],...e.statusz==="elutasítva"||e.statusz==="lezárt"&&e.dontesi_dokumentum==="Elutasító végzés"?[{id:"DOK-004",nev:"Végzés - Elutasítás",tipus:"vegzes",statusz:"vegleges",datum:"2025-10-15",meret:"324 KB",leiras:"A kérelem elutasításáról szóló végzés indoklással."}]:[]]:[];return s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:c,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex justify-between items-start z-10",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("span",{className:"text-xs font-mono bg-primary-100 text-primary-800 px-2 py-1 rounded border border-primary-300",children:e.ugyAzonosito}),s.jsx(oa,{type:"statusz",value:e.statusz}),s.jsx(oa,{type:"prioritas",value:e.prioritas})]}),s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:e.ugytuekNev}),s.jsxs("p",{className:"text-sm text-neutral-600 mt-1",children:["Kód: ",e.ugytuekKod]})]}),s.jsx("button",{onClick:c,className:"p-2 hover:bg-neutral-100 rounded-full transition-colors","aria-label":"Bezárás",type:"button",children:s.jsx(es,{className:"h-6 w-6 text-neutral-600"})})]}),s.jsxs("div",{className:"px-6 py-6 space-y-6",children:[s.jsxs(se,{className:"bg-gradient-to-r from-primary-50 to-accent-50 border border-primary-200",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(bt,{className:"h-5 w-5 text-primary-600"}),"Eljárás folyamata"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute top-6 left-6 right-6 h-1 bg-neutral-200",children:s.jsx("div",{className:"h-full bg-primary-600 transition-all duration-500",style:{width:`${(h-1)/(Nb.length-1)*100}%`}})}),s.jsx("div",{className:"relative grid grid-cols-6 gap-2",children:Nb.map((w,x)=>{const j=x+1<h,z=x+1===h,N=w.ikon;return s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-2 transition-all ${j?"bg-success-600 text-white":z?"bg-primary-600 text-white ring-4 ring-primary-200 scale-110":"bg-neutral-200 text-neutral-500"}`,children:j?s.jsx(Pe,{className:"h-6 w-6"}):s.jsx(N,{className:"h-6 w-6"})}),s.jsx("span",{className:`text-xs text-center font-medium ${z?"text-primary-900 font-bold":j?"text-success-700":"text-neutral-600"}`,children:w.nev})]},w.id)})})]})]}),g&&a&&s.jsx(se,{className:"bg-warning-50 border-2 border-warning-400",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Jt,{className:"h-8 w-8 text-warning-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-warning-900 mb-2",children:"Hiánypótlás szükséges"}),s.jsx("p",{className:"text-sm text-warning-800 mb-3",children:"A hatóság hiánypótlást kért. Kérjük, az alábbi gomb megnyomásával töltse fel a hiányzó dokumentumokat."}),s.jsxs("p",{className:"text-sm text-warning-800 mb-4",children:[s.jsx("strong",{children:"Határidő:"})," ",e.hataridoDatum]}),s.jsxs("button",{onClick:a,className:"px-6 py-2 bg-warning-600 text-white rounded-md hover:bg-warning-700 font-semibold",children:[s.jsx(bn,{className:"inline h-4 w-4 mr-2"}),"Hiánypótlás benyújtása"]})]})]})}),e.statusz==="folyamatban"&&e.workflow_fazis==="formai_tartalmi_vizsgalat"&&s.jsx(se,{className:"bg-primary-50 border-2 border-primary-300",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(De,{className:"h-8 w-8 text-primary-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-primary-900 mb-2",children:"Formai és tartalmi vizsgálat folyamatban"}),s.jsx("p",{className:"text-sm text-primary-800",children:"Az ügyintéző jelenleg ellenőrzi a benyújtott dokumentumok formai és tartalmi megfelelőségét. Amennyiben hiányosságot észlel, hiánypótlási felszólítást fog kiküldeni."}),s.jsxs("p",{className:"text-xs text-primary-700 mt-3",children:[s.jsx("strong",{children:"Várható feldolgozási idő:"})," 5-8 munkanap"]})]})]})}),e.statusz==="beküldött"&&s.jsx(se,{className:"bg-accent-50 border-2 border-accent-300",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Pe,{className:"h-8 w-8 text-accent-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-accent-900 mb-2",children:"Kérelem sikeresen beérkezett"}),s.jsx("p",{className:"text-sm text-accent-800",children:"A kérelme sikeresen beérkezett a rendszerbe és érkeztetés alatt áll. Az iktatás után az ügyintéző hamarosan megkezdi a feldolgozást."}),s.jsxs("p",{className:"text-xs text-accent-700 mt-3",children:[s.jsx("strong",{children:"Következő lépés:"})," Iktatás és ügyintézőhöz rendelés"]})]})]})}),e.statusz==="döntéshozatal"&&s.jsx(se,{className:"bg-success-50 border-2 border-success-300",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(bt,{className:"h-8 w-8 text-success-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-success-900 mb-2",children:"Döntéshozatal alatt"}),s.jsx("p",{className:"text-sm text-success-800",children:"A vizsgálat befejeződött, a döntési javaslat elkészült. A határozat kiadása és kézbesítése hamarosan megtörténik."}),s.jsxs("p",{className:"text-xs text-success-700 mt-3",children:[s.jsx("strong",{children:"Következő lépés:"})," Vezetői jóváhagyás és határozat kiadása"]})]})]})}),e.statusz==="lezárt"&&e.dontesi_dokumentum!=="Elutasító végzés"&&s.jsx(se,{className:"bg-success-100 border-2 border-success-500",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Pe,{className:"h-8 w-8 text-success-700 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-success-900 mb-2",children:"✅ Kérelem engedélyezve"}),s.jsx("p",{className:"text-sm text-success-800 mb-3",children:'Gratulálunk! A vasúti járművezető alkalmassági vizsgálat sikeresen lezárult. Az engedélyező határozat és az igazolás az alábbi "Hatósági dokumentumok" szekcióban letölthető.'}),s.jsxs("p",{className:"text-xs text-success-700",children:[s.jsx("strong",{children:"Döntés dátuma:"})," ",e.dontesi_datum?new Date(e.dontesi_datum).toLocaleDateString("hu-HU"):"N/A"]})]})]})}),e.statusz==="lezárt"&&e.dontesi_dokumentum==="Elutasító végzés"||e.statusz==="elutasítva"&&s.jsx(se,{className:"bg-error-50 border-2 border-error-400",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Jt,{className:"h-8 w-8 text-error-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-error-900 mb-2",children:"Kérelem elutasítva"}),s.jsx("p",{className:"text-sm text-error-800 mb-3",children:'A hatóság a kérelmet elutasította. Az elutasító végzés és a részletes indoklás az alábbi "Hatósági dokumentumok" szekcióban található.'}),s.jsxs("p",{className:"text-xs text-error-700 mb-3",children:[s.jsx("strong",{children:"Döntés dátuma:"})," ",e.dontesi_datum?new Date(e.dontesi_datum).toLocaleDateString("hu-HU"):"N/A"]}),s.jsxs("p",{className:"text-xs text-error-700",children:[s.jsx("strong",{children:"Jogorvoslat:"})," A végzés ellen 15 napon belül fellebbezést nyújthat be."]})]})]})}),p&&r&&s.jsx(se,{className:"bg-accent-50 border-2 border-accent-400",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(os,{className:"h-8 w-8 text-accent-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-accent-900 mb-2",children:"Nyilatkozattétel szükséges"}),s.jsx("p",{className:"text-sm text-accent-800 mb-3",children:"A hatóság a tényállás tisztázása érdekében nyilatkozattételt kér. Kérjük, az alábbi gomb megnyomásával adja meg válaszát."}),s.jsxs("p",{className:"text-sm text-accent-800 mb-4",children:[s.jsx("strong",{children:"Határidő:"})," ",e.hataridoDatum]}),s.jsxs("button",{onClick:r,className:"px-6 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 font-semibold",children:[s.jsx(Ea,{className:"inline h-4 w-4 mr-2"}),"Nyilatkozat benyújtása"]})]})]})}),((k=e.workflow_adatok)==null?void 0:k.tomeges_kerelem)&&s.jsx(se,{className:"bg-accent-50 border-2 border-accent-300",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Ca,{className:"h-8 w-8 text-accent-700 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-bold text-accent-900 mb-2 flex items-center gap-2",children:["Tömeges kérelem",s.jsxs("span",{className:"px-3 py-1 bg-accent-600 text-white text-sm font-bold rounded",children:[((_=e.workflow_adatok)==null?void 0:_.kollegak_szama)||0," fő"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-accent-700 font-semibold",children:"Összes személy"}),s.jsx("p",{className:"text-2xl font-bold text-accent-900",children:e.szemelySzam})]}),e.engedelyezettSzemely!==void 0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-success-700 font-semibold",children:"Engedélyezett"}),s.jsx("p",{className:"text-2xl font-bold text-success-900",children:e.engedelyezettSzemely})]}),e.elutasitottSzemely!==void 0&&e.elutasitottSzemely>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-error-700 font-semibold",children:"Elutasítva"}),s.jsx("p",{className:"text-2xl font-bold text-error-900",children:e.elutasitottSzemely})]})]}),s.jsxs("p",{className:"text-xs text-accent-800 mt-3",children:[s.jsx("strong",{children:"Fontos:"})," Ez egy tömeges kérelem. A döntés személyenként történik, de egy közös határozatban kerül kiállításra."]})]})]})}),e.tomegesKerelem&&e.kollegak&&e.kollegak.length>0&&s.jsx(P6,{kollegak:e.kollegak,osszesen:e.szemelySzam||e.kollegak.length,engedelyezett:e.engedelyezettSzemely,elutasitott:e.elutasitottSzemely}),e.megjegyzesek&&typeof e.megjegyzesek=="string"&&e.megjegyzesek.trim()!==""&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-700"}),"Ügyintézési előzmények és megjegyzések"]}),s.jsx("div",{className:"space-y-3",children:s.jsx("div",{className:"p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:s.jsx("p",{className:"text-sm text-neutral-700",children:e.megjegyzesek})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Ügy alapadatai"]}),s.jsxs("dl",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Kérelmező:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:e.ugyfelNev})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Létrehozva:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:new Date(e.letrehozva).toLocaleDateString("hu-HU",{year:"numeric",month:"long",day:"numeric"})})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Határidő:"}),s.jsxs("dd",{className:"font-medium text-neutral-900 flex items-center gap-2",children:[s.jsx(cr,{className:"h-4 w-4 text-neutral-500"}),e.hataridoDatum]})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Prioritás:"}),s.jsx("dd",{children:s.jsx(oa,{type:"prioritas",value:e.prioritas})})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-primary-600"}),"Illetékes hatóság"]}),s.jsxs("dl",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Szervezet:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:"Építési és Közlekedési Minisztérium"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Szervezeti egység:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:"Vasúti Hatósági Főosztály (VHF)"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Kapcsolattartó:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:"vasut@ekm.gov.hu"})]})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Benyújtott dokumentumok"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md hover:bg-neutral-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Kérelem adatlap - V-044"}),s.jsx("p",{className:"text-xs text-neutral-600",children:"2025-10-05 14:23"})]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md hover:bg-neutral-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Személyazonosító okmány"}),s.jsx("p",{className:"text-xs text-neutral-600",children:"2025-10-05 14:25"})]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md hover:bg-neutral-100",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Tanúsító szervezet tanúsítványa"}),s.jsx("p",{className:"text-xs text-neutral-600",children:"2025-10-05 14:26"})]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-blue-600"}),"Dokumentumok"]}),s.jsx(lo,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(bt,{className:"h-5 w-5 text-primary-600"}),"Eseménynapló"]}),l?n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(De,{className:"h-8 w-8 text-neutral-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Még nincs esemény"})]}):s.jsx("div",{className:"space-y-3",children:n.map((w,x)=>{const j=x===n.length-1,z={kerelem_benyujtva:"bg-accent-500",erkeztetes:"bg-success-500",ugyintezo_hozzarendeles:"bg-primary-500",workflow_fazis_valtozas:"bg-warning-500",statusz_valtozas:"bg-primary-500",hianypotlas:"bg-warning-500",donteshozatal:"bg-success-500"}[w.esemeny_tipus]||"bg-neutral-400";return s.jsxs("div",{className:"flex gap-3 pb-3 border-b border-neutral-200 last:border-0",children:[s.jsx("div",{className:`flex-shrink-0 w-2 h-2 mt-2 rounded-full ${z} ${j?"animate-pulse":""}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:w.esemeny_leiras}),s.jsxs("p",{className:"text-xs text-neutral-600",children:[new Date(w.datum).toLocaleString("hu-HU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})," - ",w.szereplo||"Rendszer"]}),w.metaadatok&&Object.keys(w.metaadatok).length>0&&s.jsxs("div",{className:"mt-2 space-y-1",children:[w.metaadatok.hianyzo_dokumentumok&&Array.isArray(w.metaadatok.hianyzo_dokumentumok)&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-neutral-700",children:"Hiányzó dokumentumok:"}),s.jsx("ul",{className:"list-disc list-inside ml-2 mt-1 text-neutral-600",children:w.metaadatok.hianyzo_dokumentumok.map((N,$)=>s.jsx("li",{children:N},$))})]}),w.metaadatok.felszolitas_szoveg&&s.jsxs("div",{className:"mt-2 p-3 bg-neutral-50 rounded border border-neutral-200",children:[s.jsx("p",{className:"text-xs font-medium text-neutral-700 mb-1",children:"Felszólítás részletei:"}),s.jsx("p",{className:"text-xs text-neutral-600 whitespace-pre-wrap",children:w.metaadatok.felszolitas_szoveg})]}),w.metaadatok.hatarido&&!w.metaadatok.felszolitas_szoveg&&s.jsxs("p",{className:"text-xs text-neutral-600",children:[s.jsx("span",{className:"font-medium",children:"Határidő:"})," ",new Date(w.metaadatok.hatarido).toLocaleDateString("hu-HU")]}),w.metaadatok.dij_osszeg&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"text-neutral-700",children:[s.jsx("span",{className:"font-medium",children:"Díj összege:"})," ",w.metaadatok.dij_osszeg.toLocaleString("hu-HU")," Ft"]}),w.metaadatok.befizetes_modja&&s.jsxs("p",{className:"text-xs text-neutral-600",children:[s.jsx("span",{className:"font-medium",children:"Fizetési mód:"})," ",w.metaadatok.befizetes_modja]}),w.metaadatok.befizetes_hatarido&&s.jsxs("p",{className:"text-xs text-neutral-600",children:[s.jsx("span",{className:"font-medium",children:"Befizetési határidő:"})," ",new Date(w.metaadatok.befizetes_hatarido).toLocaleDateString("hu-HU")]})]}),w.metaadatok.javaslat_tipus&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"text-neutral-700",children:[s.jsx("span",{className:"font-medium",children:"Javaslat típusa:"})," ",w.metaadatok.javaslat_tipus]}),w.metaadatok.indoklas&&s.jsx("p",{className:"text-xs text-neutral-600 mt-1 italic",children:w.metaadatok.indoklas})]})]})]})]},w.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(bt,{className:"h-8 w-8 text-neutral-400 mx-auto mb-2 animate-spin"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Események betöltése..."})]})]}),f.length>0&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(ys,{className:"h-5 w-5 text-primary-600"}),"Hatósági dokumentumok"]}),s.jsx(I6,{dokumentumok:f})]})]}),s.jsx("div",{className:"sticky bottom-0 bg-neutral-50 border-t border-neutral-200 px-6 py-4 flex justify-end gap-3",children:s.jsx("button",{onClick:c,className:"px-6 py-2 bg-white border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-100 font-medium transition-colors",type:"button",children:"Bezárás"})})]})})}function M6({ugy:e}){var t,a;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(se,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:e.ugyAzonosito}),s.jsx(oa,{type:"statusz",value:e.statusz}),s.jsx(oa,{type:"prioritas",value:e.prioritas})]}),s.jsx("p",{className:"text-sm text-neutral-600",children:e.ugytuekNev})]})}),s.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:"Figyelem:"})," Ez egy read-only nézet. Az ügy adatait csak megtekintheti, de nem szerkesztheti. Kérjük, a véleményét a véleményezési felületen adja meg."]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-primary-600"}),"Ügyfél adatok"]}),s.jsxs("dl",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Kérelmező neve:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:e.ugyfelNev})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Email:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:((t=e.workflow_adatok)==null?void 0:t.ugyfel_email)||"Nincs megadva"})]}),((a=e.workflow_adatok)==null?void 0:a.munkaltatoNev)&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Munkáltató:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:e.workflow_adatok.munkaltatoNev})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(bt,{className:"h-5 w-5 text-primary-600"}),"Ügy időpontok"]}),s.jsxs("dl",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Létrehozva:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:new Date(e.letrehozva).toLocaleDateString("hu-HU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.hataridoDatum&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Határidő:"}),s.jsxs("dd",{className:"font-medium text-neutral-900 flex items-center gap-2",children:[s.jsx(cr,{className:"h-4 w-4 text-neutral-500"}),new Date(e.hataridoDatum).toLocaleDateString("hu-HU")]})]}),e.dontesi_datum&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Döntés dátuma:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:new Date(e.dontesi_datum).toLocaleDateString("hu-HU")})]})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(cu,{className:"h-5 w-5 text-primary-600"}),"Illetékes hatóság"]}),s.jsxs("dl",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Szervezet:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:"Építési és Közlekedési Minisztérium"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Szervezeti egység:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:"Vasúti Hatósági Főosztály (VHF)"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Ügyintéző:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:e.ugyintezoNev||"Nincs hozzárendelve"})]})]})]}),e.workflow_adatok&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Ügy részletek"]}),s.jsx("div",{className:"space-y-3 text-sm",children:Object.entries(e.workflow_adatok).map(([r,n])=>r.startsWith("_")||typeof n=="object"?null:s.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-neutral-100 last:border-0",children:[s.jsxs("dt",{className:"text-neutral-600 font-medium capitalize",children:[r.replace(/_/g," "),":"]}),s.jsx("dd",{className:"font-medium text-neutral-900 text-right max-w-md",children:String(n)})]},r))})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Benyújtott dokumentumok"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Kérelem adatlap - V-044"}),s.jsx("p",{className:"text-xs text-neutral-600",children:new Date(e.letrehozva).toLocaleString("hu-HU")})]})]}),s.jsx("span",{className:"text-xs px-2 py-1 bg-success-100 text-success-700 rounded",children:"Csatolva"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Személyazonosító okmány"}),s.jsx("p",{className:"text-xs text-neutral-600",children:new Date(e.letrehozva).toLocaleString("hu-HU")})]})]}),s.jsx("span",{className:"text-xs px-2 py-1 bg-success-100 text-success-700 rounded",children:"Csatolva"})]})]})]}),s.jsx(se,{className:"bg-amber-50 border border-amber-200",children:s.jsxs("p",{className:"text-sm text-amber-900",children:[s.jsx("strong",{children:"Tájékoztatás:"})," Ez egy véleményezési folyamat keretében megtekintett ügy. A véleményét a véleményezési felületen tudja megadni. Az itt látható információk csak tájékoztató jellegűek, szerkesztésre nincs lehetőség."]})})]})}function F6({ugyId:e,ugyAzonosito:t,hianyzosDokumentumok:a,hataridoDatum:r,felszolitasId:n,onSubmit:i,onCancel:l}){const[o,c]=B.useState(""),[d,h]=B.useState([]),[g,p]=B.useState(""),[f,k]=B.useState([]),[_,w]=B.useState(!1),[x,j]=B.useState(1),z=()=>{const I=new File(["Mock lakcímkártya javított"],"lakcimkartya_javitott.pdf",{type:"application/pdf"}),R=new File(["Mock tanúsítvány jó minőségű"],"tanusitvany_uj.pdf",{type:"application/pdf"});h([I,R]),c("A kért dokumentumokat újra feltöltöm jobb minőségben. A lakcímkártya friss kivonat az okmányirodától."),p("")},N=I=>{if(I.target.files){const R=Array.from(I.target.files);h(y=>[...y,...R]),p("")}},$=I=>{h(R=>R.filter((y,A)=>A!==I))},q=async()=>{if(d.length===0){p("Legalább egy dokumentumot csatolnia kell a hiánypótláshoz!");return}if(f.length===0){p("Jelölje be, mely hiányosságokat pótolja!");return}w(!0),p("");try{await La.letrehoz({ugy_id:e,esemeny_tipus:"hianypotlas_benyujtas",esemeny_leiras:`Hiánypótlás benyújtva (${x}. kísérlet): ${f.length} hiányosság pótolva`,szereplo:"Ügyfél",datum:new Date().toISOString(),metaadatok:{teljesitett_hianyok:f,mellekletek_szama:d.length,megjegyzes:o,felszolitas_id:n,kiserlet:x}}),await xe.from("ugyek").update({statusz:"folyamatban",workflow_fazis:"hianypotlas_ellenorzes",updated_at:new Date().toISOString()}).eq("id",e),i({ugyAzonosito:t,megjegyzes:o,mellekletek:d,teljesitett_hianyok:f,benyujtas_datum:new Date().toISOString()})}catch(I){console.error("Hiánypótlás benyújtási hiba:",I),p("Hiba történt a hiánypótlás benyújtása során. Próbálja újra!")}finally{w(!1)}},G=I=>{k(R=>R.includes(I)?R.filter(y=>y!==I):[...R,I])},D=Math.ceil((new Date(r).getTime()-new Date().getTime())/(1e3*60*60*24));return s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-warning-50 border-b border-warning-200 px-6 py-4 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-warning-900 mb-1",children:"Hiánypótlás benyújtása"}),s.jsxs("p",{className:"text-sm text-warning-700",children:["Ügy azonosító: ",t]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:z,className:"px-3 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 flex items-center gap-2 text-sm font-medium",title:"Tesztadatok betöltése",children:[s.jsx(K_,{className:"h-4 w-4"}),"Tesztadatok"]}),s.jsx("button",{onClick:l,className:"p-2 hover:bg-warning-100 rounded-full","aria-label":"Bezárás",children:s.jsx(es,{className:"h-6 w-6 text-warning-700"})})]})]}),s.jsxs("div",{className:"px-6 py-6 space-y-6",children:[s.jsx(se,{className:`border-2 ${D<=3?"bg-error-50 border-error-400":"bg-warning-50 border-warning-400"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:`h-6 w-6 flex-shrink-0 ${D<=3?"text-error-600":"text-warning-600"}`}),s.jsxs("div",{children:[s.jsxs("h3",{className:`font-bold mb-1 ${D<=3?"text-error-900":"text-warning-900"}`,children:["Határidő: ",r]}),s.jsx("p",{className:`text-sm ${D<=3?"text-error-800":"text-warning-800"}`,children:D>0?`${D} nap van hátra a hiánypótlás benyújtására.`:"A határidő lejárt! Sürgősen nyújtsa be a hiánypótlást."})]})]})}),s.jsxs(se,{className:"bg-neutral-50 border border-neutral-300",children:[s.jsxs("h3",{className:"font-bold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-700"}),"Hiányzó vagy hibás dokumentumok"]}),s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:"Jelölje be azokat a hiányosságokat, amelyeket most pótol:"}),s.jsx("div",{className:"space-y-2",children:a.map((I,R)=>s.jsxs("label",{className:"flex items-start gap-3 p-3 bg-white border border-neutral-200 rounded-md hover:bg-neutral-50 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:f.includes(I),onChange:()=>G(I),className:"w-5 h-5 text-success-600 border-neutral-300 rounded focus:ring-success-500 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start gap-2 text-sm text-neutral-700",children:[s.jsx(Ut,{className:"h-4 w-4 text-warning-600 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:I})]})})]},R))}),f.length>0&&s.jsx("div",{className:"mt-3 p-3 bg-success-50 border border-success-200 rounded-md",children:s.jsxs("p",{className:"text-sm font-semibold text-success-900",children:["✓ ",f.length," / ",a.length," hiányosság pótlása folyamatban"]})})]}),g&&s.jsx(se,{className:"bg-error-50 border-2 border-error-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-error-600 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-error-800 font-medium",children:g})]})}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"font-bold text-neutral-900 mb-4",children:"Dokumentumok csatolása"}),s.jsx("input",{type:"file",id:"hianypotlas-file-upload",multiple:!0,onChange:N,className:"hidden",accept:".pdf,.jpg,.jpeg,.png"}),s.jsxs("label",{htmlFor:"hianypotlas-file-upload",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-md hover:bg-primary-700 cursor-pointer font-semibold",children:[s.jsx(bn,{className:"h-5 w-5"}),"Fájlok kiválasztása"]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Elfogadott formátumok: PDF, JPG, PNG (max. 10 MB / fájl)"}),d.length>0&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("h4",{className:"text-sm font-semibold text-neutral-700",children:["Csatolt fájlok (",d.length,")"]}),d.map((I,R)=>s.jsxs("div",{className:"flex items-center justify-between bg-success-50 border border-success-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5 text-success-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:I.name}),s.jsxs("p",{className:"text-xs text-neutral-600",children:[(I.size/1024/1024).toFixed(2)," MB"]})]})]}),s.jsx("button",{onClick:()=>$(R),className:"text-error-600 hover:text-error-700 text-sm font-medium px-3 py-1 hover:bg-error-50 rounded",children:"Törlés"})]},R))]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"font-bold text-neutral-900 mb-3",children:"Megjegyzés (opcionális)"}),s.jsx("textarea",{value:o,onChange:I=>c(I.target.value),rows:4,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ha szükséges, itt kiegészítő információkat adhat meg a hiánypótlással kapcsolatban..."}),s.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:[o.length," / 500 karakter"]})]}),s.jsx(se,{className:"bg-accent-50 border border-accent-200",children:s.jsxs("p",{className:"text-sm text-accent-900",children:[s.jsx("strong",{children:"Tájékoztatás:"})," A hiánypótlás benyújtása után az ügy vizsgálata folytatódik. Értesítést fog kapni email címére, amikor az eljárás következő fázisába lép."]})})]}),s.jsxs("div",{className:"sticky bottom-0 bg-neutral-50 border-t border-neutral-200 px-6 py-4 flex justify-between items-center",children:[s.jsx("button",{onClick:l,className:"px-6 py-2 bg-white border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 font-medium",children:"Mégse"}),s.jsx("button",{onClick:q,disabled:_||d.length===0||f.length===0,className:"px-8 py-3 bg-success-600 text-white rounded-md hover:bg-success-700 disabled:bg-neutral-400 disabled:cursor-not-allowed font-bold flex items-center gap-2",children:_?s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"h-5 w-5 animate-spin"}),"Benyújtás..."]}):s.jsxs(s.Fragment,{children:[s.jsx(bn,{className:"h-5 w-5"}),"Hiánypótlás benyújtása"]})})]})]})})}const nc={async getKategoriak(){const{data:e,error:t}=await xe.from("parameter_kategoriak").select("*").eq("aktiv",!0).order("sorrend");if(t)throw t;return e||[]},async getParameterek(e){let t=xe.from("parameterek").select(`
        *,
        kategoria:parameter_kategoriak(*)
      `).eq("aktiv",!0);if(e){const{data:n}=await xe.from("parameter_kategoriak").select("id").eq("kod",e).single();n&&(t=t.eq("kategoria_id",n.id))}const{data:a,error:r}=await t.order("megnevezes");if(r)throw r;return a||[]},async getVasutiUgytipusok(){return["V-044","V-001","V-002","V-015","V-019","V-020"]},async getUgytuekParameterek(e){const{data:t,error:a}=await xe.from("ugytuek_parameterek").select(`
        *,
        parameter:parameterek(
          *,
          kategoria:parameter_kategoriak(*)
        )
      `).eq("ugytuek_kod",e).eq("aktiv",!0);if(a)throw a;return t||[]},async getUgytuekParameterErtekek(e){const t=await this.getUgytuekParameterek(e),a={};return t.forEach(r=>{if(r.parameter){const n=r.felulirja_alapertelmezettet?r.ertek:r.parameter.alapertelmezett_ertek;a[r.parameter.kod]=n}}),a},async updateUgytuekParameter(e,t,a,r){const{data:n}=await xe.from("parameterek").select("id").eq("kod",t).single();if(!n)throw new Error(`Paraméter nem található: ${t}`);const{data:i}=await xe.from("ugytuek_parameterek").select("*").eq("ugytuek_kod",e).eq("parameter_id",n.id).single();if(i){const{data:l,error:o}=await xe.from("ugytuek_parameterek").update({ertek:a,felulirja_alapertelmezettet:!0,modositva:new Date().toISOString()}).eq("id",i.id).select().single();if(o)throw o;return await xe.from("parameter_ertekek_tortenete").insert({ugytuek_parameter_id:i.id,regi_ertek:i.ertek,uj_ertek:a,indoklas:r}),l}else{const{data:l,error:o}=await xe.from("ugytuek_parameterek").insert({ugytuek_kod:e,parameter_id:n.id,ertek:a,felulirja_alapertelmezettet:!0}).select().single();if(o)throw o;return l}},async resetUgytuekParameter(e,t){const{data:a}=await xe.from("parameterek").select("id").eq("kod",t).single();if(!a)throw new Error(`Paraméter nem található: ${t}`);const{error:r}=await xe.from("ugytuek_parameterek").update({felulirja_alapertelmezettet:!1,ertek:null}).eq("ugytuek_kod",e).eq("parameter_id",a.id);if(r)throw r},async getParameterTortenet(e){const{data:t,error:a}=await xe.from("parameter_ertekek_tortenete").select("*").eq("ugytuek_parameter_id",e).order("modositas_datum",{ascending:!1});if(a)throw a;return t||[]},async createParameter(e){const{data:t,error:a}=await xe.from("parameterek").insert(e).select().single();if(a)throw a;return t},async updateParameter(e,t){const{data:a,error:r}=await xe.from("parameterek").update(t).eq("id",e).select().single();if(r)throw r;return a},async deleteParameter(e){const{error:t}=await xe.from("parameterek").update({aktiv:!1}).eq("id",e);if(t)throw t}},O6=[{value:"email",label:"E-mail"},{value:"postai",label:"Postai küldemény"},{value:"ekeidr",label:"EKEIDR rendszeren keresztül"},{value:"rendelkezesi_nyilvantartas",label:"Később rendelkezési nyilvántartás"},{value:"egyeb",label:"Egyéb"}];function R6({kezdetiAdatok:e,korabbiAdatok:t,onChange:a}){const[r,n]=B.useState({cimzettek:[{nev:"",cim:"",email:"",kuldesi_mod:"email"}],hatarid_napok:15,megjegyzes:"",kulso_ugyfel_kuldes:!0}),[i,l]=B.useState(!1),[o,c]=B.useState(!1);B.useEffect(()=>{e?(n(e),l(!1)):t&&!o&&l(!0)},[e,t]);const d=(w,x)=>{const j={...r,[w]:x};n(j),a(j)},h=(w,x,j)=>{const z=[...r.cimzettek];z[w]={...z[w],[x]:j};const N={...r,cimzettek:z};n(N),a(N)},g=()=>{const w={...r,cimzettek:[...r.cimzettek,{nev:"",cim:"",email:"",kuldesi_mod:"email"}]};n(w),a(w)},p=w=>{if(r.cimzettek.length<=1){alert("Legalább egy címzett szükséges!");return}const x=r.cimzettek.filter((z,N)=>N!==w),j={...r,cimzettek:x};n(j),a(j)},f=()=>{t&&(n(t),a(t),c(!0),l(!1))},k=()=>{l(!1),c(!0)},_=new Date(Date.now()+r.hatarid_napok*24*60*60*1e3).toISOString().split("T")[0];return s.jsxs("div",{className:"space-y-6",children:[t&&i&&!o&&s.jsx(se,{className:"bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Korábbi expedíciós adatok"}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Ebben az ügyben korábban már megadta az expedíciós adatokat. Szeretné újra felhasználni?"}),s.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-3 mb-3 text-sm",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-neutral-700",children:"Címzettek:"}),t.cimzettek&&t.cimzettek.length>0?t.cimzettek.map((w,x)=>s.jsxs("p",{className:"text-neutral-900",children:[w.nev," - ",w.cim]},x)):s.jsx("p",{className:"text-neutral-900",children:"Nincs korábbi címzett adat"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-neutral-700",children:"Határidő:"}),s.jsxs("p",{className:"text-neutral-900",children:[t.hatarid_napok," nap"]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium text-sm",children:"Igen, használjuk fel"}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-white border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 font-medium text-sm",children:"Nem, új adatokat adok meg"})]})]})]})}),t&&o&&s.jsx(se,{className:"bg-warning-50 border-warning-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-warning-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-warning-900 mb-1",children:"Figyelem!"}),s.jsx("p",{className:"text-sm text-warning-800",children:"Vigyázat! A hiánypótlás során az ügy érintettjeinek köre változhatott. Ellenőrizze, hogy a címzett és a küldési mód továbbra is megfelelő-e."})]})]})}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Expedíciós adatok"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-primary-50 border border-primary-200 rounded-lg",children:s.jsxs("label",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:r.kulso_ugyfel_kuldes,onChange:w=>d("kulso_ugyfel_kuldes",w.target.checked),className:"mt-1 h-5 w-5 text-primary-600 rounded border-neutral-300 focus:ring-2 focus:ring-primary-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-primary-900",children:"Kiküldés a külső ügyfél felületre"}),s.jsx("div",{className:"text-sm text-primary-700 mt-1",children:"Alapértelmezett: A dokumentum elérhető lesz az ügyfél portálon. További címzettek opcionálisan megadhatók."})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700",children:[s.jsx(Ca,{className:"h-4 w-4 inline mr-1"}),"További címzettek (opcionális)"]}),s.jsx("button",{type:"button",onClick:g,className:"px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700 flex items-center gap-1",children:"+ Új címzett"})]}),s.jsx("div",{className:"space-y-3",children:r.cimzettek.map((w,x)=>s.jsx(se,{className:"bg-neutral-50 border-neutral-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-neutral-600 mb-1",children:["Név ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("input",{type:"text",value:w.nev,onChange:j=>h(x,"nev",j.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 text-sm",placeholder:"Kovács János"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-neutral-600 mb-1",children:["Cím / E-mail ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("input",{type:"text",value:w.cim,onChange:j=>h(x,"cim",j.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 text-sm",placeholder:"1234 Budapest, Példa utca 1. vagy pelda@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-neutral-600 mb-1",children:"Email (opcionális)"}),s.jsx("input",{type:"email",value:w.email||"",onChange:j=>h(x,"email",j.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500 text-sm",placeholder:"pelda@email.com"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-neutral-600 mb-1",children:["Küldési mód ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:O6.map(j=>s.jsx("button",{type:"button",onClick:()=>h(x,"kuldesi_mod",j.value),className:`px-3 py-1.5 border rounded-md text-xs font-medium transition-colors ${w.kuldesi_mod===j.value?"bg-primary-600 text-white border-primary-600":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50"}`,children:j.label},j.value))})]})]}),r.cimzettek.length>1&&s.jsx("button",{type:"button",onClick:()=>p(x),className:"px-2 py-2 text-error-600 hover:bg-error-50 rounded-md transition-colors",title:"Címzett törlése",children:s.jsx(es,{className:"h-5 w-5"})})]})},x))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:[s.jsx(cr,{className:"h-4 w-4 inline mr-1"}),"Határidő (napokban) ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"number",min:5,max:30,value:r.hatarid_napok,onChange:w=>d("hatarid_napok",parseInt(w.target.value)||15),className:"w-24 px-4 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500"}),s.jsxs("span",{className:"text-sm text-neutral-600",children:["nap (Határidő dátuma: ",s.jsx("strong",{children:_}),")"]})]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"A határidő 5 és 30 nap között lehet. Alapértelmezett: 15 nap."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Megjegyzés (opcionális)"}),s.jsx("textarea",{value:r.megjegyzes||"",onChange:w=>d("megjegyzes",w.target.value),rows:3,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"További információk a kézbesítéshez..."})]})]})]})]})}let e5=1e3,t5=5e3,dm={};const _i={SIKERES_ARANY:.95,HALO_LATENCY_MS:800,ENABLE_LOGGING:!0},qf=e=>{const t=new Date().getFullYear(),a=e==="bejovo"?"B":e==="kimeno"?"K":"I",r=(++e5).toString().padStart(6,"0");return`ÉKM/VHF/${a}/${t}/${r}`},B6=e=>{dm[e]||(dm[e]=0);const t=++dm[e];return`${e}/${t}`},U6=()=>{const e=new Date().getFullYear(),t=(++t5).toString().padStart(6,"0");return`ÉKM/VHF/E/${e}/${t}`},_s=(e,t,a)=>{_i.ENABLE_LOGGING&&console.log(`[EKEIDR ${e}]`,{timestamp:new Date().toISOString(),adatok:t,eredmeny:a})},ic={erkeztetes:async e=>{if(console.log("🔷 EKEIDR Érkeztetés indítása:",e),await new Promise(a=>setTimeout(a,_i.HALO_LATENCY_MS)),!e.kuldemeny_azonosito||!e.targy||!e.feladoNev){const a={sikeres:!1,hibauzenet:"Kötelező mező hiányzik: küldemény azonosító, tárgy vagy feladó név",ujrakuldheto:!1};return _s("ÉRKEZTETÉS - HIBA",e,a),a}if(Math.random()<_i.SIKERES_ARANY){const a={sikeres:!0,erkezteto_szam:U6(),erkeztetes_datum:new Date().toISOString()};return _s("ÉRKEZTETÉS - SIKERES",e,a),a}else{const a={sikeres:!1,hibauzenet:"EKEIDR rendszer átmenetileg nem elérhető. Próbálja újra később.",hiba_uzenet:"EKEIDR rendszer átmenetileg nem elérhető. Próbálja újra később.",ujrakuldheto:!0};return _s("ÉRKEZTETÉS - SIKERTELEN",e,a),a}},bejovoIktatas:async e=>{if(console.log("🔷 EKEIDR Bejövő iktatás indítása:",e),await new Promise(a=>setTimeout(a,600)),!e.irat_azonosito||!e.targy){const a={sikeres:!1,hibauzenet:"Kötelező mező hiányzik: irat azonosító vagy tárgy",ujrakuldheto:!1};return _s("BEJÖVŐ IKTATÁS - HIBA",e,a),a}if(Math.random()<.97){let a,r;e.elozmeny_iktatoszam?(r=B6(e.elozmeny_iktatoszam),a=e.elozmeny_iktatoszam):a=qf("bejovo");const n={sikeres:!0,iktatoszam:a,alszamos_iktatoszam:r,iktatas_datum:new Date().toISOString()};return _s("BEJÖVŐ IKTATÁS - SIKERES",e,n),n}else{const a={sikeres:!1,hibauzenet:"Iktatás sikertelen: érvénytelen előzmény iktatószám vagy hiányzó kötelező mező.",hiba_uzenet:"Iktatás sikertelen: érvénytelen előzmény iktatószám vagy hiányzó kötelező mező.",ujrakuldheto:!0};return _s("BEJÖVŐ IKTATÁS - SIKERTELEN",e,a),a}},kimenoIktatas:async e=>{if(console.log("🔷 EKEIDR Kimenő iktatás indítása:",e),await new Promise(a=>setTimeout(a,600)),!e.irat_azonosito||!e.targy||!e.cimzettNev){const a={sikeres:!1,hibauzenet:"Kötelező mező hiányzik: irat azonosító, tárgy vagy címzett",ujrakuldheto:!1};return _s("KIMENŐ IKTATÁS - HIBA",e,a),a}if(Math.random()<.97){const r={sikeres:!0,iktatoszam:qf("kimeno"),iktatas_datum:new Date().toISOString()};return _s("KIMENŐ IKTATÁS - SIKERES",e,r),r}else{const a={sikeres:!1,hibauzenet:"Kimenő iktatás sikertelen: hiányzó aláírás vagy jóváhagyás.",hiba_uzenet:"Kimenő iktatás sikertelen: hiányzó aláírás vagy jóváhagyás.",ujrakuldheto:!0};return _s("KIMENŐ IKTATÁS - SIKERTELEN",e,a),a}},belsoIktatas:async e=>{if(console.log("🔷 EKEIDR Belső iktatás indítása:",e),await new Promise(a=>setTimeout(a,500)),!e.irat_azonosito||!e.targy||!e.ugy_azonosito){const a={sikeres:!1,hibauzenet:"Kötelező mező hiányzik: irat azonosító, tárgy vagy ügy azonosító",ujrakuldheto:!1};return _s("BELSŐ IKTATÁS - HIBA",e,a),a}if(Math.random()<.98){const r={sikeres:!0,iktatoszam:qf("belso"),iktatas_datum:new Date().toISOString()};return _s("BELSŐ IKTATÁS - SIKERES",e,r),r}else{const a={sikeres:!1,hibauzenet:"Belső iktatás sikertelen: érvénytelen ügy azonosító.",hiba_uzenet:"Belső iktatás sikertelen: érvénytelen ügy azonosító.",ujrakuldheto:!0};return _s("BELSŐ IKTATÁS - SIKERTELEN",e,a),a}},expedalas:async e=>{if(console.log("🔷 EKEIDR Expediálás indítása:",e),await new Promise(a=>setTimeout(a,1e3)),!e.iktatoszam||!e.cimzettek||e.cimzettek.length===0){const a={sikeres:!1,hiba_uzenet:"Kötelező mező hiányzik: iktatószám vagy címzettek"};return _s("EXPEDIÁLÁS - HIBA",e,a),a}if(Math.random()<.96){const a=new Date().getFullYear(),r=Math.floor(Math.random()*9e4)+1e4,n={sikeres:!0,expedalasi_azonosito:`ÉKM/VHF/EXP/${a}/${r}`,kuldesi_datum:new Date().toISOString()};return _s("EXPEDIÁLÁS - SIKERES",e,n),n}else{const a={sikeres:!1,hiba_uzenet:"Expediálás sikertelen: hibás címzett adatok vagy hiányzó dokumentumok."};return _s("EXPEDIÁLÁS - SIKERTELEN",e,a),a}},lekerdezIktatoSzam:async e=>{if(console.log("🔷 EKEIDR Iktatószám lekérdezés:",e),await new Promise(n=>setTimeout(n,300)),!e)return _s("IKTATÓSZÁM LEKÉRDEZÉS - HIBA",{iratAzonosito:e},null),null;const t=new Date().getFullYear(),a=Math.floor(Math.random()*9e3)+1e3,r=`ÉKM/VHF/B/${t}/${a.toString().padStart(6,"0")}`;return _s("IKTATÓSZÁM LEKÉRDEZÉS - SIKERES",{iratAzonosito:e},{iktatoszam:r}),r},ellenorizStatusz:async e=>{console.log("🔷 EKEIDR Státusz ellenőrzés:",e),await new Promise(n=>setTimeout(n,400));const t=["aktiv","aktiv","aktiv","expedalt","archivalt"],a=t[Math.floor(Math.random()*t.length)],r={iktatoszam:e,statusz:a,utolso_modositas:new Date().toISOString(),iktatva:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),ugy_azonosito:`V-044-${Math.floor(Math.random()*9e3)+1e3}`};return _s("STÁTUSZ ELLENŐRZÉS",{iktatoszam:e},r),r},ujrakuld:async(e,t=3,a=1e3)=>{let r=null;for(let n=1;n<=t;n++)try{return console.log(`🔄 EKEIDR Újraküldés ${n}/${t}`),await e()}catch(i){r=i,console.warn(`⚠️ EKEIDR ${n}. próba sikertelen:`,i),n<t&&await new Promise(l=>setTimeout(l,a*n))}throw console.error(`❌ EKEIDR Véglegesen sikertelen ${t} próba után`),r},setTestMode:(e,t=.95)=>{_i.SIKERES_ARANY=t,_i.HALO_LATENCY_MS=e?200:800,console.log(`🔧 EKEIDR teszt mód: ${e?"BE":"KI"} (sikeres arány: ${t*100}%)`)},getStatisztika:()=>({iktatoszam_counter:e5,erkezteto_counter:t5,alszamos_darab:Object.keys(dm).length,uzemmod:_i}),monitoringStatisztika:async()=>{const{data:e,error:t}=await supabase.from("ekeidr_log").select("*").order("created_at",{ascending:!1}).limit(1e3);if(t)return console.error("Hiba az EKEIDR statisztika lekérdezésekor:",t),{osszes_muvelet:0,sikeres:0,sikertelen:0,ujra_proba:0,sikeres_szazalek:0,leggyakoribb_hibak:[]};const a=(e==null?void 0:e.length)||0,r=(e==null?void 0:e.filter(c=>c.sikeres).length)||0,n=(e==null?void 0:e.filter(c=>!c.sikeres).length)||0,i=(e==null?void 0:e.filter(c=>(c.kiserlet_szam||0)>1).length)||0,l={};e==null||e.forEach(c=>{!c.sikeres&&c.hibauzenet&&(l[c.hibauzenet]=(l[c.hibauzenet]||0)+1)});const o=Object.entries(l).map(([c,d])=>({hiba:c,darab:d})).sort((c,d)=>d.darab-c.darab).slice(0,5);return{osszes_muvelet:a,sikeres:r,sikertelen:n,ujra_proba:i,sikeres_szazalek:a>0?Math.round(r/a*100):0,leggyakoribb_hibak:o}},getEKEIDRLog:async e=>{let t=supabase.from("ekeidr_log").select("*").order("created_at",{ascending:!1});e!=null&&e.ugy_id&&(t=t.eq("ugy_id",e.ugy_id)),e!=null&&e.muvelet_tipus&&(t=t.eq("muvelet_tipus",e.muvelet_tipus)),(e==null?void 0:e.sikeres)!==void 0&&(t=t.eq("sikeres",e.sikeres)),e!=null&&e.datum_tol&&(t=t.gte("created_at",e.datum_tol)),e!=null&&e.datum_ig&&(t=t.lte("created_at",e.datum_ig));const{data:a,error:r}=await t.limit(500);return r?(console.error("Hiba az EKEIDR napló lekérdezésekor:",r),[]):a||[]},manualRetry:async e=>{const{data:t,error:a}=await supabase.from("ekeidr_log").select("*").eq("id",e).single();if(a||!t)throw new Error("EKEIDR napló bejegyzés nem található");switch(t.muvelet_tipus){case"erkeztetes":return ic.erkeztet({ugyAzonosito:t.ugy_azonosito,ugyfelNev:"",dokumentumTipus:t.dokumentum_tipus||"",ervenyessegKezdete:new Date().toISOString()});case"bejovo_iktatas":return ic.bejovoIktat({ugyAzonosito:t.ugy_azonosito,dokumentumTipus:t.dokumentum_tipus||"",elozmenyIktatoszam:t.iktatoszam,szignalasok:[]});case"kimeno_iktatas":return ic.kimenoIktat({ugyAzonosito:t.ugy_azonosito,dokumentumTipus:t.dokumentum_tipus||"",cimzettNev:"",cimzettCim:""});default:throw new Error("Ismeretlen művelet típus")}},ekeidrVisszaadas:async e=>{if(console.log("🔷 EKEIDR Visszaadás indítása:",e),await new Promise(a=>setTimeout(a,_i.HALO_LATENCY_MS)),!e.ugyAzonosito||!e.iktatoszam||!e.indoklas||!e.helyes_osztaly){const a={sikeres:!1,hibauzenet:"Kötelező mező hiányzik: ügy azonosító, iktatószám, indoklás vagy helyes osztály"};return _s("EKEIDR VISSZAADÁS - HIBA",e,a),a}if(Math.random()<_i.SIKERES_ARANY){const a=new Date().getFullYear(),r=Math.floor(Math.random()*9e3)+1e3,n={sikeres:!0,visszaadasi_azonosito:`ÉKM/EKEIDR/VISSZAAD/${a}/${r}`};return _s("EKEIDR VISSZAADÁS - SIKERES",e,n),n}else{const a={sikeres:!1,hibauzenet:"EKEIDR visszaadás sikertelen. Kérjük próbálja újra később."};return _s("EKEIDR VISSZAADÁS - SIKERTELEN",e,a),a}}};class $6{async osszesAktiv(){const{data:t,error:a}=await xe.from("ugyintezok").select("*").eq("aktiv",!0).order("nev",{ascending:!0});if(a)throw console.error("Hiba az ügyintézők lekérdezésekor:",a),a;return t||[]}async szerepkorSzerint(t){const{data:a,error:r}=await xe.from("ugyintezok").select("*").eq("aktiv",!0).eq("szerepkor",t).order("nev",{ascending:!0});if(r)throw console.error("Hiba az ügyintézők lekérdezésekor:",r),r;return a||[]}async leker(t){const{data:a,error:r}=await xe.from("ugyintezok").select("*").eq("id",t).maybeSingle();if(r)throw console.error("Hiba az ügyintéző lekérdezésekor:",r),r;return a}async emailSzerint(t){const{data:a,error:r}=await xe.from("ugyintezok").select("*").eq("email",t).maybeSingle();if(r)throw console.error("Hiba az ügyintéző keresésekor:",r),r;return a}async letrehoz(t){const{data:a,error:r}=await xe.from("ugyintezok").insert([t]).select().single();if(r)throw console.error("Hiba az ügyintéző létrehozásakor:",r),r;return a}async frissit(t,a){const{data:r,error:n}=await xe.from("ugyintezok").update(a).eq("id",t).select().single();if(n)throw console.error("Hiba az ügyintéző frissítésekor:",n),n;return r}async deaktival(t){return this.frissit(t,{aktiv:!1})}}const gu=new $6;function H6({onKivalaszt:e,onMegse:t,szuroSzerepkor:a,cim:r="Ügyintéző kiválasztása"}){const[n,i]=B.useState([]),[l,o]=B.useState(!0),[c,d]=B.useState(null),[h,g]=B.useState("");B.useEffect(()=>{p()},[a]);const p=async()=>{o(!0);try{const _=a?await gu.szerepkorSzerint(a):await gu.osszesAktiv();i(_)}catch(_){console.error("Ügyintézők betöltési hiba:",_)}finally{o(!1)}},f=n.filter(_=>_.nev.toLowerCase().includes(h.toLowerCase())||_.email.toLowerCase().includes(h.toLowerCase())),k=()=>{if(c){const _=n.find(w=>w.id===c);_&&e(c,_)}};return l?s.jsx(se,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Ügyintézők betöltése..."})]})}):s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),a&&s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:a})]}),s.jsx("div",{children:s.jsx("input",{type:"text",value:h,onChange:_=>g(_.target.value),placeholder:"Keresés név vagy email szerint...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:f.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nincs megjeleníthető ügyintéző"}):f.map(_=>s.jsxs("label",{className:`flex items-center gap-4 p-4 border rounded-lg cursor-pointer transition-all ${c===_.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("input",{type:"radio",name:"ugyintezo",value:_.id,checked:c===_.id,onChange:()=>d(_.id),className:"w-4 h-4 text-blue-600"}),s.jsx("div",{className:"flex-shrink-0",children:c===_.id?s.jsx(Wx,{className:"w-10 h-10 text-blue-600"}):s.jsx(os,{className:"w-10 h-10 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:_.nev}),s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${_.szerepkor==="vezető"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:_.szerepkor})]}),s.jsxs("div",{className:"mt-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Kx,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:_.email})]}),_.telefon&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(qx,{className:"w-4 h-4"}),s.jsx("span",{children:_.telefon})]})]}),s.jsx("div",{className:"mt-1 text-xs text-gray-500",children:_.szervezeti_egyseg})]})]},_.id))}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[t&&s.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Mégse"}),s.jsx("button",{onClick:k,disabled:!c,className:"flex-1 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Kiválaszt és hozzárendel"})]}),f.length>0&&s.jsxs("div",{className:"text-sm text-gray-500 text-center pt-2",children:[f.length," ügyintéző ",h&&`a "${h}" keresésre`]})]})})}class V6{async osszes(t){let a=xe.from("ugyek").select("*").order("created_at",{ascending:!1});t&&(t.statusz&&(a=a.eq("statusz",t.statusz)),t.prioritas&&(a=a.eq("prioritas",t.prioritas)),t.ugytuek_kod&&(a=a.eq("ugytuek_kod",t.ugytuek_kod)),t.workflow_fazis&&(a=a.eq("workflow_fazis",t.workflow_fazis)),t.ugyintezo_id&&(a=a.eq("ugyintezo_id",t.ugyintezo_id)),t.kerelmező_email&&(a=a.eq("workflow_adatok->>kerelmező_email",t.kerelmező_email)),t.keresesiSzoveg&&(a=a.or(`ugy_azonosito.ilike.%${t.keresesiSzoveg}%,iktatoszam.ilike.%${t.keresesiSzoveg}%`)));const{data:r,error:n}=await a;if(n)throw console.error("Hiba az ügyek lekérdezésekor:",n),n;return r||[]}async leker(t){const{data:a,error:r}=await xe.from("ugyek").select("*").eq("id",t).maybeSingle();if(r)throw console.error("Hiba az ügy lekérdezésekor:",r),r;return a}async letrehoz(t){const{data:a,error:r}=await xe.from("ugyek").insert([t]).select().single();if(r)throw console.error("Hiba az ügy létrehozásakor:",r),r;return a}async frissit(t,a){const{data:r,error:n}=await xe.from("ugyek").update(a).eq("id",t).select().single();if(n)throw console.error("Hiba az ügy frissítésekor:",n),n;return r}async torol(t){const{error:a}=await xe.from("ugyek").delete().eq("id",t);if(a)throw console.error("Hiba az ügy törlésekor:",a),a}async szignal(t,a){return this.frissit(t,{ugyintezo_id:a,statusz:"folyamatban"})}async szignalVisszaadas(t){return this.frissit(t,{ugyintezo_id:null,statusz:"beküldött"})}async workflowFazisValtas(t,a,r){const n={workflow_fazis:a};return r&&(n.workflow_adatok=r),this.frissit(t,n)}async statisztikak(){const{data:t,error:a}=await xe.from("ugyek").select("statusz");if(a)throw console.error("Hiba a statisztikák lekérdezésekor:",a),a;const r=(t==null?void 0:t.length)||0,n=(t==null?void 0:t.filter(d=>d.statusz==="beküldött").length)||0,i=(t==null?void 0:t.filter(d=>d.statusz==="folyamatban").length)||0,l=(t==null?void 0:t.filter(d=>d.statusz==="hiánypótlás").length)||0,o=(t==null?void 0:t.filter(d=>d.statusz==="döntéshozatal").length)||0,c=(t==null?void 0:t.filter(d=>d.statusz==="lezárt").length)||0;return{osszes:r,bekuldott:n,folyamatban:i,hianypotlas:l,donteshozatal:o,lezart:c}}}const Gn=new V6;function _b({ugyId:e,ugyAzonosito:t,tipusa:a,onSubmit:r,onCancel:n,tesztMod:i=!1}){const[l,o]=B.useState([]),[c,d]=B.useState({}),[h,g]=B.useState(""),[p,f]=B.useState(""),[k,_]=B.useState(!1),[w,x]=B.useState(null),[j,z]=B.useState(null),[N,$]=B.useState(!1),[q,G]=B.useState(""),[D,I]=B.useState(!0),[R,y]=B.useState("osszeallitas"),[A,E]=B.useState(!1),[L,M]=B.useState(!1),[ee,ce]=B.useState(!1),[V,le]=B.useState(null);B.useEffect(()=>{ye(),be()},[a,e]),B.useEffect(()=>{i&&(R==="osszeallitas"&&!w&&l.length>0&&(x({cimzettek:[{nev:"Demo Kérelmező",cim:"demo.kerelemzo@example.com",email:"demo.kerelemzo@example.com",kuldesi_mod:"email"}],hatarid_napok:15,megjegyzes:"Teszt mód - Demo expedíció",kulso_ugyfel_kuldes:!0}),Object.keys(c).length===0&&d({0:!0,1:!0})),R==="jovahagyas"&&!L&&M(!0))},[R,i,w,L,l]),B.useEffect(()=>{H()},[c,l]);const ye=async()=>{I(!0);try{const ve=await nc.getUgytuekParameterErtekek("V-044"),je=a==="formai"?"FORMAI_HIANYPOTLAS_LISTA":"TARTALMI_HIANYPOTLAS_LISTA",ne=Array.isArray(ve[je])?ve[je]:[];o(ne)}catch(ve){console.error("Hiánypótlás paraméterek betöltési hiba:",ve),o([])}finally{I(!1)}},be=async()=>{var ve;try{const{data:je}=await xe.from("ugy_esemenyek").select("metaadatok").eq("ugy_id",e).eq("esemeny_tipus","hianypotlas_felszolitas").order("datum",{ascending:!1}).limit(1);je&&je.length>0&&((ve=je[0].metaadatok)!=null&&ve.expedicio)&&z(je[0].metaadatok.expedicio)}catch(je){console.error("Korábbi expedíció betöltési hiba:",je)}},C=ve=>{d(je=>({...je,[ve]:!je[ve]})),_(!1)},H=()=>{const ve=l.filter((J,Ke)=>c[Ke]);if(ve.length===0){g(""),f("");return}const je=[];je.push(a==="formai"?`Tisztelt Ügyfél!

A benyújtott kérelem formai vizsgálata során az alábbi hiányosságokat észleltük:
`:`Tisztelt Ügyfél!

A benyújtott kérelem tartalmi vizsgálata során az alábbi hiányosságokat észleltük:
`),ve.forEach((J,Ke)=>{je.push(`${Ke+1}. ${J.negativ_szoveg}`)}),je.push(`
Kérjük, a fenti hiányosságokat pótolja a megadott határidőn belül. A hiánypótlást az eredeti kérelem adataival együtt küldje vissza.`),je.push(`
Üdvözlettel,
Vasúti Hatósági Főosztály`);const ne=je.join(`
`);g(ne),k||f(ne)},W=()=>{_(!0)},Q=()=>{_(!1),f(h)},re=async()=>{if(Object.values(c).filter(Boolean).length===0){G("Legalább egy hiányosságot ki kell választani!");return}if(!w){G("Az expedíciós adatok megadása kötelező!");return}if(!w.cimzettek||w.cimzettek.length===0){G("Legalább egy címzett megadása kötelező!");return}if(w.cimzettek.find(ne=>!ne.nev||!ne.cim)){G("Minden címzettnél kötelező a név és cím megadása!");return}if(w.hatarid_napok<5||w.hatarid_napok>30){G("A határidő 5 és 30 nap között lehet!");return}if(!p.trim()){G("A hiánypótlási levél szövege nem lehet üres!");return}G(""),y("jovahagyas")},ue=async()=>{E(!0);try{confirm(`Válasszon a következő lehetőségek közül:

OK - Saját maga jóváhagyja a hiánypótlási felszólítást
Mégse - Jóváhagyásra küldi (szignálja) más ügyintézőnek vagy vezetőnek`)?(M(!0),y("kesz"),alert("✅ Hiánypótlási felszólítást jóváhagyta. Most már kiküldhető.")):ce(!0)}catch(ve){console.error("Jóváhagyási hiba:",ve),alert("❌ Hiba történt a jóváhagyás során.")}finally{E(!1)}},me=async(ve,je)=>{try{await Gn.szignal(e,ve),await La.letrehoz({ugy_id:e,esemeny_tipus:"szignálás",esemeny_leiras:`Hiánypótlási felszólítás jóváhagyásra szignálva ${je.nev} ügyintézőnek`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:{szignalt_ugyintezo_id:ve,szignalt_ugyintezo_nev:je.nev,workflow_fazis:"hianypotlas_jovahagyas"}}),alert(`✅ Hiánypótlási felszólítás sikeresen szignálva ${je.nev} ügyintézőnek jóváhagyásra!`),ce(!1),n()}catch(ne){console.error("Szignálási hiba:",ne),alert("❌ Hiba történt a szignálás során.")}},te=async()=>{$(!0),G("");try{const ve=l.filter((Ke,qe)=>c[qe]).map(Ke=>Ke.megnevezes),je=ve.length;console.log("🔷 EKEIDR kimenő iktatás indítása hiánypótlási felszólításhoz...");const ne={irat_azonosito:`${t}-HIANYPOTLAS-${Date.now()}`,irat_tipus:"kimeno",targy:`${a==="formai"?"Formai":"Tartalmi"} hiánypótlási felszólítás - ${t}`,ugy_azonosito:t,cimzettNev:w.cimzettek.map(Ke=>Ke.nev).join(", "),dokumentumTipus:"Hiánypótlási felszólítás (végzés)",kiadmanyozoDatum:new Date().toISOString(),szignalasok:[],csatolmanyok:[`hianypotlas_felszolitas_${a}_${Date.now()}.pdf`]},J=await ic.kimenoIktatas(ne);if(!J.sikeres)throw new Error(J.hibauzenet||"EKEIDR iktatás sikertelen");if(console.log("✅ EKEIDR iktatás sikeres:",J.iktatoszam),await La.letrehoz({ugy_id:e,esemeny_tipus:"hianypotlas_felszolitas",esemeny_leiras:`${a==="formai"?"Formai":"Tartalmi"} hiánypótlási felszólítás kibocsátva: ${je} hiányosság (Iktatószám: ${J.iktatoszam})`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:{tipusa:a,kivalasztott_hianyossagok:ve,generalt_szoveg:p,expedicio:w,jovahagyva:!0,ekeidr_iktatoszam:J.iktatoszam,ekeidr_iktatas_datum:J.iktatas_datum}}),await xe.from("ugyek").update({statusz:"hiánypótlás",workflow_fazis:"hianypotlas_varakozas",iktatoszam:J.iktatoszam,updated_at:new Date().toISOString()}).eq("id",e),w.cimzettek.length>0){const Ke={iktatoszam:J.iktatoszam,cimzettek:w.cimzettek.map(We=>({nev:We.nev,cim:We.cim,email:We.email})),kuldesi_mod:w.cimzettek[0].kuldesi_mod==="postai"?"postai":"elektronikus",mellekolendo_dokumentumok:ne.csatolmanyok},qe=await ic.expedalas(Ke);qe.sikeres?(console.log("✅ Expediálás sikeres:",qe.expedalasi_azonosito),await La.letrehoz({ugy_id:e,esemeny_tipus:"expedíció",esemeny_leiras:`Hiánypótlási felszólítás kiküldve ${w.cimzettek.length} címzettnek (Expediálási azonosító: ${qe.expedalasi_azonosito})`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:{expedalasi_azonosito:qe.expedalasi_azonosito,cimzettek:w.cimzettek,kulso_ugyfel_kuldes:w.kulso_ugyfel_kuldes}})):console.warn("⚠️ Expediálás nem sikerült:",qe.hiba_uzenet)}le({iktatoszam:J.iktatoszam,expedalasi_azonosito:w.cimzettek.length>0?"EXP-"+Date.now():void 0,cimzettek_szama:w.cimzettek.length}),y("sikeres")}catch(ve){console.error("Hiánypótlási felszólítás mentési hiba:",ve),G(`Hiba történt a kiküldés során: ${ve instanceof Error?ve.message:"Ismeretlen hiba"}`)}finally{$(!1)}};if(D)return s.jsx("div",{className:"max-w-5xl mx-auto p-6",children:s.jsx(se,{className:"bg-white",children:s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-neutral-600",children:"Hiánypótlási lista betöltése..."})})})});const pe=Object.values(c).filter(Boolean).length,_e=a==="formai"?"Formai":"Tartalmi";return s.jsxs(s.Fragment,{children:[ee&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-6",children:s.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:s.jsx(H6,{onKivalaszt:me,onMegse:()=>ce(!1),cim:"Ügyintéző kiválasztása jóváhagyáshoz"})})}),s.jsx("div",{className:"max-w-5xl mx-auto p-6",children:s.jsxs(se,{className:"bg-white",children:[s.jsx("div",{className:"border-b border-neutral-200 pb-4 mb-6",children:s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-neutral-900 flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"bg-warning-100 p-2 rounded-lg",children:s.jsx(Jt,{className:"h-6 w-6 text-warning-700"})}),_e," Hiánypótlási Felszólítás"]}),s.jsxs("p",{className:"text-sm text-neutral-600",children:["Ügy azonosító: ",t]}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"UCE-1871 | Funkció: F-0100"})]})})}),s.jsxs("div",{className:"mb-6",children:[i&&s.jsx("div",{className:"mb-4 p-3 bg-warning-50 border border-warning-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-warning-900 font-medium mb-2",children:"🧪 TESZT MÓD - Kattintson a lépésekre a köztük való lépkedéshez"})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>i&&y("osszeallitas"),disabled:!i||R==="sikeres",className:`flex items-center gap-2 ${i&&R!=="sikeres"?"cursor-pointer hover:opacity-80":"cursor-default"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="osszeallitas"?"bg-primary-600 text-white":"bg-success-600 text-white"}`,children:R==="osszeallitas"?"1":s.jsx(Pe,{className:"h-5 w-5"})}),s.jsx("span",{className:`text-sm font-medium ${R==="osszeallitas"?"text-primary-900":"text-neutral-600"}`,children:"Összeállítás"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-neutral-200 mx-4"}),s.jsxs("button",{onClick:()=>i&&y("jovahagyas"),disabled:!i||R==="sikeres",className:`flex items-center gap-2 ${i&&R!=="sikeres"?"cursor-pointer hover:opacity-80":"cursor-default"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="jovahagyas"?"bg-primary-600 text-white":R==="kesz"||R==="sikeres"?"bg-success-600 text-white":"bg-neutral-300 text-neutral-600"}`,children:R==="kesz"||R==="sikeres"?s.jsx(Pe,{className:"h-5 w-5"}):"2"}),s.jsx("span",{className:`text-sm font-medium ${R==="jovahagyas"?"text-primary-900":"text-neutral-600"}`,children:"Jóváhagyás"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-neutral-200 mx-4"}),s.jsxs("button",{onClick:()=>i&&y("kesz"),disabled:!i||R==="sikeres",className:`flex items-center gap-2 ${i&&R!=="sikeres"?"cursor-pointer hover:opacity-80":"cursor-default"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="kesz"?"bg-primary-600 text-white":R==="sikeres"?"bg-success-600 text-white":"bg-neutral-300 text-neutral-600"}`,children:R==="sikeres"?s.jsx(Pe,{className:"h-5 w-5"}):"3"}),s.jsx("span",{className:`text-sm font-medium ${R==="kesz"?"text-primary-900":R==="sikeres"?"text-success-900":"text-neutral-600"}`,children:"Kiküldés"})]})]})]}),q&&s.jsx("div",{className:"mb-6 p-4 bg-error-50 border border-error-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-error-800 font-medium",children:q})}),R==="osszeallitas"&&s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Hogyan működik?"}),s.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Pipálja be, mely hiányosságokat észlelte"}),s.jsx("li",{children:"A rendszer automatikusan generál egy hiánypótlási levelet"}),s.jsx("li",{children:"Szükség esetén szerkesztheti a levél szövegét"}),s.jsx("li",{children:"Adja meg az expedíciós adatokat (címzett, küldési mód, határidő)"}),s.jsx("li",{children:"Küldje jóváhagyásra a hiánypótlási felszólítást"})]})]}),R==="osszeallitas"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5 text-primary-600"}),"Hiányosságok ellenőrzőlistája",pe>0&&s.jsxs("span",{className:"ml-auto text-sm font-normal px-3 py-1 bg-warning-100 text-warning-800 rounded-full",children:[pe," kiválasztva"]})]}),l.length===0?s.jsx("div",{className:"p-4 bg-neutral-50 border border-neutral-200 rounded-lg text-center",children:s.jsx("p",{className:"text-neutral-600",children:"Nincs elérhető hiányosság paraméter."})}):s.jsx("div",{className:"space-y-2",children:l.map((ve,je)=>s.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${c[je]?"bg-warning-50 border-warning-300":"bg-white border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx("input",{type:"checkbox",checked:c[je]||!1,onChange:()=>C(je),className:"mt-1 h-5 w-5 text-warning-600 rounded focus:ring-warning-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900 mb-1",children:ve.pozitiv_szoveg}),c[je]&&s.jsxs("div",{className:"text-sm text-warning-800 bg-warning-100 border border-warning-200 rounded p-2 mt-2",children:[s.jsx("strong",{children:"Generált szöveg:"})," ",ve.negativ_szoveg]})]})]},je))})]}),R==="osszeallitas"&&pe>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-accent-600"}),"Hiánypótlási levél szövege"]}),!k&&s.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-3 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 text-sm font-medium",children:[s.jsx(O_,{className:"h-4 w-4"}),"Szöveg szerkesztése"]}),k&&s.jsx("button",{onClick:Q,className:"flex items-center gap-2 px-3 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 text-sm font-medium",children:"Vissza az eredetihez"})]}),k?s.jsx("textarea",{value:p,onChange:ve=>f(ve.target.value),rows:15,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-accent-500 font-mono text-sm"}):s.jsx("div",{className:"p-4 bg-neutral-50 border border-neutral-200 rounded-lg whitespace-pre-wrap font-mono text-sm",children:p})]}),R==="osszeallitas"&&pe>0&&s.jsx("div",{className:"mb-6",children:s.jsx(R6,{korabbiAdatok:j,onChange:x})}),R==="sikeres"&&V&&s.jsx("div",{className:"mb-6",children:s.jsx(se,{className:"bg-success-50 border-success-200",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-success-600 rounded-full flex items-center justify-center",children:s.jsx(Pe,{className:"h-7 w-7 text-white"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-success-900 mb-2",children:"Hiánypótlási felszólítás sikeresen kiküldve!"}),s.jsxs("div",{className:"space-y-2 text-sm text-success-800",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Iktatószám:"}),s.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded border border-success-200",children:V.iktatoszam})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Címzettek száma:"}),s.jsx("span",{className:"font-semibold",children:V.cimzettek_szama})]}),V.expedalasi_azonosito&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Expediálási azonosító:"}),s.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded border border-success-200",children:V.expedalasi_azonosito})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-white border border-success-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-neutral-700",children:'A hiánypótlási felszólítás sikeresen iktatásra és kiküldésre került. Az ügy státusza frissítésre került "Hiánypótlás" állapotba.'})})]})]})})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-neutral-200",children:[R!=="sikeres"?s.jsxs("button",{onClick:n,disabled:N||A,className:"px-6 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 font-medium disabled:opacity-50",children:[s.jsx(es,{className:"h-5 w-5 inline mr-2"}),"Mégse"]}):s.jsxs("button",{onClick:n,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-medium flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Vissza az ügylistához"]}),R==="osszeallitas"&&s.jsxs("button",{onClick:re,disabled:pe===0||!w,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-medium disabled:opacity-50 flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5"}),"Tovább a jóváhagyáshoz"]}),R==="jovahagyas"&&s.jsx("button",{onClick:ue,disabled:A,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-medium disabled:opacity-50 flex items-center gap-2",children:A?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Jóváhagyás..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"h-5 w-5"}),"Jóváhagyásra küldés"]})}),R==="kesz"&&s.jsx("button",{onClick:te,disabled:N,className:"px-6 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 font-medium disabled:opacity-50 flex items-center gap-2",children:N?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Iktatás és kiküldés folyamatban..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ea,{className:"h-5 w-5"}),"Iktatás és kiküldés"]})})]})]})})]})}function K6({ugyAzonosito:e,felszolitasTipus:t,felszolitasSzoveg:a,hataridoDatum:r,onSubmit:n,onCancel:i}){const[l,o]=B.useState({nyilatkozat:"",dokumentumok:[],megjegyzesek:""}),[c,d]=B.useState([]),h=()=>{const q=new File(["Mock egészségügyi igazolás tartalom"],"egeszsegugyi_igazolas.pdf",{type:"application/pdf"}),G=new File(["Mock orvosi dokumentáció tartalom"],"orvosi_dokumentacio.pdf",{type:"application/pdf"});let D="";t==="nyilatkozat"?D=`Alulírott nyilatkozom, hogy az elmúlt 5 évben nem részesültem olyan egészségügyi kezelésben, amely befolyásolhatná a mozdonyvezetői tevékenység ellátását.

A tanúsító szervezet által kiállított alkalmassági tanúsítvány kiállítása óta egészségi állapotomban nem történt olyan változás, amely a mozdonyvezetésre való alkalmasságomat befolyásolná.

A kérelemben foglalt valamennyi adat teljes körű és pontos, a szükséges dokumentumokat csatoltam.

Kijelentem, hogy a jelen nyilatkozatot teljes felelősségem tudatában tettem, és tudomásul veszem, hogy valótlan adatok közlése esetén az eljárás leállítható, illetve a kiadott engedély visszavonható.

Dátum: ${new Date().toLocaleDateString("hu-HU")}
Aláírás: [elektronikus aláírás]`:t==="irat_bemutatas"?D=`Az alábbiakban csatolom a hatóság által kért dokumentumokat:

1. Egészségügyi igazolás a legutóbbi vizsgálatról
2. Orvosi dokumentáció másolata

A dokumentumok hitelesek és aktuálisak.

Megjegyzés: A dokumentumokat hivatalos orvosi bélyegzővel és aláírással látták el.`:D=`Válaszom a hatósági megkeresésre:

Tisztelettel válaszolok a feltett kérdésekre, és csatolom a szükséges dokumentumokat.

A hivatkozott időszakban minden előírásnak megfelelően jártam el, és a kért információkat rendelkezésre bocsátom.

További kérdés esetén készséggel állok rendelkezésre.`,o({nyilatkozat:D,dokumentumok:[q,G],megjegyzesek:"Teszt megjegyzés: Minden szükséges dokumentumot csatoltam."}),d([])},g=new Date(r),p=new Date,f=Math.ceil((g.getTime()-p.getTime())/(1e3*60*60*24)),k=f<=3,_=f<0,w=()=>{switch(t){case"nyilatkozat":return"Nyilatkozattétel";case"irat_bemutatas":return"Iratbemutatás";case"egyeb":return"Egyéb tényállás tisztázás";default:return"Tényállás tisztázás"}},x=q=>{if(q.target.files){const G=Array.from(q.target.files);o(D=>({...D,dokumentumok:[...D.dokumentumok,...G]})),d([])}},j=q=>{o(G=>({...G,dokumentumok:G.dokumentumok.filter((D,I)=>I!==q)}))},z=q=>q<1024?q+" B":q<1024*1024?(q/1024).toFixed(1)+" KB":(q/(1024*1024)).toFixed(1)+" MB",N=()=>{const q=[];return t==="nyilatkozat"&&!l.nyilatkozat.trim()&&q.push("Nyilatkozat szövege kötelező"),t==="irat_bemutatas"&&l.dokumentumok.length===0&&q.push("Legalább egy dokumentum feltöltése kötelező"),!l.nyilatkozat.trim()&&l.dokumentumok.length===0&&q.push("Vagy nyilatkozatot kell tennie, vagy dokumentumokat kell feltöltenie"),d(q),q.length===0},$=()=>{N()&&n(l)};return s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qr,{className:"h-8 w-8 text-primary-600"}),s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:w()})]}),s.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 font-medium text-sm transition-colors",title:"Teszt adatok betöltése",children:[s.jsx(Pe,{className:"h-4 w-4"}),"Teszt adatok"]})]}),s.jsx("p",{className:"text-neutral-600",children:"Válaszoljon a hatóság felszólítására az alábbi űrlap kitöltésével"})]}),s.jsx(se,{className:"mb-6 bg-primary-50 border-2 border-primary-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:s.jsx(De,{className:"h-6 w-6 text-primary-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-primary-700 font-semibold uppercase",children:"Ügy azonosító"}),s.jsx("p",{className:"text-lg font-bold text-neutral-900 font-mono",children:e})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-3 rounded-lg ${_?"bg-error-100":k?"bg-warning-100":"bg-success-100"}`,children:s.jsx(cr,{className:`h-6 w-6 ${_?"text-error-700":k?"text-warning-700":"text-success-700"}`})}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-semibold uppercase ${_?"text-error-700":k?"text-warning-700":"text-success-700"}`,children:_?"Lejárt határidő!":k?"Sürgős!":"Határidő"}),s.jsx("p",{className:"text-lg font-bold text-neutral-900",children:r}),s.jsx("p",{className:`text-xs ${_?"text-error-600":k?"text-warning-600":"text-neutral-600"}`,children:_?`${Math.abs(f)} napja lejárt`:`${f} nap van hátra`})]})]})]})}),c.length>0&&s.jsx(se,{className:"bg-error-50 border-2 border-error-200 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-error-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-error-900 mb-1",children:"Hiányzó vagy hibás adatok"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-error-700 space-y-1",children:c.map((q,G)=>s.jsx("li",{children:q},G))})]})]})}),s.jsx(se,{className:"mb-6 bg-accent-50 border-2 border-accent-200",children:s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx(os,{className:"h-5 w-5 text-accent-700 flex-shrink-0 mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-accent-900 mb-2",children:"Hatósági felszólítás tartalma:"}),s.jsx("div",{className:"bg-white p-4 rounded border border-accent-200",children:s.jsx("p",{className:"text-sm text-neutral-700 whitespace-pre-line leading-relaxed",children:a})})]})]})}),s.jsxs(se,{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(qr,{className:"h-5 w-5 text-primary-600"}),t==="nyilatkozat"?"Nyilatkozat szövege":"Válasz / Magyarázat",t==="nyilatkozat"&&s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("textarea",{value:l.nyilatkozat,onChange:q=>o(G=>({...G,nyilatkozat:q.target.value})),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[200px] font-sans",placeholder:t==="nyilatkozat"?`Írja le nyilatkozatát részletesen...

Példa:
"Alulírott, [Név], kijelentem, hogy a kérelemben szereplő adatok valósak és hitelesek. A hiányzó dokumentumokat az alábbi indokok miatt nem tudtam beszerezni..."`:"Írja le válaszát vagy magyarázatát..."}),s.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:["Karakterek száma: ",l.nyilatkozat.length]})]})]}),s.jsxs(se,{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5 text-primary-600"}),"Dokumentumok csatolása",t==="irat_bemutatas"&&s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-neutral-300 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[s.jsx(bn,{className:"h-10 w-10 text-neutral-400 mb-2"}),s.jsx("p",{className:"text-sm text-neutral-600 font-medium",children:"Kattintson vagy húzza ide a fájlokat"}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"PDF, JPG, PNG, DOC, DOCX (max. 10 MB / fájl)"})]}),s.jsx("input",{type:"file",multiple:!0,onChange:x,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"})]})}),l.dokumentumok.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-semibold text-neutral-700 text-sm mb-2",children:["Feltöltött dokumentumok (",l.dokumentumok.length,")"]}),l.dokumentumok.map((q,G)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg border border-neutral-200",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900 truncate",children:q.name}),s.jsx("p",{className:"text-xs text-neutral-500",children:z(q.size)})]})]}),s.jsx("button",{type:"button",onClick:()=>j(G),className:"ml-3 p-1 text-error-600 hover:bg-error-50 rounded flex-shrink-0",title:"Fájl eltávolítása",children:s.jsx(es,{className:"h-5 w-5"})})]},G))]})]}),s.jsxs(se,{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(qr,{className:"h-5 w-5 text-neutral-600"}),"További megjegyzések (opcionális)"]}),s.jsx("textarea",{value:l.megjegyzesek,onChange:q=>o(G=>({...G,megjegyzesek:q.target.value})),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 min-h-[120px]",placeholder:"Ha van bármilyen további információja vagy kérdése, írja ide..."})]}),s.jsx(se,{className:"mb-6 bg-accent-50 border border-accent-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-accent-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 text-sm text-accent-800",children:[s.jsx("p",{className:"font-semibold mb-2",children:"Fontos információk:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"A nyilatkozatot körültekintően, részletesen töltse ki"}),s.jsx("li",{children:"A dokumentumokat jól olvasható formában csatolja"}),s.jsx("li",{children:"Benyújtás után a válaszát már nem tudja módosítani"}),s.jsx("li",{children:"Email értesítést fog kapni a benyújtásról"}),k&&s.jsx("li",{className:"text-warning-700 font-semibold",children:"⚠️ A határidő hamarosan lejár! Sürgősen küldje be a választ!"}),_&&s.jsx("li",{className:"text-error-700 font-semibold",children:"⚠️ A határidő lejárt! A késedelmes benyújtás következményekkel járhat!"})]})]})]})}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:i,className:"px-6 py-3 bg-white border-2 border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 font-semibold focus:outline-none focus:ring-2 focus:ring-neutral-500",children:"Mégse"}),s.jsxs("button",{onClick:$,className:"px-6 py-3 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 font-semibold focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx(Ea,{className:"h-5 w-5"}),"Válasz benyújtása"]})]})]})}function q6({onClose:e,onDijMeghatarozott:t}){const[a,r]=B.useState("standard"),[n,i]=B.useState("nincs"),l=[{megnevezes:"Alapeljárási díj",osszeg:a==="standard"?15e3:3e4,leiras:a==="standard"?"Normál eljárási díj (30-45 munkanap)":"Sürgős eljárás (15 munkanap)"},{megnevezes:"Vasútegészségügyi vizsgálat díj",osszeg:8e3,leiras:"Egészségügyi alkalmassági vizsgálat értékelése"},{megnevezes:"Okmányilleték",osszeg:3e3,leiras:"Engedély kiállítási díj"}],o={nincs:0,kisvaallalkozas:.3,nonprofit:.5},c=l.reduce((p,f)=>p+f.osszeg,0),d=c*o[n],h=Math.round(c-d),g=()=>{const p=`DK-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`;t(h,p)};return s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 p-2 rounded-lg",children:s.jsx(ib,{className:"h-6 w-6 text-primary-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Díjkalkulátor"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Eljárási díj kiszámítása"})]})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors","aria-label":"Bezárás",children:s.jsx(es,{className:"h-5 w-5 text-neutral-500"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(kj,{className:"h-5 w-5 text-primary-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-primary-900",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Díjfizetési kötelezettség"}),s.jsx("p",{className:"mb-2",children:"A vasúti járművezetők alkalmassági vizsgálatával kapcsolatos eljárási díjat a 2/2013. (I. 22.) NFM rendelet alapján kell megfizetni."}),s.jsx("p",{className:"text-xs italic text-primary-700",children:"Megjegyzés: A kalkulátor egy személyre vonatkozó díjat számol. Több személy esetén a kérelem kitöltésekor kell megadni a személyek számát."})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(se,{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Eljárás típusa"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-neutral-50 transition-colors",children:[s.jsx("input",{type:"radio",name:"ugytipus",value:"standard",checked:a==="standard",onChange:()=>r("standard"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900",children:"Normál eljárás"}),s.jsx("div",{className:"text-xs text-neutral-600",children:"30-45 munkanap • 15 000 Ft"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-neutral-50 transition-colors",children:[s.jsx("input",{type:"radio",name:"ugytipus",value:"surg",checked:a==="surg",onChange:()=>r("surg"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900",children:"Sürgős eljárás"}),s.jsx("div",{className:"text-xs text-neutral-600",children:"15 munkanap • 30 000 Ft"})]})]})]})]}),s.jsxs(se,{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Díjkedvezmény"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-neutral-50 transition-colors",children:[s.jsx("input",{type:"radio",name:"kedvezmeny",value:"nincs",checked:n==="nincs",onChange:()=>i("nincs"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900",children:"Nincs kedvezmény"}),s.jsx("div",{className:"text-xs text-neutral-600",children:"Teljes díj"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-neutral-50 transition-colors",children:[s.jsx("input",{type:"radio",name:"kedvezmeny",value:"kisvaallalkozas",checked:n==="kisvaallalkozas",onChange:()=>i("kisvaallalkozas"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900",children:"Kisvállalkozás"}),s.jsx("div",{className:"text-xs text-neutral-600",children:"30% kedvezmény"})]})]}),s.jsxs("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-neutral-50 transition-colors",children:[s.jsx("input",{type:"radio",name:"kedvezmeny",value:"nonprofit",checked:n==="nonprofit",onChange:()=>i("nonprofit"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900",children:"Non-profit szervezet"}),s.jsx("div",{className:"text-xs text-neutral-600",children:"50% kedvezmény"})]})]})]})]})]}),s.jsxs(se,{className:"bg-neutral-50",children:[s.jsx("h3",{className:"font-bold text-neutral-900 mb-4",children:"Díjtételek részletezése"}),s.jsxs("div",{className:"space-y-3",children:[l.map((p,f)=>s.jsxs("div",{className:"flex justify-between items-start pb-3 border-b border-neutral-200 last:border-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-neutral-900",children:p.megnevezes}),s.jsx("div",{className:"text-xs text-neutral-600 mt-1",children:p.leiras})]}),s.jsxs("div",{className:"font-semibold text-neutral-900",children:[p.osszeg.toLocaleString("hu-HU")," Ft"]})]},f)),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("div",{className:"font-medium text-neutral-700",children:"Alapösszeg"}),s.jsxs("div",{className:"font-semibold text-neutral-900",children:[c.toLocaleString("hu-HU")," Ft"]})]}),n!=="nincs"&&s.jsxs("div",{className:"flex justify-between items-center text-success-600",children:[s.jsx("div",{className:"text-sm",children:n==="kisvaallalkozas"?"Kisvállalkozás kedvezmény (30%)":"Non-profit kedvezmény (50%)"}),s.jsxs("div",{className:"font-semibold",children:["-",d.toLocaleString("hu-HU")," Ft"]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t-2 border-neutral-300",children:[s.jsx("div",{className:"font-bold text-lg text-neutral-900",children:"Fizetendő összeg (1 személy)"}),s.jsxs("div",{className:"font-bold text-2xl text-primary-600",children:[h.toLocaleString("hu-HU")," Ft"]})]})]})]}),s.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[s.jsx("button",{onClick:e,className:"px-6 py-2 border border-neutral-300 rounded-md hover:bg-neutral-50 font-medium",children:"Mégsem"}),s.jsxs("button",{onClick:g,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold flex items-center gap-2",children:[s.jsx(ib,{className:"h-5 w-5"}),"Díj elfogadása és folytatás"]})]})]})]})})}function W6({osszeg:e,dijbekeroSzam:t,onClose:a,onSikeresFizetes:r}){const[n,i]=B.useState("kartya"),[l,o]=B.useState(!1),[c,d]=B.useState(!1),[h,g]=B.useState(null),[p,f]=B.useState(""),[k,_]=B.useState(""),[w,x]=B.useState(""),[j,z]=B.useState(""),N="HU42 1177 3016 1111 1018 0000 0000",$="Magyar Államkincstár",q=`V-044 díjfizetés - ${t}`,[G,D]=B.useState(null),I=async()=>{if(g(null),o(!0),await new Promise(A=>setTimeout(A,1e3)),n==="atutalas"&&!G){g("Átutalási bizonylat feltöltése kötelező!"),o(!1);return}if(n==="kartya"){if(!p||p.replace(/\s/g,"").length!==16){g("Hibás kártyaszám formátum"),o(!1);return}if(!k||k.trim().length<3){g("Kérem adja meg a kártyabirtokos nevét"),o(!1);return}if(!w||!/^\d{2}\/\d{2}$/.test(w)){g("Hibás lejárati dátum (HH/ÉÉ)"),o(!1);return}if(!j||j.length!==3){g("Hibás CVV kód"),o(!1);return}}if(await new Promise(A=>setTimeout(A,2e3)),Math.random()>.05){const A=`TRX-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`;d(!0),o(!1),setTimeout(()=>{r(A)},2e3)}else g("A fizetés sikertelen. Kérem ellenőrizze az adatokat vagy próbálja újra később."),o(!1)},R=y=>{const A=y.replace(/\s/g,""),E=A.match(/.{1,4}/g);return E?E.join(" "):A};return c?s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(_d,{className:"h-8 w-8 text-success-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Sikeres fizetés!"}),s.jsx("p",{className:"text-neutral-600 mb-6",children:"Az eljárási díj befizetése megtörtént. A tranzakció azonosítót e-mailben is megküldjük."}),s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4 mb-6",children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Fizetett összeg"}),s.jsxs("div",{className:"text-2xl font-bold text-success-600",children:[e.toLocaleString("hu-HU")," Ft"]})]}),s.jsx("p",{className:"text-xs text-neutral-500",children:"Átirányítás a kérelem véglegesítéséhez..."})]})})}):s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-success-100 p-2 rounded-lg",children:s.jsx(Jl,{className:"h-6 w-6 text-success-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Online díjfizetés"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Biztonságos fizetési felület"})]})]}),s.jsx("button",{onClick:a,disabled:l,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors disabled:opacity-50","aria-label":"Bezárás",children:s.jsx(es,{className:"h-5 w-5 text-neutral-500"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx(se,{className:"bg-primary-50 border-primary-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Díjbekérő szám"}),s.jsx("div",{className:"font-mono text-sm font-semibold text-neutral-900",children:t})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Fizetendő összeg"}),s.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[e.toLocaleString("hu-HU")," Ft"]})]})]})}),h&&s.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-error-600 flex-shrink-0"}),s.jsx("div",{className:"text-sm text-error-900",children:h})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Fizetési mód"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("button",{onClick:()=>i("simplepay"),disabled:l,className:`p-4 border-2 rounded-lg transition-all ${n==="simplepay"?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"} disabled:opacity-50`,children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold mx-auto mb-2",children:"SP"}),s.jsx("div",{className:"font-semibold text-sm",children:"EFER (Simple Pay)"})]}),s.jsxs("button",{onClick:()=>i("kartya"),disabled:l,className:`p-4 border-2 rounded-lg transition-all ${n==="kartya"?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"} disabled:opacity-50`,children:[s.jsx(Jl,{className:"h-8 w-8 mx-auto mb-2 text-primary-600"}),s.jsx("div",{className:"font-semibold text-sm",children:"Bankkártya"})]}),s.jsxs("button",{onClick:()=>i("atutalas"),disabled:l,className:`p-4 border-2 rounded-lg transition-all ${n==="atutalas"?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"} disabled:opacity-50`,children:[s.jsx(yc,{className:"h-8 w-8 mx-auto mb-2 text-primary-600"}),s.jsx("div",{className:"font-semibold text-sm",children:"Átutalás"})]})]})]}),n==="simplepay"&&s.jsxs(se,{className:"bg-neutral-50",children:[s.jsx("h3",{className:"font-bold text-neutral-900 mb-4",children:"EFER (Simple Pay) mobilfizetés"}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white border rounded-lg",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold",children:"SP"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-neutral-900",children:"EFER (Simple Pay) OTP"}),s.jsx("div",{className:"text-sm text-neutral-600",children:"Azonnali, biztonságos mobilfizetés"})]})]})}),s.jsx("p",{className:"text-sm text-neutral-600 mt-4",children:"A folytatás gombra kattintva átirányítjuk az EFER (Simple Pay) fizetési oldalára."})]}),n==="kartya"&&s.jsxs(se,{children:[s.jsx("h3",{className:"font-bold text-neutral-900 mb-4",children:"Kártyaadatok"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Kártyaszám"}),s.jsx("input",{type:"text",value:p,onChange:y=>f(R(y.target.value.slice(0,19))),placeholder:"1234 5678 9012 3456",disabled:l,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Kártyabirtokos neve"}),s.jsx("input",{type:"text",value:k,onChange:y=>_(y.target.value.toUpperCase()),placeholder:"KOVÁCS JÁNOS",disabled:l,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Lejárati dátum"}),s.jsx("input",{type:"text",value:w,onChange:y=>{let A=y.target.value.replace(/\D/g,"");A.length>=2&&(A=A.slice(0,2)+"/"+A.slice(2,4)),x(A)},placeholder:"HH/ÉÉ",disabled:l,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"CVV"}),s.jsx("input",{type:"text",value:j,onChange:y=>z(y.target.value.replace(/\D/g,"").slice(0,3)),placeholder:"123",disabled:l,className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-neutral-100"})]})]})]})]}),n==="atutalas"&&s.jsxs(se,{className:"bg-neutral-50",children:[s.jsx("h3",{className:"font-bold text-neutral-900 mb-4",children:"Átutalási adatok"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Kedvezményezett"}),s.jsx("div",{className:"font-semibold text-neutral-900",children:$})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Számlaszám"}),s.jsx("div",{className:"font-mono text-neutral-900",children:N})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Közlemény"}),s.jsx("div",{className:"font-mono text-sm text-neutral-900 bg-warning-50 border border-warning-200 p-2 rounded",children:q})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-neutral-600 mb-1",children:"Összeg"}),s.jsxs("div",{className:"text-xl font-bold text-primary-600",children:[e.toLocaleString("hu-HU")," Ft"]})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-error-50 border border-error-200 rounded-lg",children:[s.jsxs("p",{className:"text-sm text-error-900 font-semibold mb-2",children:[s.jsx(Ut,{className:"inline h-4 w-4 mr-1"}),"Kötelező: Átutalási bizonylat feltöltése"]}),s.jsx("p",{className:"text-sm text-error-800 mb-3",children:"Az átutalási bizonylat feltöltése nélkül a kérelem nem indítható el!"}),s.jsxs("div",{children:[s.jsx("input",{type:"file",id:"atutalasi-bizonylat",accept:".pdf,.jpg,.jpeg,.png",disabled:l,onChange:y=>{y.target.files&&y.target.files[0]&&(D(y.target.files[0]),g(null))},className:"hidden"}),s.jsxs("label",{htmlFor:"atutalasi-bizonylat",className:"inline-flex items-center gap-2 px-4 py-2 bg-white border-2 border-primary-300 text-primary-700 rounded-md hover:bg-primary-50 cursor-pointer font-medium",children:[s.jsx(bn,{className:"h-4 w-4"}),"Bizonylat feltöltése"]}),G&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 bg-success-50 border border-success-200 rounded-md p-3",children:[s.jsx(_d,{className:"h-4 w-4 text-success-600"}),s.jsx("span",{className:"text-sm text-success-900 font-medium",children:G.name}),s.jsx("button",{onClick:()=>D(null),className:"ml-auto text-error-600 hover:text-error-700 text-sm",children:"Törlés"})]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-warning-50 border border-warning-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-warning-900",children:[s.jsx("strong",{children:"Fontos:"})," Az átutalás után a tranzakció feldolgozása 1-2 munkanapot vehet igénybe. A kérelmet csak az átutalás beérkezése után tudjuk továbbítani."]})})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-success-50 border border-success-200 rounded-lg",children:[s.jsx(_d,{className:"h-5 w-5 text-success-600 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-success-900",children:"A fizetés biztonságos SSL titkosítással védett kapcsolaton keresztül történik. A kártyaadatokat nem tároljuk."})]}),s.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[s.jsx("button",{onClick:a,disabled:l,className:"px-6 py-2 border border-neutral-300 rounded-md hover:bg-neutral-50 font-medium disabled:opacity-50",children:"Mégsem"}),s.jsx("button",{onClick:I,disabled:l||n==="atutalas"&&!G,className:"px-6 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:l?s.jsxs(s.Fragment,{children:[s.jsx(jj,{className:"h-5 w-5 animate-spin"}),"Fizetés feldolgozása..."]}):n==="atutalas"?s.jsxs(s.Fragment,{children:[s.jsx(_d,{className:"h-5 w-5"}),"Bizonylat feltöltve - Folytatás"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jl,{className:"h-5 w-5"}),"Fizetés (",e.toLocaleString("hu-HU")," Ft)"]})})]})]})]})})}function J6({onBefejezve:e,onMegsem:t}){const[a,r]=B.useState("kalkulator"),[n,i]=B.useState(0),[l,o]=B.useState(""),[c,d]=B.useState(),h=(p,f)=>{i(p),o(f),r("fizetes")},g=p=>{d(p),r("kesz"),setTimeout(()=>{e(n,l,p)},1500)};return a==="kalkulator"?s.jsx(q6,{onClose:t,onDijMeghatarozott:h}):a==="fizetes"?s.jsx(W6,{osszeg:n,dijbekeroSzam:l,onClose:()=>r("kalkulator"),onSikeresFizetes:g}):s.jsx("div",{className:"fixed inset-0 bg-neutral-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-success-100 rounded-full flex items-center justify-center mb-4 animate-bounce",children:s.jsx(Pe,{className:"h-8 w-8 text-success-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Díjfizetés sikeres!"}),s.jsx("p",{className:"text-neutral-600 mb-4",children:"A kérelem benyújtását folytathatja."}),s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-neutral-600",children:"Díjbekérő:"}),s.jsx("span",{className:"font-mono font-semibold",children:l})]}),c&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-neutral-600",children:"Tranzakció:"}),s.jsx("span",{className:"font-mono font-semibold text-xs",children:c})]})]})]})})})}function Ot(e){"@babel/helpers - typeof";return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(e)}var Zr=Uint8Array,rr=Uint16Array,tv=Int32Array,sv=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),av=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sb=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s5=function(e,t){for(var a=new rr(31),r=0;r<31;++r)a[r]=t+=1<<e[r-1];for(var n=new tv(a[30]),r=1;r<30;++r)for(var i=a[r];i<a[r+1];++i)n[i]=i-a[r]<<5|r;return{b:a,r:n}},a5=s5(sv,2),G6=a5.b,Tp=a5.r;G6[28]=258,Tp[258]=28;var Z6=s5(av,0),Ab=Z6.r,Pp=new rr(32768);for(var rs=0;rs<32768;++rs){var zi=(rs&43690)>>1|(rs&21845)<<1;zi=(zi&52428)>>2|(zi&13107)<<2,zi=(zi&61680)>>4|(zi&3855)<<4,Pp[rs]=((zi&65280)>>8|(zi&255)<<8)>>1}var $d=function(e,t,a){for(var r=e.length,n=0,i=new rr(t);n<r;++n)e[n]&&++i[e[n]-1];var l=new rr(t);for(n=1;n<t;++n)l[n]=l[n-1]+i[n-1]<<1;var o;if(a){o=new rr(1<<t);var c=15-t;for(n=0;n<r;++n)if(e[n])for(var d=n<<4|e[n],h=t-e[n],g=l[e[n]-1]++<<h,p=g|(1<<h)-1;g<=p;++g)o[Pp[g]>>c]=d}else for(o=new rr(r),n=0;n<r;++n)e[n]&&(o[n]=Pp[l[e[n]-1]++]>>15-e[n]);return o},to=new Zr(288);for(var rs=0;rs<144;++rs)to[rs]=8;for(var rs=144;rs<256;++rs)to[rs]=9;for(var rs=256;rs<280;++rs)to[rs]=7;for(var rs=280;rs<288;++rs)to[rs]=8;var Xm=new Zr(32);for(var rs=0;rs<32;++rs)Xm[rs]=5;var Y6=$d(to,9,0),X6=$d(Xm,5,0),r5=function(e){return(e+7)/8|0},Q6=function(e,t,a){return(a==null||a>e.length)&&(a=e.length),new Zr(e.subarray(t,a))},Mn=function(e,t,a){a<<=t&7;var r=t/8|0;e[r]|=a,e[r+1]|=a>>8},vd=function(e,t,a){a<<=t&7;var r=t/8|0;e[r]|=a,e[r+1]|=a>>8,e[r+2]|=a>>16},Wf=function(e,t){for(var a=[],r=0;r<e.length;++r)e[r]&&a.push({s:r,f:e[r]});var n=a.length,i=a.slice();if(!n)return{t:i5,l:0};if(n==1){var l=new Zr(a[0].s+1);return l[a[0].s]=1,{t:l,l:1}}a.sort(function($,q){return $.f-q.f}),a.push({s:-1,f:25001});var o=a[0],c=a[1],d=0,h=1,g=2;for(a[0]={s:-1,f:o.f+c.f,l:o,r:c};h!=n-1;)o=a[a[d].f<a[g].f?d++:g++],c=a[d!=h&&a[d].f<a[g].f?d++:g++],a[h++]={s:-1,f:o.f+c.f,l:o,r:c};for(var p=i[0].s,r=1;r<n;++r)i[r].s>p&&(p=i[r].s);var f=new rr(p+1),k=Ip(a[h-1],f,0);if(k>t){var r=0,_=0,w=k-t,x=1<<w;for(i.sort(function(q,G){return f[G.s]-f[q.s]||q.f-G.f});r<n;++r){var j=i[r].s;if(f[j]>t)_+=x-(1<<k-f[j]),f[j]=t;else break}for(_>>=w;_>0;){var z=i[r].s;f[z]<t?_-=1<<t-f[z]++-1:++r}for(;r>=0&&_;--r){var N=i[r].s;f[N]==t&&(--f[N],++_)}k=t}return{t:new Zr(f),l:k}},Ip=function(e,t,a){return e.s==-1?Math.max(Ip(e.l,t,a+1),Ip(e.r,t,a+1)):t[e.s]=a},Eb=function(e){for(var t=e.length;t&&!e[--t];);for(var a=new rr(++t),r=0,n=e[0],i=1,l=function(c){a[r++]=c},o=1;o<=t;++o)if(e[o]==n&&o!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(n),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(n);i=1,n=e[o]}return{c:a.subarray(0,r),n:t}},yd=function(e,t){for(var a=0,r=0;r<t.length;++r)a+=e[r]*t[r];return a},n5=function(e,t,a){var r=a.length,n=r5(t+2);e[n]=r&255,e[n+1]=r>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var i=0;i<r;++i)e[n+i+4]=a[i];return(n+4+r)*8},Cb=function(e,t,a,r,n,i,l,o,c,d,h){Mn(t,h++,a),++n[256];for(var g=Wf(n,15),p=g.t,f=g.l,k=Wf(i,15),_=k.t,w=k.l,x=Eb(p),j=x.c,z=x.n,N=Eb(_),$=N.c,q=N.n,G=new rr(19),D=0;D<j.length;++D)++G[j[D]&31];for(var D=0;D<$.length;++D)++G[$[D]&31];for(var I=Wf(G,7),R=I.t,y=I.l,A=19;A>4&&!R[Sb[A-1]];--A);var E=d+5<<3,L=yd(n,to)+yd(i,Xm)+l,M=yd(n,p)+yd(i,_)+l+14+3*A+yd(G,R)+2*G[16]+3*G[17]+7*G[18];if(c>=0&&E<=L&&E<=M)return n5(t,h,e.subarray(c,c+d));var ee,ce,V,le;if(Mn(t,h,1+(M<L)),h+=2,M<L){ee=$d(p,f,0),ce=p,V=$d(_,w,0),le=_;var ye=$d(R,y,0);Mn(t,h,z-257),Mn(t,h+5,q-1),Mn(t,h+10,A-4),h+=14;for(var D=0;D<A;++D)Mn(t,h+3*D,R[Sb[D]]);h+=3*A;for(var be=[j,$],C=0;C<2;++C)for(var H=be[C],D=0;D<H.length;++D){var W=H[D]&31;Mn(t,h,ye[W]),h+=R[W],W>15&&(Mn(t,h,H[D]>>5&127),h+=H[D]>>12)}}else ee=Y6,ce=to,V=X6,le=Xm;for(var D=0;D<o;++D){var Q=r[D];if(Q>255){var W=Q>>18&31;vd(t,h,ee[W+257]),h+=ce[W+257],W>7&&(Mn(t,h,Q>>23&31),h+=sv[W]);var re=Q&31;vd(t,h,V[re]),h+=le[re],re>3&&(vd(t,h,Q>>5&8191),h+=av[re])}else vd(t,h,ee[Q]),h+=ce[Q]}return vd(t,h,ee[256]),h+ce[256]},eS=new tv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),i5=new Zr(0),tS=function(e,t,a,r,n,i){var l=i.z||e.length,o=new Zr(r+l+5*(1+Math.ceil(l/7e3))+n),c=o.subarray(r,o.length-n),d=i.l,h=(i.r||0)&7;if(t){h&&(c[0]=i.r>>3);for(var g=eS[t-1],p=g>>13,f=g&8191,k=(1<<a)-1,_=i.p||new rr(32768),w=i.h||new rr(k+1),x=Math.ceil(a/3),j=2*x,z=function(ne){return(e[ne]^e[ne+1]<<x^e[ne+2]<<j)&k},N=new tv(25e3),$=new rr(288),q=new rr(32),G=0,D=0,I=i.i||0,R=0,y=i.w||0,A=0;I+2<l;++I){var E=z(I),L=I&32767,M=w[E];if(_[L]=M,w[E]=L,y<=I){var ee=l-I;if((G>7e3||R>24576)&&(ee>423||!d)){h=Cb(e,c,0,N,$,q,D,R,A,I-A,h),R=G=D=0,A=I;for(var ce=0;ce<286;++ce)$[ce]=0;for(var ce=0;ce<30;++ce)q[ce]=0}var V=2,le=0,ye=f,be=L-M&32767;if(ee>2&&E==z(I-be))for(var C=Math.min(p,ee)-1,H=Math.min(32767,I),W=Math.min(258,ee);be<=H&&--ye&&L!=M;){if(e[I+V]==e[I+V-be]){for(var Q=0;Q<W&&e[I+Q]==e[I+Q-be];++Q);if(Q>V){if(V=Q,le=be,Q>C)break;for(var re=Math.min(be,Q-2),ue=0,ce=0;ce<re;++ce){var me=I-be+ce&32767,te=_[me],pe=me-te&32767;pe>ue&&(ue=pe,M=me)}}}L=M,M=_[L],be+=L-M&32767}if(le){N[R++]=268435456|Tp[V]<<18|Ab[le];var _e=Tp[V]&31,ve=Ab[le]&31;D+=sv[_e]+av[ve],++$[257+_e],++q[ve],y=I+V,++G}else N[R++]=e[I],++$[e[I]]}}for(I=Math.max(I,y);I<l;++I)N[R++]=e[I],++$[e[I]];h=Cb(e,c,d,N,$,q,D,R,A,I-A,h),d||(i.r=h&7|c[h/8|0]<<3,h-=7,i.h=w,i.p=_,i.i=I,i.w=y)}else{for(var I=i.w||0;I<l+d;I+=65535){var je=I+65535;je>=l&&(c[h/8|0]=d,je=l),h=n5(c,h+1,e.subarray(I,je))}i.i=l}return Q6(o,0,r+r5(h)+n)},l5=function(){var e=1,t=0;return{p:function(a){for(var r=e,n=t,i=a.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)n+=r+=a[l];r=(r&65535)+15*(r>>16),n=(n&65535)+15*(n>>16)}e=r,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},sS=function(e,t,a,r,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new Zr(i.length+e.length);l.set(i),l.set(e,i.length),e=l,n.w=i.length}return tS(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,a,r,n)},o5=function(e,t,a){for(;a;++t)e[t]=a,a>>>=8},aS=function(e,t){var a=t.level,r=a==0?0:a<6?1:a==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=l5();n.p(t.dictionary),o5(e,2,n.d())}};function Dp(e,t){t||(t={});var a=l5();a.p(e);var r=sS(e,t,t.dictionary?6:2,4);return aS(r,t),o5(r,r.length-4,a.d()),r}var rS=typeof TextDecoder<"u"&&new TextDecoder,nS=0;try{rS.decode(i5,{stream:!0}),nS=1}catch{}function iS(e){if(Array.isArray(e))return e}function lS(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(r=i.call(a)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(h){d=!0,n=h}finally{try{if(!c&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return o}}function Lb(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function oS(e,t){if(e){if(typeof e=="string")return Lb(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Lb(e,t):void 0}}function cS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tb(e,t){return iS(e)||lS(e,t)||oS(e,t)||cS()}function Pb(e,t="utf8"){return new TextDecoder(t).decode(e)}const dS=new TextEncoder;function uS(e){return dS.encode(e)}const hS=1024*8,mS=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Jf={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class rv{constructor(t=hS,a={}){Ft(this,"buffer");Ft(this,"byteLength");Ft(this,"byteOffset");Ft(this,"length");Ft(this,"offset");Ft(this,"lastWrittenByte");Ft(this,"littleEndian");Ft(this,"_data");Ft(this,"_mark");Ft(this,"_marks");let r=!1;typeof t=="number"?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const n=a.offset?a.offset>>>0:0,i=t.byteLength-n;let l=n;(ArrayBuffer.isView(t)||t instanceof rv)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+n),t=t.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=(this.offset+t)*2,n=new Uint8Array(r);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,a){const r=Jf[a].BYTES_PER_ELEMENT*t,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+r);if(this.littleEndian===mS&&a!=="uint8"&&a!=="int8"){const o=new Uint8Array(this.buffer.slice(n,n+r));o.reverse();const c=new Jf[a](o.buffer);return this.offset+=r,c.reverse(),c}const l=new Jf[a](i);return this.offset+=r,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let a="";for(let r=0;r<t;r++)a+=this.readChar();return a}readUtf8(t=1){return Pb(this.readBytes(t))}decodeText(t=1,a="utf8"){return Pb(this.readBytes(t),a)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let a=0;a<t.length;a++)this._data.setUint8(this.offset++,t[a]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let a=0;a<t.length;a++)this.writeUint8(t.charCodeAt(a));return this}writeUtf8(t){return this.writeBytes(uS(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const fS=4,Ib=0,Db=1,gS=2;function Tc(e){let t=e.length;for(;--t>=0;)e[t]=0}const pS=0,c5=1,xS=2,vS=3,yS=258,nv=29,Tu=256,pu=Tu+1+nv,lc=30,iv=19,d5=2*pu+1,Hl=15,Gf=16,bS=7,lv=256,u5=16,h5=17,m5=18,Mp=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),um=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kS=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),f5=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jS=512,$n=new Array((pu+2)*2);Tc($n);const Hd=new Array(lc*2);Tc(Hd);const xu=new Array(jS);Tc(xu);const vu=new Array(yS-vS+1);Tc(vu);const ov=new Array(nv);Tc(ov);const Qm=new Array(lc);Tc(Qm);function Zf(e,t,a,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=r,this.max_length=n,this.has_stree=e&&e.length}let g5,p5,x5;function Yf(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const v5=e=>e<256?xu[e]:xu[256+(e>>>7)],yu=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Ba=(e,t,a)=>{e.bi_valid>Gf-a?(e.bi_buf|=t<<e.bi_valid&65535,yu(e,e.bi_buf),e.bi_buf=t>>Gf-e.bi_valid,e.bi_valid+=a-Gf):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=a)},mn=(e,t,a)=>{Ba(e,a[t*2],a[t*2+1])},y5=(e,t)=>{let a=0;do a|=e&1,e>>>=1,a<<=1;while(--t>0);return a>>>1},zS=e=>{e.bi_valid===16?(yu(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},wS=(e,t)=>{const a=t.dyn_tree,r=t.max_code,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,h,g,p,f,k,_=0;for(p=0;p<=Hl;p++)e.bl_count[p]=0;for(a[e.heap[e.heap_max]*2+1]=0,d=e.heap_max+1;d<d5;d++)h=e.heap[d],p=a[a[h*2+1]*2+1]+1,p>c&&(p=c,_++),a[h*2+1]=p,!(h>r)&&(e.bl_count[p]++,f=0,h>=o&&(f=l[h-o]),k=a[h*2],e.opt_len+=k*(p+f),i&&(e.static_len+=k*(n[h*2+1]+f)));if(_!==0){do{for(p=c-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[c]--,_-=2}while(_>0);for(p=c;p!==0;p--)for(h=e.bl_count[p];h!==0;)g=e.heap[--d],!(g>r)&&(a[g*2+1]!==p&&(e.opt_len+=(p-a[g*2+1])*a[g*2],a[g*2+1]=p),h--)}},b5=(e,t,a)=>{const r=new Array(Hl+1);let n=0,i,l;for(i=1;i<=Hl;i++)n=n+a[i-1]<<1,r[i]=n;for(l=0;l<=t;l++){let o=e[l*2+1];o!==0&&(e[l*2]=y5(r[o]++,o))}},NS=()=>{let e,t,a,r,n;const i=new Array(Hl+1);for(a=0,r=0;r<nv-1;r++)for(ov[r]=a,e=0;e<1<<Mp[r];e++)vu[a++]=r;for(vu[a-1]=r,n=0,r=0;r<16;r++)for(Qm[r]=n,e=0;e<1<<um[r];e++)xu[n++]=r;for(n>>=7;r<lc;r++)for(Qm[r]=n<<7,e=0;e<1<<um[r]-7;e++)xu[256+n++]=r;for(t=0;t<=Hl;t++)i[t]=0;for(e=0;e<=143;)$n[e*2+1]=8,e++,i[8]++;for(;e<=255;)$n[e*2+1]=9,e++,i[9]++;for(;e<=279;)$n[e*2+1]=7,e++,i[7]++;for(;e<=287;)$n[e*2+1]=8,e++,i[8]++;for(b5($n,pu+1,i),e=0;e<lc;e++)Hd[e*2+1]=5,Hd[e*2]=y5(e,5);g5=new Zf($n,Mp,Tu+1,pu,Hl),p5=new Zf(Hd,um,0,lc,Hl),x5=new Zf(new Array(0),kS,0,iv,bS)},k5=e=>{let t;for(t=0;t<pu;t++)e.dyn_ltree[t*2]=0;for(t=0;t<lc;t++)e.dyn_dtree[t*2]=0;for(t=0;t<iv;t++)e.bl_tree[t*2]=0;e.dyn_ltree[lv*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},j5=e=>{e.bi_valid>8?yu(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Mb=(e,t,a,r)=>{const n=t*2,i=a*2;return e[n]<e[i]||e[n]===e[i]&&r[t]<=r[a]},Xf=(e,t,a)=>{const r=e.heap[a];let n=a<<1;for(;n<=e.heap_len&&(n<e.heap_len&&Mb(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!Mb(t,r,e.heap[n],e.depth));)e.heap[a]=e.heap[n],a=n,n<<=1;e.heap[a]=r},Fb=(e,t,a)=>{let r,n,i=0,l,o;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+i++]&255,r+=(e.pending_buf[e.sym_buf+i++]&255)<<8,n=e.pending_buf[e.sym_buf+i++],r===0?mn(e,n,t):(l=vu[n],mn(e,l+Tu+1,t),o=Mp[l],o!==0&&(n-=ov[l],Ba(e,n,o)),r--,l=v5(r),mn(e,l,a),o=um[l],o!==0&&(r-=Qm[l],Ba(e,r,o)));while(i<e.sym_next);mn(e,lv,t)},Fp=(e,t)=>{const a=t.dyn_tree,r=t.stat_desc.static_tree,n=t.stat_desc.has_stree,i=t.stat_desc.elems;let l,o,c=-1,d;for(e.heap_len=0,e.heap_max=d5,l=0;l<i;l++)a[l*2]!==0?(e.heap[++e.heap_len]=c=l,e.depth[l]=0):a[l*2+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=c<2?++c:0,a[d*2]=1,e.depth[d]=0,e.opt_len--,n&&(e.static_len-=r[d*2+1]);for(t.max_code=c,l=e.heap_len>>1;l>=1;l--)Xf(e,a,l);d=i;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Xf(e,a,1),o=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=o,a[d*2]=a[l*2]+a[o*2],e.depth[d]=(e.depth[l]>=e.depth[o]?e.depth[l]:e.depth[o])+1,a[l*2+1]=a[o*2+1]=d,e.heap[1]=d++,Xf(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],wS(e,t),b5(a,c,e.bl_count)},Ob=(e,t,a)=>{let r,n=-1,i,l=t[0*2+1],o=0,c=7,d=4;for(l===0&&(c=138,d=3),t[(a+1)*2+1]=65535,r=0;r<=a;r++)i=l,l=t[(r+1)*2+1],!(++o<c&&i===l)&&(o<d?e.bl_tree[i*2]+=o:i!==0?(i!==n&&e.bl_tree[i*2]++,e.bl_tree[u5*2]++):o<=10?e.bl_tree[h5*2]++:e.bl_tree[m5*2]++,o=0,n=i,l===0?(c=138,d=3):i===l?(c=6,d=3):(c=7,d=4))},Rb=(e,t,a)=>{let r,n=-1,i,l=t[0*2+1],o=0,c=7,d=4;for(l===0&&(c=138,d=3),r=0;r<=a;r++)if(i=l,l=t[(r+1)*2+1],!(++o<c&&i===l)){if(o<d)do mn(e,i,e.bl_tree);while(--o!==0);else i!==0?(i!==n&&(mn(e,i,e.bl_tree),o--),mn(e,u5,e.bl_tree),Ba(e,o-3,2)):o<=10?(mn(e,h5,e.bl_tree),Ba(e,o-3,3)):(mn(e,m5,e.bl_tree),Ba(e,o-11,7));o=0,n=i,l===0?(c=138,d=3):i===l?(c=6,d=3):(c=7,d=4)}},_S=e=>{let t;for(Ob(e,e.dyn_ltree,e.l_desc.max_code),Ob(e,e.dyn_dtree,e.d_desc.max_code),Fp(e,e.bl_desc),t=iv-1;t>=3&&e.bl_tree[f5[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},SS=(e,t,a,r)=>{let n;for(Ba(e,t-257,5),Ba(e,a-1,5),Ba(e,r-4,4),n=0;n<r;n++)Ba(e,e.bl_tree[f5[n]*2+1],3);Rb(e,e.dyn_ltree,t-1),Rb(e,e.dyn_dtree,a-1)},AS=e=>{let t=4093624447,a;for(a=0;a<=31;a++,t>>>=1)if(t&1&&e.dyn_ltree[a*2]!==0)return Ib;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Db;for(a=32;a<Tu;a++)if(e.dyn_ltree[a*2]!==0)return Db;return Ib};let Bb=!1;const ES=e=>{Bb||(NS(),Bb=!0),e.l_desc=new Yf(e.dyn_ltree,g5),e.d_desc=new Yf(e.dyn_dtree,p5),e.bl_desc=new Yf(e.bl_tree,x5),e.bi_buf=0,e.bi_valid=0,k5(e)},z5=(e,t,a,r)=>{Ba(e,(pS<<1)+(r?1:0),3),j5(e),yu(e,a),yu(e,~a),a&&e.pending_buf.set(e.window.subarray(t,t+a),e.pending),e.pending+=a},CS=e=>{Ba(e,c5<<1,3),mn(e,lv,$n),zS(e)},LS=(e,t,a,r)=>{let n,i,l=0;e.level>0?(e.strm.data_type===gS&&(e.strm.data_type=AS(e)),Fp(e,e.l_desc),Fp(e,e.d_desc),l=_S(e),n=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=n&&(n=i)):n=i=a+5,a+4<=n&&t!==-1?z5(e,t,a,r):e.strategy===fS||i===n?(Ba(e,(c5<<1)+(r?1:0),3),Fb(e,$n,Hd)):(Ba(e,(xS<<1)+(r?1:0),3),SS(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),Fb(e,e.dyn_ltree,e.dyn_dtree)),k5(e),r&&j5(e)},TS=(e,t,a)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=a,t===0?e.dyn_ltree[a*2]++:(e.matches++,t--,e.dyn_ltree[(vu[a]+Tu+1)*2]++,e.dyn_dtree[v5(t)*2]++),e.sym_next===e.sym_end);var PS=ES,IS=z5,DS=LS,MS=TS,FS=CS,OS={_tr_init:PS,_tr_stored_block:IS,_tr_flush_block:DS,_tr_tally:MS,_tr_align:FS};const RS=(e,t,a,r)=>{let n=e&65535|0,i=e>>>16&65535|0,l=0;for(;a!==0;){l=a>2e3?2e3:a,a-=l;do n=n+t[r++]|0,i=i+n|0;while(--l);n%=65521,i%=65521}return n|i<<16|0};var bu=RS;const BS=()=>{let e,t=[];for(var a=0;a<256;a++){e=a;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[a]=e}return t},US=new Uint32Array(BS()),$S=(e,t,a,r)=>{const n=US,i=r+a;e^=-1;for(let l=r;l<i;l++)e=e>>>8^n[(e^t[l])&255];return e^-1};var Js=$S,zc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:HS,_tr_stored_block:Op,_tr_flush_block:VS,_tr_tally:Ji,_tr_align:KS}=OS,{Z_NO_FLUSH:Gi,Z_PARTIAL_FLUSH:qS,Z_FULL_FLUSH:WS,Z_FINISH:zr,Z_BLOCK:Ub,Z_OK:ia,Z_STREAM_END:$b,Z_STREAM_ERROR:xn,Z_DATA_ERROR:JS,Z_BUF_ERROR:Qf,Z_DEFAULT_COMPRESSION:GS,Z_FILTERED:ZS,Z_HUFFMAN_ONLY:Rh,Z_RLE:YS,Z_FIXED:XS,Z_DEFAULT_STRATEGY:QS,Z_UNKNOWN:e8,Z_DEFLATED:_0}=Pu,t8=9,s8=15,a8=8,r8=29,n8=256,Rp=n8+1+r8,i8=30,l8=19,o8=2*Rp+1,c8=15,Nt=3,Fi=258,vn=Fi+Nt+1,d8=32,wc=42,cv=57,Bp=69,Up=73,$p=91,Hp=103,Vl=113,Ad=666,Sa=1,Pc=2,so=3,Ic=4,u8=3,Kl=(e,t)=>(e.msg=zc[t],t),Hb=e=>e*2-(e>4?9:0),Pi=e=>{let t=e.length;for(;--t>=0;)e[t]=0},h8=e=>{let t,a,r,n=e.w_size;t=e.hash_size,r=t;do a=e.head[--r],e.head[r]=a>=n?a-n:0;while(--t);t=n,r=t;do a=e.prev[--r],e.prev[r]=a>=n?a-n:0;while(--t)};let m8=(e,t,a)=>(t<<e.hash_shift^a)&e.hash_mask,Zi=m8;const tr=e=>{const t=e.state;let a=t.pending;a>e.avail_out&&(a=e.avail_out),a!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+a),e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,t.pending===0&&(t.pending_out=0))},nr=(e,t)=>{VS(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,tr(e.strm)},Tt=(e,t)=>{e.pending_buf[e.pending++]=t},bd=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Vp=(e,t,a,r)=>{let n=e.avail_in;return n>r&&(n=r),n===0?0:(e.avail_in-=n,t.set(e.input.subarray(e.next_in,e.next_in+n),a),e.state.wrap===1?e.adler=bu(e.adler,t,n,a):e.state.wrap===2&&(e.adler=Js(e.adler,t,n,a)),e.next_in+=n,e.total_in+=n,n)},w5=(e,t)=>{let a=e.max_chain_length,r=e.strstart,n,i,l=e.prev_length,o=e.nice_match;const c=e.strstart>e.w_size-vn?e.strstart-(e.w_size-vn):0,d=e.window,h=e.w_mask,g=e.prev,p=e.strstart+Fi;let f=d[r+l-1],k=d[r+l];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do if(n=t,!(d[n+l]!==k||d[n+l-1]!==f||d[n]!==d[r]||d[++n]!==d[r+1])){r+=2,n++;do;while(d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&r<p);if(i=Fi-(p-r),r=p-Fi,i>l){if(e.match_start=t,l=i,i>=o)break;f=d[r+l-1],k=d[r+l]}}while((t=g[t&h])>c&&--a!==0);return l<=e.lookahead?l:e.lookahead},Nc=e=>{const t=e.w_size;let a,r,n;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-vn)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),h8(e),r+=t),e.strm.avail_in===0)break;if(a=Vp(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=a,e.lookahead+e.insert>=Nt)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=Zi(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Zi(e,e.ins_h,e.window[n+Nt-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<Nt)););}while(e.lookahead<vn&&e.strm.avail_in!==0)},N5=(e,t)=>{let a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,n,i,l=0,o=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<a&&(r===0&&t!==zr||t===Gi||r!==n+e.strm.avail_in)))break;l=t===zr&&r===n+e.strm.avail_in?1:0,Op(e,0,0,l),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,tr(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Vp(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(l===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),l?Ic:t!==Gi&&t!==zr&&e.strm.avail_in===0&&e.strstart===e.block_start?Pc:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Vp(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=a||(n||t===zr)&&t!==Gi&&e.strm.avail_in===0&&n<=i)&&(r=n>i?i:n,l=t===zr&&e.strm.avail_in===0&&r===n?1:0,Op(e,e.block_start,r,l),e.block_start+=r,tr(e.strm)),l?so:Sa)},eg=(e,t)=>{let a,r;for(;;){if(e.lookahead<vn){if(Nc(e),e.lookahead<vn&&t===Gi)return Sa;if(e.lookahead===0)break}if(a=0,e.lookahead>=Nt&&(e.ins_h=Zi(e,e.ins_h,e.window[e.strstart+Nt-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),a!==0&&e.strstart-a<=e.w_size-vn&&(e.match_length=w5(e,a)),e.match_length>=Nt)if(r=Ji(e,e.strstart-e.match_start,e.match_length-Nt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Nt){e.match_length--;do e.strstart++,e.ins_h=Zi(e,e.ins_h,e.window[e.strstart+Nt-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Zi(e,e.ins_h,e.window[e.strstart+1]);else r=Ji(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(nr(e,!1),e.strm.avail_out===0))return Sa}return e.insert=e.strstart<Nt-1?e.strstart:Nt-1,t===zr?(nr(e,!0),e.strm.avail_out===0?so:Ic):e.sym_next&&(nr(e,!1),e.strm.avail_out===0)?Sa:Pc},Co=(e,t)=>{let a,r,n;for(;;){if(e.lookahead<vn){if(Nc(e),e.lookahead<vn&&t===Gi)return Sa;if(e.lookahead===0)break}if(a=0,e.lookahead>=Nt&&(e.ins_h=Zi(e,e.ins_h,e.window[e.strstart+Nt-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Nt-1,a!==0&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-vn&&(e.match_length=w5(e,a),e.match_length<=5&&(e.strategy===ZS||e.match_length===Nt&&e.strstart-e.match_start>4096)&&(e.match_length=Nt-1)),e.prev_length>=Nt&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-Nt,r=Ji(e,e.strstart-1-e.prev_match,e.prev_length-Nt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=Zi(e,e.ins_h,e.window[e.strstart+Nt-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Nt-1,e.strstart++,r&&(nr(e,!1),e.strm.avail_out===0))return Sa}else if(e.match_available){if(r=Ji(e,0,e.window[e.strstart-1]),r&&nr(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Sa}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ji(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Nt-1?e.strstart:Nt-1,t===zr?(nr(e,!0),e.strm.avail_out===0?so:Ic):e.sym_next&&(nr(e,!1),e.strm.avail_out===0)?Sa:Pc},f8=(e,t)=>{let a,r,n,i;const l=e.window;for(;;){if(e.lookahead<=Fi){if(Nc(e),e.lookahead<=Fi&&t===Gi)return Sa;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Nt&&e.strstart>0&&(n=e.strstart-1,r=l[n],r===l[++n]&&r===l[++n]&&r===l[++n])){i=e.strstart+Fi;do;while(r===l[++n]&&r===l[++n]&&r===l[++n]&&r===l[++n]&&r===l[++n]&&r===l[++n]&&r===l[++n]&&r===l[++n]&&n<i);e.match_length=Fi-(i-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Nt?(a=Ji(e,1,e.match_length-Nt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=Ji(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),a&&(nr(e,!1),e.strm.avail_out===0))return Sa}return e.insert=0,t===zr?(nr(e,!0),e.strm.avail_out===0?so:Ic):e.sym_next&&(nr(e,!1),e.strm.avail_out===0)?Sa:Pc},g8=(e,t)=>{let a;for(;;){if(e.lookahead===0&&(Nc(e),e.lookahead===0)){if(t===Gi)return Sa;break}if(e.match_length=0,a=Ji(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(nr(e,!1),e.strm.avail_out===0))return Sa}return e.insert=0,t===zr?(nr(e,!0),e.strm.avail_out===0?so:Ic):e.sym_next&&(nr(e,!1),e.strm.avail_out===0)?Sa:Pc};function on(e,t,a,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=r,this.func=n}const Ed=[new on(0,0,0,0,N5),new on(4,4,8,4,eg),new on(4,5,16,8,eg),new on(4,6,32,32,eg),new on(4,4,16,16,Co),new on(8,16,32,32,Co),new on(8,16,128,128,Co),new on(8,32,128,256,Co),new on(32,128,258,1024,Co),new on(32,258,258,4096,Co)],p8=e=>{e.window_size=2*e.w_size,Pi(e.head),e.max_lazy_match=Ed[e.level].max_lazy,e.good_match=Ed[e.level].good_length,e.nice_match=Ed[e.level].nice_length,e.max_chain_length=Ed[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Nt-1,e.match_available=0,e.ins_h=0};function x8(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_0,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(o8*2),this.dyn_dtree=new Uint16Array((2*i8+1)*2),this.bl_tree=new Uint16Array((2*l8+1)*2),Pi(this.dyn_ltree),Pi(this.dyn_dtree),Pi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(c8+1),this.heap=new Uint16Array(2*Rp+1),Pi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Rp+1),Pi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Iu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==wc&&t.status!==cv&&t.status!==Bp&&t.status!==Up&&t.status!==$p&&t.status!==Hp&&t.status!==Vl&&t.status!==Ad?1:0},_5=e=>{if(Iu(e))return Kl(e,xn);e.total_in=e.total_out=0,e.data_type=e8;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?cv:t.wrap?wc:Vl,e.adler=t.wrap===2?0:1,t.last_flush=-2,HS(t),ia},S5=e=>{const t=_5(e);return t===ia&&p8(e.state),t},v8=(e,t)=>Iu(e)||e.state.wrap!==2?xn:(e.state.gzhead=t,ia),A5=(e,t,a,r,n,i)=>{if(!e)return xn;let l=1;if(t===GS&&(t=6),r<0?(l=0,r=-r):r>15&&(l=2,r-=16),n<1||n>t8||a!==_0||r<8||r>15||t<0||t>9||i<0||i>XS||r===8&&l!==1)return Kl(e,xn);r===8&&(r=9);const o=new x8;return e.state=o,o.strm=e,o.status=wc,o.wrap=l,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Nt-1)/Nt),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=a,S5(e)},y8=(e,t)=>A5(e,t,_0,s8,a8,QS),b8=(e,t)=>{if(Iu(e)||t>Ub||t<0)return e?Kl(e,xn):xn;const a=e.state;if(!e.output||e.avail_in!==0&&!e.input||a.status===Ad&&t!==zr)return Kl(e,e.avail_out===0?Qf:xn);const r=a.last_flush;if(a.last_flush=t,a.pending!==0){if(tr(e),e.avail_out===0)return a.last_flush=-1,ia}else if(e.avail_in===0&&Hb(t)<=Hb(r)&&t!==zr)return Kl(e,Qf);if(a.status===Ad&&e.avail_in!==0)return Kl(e,Qf);if(a.status===wc&&a.wrap===0&&(a.status=Vl),a.status===wc){let n=_0+(a.w_bits-8<<4)<<8,i=-1;if(a.strategy>=Rh||a.level<2?i=0:a.level<6?i=1:a.level===6?i=2:i=3,n|=i<<6,a.strstart!==0&&(n|=d8),n+=31-n%31,bd(a,n),a.strstart!==0&&(bd(a,e.adler>>>16),bd(a,e.adler&65535)),e.adler=1,a.status=Vl,tr(e),a.pending!==0)return a.last_flush=-1,ia}if(a.status===cv){if(e.adler=0,Tt(a,31),Tt(a,139),Tt(a,8),a.gzhead)Tt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),Tt(a,a.gzhead.time&255),Tt(a,a.gzhead.time>>8&255),Tt(a,a.gzhead.time>>16&255),Tt(a,a.gzhead.time>>24&255),Tt(a,a.level===9?2:a.strategy>=Rh||a.level<2?4:0),Tt(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(Tt(a,a.gzhead.extra.length&255),Tt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=Js(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=Bp;else if(Tt(a,0),Tt(a,0),Tt(a,0),Tt(a,0),Tt(a,0),Tt(a,a.level===9?2:a.strategy>=Rh||a.level<2?4:0),Tt(a,u8),a.status=Vl,tr(e),a.pending!==0)return a.last_flush=-1,ia}if(a.status===Bp){if(a.gzhead.extra){let n=a.pending,i=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let o=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+o),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>n&&(e.adler=Js(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex+=o,tr(e),a.pending!==0)return a.last_flush=-1,ia;n=0,i-=o}let l=new Uint8Array(a.gzhead.extra);a.pending_buf.set(l.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>n&&(e.adler=Js(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex=0}a.status=Up}if(a.status===Up){if(a.gzhead.name){let n=a.pending,i;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>n&&(e.adler=Js(e.adler,a.pending_buf,a.pending-n,n)),tr(e),a.pending!==0)return a.last_flush=-1,ia;n=0}a.gzindex<a.gzhead.name.length?i=a.gzhead.name.charCodeAt(a.gzindex++)&255:i=0,Tt(a,i)}while(i!==0);a.gzhead.hcrc&&a.pending>n&&(e.adler=Js(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex=0}a.status=$p}if(a.status===$p){if(a.gzhead.comment){let n=a.pending,i;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>n&&(e.adler=Js(e.adler,a.pending_buf,a.pending-n,n)),tr(e),a.pending!==0)return a.last_flush=-1,ia;n=0}a.gzindex<a.gzhead.comment.length?i=a.gzhead.comment.charCodeAt(a.gzindex++)&255:i=0,Tt(a,i)}while(i!==0);a.gzhead.hcrc&&a.pending>n&&(e.adler=Js(e.adler,a.pending_buf,a.pending-n,n))}a.status=Hp}if(a.status===Hp){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(tr(e),a.pending!==0))return a.last_flush=-1,ia;Tt(a,e.adler&255),Tt(a,e.adler>>8&255),e.adler=0}if(a.status=Vl,tr(e),a.pending!==0)return a.last_flush=-1,ia}if(e.avail_in!==0||a.lookahead!==0||t!==Gi&&a.status!==Ad){let n=a.level===0?N5(a,t):a.strategy===Rh?g8(a,t):a.strategy===YS?f8(a,t):Ed[a.level].func(a,t);if((n===so||n===Ic)&&(a.status=Ad),n===Sa||n===so)return e.avail_out===0&&(a.last_flush=-1),ia;if(n===Pc&&(t===qS?KS(a):t!==Ub&&(Op(a,0,0,!1),t===WS&&(Pi(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),tr(e),e.avail_out===0))return a.last_flush=-1,ia}return t!==zr?ia:a.wrap<=0?$b:(a.wrap===2?(Tt(a,e.adler&255),Tt(a,e.adler>>8&255),Tt(a,e.adler>>16&255),Tt(a,e.adler>>24&255),Tt(a,e.total_in&255),Tt(a,e.total_in>>8&255),Tt(a,e.total_in>>16&255),Tt(a,e.total_in>>24&255)):(bd(a,e.adler>>>16),bd(a,e.adler&65535)),tr(e),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?ia:$b)},k8=e=>{if(Iu(e))return xn;const t=e.state.status;return e.state=null,t===Vl?Kl(e,JS):ia},j8=(e,t)=>{let a=t.length;if(Iu(e))return xn;const r=e.state,n=r.wrap;if(n===2||n===1&&r.status!==wc||r.lookahead)return xn;if(n===1&&(e.adler=bu(e.adler,t,a,0)),r.wrap=0,a>=r.w_size){n===0&&(Pi(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(t.subarray(a-r.w_size,a),0),t=c,a=r.w_size}const i=e.avail_in,l=e.next_in,o=e.input;for(e.avail_in=a,e.next_in=0,e.input=t,Nc(r);r.lookahead>=Nt;){let c=r.strstart,d=r.lookahead-(Nt-1);do r.ins_h=Zi(r,r.ins_h,r.window[c+Nt-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--d);r.strstart=c,r.lookahead=Nt-1,Nc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Nt-1,r.match_available=0,e.next_in=l,e.input=o,e.avail_in=i,r.wrap=n,ia};var z8=y8,w8=A5,N8=S5,_8=_5,S8=v8,A8=b8,E8=k8,C8=j8,L8="pako deflate (from Nodeca project)",Vd={deflateInit:z8,deflateInit2:w8,deflateReset:N8,deflateResetKeep:_8,deflateSetHeader:S8,deflate:A8,deflateEnd:E8,deflateSetDictionary:C8,deflateInfo:L8};const T8=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var P8=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const a=t.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const r in a)T8(a,r)&&(e[r]=a[r])}}return e},I8=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const a=new Uint8Array(t);for(let r=0,n=0,i=e.length;r<i;r++){let l=e[r];a.set(l,n),n+=l.length}return a},S0={assign:P8,flattenChunks:I8};let E5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E5=!1}const ku=new Uint8Array(256);for(let e=0;e<256;e++)ku[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ku[254]=ku[254]=1;var D8=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,a,r,n,i,l=e.length,o=0;for(n=0;n<l;n++)a=e.charCodeAt(n),(a&64512)===55296&&n+1<l&&(r=e.charCodeAt(n+1),(r&64512)===56320&&(a=65536+(a-55296<<10)+(r-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(t=new Uint8Array(o),i=0,n=0;i<o;n++)a=e.charCodeAt(n),(a&64512)===55296&&n+1<l&&(r=e.charCodeAt(n+1),(r&64512)===56320&&(a=65536+(a-55296<<10)+(r-56320),n++)),a<128?t[i++]=a:a<2048?(t[i++]=192|a>>>6,t[i++]=128|a&63):a<65536?(t[i++]=224|a>>>12,t[i++]=128|a>>>6&63,t[i++]=128|a&63):(t[i++]=240|a>>>18,t[i++]=128|a>>>12&63,t[i++]=128|a>>>6&63,t[i++]=128|a&63);return t};const M8=(e,t)=>{if(t<65534&&e.subarray&&E5)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let a="";for(let r=0;r<t;r++)a+=String.fromCharCode(e[r]);return a};var F8=(e,t)=>{const a=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,n;const i=new Array(a*2);for(n=0,r=0;r<a;){let l=e[r++];if(l<128){i[n++]=l;continue}let o=ku[l];if(o>4){i[n++]=65533,r+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&r<a;)l=l<<6|e[r++]&63,o--;if(o>1){i[n++]=65533;continue}l<65536?i[n++]=l:(l-=65536,i[n++]=55296|l>>10&1023,i[n++]=56320|l&1023)}return M8(i,n)},O8=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let a=t-1;for(;a>=0&&(e[a]&192)===128;)a--;return a<0||a===0?t:a+ku[e[a]]>t?a:t},ju={string2buf:D8,buf2string:F8,utf8border:O8};function R8(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var C5=R8;const L5=Object.prototype.toString,{Z_NO_FLUSH:B8,Z_SYNC_FLUSH:U8,Z_FULL_FLUSH:$8,Z_FINISH:H8,Z_OK:e0,Z_STREAM_END:V8,Z_DEFAULT_COMPRESSION:K8,Z_DEFAULT_STRATEGY:q8,Z_DEFLATED:W8}=Pu;function dv(e){this.options=S0.assign({level:K8,method:W8,chunkSize:16384,windowBits:15,memLevel:8,strategy:q8},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C5,this.strm.avail_out=0;let a=Vd.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(a!==e0)throw new Error(zc[a]);if(t.header&&Vd.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=ju.string2buf(t.dictionary):L5.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,a=Vd.deflateSetDictionary(this.strm,r),a!==e0)throw new Error(zc[a]);this._dict_set=!0}}dv.prototype.push=function(e,t){const a=this.strm,r=this.options.chunkSize;let n,i;if(this.ended)return!1;for(t===~~t?i=t:i=t===!0?H8:B8,typeof e=="string"?a.input=ju.string2buf(e):L5.call(e)==="[object ArrayBuffer]"?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(r),a.next_out=0,a.avail_out=r),(i===U8||i===$8)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(n=Vd.deflate(a,i),n===V8)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Vd.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===e0;if(a.avail_out===0){this.onData(a.output);continue}if(i>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0};dv.prototype.onData=function(e){this.chunks.push(e)};dv.prototype.onEnd=function(e){e===e0&&(this.result=S0.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const Bh=16209,J8=16191;var G8=function(t,a){let r,n,i,l,o,c,d,h,g,p,f,k,_,w,x,j,z,N,$,q,G,D,I,R;const y=t.state;r=t.next_in,I=t.input,n=r+(t.avail_in-5),i=t.next_out,R=t.output,l=i-(a-t.avail_out),o=i+(t.avail_out-257),c=y.dmax,d=y.wsize,h=y.whave,g=y.wnext,p=y.window,f=y.hold,k=y.bits,_=y.lencode,w=y.distcode,x=(1<<y.lenbits)-1,j=(1<<y.distbits)-1;e:do{k<15&&(f+=I[r++]<<k,k+=8,f+=I[r++]<<k,k+=8),z=_[f&x];t:for(;;){if(N=z>>>24,f>>>=N,k-=N,N=z>>>16&255,N===0)R[i++]=z&65535;else if(N&16){$=z&65535,N&=15,N&&(k<N&&(f+=I[r++]<<k,k+=8),$+=f&(1<<N)-1,f>>>=N,k-=N),k<15&&(f+=I[r++]<<k,k+=8,f+=I[r++]<<k,k+=8),z=w[f&j];s:for(;;){if(N=z>>>24,f>>>=N,k-=N,N=z>>>16&255,N&16){if(q=z&65535,N&=15,k<N&&(f+=I[r++]<<k,k+=8,k<N&&(f+=I[r++]<<k,k+=8)),q+=f&(1<<N)-1,q>c){t.msg="invalid distance too far back",y.mode=Bh;break e}if(f>>>=N,k-=N,N=i-l,q>N){if(N=q-N,N>h&&y.sane){t.msg="invalid distance too far back",y.mode=Bh;break e}if(G=0,D=p,g===0){if(G+=d-N,N<$){$-=N;do R[i++]=p[G++];while(--N);G=i-q,D=R}}else if(g<N){if(G+=d+g-N,N-=g,N<$){$-=N;do R[i++]=p[G++];while(--N);if(G=0,g<$){N=g,$-=N;do R[i++]=p[G++];while(--N);G=i-q,D=R}}}else if(G+=g-N,N<$){$-=N;do R[i++]=p[G++];while(--N);G=i-q,D=R}for(;$>2;)R[i++]=D[G++],R[i++]=D[G++],R[i++]=D[G++],$-=3;$&&(R[i++]=D[G++],$>1&&(R[i++]=D[G++]))}else{G=i-q;do R[i++]=R[G++],R[i++]=R[G++],R[i++]=R[G++],$-=3;while($>2);$&&(R[i++]=R[G++],$>1&&(R[i++]=R[G++]))}}else if(N&64){t.msg="invalid distance code",y.mode=Bh;break e}else{z=w[(z&65535)+(f&(1<<N)-1)];continue s}break}}else if(N&64)if(N&32){y.mode=J8;break e}else{t.msg="invalid literal/length code",y.mode=Bh;break e}else{z=_[(z&65535)+(f&(1<<N)-1)];continue t}break}}while(r<n&&i<o);$=k>>3,r-=$,k-=$<<3,f&=(1<<k)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?5+(n-r):5-(r-n),t.avail_out=i<o?257+(o-i):257-(i-o),y.hold=f,y.bits=k};const Lo=15,Vb=852,Kb=592,qb=0,tg=1,Wb=2,Z8=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Y8=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),X8=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Q8=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),e7=(e,t,a,r,n,i,l,o)=>{const c=o.bits;let d=0,h=0,g=0,p=0,f=0,k=0,_=0,w=0,x=0,j=0,z,N,$,q,G,D=null,I;const R=new Uint16Array(Lo+1),y=new Uint16Array(Lo+1);let A=null,E,L,M;for(d=0;d<=Lo;d++)R[d]=0;for(h=0;h<r;h++)R[t[a+h]]++;for(f=c,p=Lo;p>=1&&R[p]===0;p--);if(f>p&&(f=p),p===0)return n[i++]=1<<24|64<<16|0,n[i++]=1<<24|64<<16|0,o.bits=1,0;for(g=1;g<p&&R[g]===0;g++);for(f<g&&(f=g),w=1,d=1;d<=Lo;d++)if(w<<=1,w-=R[d],w<0)return-1;if(w>0&&(e===qb||p!==1))return-1;for(y[1]=0,d=1;d<Lo;d++)y[d+1]=y[d]+R[d];for(h=0;h<r;h++)t[a+h]!==0&&(l[y[t[a+h]]++]=h);if(e===qb?(D=A=l,I=20):e===tg?(D=Z8,A=Y8,I=257):(D=X8,A=Q8,I=0),j=0,h=0,d=g,G=i,k=f,_=0,$=-1,x=1<<f,q=x-1,e===tg&&x>Vb||e===Wb&&x>Kb)return 1;for(;;){E=d-_,l[h]+1<I?(L=0,M=l[h]):l[h]>=I?(L=A[l[h]-I],M=D[l[h]-I]):(L=96,M=0),z=1<<d-_,N=1<<k,g=N;do N-=z,n[G+(j>>_)+N]=E<<24|L<<16|M|0;while(N!==0);for(z=1<<d-1;j&z;)z>>=1;if(z!==0?(j&=z-1,j+=z):j=0,h++,--R[d]===0){if(d===p)break;d=t[a+l[h]]}if(d>f&&(j&q)!==$){for(_===0&&(_=f),G+=g,k=d-_,w=1<<k;k+_<p&&(w-=R[k+_],!(w<=0));)k++,w<<=1;if(x+=1<<k,e===tg&&x>Vb||e===Wb&&x>Kb)return 1;$=j&q,n[$]=f<<24|k<<16|G-i|0}}return j!==0&&(n[G+j]=d-_<<24|64<<16|0),o.bits=f,0};var Kd=e7;const t7=0,T5=1,P5=2,{Z_FINISH:Jb,Z_BLOCK:s7,Z_TREES:Uh,Z_OK:ao,Z_STREAM_END:a7,Z_NEED_DICT:r7,Z_STREAM_ERROR:Cr,Z_DATA_ERROR:I5,Z_MEM_ERROR:D5,Z_BUF_ERROR:n7,Z_DEFLATED:Gb}=Pu,A0=16180,Zb=16181,Yb=16182,Xb=16183,Qb=16184,e1=16185,t1=16186,s1=16187,a1=16188,r1=16189,t0=16190,Fn=16191,sg=16192,n1=16193,ag=16194,i1=16195,l1=16196,o1=16197,c1=16198,$h=16199,Hh=16200,d1=16201,u1=16202,h1=16203,m1=16204,f1=16205,rg=16206,g1=16207,p1=16208,is=16209,M5=16210,F5=16211,i7=852,l7=592,o7=15,c7=o7,x1=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function d7(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const oo=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<A0||t.mode>F5?1:0},O5=e=>{if(oo(e))return Cr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=A0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(i7),t.distcode=t.distdyn=new Int32Array(l7),t.sane=1,t.back=-1,ao},R5=e=>{if(oo(e))return Cr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,O5(e)},B5=(e,t)=>{let a;if(oo(e))return Cr;const r=e.state;return t<0?(a=0,t=-t):(a=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Cr:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=a,r.wbits=t,R5(e))},U5=(e,t)=>{if(!e)return Cr;const a=new d7;e.state=a,a.strm=e,a.window=null,a.mode=A0;const r=B5(e,t);return r!==ao&&(e.state=null),r},u7=e=>U5(e,c7);let v1=!0,ng,ig;const h7=e=>{if(v1){ng=new Int32Array(512),ig=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Kd(T5,e.lens,0,288,ng,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Kd(P5,e.lens,0,32,ig,0,e.work,{bits:5}),v1=!1}e.lencode=ng,e.lenbits=9,e.distcode=ig,e.distbits=5},$5=(e,t,a,r)=>{let n;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(a-i.wsize,a),0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>r&&(n=r),i.window.set(t.subarray(a-r,a-r+n),i.wnext),r-=n,r?(i.window.set(t.subarray(a-r,a),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},m7=(e,t)=>{let a,r,n,i,l,o,c,d,h,g,p,f,k,_,w=0,x,j,z,N,$,q,G,D;const I=new Uint8Array(4);let R,y;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(oo(e)||!e.output||!e.input&&e.avail_in!==0)return Cr;a=e.state,a.mode===Fn&&(a.mode=sg),l=e.next_out,n=e.output,c=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,d=a.hold,h=a.bits,g=o,p=c,D=ao;e:for(;;)switch(a.mode){case A0:if(a.wrap===0){a.mode=sg;break}for(;h<16;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(a.wrap&2&&d===35615){a.wbits===0&&(a.wbits=15),a.check=0,I[0]=d&255,I[1]=d>>>8&255,a.check=Js(a.check,I,2,0),d=0,h=0,a.mode=Zb;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=is;break}if((d&15)!==Gb){e.msg="unknown compression method",a.mode=is;break}if(d>>>=4,h-=4,G=(d&15)+8,a.wbits===0&&(a.wbits=G),G>15||G>a.wbits){e.msg="invalid window size",a.mode=is;break}a.dmax=1<<a.wbits,a.flags=0,e.adler=a.check=1,a.mode=d&512?r1:Fn,d=0,h=0;break;case Zb:for(;h<16;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(a.flags=d,(a.flags&255)!==Gb){e.msg="unknown compression method",a.mode=is;break}if(a.flags&57344){e.msg="unknown header flags set",a.mode=is;break}a.head&&(a.head.text=d>>8&1),a.flags&512&&a.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,a.check=Js(a.check,I,2,0)),d=0,h=0,a.mode=Yb;case Yb:for(;h<32;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}a.head&&(a.head.time=d),a.flags&512&&a.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,I[2]=d>>>16&255,I[3]=d>>>24&255,a.check=Js(a.check,I,4,0)),d=0,h=0,a.mode=Xb;case Xb:for(;h<16;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}a.head&&(a.head.xflags=d&255,a.head.os=d>>8),a.flags&512&&a.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,a.check=Js(a.check,I,2,0)),d=0,h=0,a.mode=Qb;case Qb:if(a.flags&1024){for(;h<16;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}a.length=d,a.head&&(a.head.extra_len=d),a.flags&512&&a.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,a.check=Js(a.check,I,2,0)),d=0,h=0}else a.head&&(a.head.extra=null);a.mode=e1;case e1:if(a.flags&1024&&(f=a.length,f>o&&(f=o),f&&(a.head&&(G=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(r.subarray(i,i+f),G)),a.flags&512&&a.wrap&4&&(a.check=Js(a.check,r,f,i)),o-=f,i+=f,a.length-=f),a.length))break e;a.length=0,a.mode=t1;case t1:if(a.flags&2048){if(o===0)break e;f=0;do G=r[i+f++],a.head&&G&&a.length<65536&&(a.head.name+=String.fromCharCode(G));while(G&&f<o);if(a.flags&512&&a.wrap&4&&(a.check=Js(a.check,r,f,i)),o-=f,i+=f,G)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=s1;case s1:if(a.flags&4096){if(o===0)break e;f=0;do G=r[i+f++],a.head&&G&&a.length<65536&&(a.head.comment+=String.fromCharCode(G));while(G&&f<o);if(a.flags&512&&a.wrap&4&&(a.check=Js(a.check,r,f,i)),o-=f,i+=f,G)break e}else a.head&&(a.head.comment=null);a.mode=a1;case a1:if(a.flags&512){for(;h<16;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(a.wrap&4&&d!==(a.check&65535)){e.msg="header crc mismatch",a.mode=is;break}d=0,h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=Fn;break;case r1:for(;h<32;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}e.adler=a.check=x1(d),d=0,h=0,a.mode=t0;case t0:if(a.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,a.hold=d,a.bits=h,r7;e.adler=a.check=1,a.mode=Fn;case Fn:if(t===s7||t===Uh)break e;case sg:if(a.last){d>>>=h&7,h-=h&7,a.mode=rg;break}for(;h<3;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}switch(a.last=d&1,d>>>=1,h-=1,d&3){case 0:a.mode=n1;break;case 1:if(h7(a),a.mode=$h,t===Uh){d>>>=2,h-=2;break e}break;case 2:a.mode=l1;break;case 3:e.msg="invalid block type",a.mode=is}d>>>=2,h-=2;break;case n1:for(d>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=is;break}if(a.length=d&65535,d=0,h=0,a.mode=ag,t===Uh)break e;case ag:a.mode=i1;case i1:if(f=a.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;n.set(r.subarray(i,i+f),l),o-=f,i+=f,c-=f,l+=f,a.length-=f;break}a.mode=Fn;break;case l1:for(;h<14;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(a.nlen=(d&31)+257,d>>>=5,h-=5,a.ndist=(d&31)+1,d>>>=5,h-=5,a.ncode=(d&15)+4,d>>>=4,h-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=is;break}a.have=0,a.mode=o1;case o1:for(;a.have<a.ncode;){for(;h<3;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}a.lens[A[a.have++]]=d&7,d>>>=3,h-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,R={bits:a.lenbits},D=Kd(t7,a.lens,0,19,a.lencode,0,a.work,R),a.lenbits=R.bits,D){e.msg="invalid code lengths set",a.mode=is;break}a.have=0,a.mode=c1;case c1:for(;a.have<a.nlen+a.ndist;){for(;w=a.lencode[d&(1<<a.lenbits)-1],x=w>>>24,j=w>>>16&255,z=w&65535,!(x<=h);){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(z<16)d>>>=x,h-=x,a.lens[a.have++]=z;else{if(z===16){for(y=x+2;h<y;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(d>>>=x,h-=x,a.have===0){e.msg="invalid bit length repeat",a.mode=is;break}G=a.lens[a.have-1],f=3+(d&3),d>>>=2,h-=2}else if(z===17){for(y=x+3;h<y;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}d>>>=x,h-=x,G=0,f=3+(d&7),d>>>=3,h-=3}else{for(y=x+7;h<y;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}d>>>=x,h-=x,G=0,f=11+(d&127),d>>>=7,h-=7}if(a.have+f>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=is;break}for(;f--;)a.lens[a.have++]=G}}if(a.mode===is)break;if(a.lens[256]===0){e.msg="invalid code -- missing end-of-block",a.mode=is;break}if(a.lenbits=9,R={bits:a.lenbits},D=Kd(T5,a.lens,0,a.nlen,a.lencode,0,a.work,R),a.lenbits=R.bits,D){e.msg="invalid literal/lengths set",a.mode=is;break}if(a.distbits=6,a.distcode=a.distdyn,R={bits:a.distbits},D=Kd(P5,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,R),a.distbits=R.bits,D){e.msg="invalid distances set",a.mode=is;break}if(a.mode=$h,t===Uh)break e;case $h:a.mode=Hh;case Hh:if(o>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,a.hold=d,a.bits=h,G8(e,p),l=e.next_out,n=e.output,c=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,d=a.hold,h=a.bits,a.mode===Fn&&(a.back=-1);break}for(a.back=0;w=a.lencode[d&(1<<a.lenbits)-1],x=w>>>24,j=w>>>16&255,z=w&65535,!(x<=h);){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(j&&!(j&240)){for(N=x,$=j,q=z;w=a.lencode[q+((d&(1<<N+$)-1)>>N)],x=w>>>24,j=w>>>16&255,z=w&65535,!(N+x<=h);){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}d>>>=N,h-=N,a.back+=N}if(d>>>=x,h-=x,a.back+=x,a.length=z,j===0){a.mode=f1;break}if(j&32){a.back=-1,a.mode=Fn;break}if(j&64){e.msg="invalid literal/length code",a.mode=is;break}a.extra=j&15,a.mode=d1;case d1:if(a.extra){for(y=a.extra;h<y;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,h-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=u1;case u1:for(;w=a.distcode[d&(1<<a.distbits)-1],x=w>>>24,j=w>>>16&255,z=w&65535,!(x<=h);){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(!(j&240)){for(N=x,$=j,q=z;w=a.distcode[q+((d&(1<<N+$)-1)>>N)],x=w>>>24,j=w>>>16&255,z=w&65535,!(N+x<=h);){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}d>>>=N,h-=N,a.back+=N}if(d>>>=x,h-=x,a.back+=x,j&64){e.msg="invalid distance code",a.mode=is;break}a.offset=z,a.extra=j&15,a.mode=h1;case h1:if(a.extra){for(y=a.extra;h<y;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,h-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=is;break}a.mode=m1;case m1:if(c===0)break e;if(f=p-c,a.offset>f){if(f=a.offset-f,f>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=is;break}f>a.wnext?(f-=a.wnext,k=a.wsize-f):k=a.wnext-f,f>a.length&&(f=a.length),_=a.window}else _=n,k=l-a.offset,f=a.length;f>c&&(f=c),c-=f,a.length-=f;do n[l++]=_[k++];while(--f);a.length===0&&(a.mode=Hh);break;case f1:if(c===0)break e;n[l++]=a.length,c--,a.mode=Hh;break;case rg:if(a.wrap){for(;h<32;){if(o===0)break e;o--,d|=r[i++]<<h,h+=8}if(p-=c,e.total_out+=p,a.total+=p,a.wrap&4&&p&&(e.adler=a.check=a.flags?Js(a.check,n,p,l-p):bu(a.check,n,p,l-p)),p=c,a.wrap&4&&(a.flags?d:x1(d))!==a.check){e.msg="incorrect data check",a.mode=is;break}d=0,h=0}a.mode=g1;case g1:if(a.wrap&&a.flags){for(;h<32;){if(o===0)break e;o--,d+=r[i++]<<h,h+=8}if(a.wrap&4&&d!==(a.total&4294967295)){e.msg="incorrect length check",a.mode=is;break}d=0,h=0}a.mode=p1;case p1:D=a7;break e;case is:D=I5;break e;case M5:return D5;case F5:default:return Cr}return e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,a.hold=d,a.bits=h,(a.wsize||p!==e.avail_out&&a.mode<is&&(a.mode<rg||t!==Jb))&&$5(e,e.output,e.next_out,p-e.avail_out),g-=e.avail_in,p-=e.avail_out,e.total_in+=g,e.total_out+=p,a.total+=p,a.wrap&4&&p&&(e.adler=a.check=a.flags?Js(a.check,n,p,e.next_out-p):bu(a.check,n,p,e.next_out-p)),e.data_type=a.bits+(a.last?64:0)+(a.mode===Fn?128:0)+(a.mode===$h||a.mode===ag?256:0),(g===0&&p===0||t===Jb)&&D===ao&&(D=n7),D},f7=e=>{if(oo(e))return Cr;let t=e.state;return t.window&&(t.window=null),e.state=null,ao},g7=(e,t)=>{if(oo(e))return Cr;const a=e.state;return a.wrap&2?(a.head=t,t.done=!1,ao):Cr},p7=(e,t)=>{const a=t.length;let r,n,i;return oo(e)||(r=e.state,r.wrap!==0&&r.mode!==t0)?Cr:r.mode===t0&&(n=1,n=bu(n,t,a,0),n!==r.check)?I5:(i=$5(e,t,a,a),i?(r.mode=M5,D5):(r.havedict=1,ao))};var x7=R5,v7=B5,y7=O5,b7=u7,k7=U5,j7=m7,z7=f7,w7=g7,N7=p7,_7="pako inflate (from Nodeca project)",Hn={inflateReset:x7,inflateReset2:v7,inflateResetKeep:y7,inflateInit:b7,inflateInit2:k7,inflate:j7,inflateEnd:z7,inflateGetHeader:w7,inflateSetDictionary:N7,inflateInfo:_7};function S7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var A7=S7;const H5=Object.prototype.toString,{Z_NO_FLUSH:E7,Z_FINISH:C7,Z_OK:zu,Z_STREAM_END:lg,Z_NEED_DICT:og,Z_STREAM_ERROR:L7,Z_DATA_ERROR:y1,Z_MEM_ERROR:T7}=Pu;function Du(e){this.options=S0.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C5,this.strm.avail_out=0;let a=Hn.inflateInit2(this.strm,t.windowBits);if(a!==zu)throw new Error(zc[a]);if(this.header=new A7,Hn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ju.string2buf(t.dictionary):H5.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(a=Hn.inflateSetDictionary(this.strm,t.dictionary),a!==zu)))throw new Error(zc[a])}Du.prototype.push=function(e,t){const a=this.strm,r=this.options.chunkSize,n=this.options.dictionary;let i,l,o;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?C7:E7,H5.call(e)==="[object ArrayBuffer]"?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(r),a.next_out=0,a.avail_out=r),i=Hn.inflate(a,l),i===og&&n&&(i=Hn.inflateSetDictionary(a,n),i===zu?i=Hn.inflate(a,l):i===y1&&(i=og));a.avail_in>0&&i===lg&&a.state.wrap>0&&e[a.next_in]!==0;)Hn.inflateReset(a),i=Hn.inflate(a,l);switch(i){case L7:case y1:case og:case T7:return this.onEnd(i),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(a.avail_out===0||i===lg))if(this.options.to==="string"){let c=ju.utf8border(a.output,a.next_out),d=a.next_out-c,h=ju.buf2string(a.output,c);a.next_out=d,a.avail_out=r-d,d&&a.output.set(a.output.subarray(c,c+d),0),this.onData(h)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(i===zu&&o===0)){if(i===lg)return i=Hn.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Du.prototype.onData=function(e){this.chunks.push(e)};Du.prototype.onEnd=function(e){e===zu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S0.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function uv(e,t){const a=new Du(t);if(a.push(e),a.err)throw a.msg||zc[a.err];return a.result}function P7(e,t){return t=t||{},t.raw=!0,uv(e,t)}var I7=Du,D7=uv,M7=P7,F7=uv,O7=Pu,R7={Inflate:I7,inflate:D7,inflateRaw:M7,ungzip:F7,constants:O7};const{Inflate:B7,inflate:U7,inflateRaw:gC,ungzip:pC}=R7;var b1=B7,$7=U7;const V5=[];for(let e=0;e<256;e++){let t=e;for(let a=0;a<8;a++)t&1?t=3988292384^t>>>1:t=t>>>1;V5[e]=t}const k1=4294967295;function H7(e,t,a){let r=e;for(let n=0;n<a;n++)r=V5[(r^t[n])&255]^r>>>8;return r}function V7(e,t){return(H7(k1,e,t)^k1)>>>0}function j1(e,t,a){const r=e.readUint32(),n=V7(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(n!==r)throw new Error(`CRC mismatch for chunk ${a}. Expected ${r}, found ${n}`)}function K5(e,t,a){for(let r=0;r<a;r++)t[r]=e[r]}function q5(e,t,a,r){let n=0;for(;n<r;n++)t[n]=e[n];for(;n<a;n++)t[n]=e[n]+t[n-r]&255}function W5(e,t,a,r){let n=0;if(a.length===0)for(;n<r;n++)t[n]=e[n];else for(;n<r;n++)t[n]=e[n]+a[n]&255}function J5(e,t,a,r,n){let i=0;if(a.length===0){for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+(t[i-n]>>1)&255}else{for(;i<n;i++)t[i]=e[i]+(a[i]>>1)&255;for(;i<r;i++)t[i]=e[i]+(t[i-n]+a[i]>>1)&255}}function G5(e,t,a,r,n){let i=0;if(a.length===0){for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}else{for(;i<n;i++)t[i]=e[i]+a[i]&255;for(;i<r;i++)t[i]=e[i]+K7(t[i-n],a[i],a[i-n])&255}}function K7(e,t,a){const r=e+t-a,n=Math.abs(r-e),i=Math.abs(r-t),l=Math.abs(r-a);return n<=i&&n<=l?e:i<=l?t:a}function q7(e,t,a,r,n,i){switch(e){case 0:K5(t,a,n);break;case 1:q5(t,a,n,i);break;case 2:W5(t,a,r,n);break;case 3:J5(t,a,r,n,i);break;case 4:G5(t,a,r,n,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const W7=new Uint16Array([255]),J7=new Uint8Array(W7.buffer),G7=J7[0]===255;function Z7(e){const{data:t,width:a,height:r,channels:n,depth:i}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*n,c=new Uint8Array(r*a*o);let d=0;for(let h=0;h<7;h++){const g=l[h],p=Math.ceil((a-g.x)/g.xStep),f=Math.ceil((r-g.y)/g.yStep);if(p<=0||f<=0)continue;const k=p*o,_=new Uint8Array(k);for(let w=0;w<f;w++){const x=t[d++],j=t.subarray(d,d+k);d+=k;const z=new Uint8Array(k);q7(x,j,z,_,k,o),_.set(z);for(let N=0;N<p;N++){const $=g.x+N*g.xStep,q=g.y+w*g.yStep;if(!($>=a||q>=r))for(let G=0;G<o;G++)c[(q*a+$)*o+G]=z[N*o+G]}}}if(i===16){const h=new Uint16Array(c.buffer);if(G7)for(let g=0;g<h.length;g++)h[g]=Y7(h[g]);return h}else return c}function Y7(e){return(e&255)<<8|e>>8&255}const X7=new Uint16Array([255]),Q7=new Uint8Array(X7.buffer),eA=Q7[0]===255,tA=new Uint8Array(0);function z1(e){const{data:t,width:a,height:r,channels:n,depth:i}=e,l=Math.ceil(i/8)*n,o=Math.ceil(i/8*n*a),c=new Uint8Array(r*o);let d=tA,h=0,g,p;for(let f=0;f<r;f++){switch(g=t.subarray(h+1,h+1+o),p=c.subarray(f*o,(f+1)*o),t[h]){case 0:K5(g,p,o);break;case 1:q5(g,p,o,l);break;case 2:W5(g,p,d,o);break;case 3:J5(g,p,d,o,l);break;case 4:G5(g,p,d,o,l);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}d=p,h+=o+1}if(i===16){const f=new Uint16Array(c.buffer);if(eA)for(let k=0;k<f.length;k++)f[k]=sA(f[k]);return f}else return c}function sA(e){return(e&255)<<8|e>>8&255}const hm=Uint8Array.of(137,80,78,71,13,10,26,10);function w1(e){if(!aA(e.readBytes(hm.length)))throw new Error("wrong PNG signature")}function aA(e){if(e.length<hm.length)return!1;for(let t=0;t<hm.length;t++)if(e[t]!==hm[t])return!1;return!0}const rA="tEXt",nA=0,Z5=new TextDecoder("latin1");function iA(e){if(oA(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const lA=/^[\u0000-\u00FF]*$/;function oA(e){if(!lA.test(e))throw new Error("invalid latin1 text")}function cA(e,t,a){const r=Y5(t);e[r]=dA(t,a-r.length-1)}function Y5(e){for(e.mark();e.readByte()!==nA;);const t=e.offset;e.reset();const a=Z5.decode(e.readBytes(t-e.offset-1));return e.skip(1),iA(a),a}function dA(e,t){return Z5.decode(e.readBytes(t))}const er={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},cg={UNKNOWN:-1,DEFLATE:0},N1={UNKNOWN:-1,ADAPTIVE:0},dg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Vh={NONE:0,BACKGROUND:1,PREVIOUS:2},ug={SOURCE:0,OVER:1};class uA extends rv{constructor(a,r={}){super(a);Ft(this,"_checkCrc");Ft(this,"_inflator");Ft(this,"_png");Ft(this,"_apng");Ft(this,"_end");Ft(this,"_hasPalette");Ft(this,"_palette");Ft(this,"_hasTransparency");Ft(this,"_transparency");Ft(this,"_compressionMethod");Ft(this,"_filterMethod");Ft(this,"_interlaceMethod");Ft(this,"_colorType");Ft(this,"_isAnimated");Ft(this,"_numberOfFrames");Ft(this,"_numberOfPlays");Ft(this,"_frames");Ft(this,"_writingDataChunks");const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new b1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=cg.UNKNOWN,this._filterMethod=N1.UNKNOWN,this._interlaceMethod=dg.UNKNOWN,this._colorType=er.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(w1(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeChunk(a,r)}return this.decodeImage(),this._png}decodeApng(){for(w1(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(a,r)}return this.decodeApngImage(),this._apng}decodeChunk(a,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case rA:cA(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-n!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?j1(this,a+4,r):this.skip(4)}decodeApngChunk(a,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,r),this.offset=n+a;break}if(this.offset-n!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?j1(this,a+4,r):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=hA(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case er.GREYSCALE:n=1;break;case er.TRUECOLOUR:n=3;break;case er.INDEXED_COLOUR:n=1;break;case er.GREYSCALE_ALPHA:n=2;break;case er.TRUECOLOUR_ALPHA:n=4;break;case er.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==cg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const r=a/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const r=a,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let r=a,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case er.GREYSCALE:case er.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let r=0;r<a/2;r++)this._transparency[r]=this.readUint16();break}case er.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let r=0;for(;r<a;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case er.UNKNOWN:case er.GREYSCALE_ALPHA:case er.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const r=Y5(this),n=this.readUint8();if(n!==cg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(a-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:$7(i)}}decodepHYs(){const a=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:a,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const r={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(a);if(n){if(n.data=z1({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(a-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(a,r,n){switch(a.disposeOp){case Vh.NONE:break;case Vh.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let l=0;l<this._png.width;l++){const o=(i*a.width+l)*this._png.channels;for(let c=0;c<this._png.channels;c++)n.data[o+c]=0}break;case Vh.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,r){const n=1<<this._png.depth,i=(l,o)=>{const c=((l+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,d=(l*r.width+o)*this._png.channels;return{index:c,frameIndex:d}};switch(r.blendOp){case ug.SOURCE:for(let l=0;l<r.height;l++)for(let o=0;o<r.width;o++){const{index:c,frameIndex:d}=i(l,o);for(let h=0;h<this._png.channels;h++)a.data[c+h]=r.data[d+h]}break;case ug.OVER:for(let l=0;l<r.height;l++)for(let o=0;o<r.width;o++){const{index:c,frameIndex:d}=i(l,o);for(let h=0;h<this._png.channels;h++){const g=r.data[d+this._png.channels-1]/n,p=h%(this._png.channels-1)===0?1:r.data[d+h],f=Math.floor(g*p+(1-g)*a.data[c+h]);a.data[c+h]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==N1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===dg.NO_INTERLACE)this._png.data=z1({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===dg.ADAM7)this._png.data=Z7({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,r=this._frames.at(-1);r?r.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Vh.NONE,blendOp:ug.SOURCE,data:a}),this._inflator=new b1,this._writingDataChunks=!1}}function hA(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var _1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(_1||(_1={}));function mA(e,t){return new uA(e,t).decode()}var rt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function hg(){rt.console&&typeof rt.console.log=="function"&&rt.console.log.apply(rt.console,arguments)}var qt={log:hg,warn:function(e){rt.console&&(typeof rt.console.warn=="function"?rt.console.warn.apply(rt.console,arguments):hg.call(null,arguments))},error:function(e){rt.console&&(typeof rt.console.error=="function"?rt.console.error.apply(rt.console,arguments):hg(e))}};function mg(e,t,a){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Fl(r.response,t,a)},r.onerror=function(){qt.error("could not download file")},r.send()}function S1(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Kh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Fl=rt.saveAs||((typeof window>"u"?"undefined":Ot(window))!=="object"||window!==rt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,a){var r=rt.URL||rt.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?S1(n.href)?mg(e,t,a):Kh(n,n.target="_blank"):Kh(n)):(n.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(n.href)},4e4),setTimeout(function(){Kh(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download",typeof e=="string")if(S1(e))mg(e,t,a);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Kh(r)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:Ot(i)!=="object"&&(qt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,a),t)}:function(e,t,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return mg(e,t,a);var n=e.type==="application/octet-stream",i=/constructor/i.test(rt.HTMLElement)||rt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||n&&i)&&(typeof FileReader>"u"?"undefined":Ot(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var h=o.result;h=l?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},o.readAsDataURL(e)}else{var c=rt.URL||rt.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function X5(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<a.length;r++){var n=a[r].re,i=a[r].process,l=n.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var mm=rt.atob.bind(rt),A1=rt.btoa.bind(rt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function fg(e,t){var a=e[0],r=e[1],n=e[2],i=e[3];a=ga(a,r,n,i,t[0],7,-680876936),i=ga(i,a,r,n,t[1],12,-389564586),n=ga(n,i,a,r,t[2],17,606105819),r=ga(r,n,i,a,t[3],22,-1044525330),a=ga(a,r,n,i,t[4],7,-176418897),i=ga(i,a,r,n,t[5],12,1200080426),n=ga(n,i,a,r,t[6],17,-1473231341),r=ga(r,n,i,a,t[7],22,-45705983),a=ga(a,r,n,i,t[8],7,1770035416),i=ga(i,a,r,n,t[9],12,-1958414417),n=ga(n,i,a,r,t[10],17,-42063),r=ga(r,n,i,a,t[11],22,-1990404162),a=ga(a,r,n,i,t[12],7,1804603682),i=ga(i,a,r,n,t[13],12,-40341101),n=ga(n,i,a,r,t[14],17,-1502002290),a=pa(a,r=ga(r,n,i,a,t[15],22,1236535329),n,i,t[1],5,-165796510),i=pa(i,a,r,n,t[6],9,-1069501632),n=pa(n,i,a,r,t[11],14,643717713),r=pa(r,n,i,a,t[0],20,-373897302),a=pa(a,r,n,i,t[5],5,-701558691),i=pa(i,a,r,n,t[10],9,38016083),n=pa(n,i,a,r,t[15],14,-660478335),r=pa(r,n,i,a,t[4],20,-405537848),a=pa(a,r,n,i,t[9],5,568446438),i=pa(i,a,r,n,t[14],9,-1019803690),n=pa(n,i,a,r,t[3],14,-187363961),r=pa(r,n,i,a,t[8],20,1163531501),a=pa(a,r,n,i,t[13],5,-1444681467),i=pa(i,a,r,n,t[2],9,-51403784),n=pa(n,i,a,r,t[7],14,1735328473),a=xa(a,r=pa(r,n,i,a,t[12],20,-1926607734),n,i,t[5],4,-378558),i=xa(i,a,r,n,t[8],11,-2022574463),n=xa(n,i,a,r,t[11],16,1839030562),r=xa(r,n,i,a,t[14],23,-35309556),a=xa(a,r,n,i,t[1],4,-1530992060),i=xa(i,a,r,n,t[4],11,1272893353),n=xa(n,i,a,r,t[7],16,-155497632),r=xa(r,n,i,a,t[10],23,-1094730640),a=xa(a,r,n,i,t[13],4,681279174),i=xa(i,a,r,n,t[0],11,-358537222),n=xa(n,i,a,r,t[3],16,-722521979),r=xa(r,n,i,a,t[6],23,76029189),a=xa(a,r,n,i,t[9],4,-640364487),i=xa(i,a,r,n,t[12],11,-421815835),n=xa(n,i,a,r,t[15],16,530742520),a=va(a,r=xa(r,n,i,a,t[2],23,-995338651),n,i,t[0],6,-198630844),i=va(i,a,r,n,t[7],10,1126891415),n=va(n,i,a,r,t[14],15,-1416354905),r=va(r,n,i,a,t[5],21,-57434055),a=va(a,r,n,i,t[12],6,1700485571),i=va(i,a,r,n,t[3],10,-1894986606),n=va(n,i,a,r,t[10],15,-1051523),r=va(r,n,i,a,t[1],21,-2054922799),a=va(a,r,n,i,t[8],6,1873313359),i=va(i,a,r,n,t[15],10,-30611744),n=va(n,i,a,r,t[6],15,-1560198380),r=va(r,n,i,a,t[13],21,1309151649),a=va(a,r,n,i,t[4],6,-145523070),i=va(i,a,r,n,t[11],10,-1120210379),n=va(n,i,a,r,t[2],15,718787259),r=va(r,n,i,a,t[9],21,-343485551),e[0]=Oi(a,e[0]),e[1]=Oi(r,e[1]),e[2]=Oi(n,e[2]),e[3]=Oi(i,e[3])}function E0(e,t,a,r,n,i){return t=Oi(Oi(t,e),Oi(r,i)),Oi(t<<n|t>>>32-n,a)}function ga(e,t,a,r,n,i,l){return E0(t&a|~t&r,e,t,n,i,l)}function pa(e,t,a,r,n,i,l){return E0(t&r|a&~r,e,t,n,i,l)}function xa(e,t,a,r,n,i,l){return E0(t^a^r,e,t,n,i,l)}function va(e,t,a,r,n,i,l){return E0(a^(t|~r),e,t,n,i,l)}function Q5(e){var t,a=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)fg(r,fA(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(fg(r,n),t=0;t<16;t++)n[t]=0;return n[14]=8*a,fg(r,n),r}function fA(e){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return a}var E1="0123456789abcdef".split("");function gA(e){for(var t="",a=0;a<4;a++)t+=E1[e>>8*a+4&15]+E1[e>>8*a&15];return t}function pA(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Kp(e){return Q5(e).map(pA).join("")}var xA=function(e){for(var t=0;t<e.length;t++)e[t]=gA(e[t]);return e.join("")}(Q5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Oi(e,t){if(xA){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qp(e,t){var a,r,n,i;if(e!==a){for(var l=(n=e,i=1+(256/e.length|0),new Array(i+1).join(n)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var h=o[c];d=(d+h+l.charCodeAt(c))%256,o[c]=o[d],o[d]=h}a=e,r=o}else o=r;var g=t.length,p=0,f=0,k="";for(c=0;c<g;c++)f=(f+(h=o[p=(p+1)%256]))%256,o[p]=o[f],o[f]=h,l=o[(o[p]+o[f])%256],k+=String.fromCharCode(t.charCodeAt(c)^l);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var C1={print:4,modify:8,copy:16,"annot-forms":32};function Fo(e,t,a,r){this.v=1,this.r=2;var n=192;e.forEach(function(o){if(C1.perm!==void 0)throw new Error("Invalid permission: "+o);n+=C1[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),l=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^n)),this.encryptionKey=Kp(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qp(this.encryptionKey,this.padding)}function Oo(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",a=e.length,r=0;r<a;r++){var n=e.charCodeAt(r);t+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):e[r]}return t}function L1(e){if(Ot(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(a,r,n){if(n=n||!1,typeof a!="string"||typeof r!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(a)||(t[a]={});var i=Math.random().toString(35);return t[a][i]=[r,!!n],i},this.unsubscribe=function(a){for(var r in t)if(t[r][a])return delete t[r][a],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(a){if(t.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[a]){var l=t[a][i];try{l[0].apply(e,r)}catch(o){rt.console&&qt.error("jsPDF PubSub Error",o.message,o)}l[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function s0(e){if(!(this instanceof s0))return new s0(e);var t="opacity,stroke-opacity".split(",");for(var a in e)e.hasOwnProperty(a)&&t.indexOf(a)>=0&&(this[a]=e[a]);this.id="",this.objectNumber=-1}function ez(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Rl(e,t,a,r,n){if(!(this instanceof Rl))return new Rl(e,t,a,r,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=a,ez.call(this,r,n)}function Yo(e,t,a,r,n){if(!(this instanceof Yo))return new Yo(e,t,a,r,n);this.boundingBox=e,this.xStep=t,this.yStep=a,this.stream="",this.cloneIndex=0,ez.call(this,r,n)}function $e(e){var t,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],n=arguments[2],i=arguments[3],l=[],o=1,c=16,d="S",h=null;Ot(e=e||{})==="object"&&(a=e.orientation,r=e.unit||r,n=e.format||n,i=e.compress||e.compressPdf||i,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),r=r||"mm",a=(""+(a||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=L1;var k="1.3",_=f.__private__.getPdfVersion=function(){return k};f.__private__.setPdfVersion=function(v){k=v};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return w};var x=f.__private__.getPageFormat=function(v){return w[v]};n=n||"a4";var j="compat",z="advanced",N=j;function $(){this.saveGraphicsState(),J(new st(at,0,0,-at,0,yl()*at).toString()+" cm"),this.setFontSize(this.getFontSize()/at),d="n",N=z}function q(){this.restoreGraphicsState(),d="S",N=j}var G=f.__private__.combineFontStyleAndFontWeight=function(v,T){if(v=="bold"&&T=="normal"||v=="bold"&&T==400||v=="normal"&&T=="italic"||v=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(v=T==400||T==="normal"?v==="italic"?"italic":"normal":T!=700&&T!=="bold"||v!=="normal"?(T==700?"bold":T)+""+v:"bold"),v};f.advancedAPI=function(v){var T=N===j;return T&&$.call(this),typeof v!="function"||(v(this),T&&q.call(this)),this},f.compatAPI=function(v){var T=N===z;return T&&q.call(this),typeof v!="function"||(v(this),T&&$.call(this)),this},f.isAdvancedAPI=function(){return N===z};var D,I=function(v){if(N!==z)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=f.roundToPrecision=f.__private__.roundToPrecision=function(v,T){var X=t||T;if(isNaN(v)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(X).replace(/0+$/,"")};D=f.hpf=f.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return R(v,16)};var y=f.f2=f.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return R(v,2)},A=f.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return R(v,3)},E=f.scale=f.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return N===j?v*at:N===z?v:void 0},L=function(v){return E(function(T){return N===j?yl()-T:N===z?T:void 0}(v))};f.__private__.setPrecision=f.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var M,ee="00000000000000000000000000000000",ce=f.__private__.getFileId=function(){return ee},V=f.__private__.setFileId=function(v){return ee=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ks=new Fo(h.userPermissions,h.userPassword,h.ownerPassword,ee)),ee};f.setFileId=function(v){return V(v),this},f.getFileId=function(){return ce()};var le=f.__private__.convertDateToPDFDate=function(v){var T=v.getTimezoneOffset(),X=T<0?"+":"-",ae=Math.floor(Math.abs(T/60)),de=Math.abs(T%60),we=[X,W(ae),"'",W(de),"'"].join("");return["D:",v.getFullYear(),W(v.getMonth()+1),W(v.getDate()),W(v.getHours()),W(v.getMinutes()),W(v.getSeconds()),we].join("")},ye=f.__private__.convertPDFDateToDate=function(v){var T=parseInt(v.substr(2,4),10),X=parseInt(v.substr(6,2),10)-1,ae=parseInt(v.substr(8,2),10),de=parseInt(v.substr(10,2),10),we=parseInt(v.substr(12,2),10),Ae=parseInt(v.substr(14,2),10);return new Date(T,X,ae,de,we,Ae,0)},be=f.__private__.setCreationDate=function(v){var T;if(v===void 0&&(v=new Date),v instanceof Date)T=le(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=v}return M=T},C=f.__private__.getCreationDate=function(v){var T=M;return v==="jsDate"&&(T=ye(M)),T};f.setCreationDate=function(v){return be(v),this},f.getCreationDate=function(v){return C(v)};var H,W=f.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},Q=f.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},re=0,ue=[],me=[],te=0,pe=[],_e=[],ve=!1,je=me;f.__private__.setCustomOutputDestination=function(v){ve=!0,je=v};var ne=function(v){ve||(je=v)};f.__private__.resetCustomOutputDestination=function(){ve=!1,je=me};var J=f.__private__.out=function(v){return v=v.toString(),te+=v.length+1,je.push(v),je},Ke=f.__private__.write=function(v){return J(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},qe=f.__private__.getArrayBuffer=function(v){for(var T=v.length,X=new ArrayBuffer(T),ae=new Uint8Array(X);T--;)ae[T]=v.charCodeAt(T);return X},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return We};var Ce=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(v){return Ce=N===z?v/at:v,this};var Ye,Fe=f.__private__.getFontSize=f.getFontSize=function(){return N===j?Ce:Ce*at},gt=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(v){return gt=v,this},f.__private__.getR2L=f.getR2L=function(){return gt};var et,Et=f.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ye=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ye=v}else Ye=parseInt(v,10)};f.__private__.getZoomMode=function(){return Ye};var dt,ut=f.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');et=v};f.__private__.getPageMode=function(){return et};var Bt=f.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');dt=v};f.__private__.getLayoutMode=function(){return dt},f.__private__.setDisplayMode=f.setDisplayMode=function(v,T,X){return Et(v),Bt(T),ut(X),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(v){if(Object.keys(pt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[v]},f.__private__.getDocumentProperties=function(){return pt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(v){for(var T in pt)pt.hasOwnProperty(T)&&v[T]&&(pt[T]=v[T]);return this},f.__private__.setDocumentProperty=function(v,T){if(Object.keys(pt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[v]=T};var Xe,at,Qe,Gt,Ct,Ge={},ht={},$t=[],tt={},zt={},mt={},bs={},Ds=null,Ht=0,it=[],Pt=new L1(f),ll=e.hotfixes||[],da={},jn={},Qr=[],st=function v(T,X,ae,de,we,Ae){if(!(this instanceof v))return new v(T,X,ae,de,we,Ae);isNaN(T)&&(T=1),isNaN(X)&&(X=0),isNaN(ae)&&(ae=0),isNaN(de)&&(de=1),isNaN(we)&&(we=0),isNaN(Ae)&&(Ae=0),this._matrix=[T,X,ae,de,we,Ae]};Object.defineProperty(st.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(st.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(st.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(st.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(st.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(st.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(st.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(st.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(st.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(st.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(st.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(st.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(st.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(st.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(st.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(st.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),st.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(v)},st.prototype.multiply=function(v){var T=v.sx*this.sx+v.shy*this.shx,X=v.sx*this.shy+v.shy*this.sy,ae=v.shx*this.sx+v.sy*this.shx,de=v.shx*this.shy+v.sy*this.sy,we=v.tx*this.sx+v.ty*this.shx+this.tx,Ae=v.tx*this.shy+v.ty*this.sy+this.ty;return new st(T,X,ae,de,we,Ae)},st.prototype.decompose=function(){var v=this.sx,T=this.shy,X=this.shx,ae=this.sy,de=this.tx,we=this.ty,Ae=Math.sqrt(v*v+T*T),Ue=(v/=Ae)*X+(T/=Ae)*ae;X-=v*Ue,ae-=T*Ue;var Je=Math.sqrt(X*X+ae*ae);return Ue/=Je,v*(ae/=Je)<T*(X/=Je)&&(v=-v,T=-T,Ue=-Ue,Ae=-Ae),{scale:new st(Ae,0,0,Je,0,0),translate:new st(1,0,0,1,de,we),rotate:new st(v,T,-T,v,0,0),skew:new st(1,0,Ue,1,0,0)}},st.prototype.toString=function(v){return this.join(" ")},st.prototype.inversed=function(){var v=this.sx,T=this.shy,X=this.shx,ae=this.sy,de=this.tx,we=this.ty,Ae=1/(v*ae-T*X),Ue=ae*Ae,Je=-T*Ae,nt=-X*Ae,ot=v*Ae;return new st(Ue,Je,nt,ot,-Ue*de-nt*we,-Je*de-ot*we)},st.prototype.applyToPoint=function(v){var T=v.x*this.sx+v.y*this.shx+this.tx,X=v.x*this.shy+v.y*this.sy+this.ty;return new xl(T,X)},st.prototype.applyToRectangle=function(v){var T=this.applyToPoint(v),X=this.applyToPoint(new xl(v.x+v.w,v.y+v.h));return new Kc(T.x,T.y,X.x-T.x,X.y-T.y)},st.prototype.clone=function(){var v=this.sx,T=this.shy,X=this.shx,ae=this.sy,de=this.tx,we=this.ty;return new st(v,T,X,ae,de,we)},f.Matrix=st;var zn=f.matrixMult=function(v,T){return T.multiply(v)},wn=new st(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=wn;var hr=function(v,T){if(!zt[v]){var X=(T instanceof Rl?"Sh":"P")+(Object.keys(tt).length+1).toString(10);T.id=X,zt[v]=X,tt[X]=T,Pt.publish("addPattern",T)}};f.ShadingPattern=Rl,f.TilingPattern=Yo,f.addShadingPattern=function(v,T){return I("addShadingPattern()"),hr(v,T),this},f.beginTilingPattern=function(v){I("beginTilingPattern()"),qc(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},f.endTilingPattern=function(v,T){I("endTilingPattern()"),T.stream=_e[H].join(`
`),hr(v,T),Pt.publish("endTilingPattern",T),Qr.pop().restore()};var mr,ms=f.__private__.newObject=function(){var v=qs();return ea(v,!0),v},qs=f.__private__.newObjectDeferred=function(){return re++,ue[re]=function(){return te},re},ea=function(v,T){return T=typeof T=="boolean"&&T,ue[v]=te,T&&J(v+" 0 obj"),v},ol=f.__private__.newAdditionalObject=function(){var v={objId:qs(),content:""};return pe.push(v),v},ri=qs(),Lr=qs(),en=f.__private__.decodeColorString=function(v){var T=v.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length!==5||T[4]!=="k"&&T[4]!=="K"||(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var X=parseFloat(T[0]);T=[X,X,X,"r"]}for(var ae="#",de=0;de<3;de++)ae+=("0"+Math.floor(255*parseFloat(T[de])).toString(16)).slice(-2);return ae},Tr=f.__private__.encodeColorString=function(v){var T;typeof v=="string"&&(v={ch1:v});var X=v.ch1,ae=v.ch2,de=v.ch3,we=v.ch4,Ae=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var Ue=new X5(X);if(Ue.ok)X=Ue.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var Je=parseInt(X.substr(1),16);X=Je>>16&255,ae=Je>>8&255,de=255&Je}if(ae===void 0||we===void 0&&X===ae&&ae===de)T=typeof X=="string"?X+" "+Ae[0]:v.precision===2?y(X/255)+" "+Ae[0]:A(X/255)+" "+Ae[0];else if(we===void 0||Ot(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return["1.","1.","1.",Ae[1]].join(" ");T=typeof X=="string"?[X,ae,de,Ae[1]].join(" "):v.precision===2?[y(X/255),y(ae/255),y(de/255),Ae[1]].join(" "):[A(X/255),A(ae/255),A(de/255),Ae[1]].join(" ")}else T=typeof X=="string"?[X,ae,de,we,Ae[2]].join(" "):v.precision===2?[y(X),y(ae),y(de),y(we),Ae[2]].join(" "):[A(X),A(ae),A(de),A(we),Ae[2]].join(" ");return T},Pr=f.__private__.getFilters=function(){return l},fr=f.__private__.putStream=function(v){var T=(v=v||{}).data||"",X=v.filters||Pr(),ae=v.alreadyAppliedFilters||[],de=v.addLength1||!1,we=T.length,Ae=v.objectId,Ue=function(Ms){return Ms};if(h!==null&&Ae===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ue=ks.encryptor(Ae,0));var Je={};X===!0&&(X=["FlateEncode"]);var nt=v.additionalKeyValues||[],ot=(Je=$e.API.processDataByFilters!==void 0?$e.API.processDataByFilters(T,X):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(ae)?ae.join(" "):ae.toString());if(Je.data.length!==0&&(nt.push({key:"Length",value:Je.data.length}),de===!0&&nt.push({key:"Length1",value:we})),ot.length!=0)if(ot.split("/").length-1==1)nt.push({key:"Filter",value:ot});else{nt.push({key:"Filter",value:"["+ot+"]"});for(var Lt=0;Lt<nt.length;Lt+=1)if(nt[Lt].key==="DecodeParms"){for(var cs=[],Ts=0;Ts<Je.reverseChain.split("/").length-1;Ts+=1)cs.push("null");cs.push(nt[Lt].value),nt[Lt].value="["+cs.join(" ")+"]"}}J("<<");for(var Zt=0;Zt<nt.length;Zt++)J("/"+nt[Zt].key+" "+nt[Zt].value);J(">>"),Je.data.length!==0&&(J("stream"),J(Ue(Je.data)),J("endstream"))},cl=f.__private__.putPage=function(v){var T=v.number,X=v.data,ae=v.objId,de=v.contentsObjId;ea(ae,!0),J("<</Type /Page"),J("/Parent "+v.rootDictionaryObjId+" 0 R"),J("/Resources "+v.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(D(v.mediaBox.bottomLeftX))+" "+parseFloat(D(v.mediaBox.bottomLeftY))+" "+D(v.mediaBox.topRightX)+" "+D(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&J("/CropBox ["+D(v.cropBox.bottomLeftX)+" "+D(v.cropBox.bottomLeftY)+" "+D(v.cropBox.topRightX)+" "+D(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&J("/BleedBox ["+D(v.bleedBox.bottomLeftX)+" "+D(v.bleedBox.bottomLeftY)+" "+D(v.bleedBox.topRightX)+" "+D(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&J("/TrimBox ["+D(v.trimBox.bottomLeftX)+" "+D(v.trimBox.bottomLeftY)+" "+D(v.trimBox.topRightX)+" "+D(v.trimBox.topRightY)+"]"),v.artBox!==null&&J("/ArtBox ["+D(v.artBox.bottomLeftX)+" "+D(v.artBox.bottomLeftY)+" "+D(v.artBox.topRightX)+" "+D(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&J("/UserUnit "+v.userUnit),Pt.publish("putPage",{objId:ae,pageContext:it[T],pageNumber:T,page:X}),J("/Contents "+de+" 0 R"),J(">>"),J("endobj");var we=X.join(`
`);return N===z&&(we+=`
Q`),ea(de,!0),fr({data:we,filters:Pr(),objectId:de}),J("endobj"),ae},tn=f.__private__.putPages=function(){var v,T,X=[];for(v=1;v<=Ht;v++)it[v].objId=qs(),it[v].contentsObjId=qs();for(v=1;v<=Ht;v++)X.push(cl({number:v,data:_e[v],objId:it[v].objId,contentsObjId:it[v].contentsObjId,mediaBox:it[v].mediaBox,cropBox:it[v].cropBox,bleedBox:it[v].bleedBox,trimBox:it[v].trimBox,artBox:it[v].artBox,userUnit:it[v].userUnit,rootDictionaryObjId:ri,resourceDictionaryObjId:Lr}));ea(ri,!0),J("<</Type /Pages");var ae="/Kids [";for(T=0;T<Ht;T++)ae+=X[T]+" 0 R ";J(ae+"]"),J("/Count "+Ht),J(">>"),J("endobj"),Pt.publish("postPutPages")},dl=function(v){Pt.publish("putFont",{font:v,out:J,newObject:ms,putStream:fr}),v.isAlreadyPutted!==!0&&(v.objectNumber=ms(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Oo(v.postScriptName)),J("/Subtype /Type1"),typeof v.encoding=="string"&&J("/Encoding /"+v.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},uo=function(v){v.objectNumber=ms();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[D(v.x),D(v.y),D(v.x+v.width),D(v.y+v.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var X=v.pages[1].join(`
`);fr({data:X,additionalKeyValues:T,objectId:v.objectNumber}),J("endobj")},ho=function(v,T){T||(T=21);var X=ms(),ae=function(Ae,Ue){var Je,nt=[],ot=1/(Ue-1);for(Je=0;Je<1;Je+=ot)nt.push(Je);if(nt.push(1),Ae[0].offset!=0){var Lt={offset:0,color:Ae[0].color};Ae.unshift(Lt)}if(Ae[Ae.length-1].offset!=1){var cs={offset:1,color:Ae[Ae.length-1].color};Ae.push(cs)}for(var Ts="",Zt=0,Ms=0;Ms<nt.length;Ms++){for(Je=nt[Ms];Je>Ae[Zt+1].offset;)Zt++;var Ps=Ae[Zt].offset,ta=(Je-Ps)/(Ae[Zt+1].offset-Ps),pr=Ae[Zt].color,Ia=Ae[Zt+1].color;Ts+=Q(Math.round((1-ta)*pr[0]+ta*Ia[0]).toString(16))+Q(Math.round((1-ta)*pr[1]+ta*Ia[1]).toString(16))+Q(Math.round((1-ta)*pr[2]+ta*Ia[2]).toString(16))}return Ts.trim()}(v.colors,T),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+T+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fr({data:ae,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),J("endobj"),v.objectNumber=ms(),J("<< /ShadingType "+v.type),J("/ColorSpace /DeviceRGB");var we="/Coords ["+D(parseFloat(v.coords[0]))+" "+D(parseFloat(v.coords[1]))+" ";v.type===2?we+=D(parseFloat(v.coords[2]))+" "+D(parseFloat(v.coords[3])):we+=D(parseFloat(v.coords[2]))+" "+D(parseFloat(v.coords[3]))+" "+D(parseFloat(v.coords[4]))+" "+D(parseFloat(v.coords[5])),J(we+="]"),v.matrix&&J("/Matrix ["+v.matrix.toString()+"]"),J("/Function "+X+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},mo=function(v,T){var X=qs(),ae=ms();T.push({resourcesOid:X,objectOid:ae}),v.objectNumber=ae;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+v.boundingBox.map(D).join(" ")+"]"}),de.push({key:"XStep",value:D(v.xStep)}),de.push({key:"YStep",value:D(v.yStep)}),de.push({key:"Resources",value:X+" 0 R"}),v.matrix&&de.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),fr({data:v.stream,additionalKeyValues:de,objectId:v.objectNumber}),J("endobj")},C0=function(v){for(var T in v.objectNumber=ms(),J("<<"),v)switch(T){case"opacity":J("/ca "+y(v[T]));break;case"stroke-opacity":J("/CA "+y(v[T]))}J(">>"),J("endobj")},Dc=function(v){ea(v.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var T in J("/Font <<"),Ge)Ge.hasOwnProperty(T)&&(g===!1||g===!0&&p.hasOwnProperty(T))&&J("/"+T+" "+Ge[T].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(tt).length>0){for(var T in J("/Shading <<"),tt)tt.hasOwnProperty(T)&&tt[T]instanceof Rl&&tt[T].objectNumber>=0&&J("/"+T+" "+tt[T].objectNumber+" 0 R");Pt.publish("putShadingPatternDict"),J(">>")}}(),function(T){if(Object.keys(tt).length>0){for(var X in J("/Pattern <<"),tt)tt.hasOwnProperty(X)&&tt[X]instanceof f.TilingPattern&&tt[X].objectNumber>=0&&tt[X].objectNumber<T&&J("/"+X+" "+tt[X].objectNumber+" 0 R");Pt.publish("putTilingPatternDict"),J(">>")}}(v.objectOid),function(){if(Object.keys(mt).length>0){var T;for(T in J("/ExtGState <<"),mt)mt.hasOwnProperty(T)&&mt[T].objectNumber>=0&&J("/"+T+" "+mt[T].objectNumber+" 0 R");Pt.publish("putGStateDict"),J(">>")}}(),function(){for(var T in J("/XObject <<"),da)da.hasOwnProperty(T)&&da[T].objectNumber>=0&&J("/"+T+" "+da[T].objectNumber+" 0 R");Pt.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},Mu=function(v){ht[v.fontName]=ht[v.fontName]||{},ht[v.fontName][v.fontStyle]=v.id},Fu=function(v,T,X,ae,de){var we={id:"F"+(Object.keys(Ge).length+1).toString(10),postScriptName:v,fontName:T,fontStyle:X,encoding:ae,isStandardFont:de||!1,metadata:{}};return Pt.publish("addFont",{font:we,instance:this}),Ge[we.id]=we,Mu(we),we.id},gr=f.__private__.pdfEscape=f.pdfEscape=function(v,T){return function(X,ae){var de,we,Ae,Ue,Je,nt,ot,Lt,cs;if(Ae=(ae=ae||{}).sourceEncoding||"Unicode",Je=ae.outputEncoding,(ae.autoencode||Je)&&Ge[Xe].metadata&&Ge[Xe].metadata[Ae]&&Ge[Xe].metadata[Ae].encoding&&(Ue=Ge[Xe].metadata[Ae].encoding,!Je&&Ge[Xe].encoding&&(Je=Ge[Xe].encoding),!Je&&Ue.codePages&&(Je=Ue.codePages[0]),typeof Je=="string"&&(Je=Ue[Je]),Je)){for(ot=!1,nt=[],de=0,we=X.length;de<we;de++)(Lt=Je[X.charCodeAt(de)])?nt.push(String.fromCharCode(Lt)):nt.push(X[de]),nt[de].charCodeAt(0)>>8&&(ot=!0);X=nt.join("")}for(de=X.length;ot===void 0&&de!==0;)X.charCodeAt(de-1)>>8&&(ot=!0),de--;if(!ot)return X;for(nt=ae.noBOM?[]:[254,255],de=0,we=X.length;de<we;de++){if((cs=(Lt=X.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+X+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");nt.push(cs),nt.push(Lt-(cs<<8))}return String.fromCharCode.apply(void 0,nt)}(v,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mc=f.__private__.beginPage=function(v){_e[++Ht]=[],it[Ht]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Ru(Ht),ne(_e[H])},Ou=function(v,T){var X,ae,de;switch(a=T||a,typeof v=="string"&&(X=x(v.toLowerCase()),Array.isArray(X)&&(ae=X[0],de=X[1])),Array.isArray(v)&&(ae=v[0]*at,de=v[1]*at),isNaN(ae)&&(ae=n[0],de=n[1]),(ae>14400||de>14400)&&(qt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ae=Math.min(14400,ae),de=Math.min(14400,de)),n=[ae,de],a.substr(0,1)){case"l":de>ae&&(n=[de,ae]);break;case"p":ae>de&&(n=[de,ae])}Mc(n),R0(Uc),J(go),Hc!==0&&J(Hc+" J"),Vc!==0&&J(Vc+" j"),Pt.publish("addPage",{pageNumber:Ht})},Fc=function(v){v>0&&v<=Ht&&(_e.splice(v,1),it.splice(v,1),Ht--,H>Ht&&(H=Ht),this.setPage(H))},Ru=function(v){v>0&&v<=Ht&&(H=v)},Bu=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return _e.length-1},Uu=function(v,T,X){var ae,de=void 0;return X=X||{},v=v!==void 0?v:Ge[Xe].fontName,T=T!==void 0?T:Ge[Xe].fontStyle,ae=v.toLowerCase(),ht[ae]!==void 0&&ht[ae][T]!==void 0?de=ht[ae][T]:ht[v]!==void 0&&ht[v][T]!==void 0?de=ht[v][T]:X.disableWarning===!1&&qt.warn("Unable to look up font label for font '"+v+"', '"+T+"'. Refer to getFontList() for available fonts."),de||X.noFallback||(de=ht.times[T])==null&&(de=ht.times.normal),de},fo=f.__private__.putInfo=function(){var v=ms(),T=function(ae){return ae};for(var X in h!==null&&(T=ks.encryptor(v,0)),J("<<"),J("/Producer ("+gr(T("jsPDF "+$e.version))+")"),pt)pt.hasOwnProperty(X)&&pt[X]&&J("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+gr(T(pt[X]))+")");J("/CreationDate ("+gr(T(M))+")"),J(">>"),J("endobj")},L0=f.__private__.putCatalog=function(v){var T=(v=v||{}).rootDictionaryObjId||ri;switch(ms(),J("<<"),J("/Type /Catalog"),J("/Pages "+T+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+Ye;X.substr(X.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&J("/OpenAction [3 0 R /XYZ null null "+y(Ye)+"]")}switch(dt||(dt="continuous"),dt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}et&&J("/PageMode /"+et),Pt.publish("putCatalog"),J(">>"),J("endobj")},Ls=f.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(re+1)),J("/Root "+re+" 0 R"),J("/Info "+(re-1)+" 0 R"),h!==null&&J("/Encrypt "+ks.oid+" 0 R"),J("/ID [ <"+ee+"> <"+ee+"> ]"),J(">>")},$u=f.__private__.putHeader=function(){J("%PDF-"+k),J("%ºß¬à")},Hu=f.__private__.putXRef=function(){var v="0000000000";J("xref"),J("0 "+(re+1)),J("0000000000 65535 f ");for(var T=1;T<=re;T++)typeof ue[T]=="function"?J((v+ue[T]()).slice(-10)+" 00000 n "):ue[T]!==void 0?J((v+ue[T]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Nn=f.__private__.buildDocument=function(){var v;re=0,te=0,me=[],ue=[],pe=[],ri=qs(),Lr=qs(),ne(me),Pt.publish("buildDocument"),$u(),tn(),function(){Pt.publish("putAdditionalObjects");for(var X=0;X<pe.length;X++){var ae=pe[X];ea(ae.objId,!0),J(ae.content),J("endobj")}Pt.publish("postPutAdditionalObjects")}(),v=[],function(){for(var X in Ge)Ge.hasOwnProperty(X)&&(g===!1||g===!0&&p.hasOwnProperty(X))&&dl(Ge[X])}(),function(){var X;for(X in mt)mt.hasOwnProperty(X)&&C0(mt[X])}(),function(){for(var X in da)da.hasOwnProperty(X)&&uo(da[X])}(),function(X){var ae;for(ae in tt)tt.hasOwnProperty(ae)&&(tt[ae]instanceof Rl?ho(tt[ae]):tt[ae]instanceof Yo&&mo(tt[ae],X))}(v),Pt.publish("putResources"),v.forEach(Dc),Dc({resourcesOid:Lr,objectOid:Number.MAX_SAFE_INTEGER}),Pt.publish("postPutResources"),h!==null&&(ks.oid=ms(),J("<<"),J("/Filter /Standard"),J("/V "+ks.v),J("/R "+ks.r),J("/U <"+ks.toHexString(ks.U)+">"),J("/O <"+ks.toHexString(ks.O)+">"),J("/P "+ks.P),J(">>"),J("endobj")),fo(),L0();var T=te;return Hu(),Ls(),J("startxref"),J(""+T),J("%%EOF"),ne(_e[H]),me.join(`
`)},ul=f.__private__.getBlob=function(v){return new Blob([qe(v)],{type:"application/pdf"})},Ir=f.output=f.__private__.output=(mr=function(v,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",v){case void 0:return Nn();case"save":f.save(T.filename);break;case"arraybuffer":return qe(Nn());case"blob":return ul(Nn());case"bloburi":case"bloburl":if(rt.URL!==void 0&&typeof rt.URL.createObjectURL=="function")return rt.URL&&rt.URL.createObjectURL(ul(Nn()))||void 0;qt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",ae=Nn();try{X=A1(ae)}catch{X=A1(unescape(encodeURIComponent(ae)))}return"data:application/pdf;filename="+T.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(rt)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(de=T.pdfObjectUrl,we="");var Ae='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",Ue=rt.open();return Ue!==null&&Ue.document.write(Ae),Ue}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(rt)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',nt=rt.open();if(nt!==null){nt.document.write(Je);var ot=this;nt.document.documentElement.querySelector("#pdfViewer").onload=function(){nt.document.title=T.filename,nt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ot.output("bloburl"))}}return nt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(rt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',cs=rt.open();if(cs!==null&&(cs.document.write(Lt),cs.document.title=T.filename),cs||typeof safari>"u")return cs;break;case"datauri":case"dataurl":return rt.document.location.href=this.output("datauristring",T);default:return null}},mr.foo=function(){try{return mr.apply(this,arguments)}catch(X){var v=X.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var T="Error in function "+v.split(`
`)[0].split("<")[0]+": "+X.message;if(!rt.console)throw new Error(T);rt.console.error(T,X),rt.alert&&alert(T)}},mr.foo.bar=mr,mr.foo),hl=function(v){return Array.isArray(ll)===!0&&ll.indexOf(v)>-1};switch(r){case"pt":at=1;break;case"mm":at=72/25.4;break;case"cm":at=72/2.54;break;case"in":at=72;break;case"px":at=hl("px_scaling")==1?.75:96/72;break;case"pc":case"em":at=12;break;case"ex":at=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);at=r}var ks=null;be(),V();var Oc=f.__private__.getPageInfo=f.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[v].objId,pageNumber:v,pageContext:it[v]}},T0=f.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in it)if(it[T].objId===v)break;return Oc(T)},P0=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:it[H].objId,pageNumber:H,pageContext:it[H]}};f.addPage=function(){return Ou.apply(this,arguments),this},f.setPage=function(){return Ru.apply(this,arguments),ne.call(this,_e[H]),this},f.insertPage=function(v){return this.addPage(),this.movePage(H,v),this},f.movePage=function(v,T){var X,ae;if(v>T){X=_e[v],ae=it[v];for(var de=v;de>T;de--)_e[de]=_e[de-1],it[de]=it[de-1];_e[T]=X,it[T]=ae,this.setPage(T)}else if(v<T){X=_e[v],ae=it[v];for(var we=v;we<T;we++)_e[we]=_e[we+1],it[we]=it[we+1];_e[T]=X,it[T]=ae,this.setPage(T)}return this},f.deletePage=function(){return Fc.apply(this,arguments),this},f.__private__.text=f.text=function(v,T,X,ae,de){var we,Ae,Ue,Je,nt,ot,Lt,cs,Ts,Zt=(ae=ae||{}).scope||this;if(typeof v=="number"&&typeof T=="number"&&(typeof X=="string"||Array.isArray(X))){var Ms=X;X=T,T=v,v=Ms}if(arguments[3]instanceof st==0?(Ue=arguments[4],Je=arguments[5],Ot(Lt=arguments[3])==="object"&&Lt!==null||(typeof Ue=="string"&&(Je=Ue,Ue=null),typeof Lt=="string"&&(Je=Lt,Lt=null),typeof Lt=="number"&&(Ue=Lt,Lt=null),ae={flags:Lt,angle:Ue,align:Je})):(I("The transform parameter of text() with a Matrix value"),Ts=de),isNaN(T)||isNaN(X)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Zt;var Ps,ta="",pr=typeof ae.lineHeightFactor=="number"?ae.lineHeightFactor:fl,Ia=Zt.internal.scaleFactor;function Yu(It){return It=It.split("	").join(Array(ae.TabLen||9).join(" ")),gr(It,Lt)}function yo(It){for(var Vt,zs=It.concat(),Fs=[],Tn=zs.length;Tn--;)typeof(Vt=zs.shift())=="string"?Fs.push(Vt):Array.isArray(It)&&(Vt.length===1||Vt[1]===void 0&&Vt[2]===void 0)?Fs.push(Vt[0]):Fs.push([Vt[0],Vt[1],Vt[2]]);return Fs}function bl(It,Vt){var zs;if(typeof It=="string")zs=Vt(It)[0];else if(Array.isArray(It)){for(var Fs,Tn,sd=It.concat(),jo=[],eh=sd.length;eh--;)typeof(Fs=sd.shift())=="string"?jo.push(Vt(Fs)[0]):Array.isArray(Fs)&&typeof Fs[0]=="string"&&(Tn=Vt(Fs[0],Fs[1],Fs[2]),jo.push([Tn[0],Tn[1],Tn[2]]));zs=jo}return zs}var li=!1,kl=!0;if(typeof v=="string")li=!0;else if(Array.isArray(v)){var jl=v.concat();Ae=[];for(var zl,ua=jl.length;ua--;)(typeof(zl=jl.shift())!="string"||Array.isArray(zl)&&typeof zl[0]!="string")&&(kl=!1);li=kl}if(li===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var wl=Ce/Zt.internal.scaleFactor,Nl=wl*(pr-1);switch(ae.baseline){case"bottom":X-=Nl;break;case"top":X+=wl-Nl;break;case"hanging":X+=wl-2*Nl;break;case"middle":X+=wl/2-Nl}if((ot=ae.maxWidth||0)>0&&(typeof v=="string"?v=Zt.splitTextToSize(v,ot):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(It,Vt){return It.concat(Zt.splitTextToSize(Vt,ot))},[]))),we={text:v,x:T,y:X,options:ae,mutex:{pdfEscape:gr,activeFontKey:Xe,fonts:Ge,activeFontSize:Ce}},Pt.publish("preProcessText",we),v=we.text,Ue=(ae=we.options).angle,Ts instanceof st==0&&Ue&&typeof Ue=="number"){Ue*=Math.PI/180,ae.rotationDirection===0&&(Ue=-Ue),N===z&&(Ue=-Ue);var Wc=Math.cos(Ue),Jc=Math.sin(Ue);Ts=new st(Wc,Jc,-Jc,Wc,0,0)}else Ue&&Ue instanceof st&&(Ts=Ue);N!==z||Ts||(Ts=wn),(nt=ae.charSpace||xo)!==void 0&&(ta+=D(E(nt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cs=ae.horizontalScale)!==void 0&&(ta+=D(100*cs)+` Tz
`),ae.lang;var fs=-1,Cn=ae.renderingMode!==void 0?ae.renderingMode:ae.stroke,bo=Zt.internal.getCurrentPageInfo().pageContext;switch(Cn){case 0:case!1:case"fill":fs=0;break;case 1:case!0:case"stroke":fs=1;break;case 2:case"fillThenStroke":fs=2;break;case 3:case"invisible":fs=3;break;case 4:case"fillAndAddForClipping":fs=4;break;case 5:case"strokeAndAddPathForClipping":fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fs=6;break;case 7:case"addToPathForClipping":fs=7}var Xu=bo.usedRenderingMode!==void 0?bo.usedRenderingMode:-1;fs!==-1?ta+=fs+` Tr
`:Xu!==-1&&(ta+=`0 Tr
`),fs!==-1&&(bo.usedRenderingMode=fs),Je=ae.align||"left";var xr,_l=Ce*pr,Gc=Zt.internal.pageSize.getWidth(),Zc=Ge[Xe];nt=ae.charSpace||xo,ot=ae.maxWidth||0,Lt=Object.assign({autoencode:!0,noBOM:!0},ae.flags);var oi=[],Sl=function(It){return Zt.getStringUnitWidth(It,{font:Zc,charSpace:nt,fontSize:Ce,doKerning:!1})*Ce/Ia};if(Object.prototype.toString.call(v)==="[object Array]"){var qa;Ae=yo(v),Je!=="left"&&(xr=Ae.map(Sl));var Wa,ci=0;if(Je==="right"){T-=xr[0],v=[],ua=Ae.length;for(var Ln=0;Ln<ua;Ln++)Ln===0?(Wa=_n(T),qa=Sn(X)):(Wa=E(ci-xr[Ln]),qa=-_l),v.push([Ae[Ln],Wa,qa]),ci=xr[Ln]}else if(Je==="center"){T-=xr[0]/2,v=[],ua=Ae.length;for(var di=0;di<ua;di++)di===0?(Wa=_n(T),qa=Sn(X)):(Wa=E((ci-xr[di])/2),qa=-_l),v.push([Ae[di],Wa,qa]),ci=xr[di]}else if(Je==="left"){v=[],ua=Ae.length;for(var Yc=0;Yc<ua;Yc++)v.push(Ae[Yc])}else if(Je==="justify"&&Zc.encoding==="Identity-H"){v=[],ua=Ae.length,ot=ot!==0?ot:Gc;for(var ko=0,js=0;js<ua;js++)if(qa=js===0?Sn(X):-_l,Wa=js===0?_n(T):ko,js<ua-1){var Qu=E((ot-xr[js])/(Ae[js].split(" ").length-1)),an=Ae[js].split(" ");v.push([an[0]+" ",Wa,qa]),ko=0;for(var rn=1;rn<an.length;rn++){var Xc=(Sl(an[rn-1]+" "+an[rn])-Sl(an[rn]))*Ia+Qu;rn==an.length-1?v.push([an[rn],Xc,0]):v.push([an[rn]+" ",Xc,0]),ko-=Xc}}else v.push([Ae[js],Wa,qa]);v.push(["",ko,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],ua=Ae.length,ot=ot!==0?ot:Gc,js=0;js<ua;js++){qa=js===0?Sn(X):-_l,Wa=js===0?_n(T):0;var Qc=Ae[js].split(" ").length-1,ed=Qc>0?(ot-xr[js])/Qc:0;js<ua-1?oi.push(D(E(ed))):oi.push(0),v.push([Ae[js],Wa,qa])}}}(typeof ae.R2L=="boolean"?ae.R2L:gt)===!0&&(v=bl(v,function(It,Vt,zs){return[It.split("").reverse().join(""),Vt,zs]})),we={text:v,x:T,y:X,options:ae,mutex:{pdfEscape:gr,activeFontKey:Xe,fonts:Ge,activeFontSize:Ce}},Pt.publish("postProcessText",we),v=we.text,Ps=we.mutex.isHex||!1;var td=Ge[Xe].encoding;td!=="WinAnsiEncoding"&&td!=="StandardEncoding"||(v=bl(v,function(It,Vt,zs){return[Yu(It),Vt,zs]})),Ae=yo(v),v=[];for(var ui,hi,mi,Al=Array.isArray(Ae[0])?1:0,fi="",El=function(It,Vt,zs){var Fs="";return zs instanceof st?(zs=typeof ae.angle=="number"?zn(zs,new st(1,0,0,1,It,Vt)):zn(new st(1,0,0,1,It,Vt),zs),N===z&&(zs=zn(new st(1,0,0,-1,0,0),zs)),Fs=zs.join(" ")+` Tm
`):Fs=D(It)+" "+D(Vt)+` Td
`,Fs},vr=0;vr<Ae.length;vr++){switch(fi="",Al){case 1:mi=(Ps?"<":"(")+Ae[vr][0]+(Ps?">":")"),ui=parseFloat(Ae[vr][1]),hi=parseFloat(Ae[vr][2]);break;case 0:mi=(Ps?"<":"(")+Ae[vr]+(Ps?">":")"),ui=_n(T),hi=Sn(X)}oi!==void 0&&oi[vr]!==void 0&&(fi=oi[vr]+` Tw
`),vr===0?v.push(fi+El(ui,hi,Ts)+mi):Al===0?v.push(fi+mi):Al===1&&v.push(fi+El(ui,hi,Ts)+mi)}v=Al===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var nn=`BT
/`;return nn+=Xe+" "+Ce+` Tf
`,nn+=D(Ce*pr)+` TL
`,nn+=gl+`
`,nn+=ta,nn+=v,J(nn+="ET"),p[Xe]=!0,Zt};var I0=f.__private__.clip=f.clip=function(v){return J(v==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return I0("evenodd")},f.__private__.discardPath=f.discardPath=function(){return J("n"),this};var sn=f.__private__.isValidStyle=function(v){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(T=!0),T};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(v){return sn(v)&&(d=v),this};var Vu=f.__private__.getStyle=f.getStyle=function(v){var T=d;switch(v){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=v}return T},Ku=f.close=function(){return J("h"),this};f.stroke=function(){return J("S"),this},f.fill=function(v){return ni("f",v),this},f.fillEvenOdd=function(v){return ni("f*",v),this},f.fillStroke=function(v){return ni("B",v),this},f.fillStrokeEvenOdd=function(v){return ni("B*",v),this};var ni=function(v,T){Ot(T)==="object"?M0(T,v):J(v)},Rc=function(v){v===null||N===z&&v===void 0||(v=Vu(v),J(v))};function D0(v,T,X,ae,de){var we=new Yo(T||this.boundingBox,X||this.xStep,ae||this.yStep,this.gState,de||this.matrix);we.stream=this.stream;var Ae=v+"$$"+this.cloneIndex+++"$$";return hr(Ae,we),we}var M0=function(v,T){var X=zt[v.key],ae=tt[X];if(ae instanceof Rl)J("q"),J(F0(T)),ae.gState&&f.setGState(ae.gState),J(v.matrix.toString()+" cm"),J("/"+X+" sh"),J("Q");else if(ae instanceof Yo){var de=new st(1,0,0,-1,0,yl());v.matrix&&(de=de.multiply(v.matrix||wn),X=D0.call(ae,v.key,v.boundingBox,v.xStep,v.yStep,de).id),J("q"),J("/Pattern cs"),J("/"+X+" scn"),ae.gState&&f.setGState(ae.gState),J(T),J("Q")}},F0=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Bc=f.moveTo=function(v,T){return J(D(E(v))+" "+D(L(T))+" m"),this},ml=f.lineTo=function(v,T){return J(D(E(v))+" "+D(L(T))+" l"),this},ii=f.curveTo=function(v,T,X,ae,de,we){return J([D(E(v)),D(L(T)),D(E(X)),D(L(ae)),D(E(de)),D(L(we)),"c"].join(" ")),this};f.__private__.line=f.line=function(v,T,X,ae,de){if(isNaN(v)||isNaN(T)||isNaN(X)||isNaN(ae)||!sn(de))throw new Error("Invalid arguments passed to jsPDF.line");return N===j?this.lines([[X-v,ae-T]],v,T,[1,1],de||"S"):this.lines([[X-v,ae-T]],v,T,[1,1]).stroke()},f.__private__.lines=f.lines=function(v,T,X,ae,de,we){var Ae,Ue,Je,nt,ot,Lt,cs,Ts,Zt,Ms,Ps,ta;if(typeof v=="number"&&(ta=X,X=T,T=v,v=ta),ae=ae||[1,1],we=we||!1,isNaN(T)||isNaN(X)||!Array.isArray(v)||!Array.isArray(ae)||!sn(de)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Bc(T,X),Ae=ae[0],Ue=ae[1],nt=v.length,Ms=T,Ps=X,Je=0;Je<nt;Je++)(ot=v[Je]).length===2?(Ms=ot[0]*Ae+Ms,Ps=ot[1]*Ue+Ps,ml(Ms,Ps)):(Lt=ot[0]*Ae+Ms,cs=ot[1]*Ue+Ps,Ts=ot[2]*Ae+Ms,Zt=ot[3]*Ue+Ps,Ms=ot[4]*Ae+Ms,Ps=ot[5]*Ue+Ps,ii(Lt,cs,Ts,Zt,Ms,Ps));return we&&Ku(),Rc(de),this},f.path=function(v){for(var T=0;T<v.length;T++){var X=v[T],ae=X.c;switch(X.op){case"m":Bc(ae[0],ae[1]);break;case"l":ml(ae[0],ae[1]);break;case"c":ii.apply(this,ae);break;case"h":Ku()}}return this},f.__private__.rect=f.rect=function(v,T,X,ae,de){if(isNaN(v)||isNaN(T)||isNaN(X)||isNaN(ae)||!sn(de))throw new Error("Invalid arguments passed to jsPDF.rect");return N===j&&(ae=-ae),J([D(E(v)),D(L(T)),D(E(X)),D(E(ae)),"re"].join(" ")),Rc(de),this},f.__private__.triangle=f.triangle=function(v,T,X,ae,de,we,Ae){if(isNaN(v)||isNaN(T)||isNaN(X)||isNaN(ae)||isNaN(de)||isNaN(we)||!sn(Ae))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-v,ae-T],[de-X,we-ae],[v-de,T-we]],v,T,[1,1],Ae,!0),this},f.__private__.roundedRect=f.roundedRect=function(v,T,X,ae,de,we,Ae){if(isNaN(v)||isNaN(T)||isNaN(X)||isNaN(ae)||isNaN(de)||isNaN(we)||!sn(Ae))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ue=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*X),we=Math.min(we,.5*ae),this.lines([[X-2*de,0],[de*Ue,0,de,we-we*Ue,de,we],[0,ae-2*we],[0,we*Ue,-de*Ue,we,-de,we],[2*de-X,0],[-de*Ue,0,-de,-we*Ue,-de,-we],[0,2*we-ae],[0,-we*Ue,de*Ue,-we,de,-we]],v+de,T,[1,1],Ae,!0),this},f.__private__.ellipse=f.ellipse=function(v,T,X,ae,de){if(isNaN(v)||isNaN(T)||isNaN(X)||isNaN(ae)||!sn(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*X,Ae=4/3*(Math.SQRT2-1)*ae;return Bc(v+X,T),ii(v+X,T-Ae,v+we,T-ae,v,T-ae),ii(v-we,T-ae,v-X,T-Ae,v-X,T),ii(v-X,T+Ae,v-we,T+ae,v,T+ae),ii(v+we,T+ae,v+X,T+Ae,v+X,T),Rc(de),this},f.__private__.circle=f.circle=function(v,T,X,ae){if(isNaN(v)||isNaN(T)||isNaN(X)||!sn(ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,T,X,X,ae)},f.setFont=function(v,T,X){return X&&(T=G(T,X)),Xe=Uu(v,T,{disableWarning:!1}),this};var O0=f.__private__.getFont=f.getFont=function(){return Ge[Uu.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var v,T,X={};for(v in ht)if(ht.hasOwnProperty(v))for(T in X[v]=[],ht[v])ht[v].hasOwnProperty(T)&&X[v].push(T);return X},f.addFont=function(v,T,X,ae,de){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(X=G(X,ae)),Fu.call(this,v,T,X,de=de||"Identity-H")};var fl,Uc=e.lineWidth||.200025,lt=f.__private__.getLineWidth=f.getLineWidth=function(){return Uc},R0=f.__private__.setLineWidth=f.setLineWidth=function(v){return Uc=v,J(D(E(v))+" w"),this};f.__private__.setLineDash=$e.API.setLineDash=$e.API.setLineDashPattern=function(v,T){if(v=v||[],T=T||0,isNaN(T)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(X){return D(E(X))}).join(" "),T=D(E(T)),J("["+v+"] "+T+" d"),this};var B0=f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*fl};f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*fl};var U0=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(fl=v),this},$0=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return fl};U0(e.lineHeight);var _n=f.__private__.getHorizontalCoordinate=function(v){return E(v)},Sn=f.__private__.getVerticalCoordinate=function(v){return N===z?v:it[H].mediaBox.topRightY-it[H].mediaBox.bottomLeftY-E(v)},H0=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(v){return D(_n(v))},V0=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(v){return D(Sn(v))},go=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return en(go)},f.__private__.setStrokeColor=f.setDrawColor=function(v,T,X,ae){return go=Tr({ch1:v,ch2:T,ch3:X,ch4:ae,pdfColorType:"draw",precision:2}),J(go),this};var $c=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return en($c)},f.__private__.setFillColor=f.setFillColor=function(v,T,X,ae){return $c=Tr({ch1:v,ch2:T,ch3:X,ch4:ae,pdfColorType:"fill",precision:2}),J($c),this};var gl=e.textColor||"0 g",po=f.__private__.getTextColor=f.getTextColor=function(){return en(gl)};f.__private__.setTextColor=f.setTextColor=function(v,T,X,ae){return gl=Tr({ch1:v,ch2:T,ch3:X,ch4:ae,pdfColorType:"text",precision:3}),this};var xo=e.charSpace,K0=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(xo||0)};f.__private__.setCharSpace=f.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xo=v,this};var Hc=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(v){var T=f.CapJoinStyles[v];if(T===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hc=T,J(T+" J"),this};var Vc=0;f.__private__.setLineJoin=f.setLineJoin=function(v){var T=f.CapJoinStyles[v];if(T===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vc=T,J(T+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(D(E(v))+" M"),this},f.GState=s0,f.setGState=function(v){(v=typeof v=="string"?mt[bs[v]]:pl(null,v)).equals(Ds)||(J("/"+v.id+" gs"),Ds=v)};var pl=function(v,T){if(!v||!bs[v]){var X=!1;for(var ae in mt)if(mt.hasOwnProperty(ae)&&mt[ae].equals(T)){X=!0;break}if(X)T=mt[ae];else{var de="GS"+(Object.keys(mt).length+1).toString(10);mt[de]=T,T.id=de}return v&&(bs[v]=T.id),Pt.publish("addGState",T),T}};f.addGState=function(v,T){return pl(v,T),this},f.saveGraphicsState=function(){return J("q"),$t.push({key:Xe,size:Ce,color:gl}),this},f.restoreGraphicsState=function(){J("Q");var v=$t.pop();return Xe=v.key,Ce=v.size,gl=v.color,Ds=null,this},f.setCurrentTransformationMatrix=function(v){return J(v.toString()+" cm"),this},f.comment=function(v){return J("#"+v),this};var xl=function(v,T){var X=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(we){isNaN(we)||(X=parseFloat(we))}});var ae=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ae},set:function(we){isNaN(we)||(ae=parseFloat(we))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(we){de=we.toString()}}),this},Kc=function(v,T,X,ae){xl.call(this,v,T),this.type="rect";var de=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Ae){isNaN(Ae)||(de=parseFloat(Ae))}});var we=ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ae){isNaN(Ae)||(we=parseFloat(Ae))}}),this},vo=function(){this.page=Ht,this.currentPage=H,this.pages=_e.slice(0),this.pagesContext=it.slice(0),this.x=Qe,this.y=Gt,this.matrix=Ct,this.width=qu(H),this.height=An(H),this.outputDestination=je,this.id="",this.objectNumber=-1};vo.prototype.restore=function(){Ht=this.page,H=this.currentPage,it=this.pagesContext,_e=this.pages,Qe=this.x,Gt=this.y,Ct=this.matrix,Wu(H,this.width),En(H,this.height),je=this.outputDestination};var qc=function(v,T,X,ae,de){Qr.push(new vo),Ht=H=0,_e=[],Qe=v,Gt=T,Ct=de,Mc([X,ae])};for(var vl in f.beginFormObject=function(v,T,X,ae,de){return qc(v,T,X,ae,de),this},f.endFormObject=function(v){return function(T){if(jn[T])Qr.pop().restore();else{var X=new vo,ae="Xo"+(Object.keys(da).length+1).toString(10);X.id=ae,jn[T]=ae,da[ae]=X,Pt.publish("addFormObject",X),Qr.pop().restore()}}(v),this},f.doFormObject=function(v,T){var X=da[jn[v]];return J("q"),J(T.toString()+" cm"),J("/"+X.id+" Do"),J("Q"),this},f.getFormObject=function(v){var T=da[jn[v]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},f.save=function(v,T){return v=v||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(Fl(ul(Nn()),v),typeof Fl.unload=="function"&&rt.setTimeout&&setTimeout(Fl.unload,911),this):new Promise(function(X,ae){try{var de=Fl(ul(Nn()),v);typeof Fl.unload=="function"&&rt.setTimeout&&setTimeout(Fl.unload,911),X(de)}catch(we){ae(we.message)}})},$e.API)$e.API.hasOwnProperty(vl)&&(vl==="events"&&$e.API.events.length?function(v,T){var X,ae,de;for(de=T.length-1;de!==-1;de--)X=T[de][0],ae=T[de][1],v.subscribe.apply(v,[X].concat(typeof ae=="function"?[ae]:ae))}(Pt,$e.API.events):f[vl]=$e.API[vl]);function qu(v){return it[v].mediaBox.topRightX-it[v].mediaBox.bottomLeftX}function Wu(v,T){it[v].mediaBox.topRightX=T+it[v].mediaBox.bottomLeftX}function An(v){return it[v].mediaBox.topRightY-it[v].mediaBox.bottomLeftY}function En(v,T){it[v].mediaBox.topRightY=T+it[v].mediaBox.bottomLeftY}var Ju=f.getPageWidth=function(v){return qu(v=v||H)/at},Gu=f.setPageWidth=function(v,T){Wu(v,T*at)},yl=f.getPageHeight=function(v){return An(v=v||H)/at},Zu=f.setPageHeight=function(v,T){En(v,T*at)};return f.internal={pdfEscape:gr,getStyle:Vu,getFont:O0,getFontSize:Fe,getCharSpace:K0,getTextColor:po,getLineHeight:B0,getLineHeightFactor:$0,getLineWidth:lt,write:Ke,getHorizontalCoordinate:_n,getVerticalCoordinate:Sn,getCoordinateString:H0,getVerticalCoordinateString:V0,collections:{},newObject:ms,newAdditionalObject:ol,newObjectDeferred:qs,newObjectDeferredBegin:ea,getFilters:Pr,putStream:fr,events:Pt,scaleFactor:at,pageSize:{getWidth:function(){return Ju(H)},setWidth:function(v){Gu(H,v)},getHeight:function(){return yl(H)},setHeight:function(v){Zu(H,v)}},encryptionOptions:h,encryption:ks,getEncryptor:function(v){return h!==null?ks.encryptor(v,0):function(T){return T}},output:Ir,getNumberOfPages:Bu,pages:_e,out:J,f2:y,f3:A,getPageInfo:Oc,getPageInfoByObjId:T0,getCurrentPageInfo:P0,getPDFVersion:_,Point:xl,Rectangle:Kc,Matrix:st,hasHotfix:hl},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Ju(H)},set:function(v){Gu(H,v)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return yl(H)},set:function(v){Zu(H,v)},enumerable:!0,configurable:!0}),(function(v){for(var T=0,X=We.length;T<X;T++){var ae=Fu.call(this,v[T][0],v[T][1],v[T][2],We[T][3],!0);g===!1&&(p[ae]=!0);var de=v[T][0].split("-");Mu({id:ae,fontName:de[0],fontStyle:de[1]||""})}Pt.publish("addFonts",{fonts:Ge,dictionary:ht})}).call(f,We),Xe="F1",Ou(n,a),Pt.publish("initialized"),f}Fo.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Fo.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fo.prototype.hexToBytes=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(String.fromCharCode(parseInt(e.substr(a,2),16)));return t.join("")},Fo.prototype.processOwnerPassword=function(e,t){return qp(Kp(t).substr(0,5),e)},Fo.prototype.encryptor=function(e,t){var a=Kp(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return qp(a,r)}},s0.prototype.equals=function(e){var t,a="id,objectNumber,equals";if(!e||Ot(e)!==Ot(this))return!1;var r=0;for(t in this)if(!(a.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&a.indexOf(t)<0&&r--;return r===0},$e.API={events:[]},$e.version="3.0.3";var xs=$e.API,hv=1,co=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},To=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ct=function(e){return e.toFixed(2)},wi=function(e){return e.toFixed(5)};xs.__acroform__={};var Ka=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},T1=function(e){return e*hv},cn=function(e){var t=new sz,a=Be.internal.getHeight(e)||0,r=Be.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ct(r)),Number(ct(a))],t},vA=xs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},yA=xs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},bA=xs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},As=xs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bA(e,t-1)},Es=xs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vA(e,t-1)},Cs=xs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return yA(e,t-1)},kA=xs.__acroform__.calculateCoordinates=function(e,t){var a=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,n=e[0],i=e[1],l=e[2],o=e[3],c={};return c.lowerLeft_X=a(n)||0,c.lowerLeft_Y=r(i+o)||0,c.upperRight_X=a(n+l)||0,c.upperRight_Y=r(i)||0,[Number(ct(c.lowerLeft_X)),Number(ct(c.lowerLeft_Y)),Number(ct(c.upperRight_X)),Number(ct(c.upperRight_Y))]},jA=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],a=e._V||e.DV,r=Wp(e,a),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+ct(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=cn(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Wp=function(e,t){var a=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(y){return y.split(`
`)}):n.map(function(y){return[y]});var i=a,l=Be.internal.getHeight(e)||0;l=l<0?-l:l;var o=Be.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(y,A,E){if(y+1<n.length){var L=A+" "+n[y+1][0];return qh(L,e,E).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var d,h,g=qh("3",e,i).height,p=e.multiline?l-i:(l-g)/2,f=p+=2,k=0,_=0,w=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+qh(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var x="",j=0,z=0;z<n.length;z++)if(n.hasOwnProperty(z)){var N=!1;if(n[z].length!==1&&w!==n[z].length-1){if((g+2)*(j+2)+2>l)continue e;x+=n[z][w],N=!0,_=z,z--}else{x=(x+=n[z][w]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var $=parseInt(z),q=c($,x,i),G=z>=n.length-1;if(q&&!G){x+=" ",w=0;continue}if(q||G){if(G)_=$;else if(e.multiline&&(g+2)*(j+2)+2>l)continue e}else{if(!e.multiline||(g+2)*(j+2)+2>l)continue e;_=$}}for(var D="",I=k;I<=_;I++){var R=n[I];if(e.multiline){if(I===_){D+=R[w]+" ",w=(w+1)%R.length;continue}if(I===k){D+=R[R.length-1]+" ";continue}}D+=R[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,h=qh(D,e,i).width,e.textAlign){case"right":d=o-h-2;break;case"center":d=(o-h)/2;break;default:d=2}t+=ct(d)+" "+ct(f)+` Td
`,t+="("+co(D)+`) Tj
`,t+=-ct(d)+` 0 Td
`,f=-(i+2),h=0,k=N?_:_+1,j++,x=""}break}return r.text=t,r.fontSize=i,r},qh=function(e,t,a){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:n}},zA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wA=function(e,t){var a={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(a)},NA=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Yr.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(zA)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");hv=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new az,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in r)if(r.hasOwnProperty(n)){var i=r[n];i.objId=void 0,i.hasAnnotation&&wA(i,a)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(a){(function(r,n){var i=!r;for(var l in r||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(l)){var o=r[l],c=[],d=o.Rect;if(o.Rect&&(o.Rect=kA(o.Rect,n)),n.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Be.createDefaultAppearanceStream(o),Ot(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var h=jA(o);c.push({key:"AP",value:"<</N "+h+">>"}),n.internal.acroformPlugin.xForms.push(h)}if(o.appearanceStreamContent){var g="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var f=o.appearanceStreamContent[p];if(g+="/"+p+" ",g+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var l in f)if(f.hasOwnProperty(l)){var k=f[l];typeof k=="function"&&(k=k.call(n,o)),g+="/"+l+" "+k+" ",n.internal.acroformPlugin.xForms.indexOf(k)>=0||n.internal.acroformPlugin.xForms.push(k)}}else typeof(k=f)=="function"&&(k=k.call(n,o)),g+="/"+l+" "+k,n.internal.acroformPlugin.xForms.indexOf(k)>=0||n.internal.acroformPlugin.xForms.push(k);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:o.objId}),n.internal.out("endobj")}i&&function(_,w){for(var x in _)if(_.hasOwnProperty(x)){var j=x,z=_[x];w.internal.newObjectDeferredBegin(z.objId,!0),Ot(z)==="object"&&typeof z.putStream=="function"&&z.putStream(),delete _[j]}}(n.internal.acroformPlugin.xForms,n)})(a,e)}),e.internal.acroformPlugin.isInitialized=!0}},tz=xs.__acroform__.arrayToPdfArray=function(e,t,a){var r=function(l){return l};if(Array.isArray(e)){for(var n="[",i=0;i<e.length;i++)switch(i!==0&&(n+=" "),Ot(e[i])){case"boolean":case"number":case"object":n+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&a&&(r=a.internal.getEncryptor(t)),n+="("+co(r(e[i].toString()))+")"):n+=e[i].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gg=function(e,t,a){var r=function(n){return n};return t!==void 0&&a&&(r=a.internal.getEncryptor(t)),(e=e||"").toString(),"("+co(r(e))+")"},fn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fn.prototype.toString=function(){return this.objId+" 0 R"},fn.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fn.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var a in t)if(Object.getOwnPropertyDescriptor(this,t[a]).configurable===!1){var r=t[a],n=this[r];n&&(Array.isArray(n)?e.push({key:r,value:tz(n,this.objId,this.scope)}):n instanceof fn?(n.scope=this.scope,e.push({key:r,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:r,value:n}))}return e};var sz=function(){fn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){e=a.trim()},get:function(){return e||null}})};Ka(sz,fn);var az=function(){fn.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+co(a(e))+")"}},set:function(a){e=a}})};Ka(az,fn);var Yr=function e(){fn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!As(t,3)},set:function(x){x?this.F=Es(t,3):this.F=Cs(t,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');a=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof a0)return;i="FieldObject"+e.FieldNum++}var x=function(j){return j};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+co(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/hv:d},set:function(x){d=x}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(x){h=x}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof a0||this instanceof Gl))return gg(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=x}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Zs==0?gg(p,this.objId,this.scope):p},set:function(x){x=x.toString(),p=this instanceof Zs==0?x.substr(0,1)==="("?To(x.substr(1,x.length-2)):To(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs==1?To(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Zs==1?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Zs==0?gg(f,this.objId,this.scope):f},set:function(x){x=x.toString(),f=this instanceof Zs==0?x.substr(0,1)==="("?To(x.substr(1,x.length-2)):To(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs==1?To(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Zs==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(x){x=!!x,_=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(x){k=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,1)},set:function(x){x?this.Ff=Es(this.Ff,1):this.Ff=Cs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,2)},set:function(x){x?this.Ff=Es(this.Ff,2):this.Ff=Cs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,3)},set:function(x){x?this.Ff=Es(this.Ff,3):this.Ff=Cs(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');w=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(w){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};Ka(Yr,fn);var oc=function(){Yr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(a){e=a}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tz(t,this.objId,this.scope)},set:function(a){var r,n;n=[],typeof(r=a)=="string"&&(n=function(i,l,o){o||(o=1);for(var c,d=[];c=l.exec(i);)d.push(c[o]);return d}(r,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(a){t=a,this.sort&&t.sort()},this.addOption=function(a){a=(a=a||"").toString(),t.push(a),this.sort&&t.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();t.indexOf(a)!==-1&&(t.splice(t.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,18)},set:function(a){a?this.Ff=Es(this.Ff,18):this.Ff=Cs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Es(this.Ff,19):this.Ff=Cs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,20)},set:function(a){a?(this.Ff=Es(this.Ff,20),t.sort()):this.Ff=Cs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,22)},set:function(a){a?this.Ff=Es(this.Ff,22):this.Ff=Cs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,23)},set:function(a){a?this.Ff=Es(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,27)},set:function(a){a?this.Ff=Es(this.Ff,27):this.Ff=Cs(this.Ff,27)}}),this.hasAppearanceStream=!1};Ka(oc,Yr);var cc=function(){oc.call(this),this.fontName="helvetica",this.combo=!1};Ka(cc,oc);var dc=function(){cc.call(this),this.combo=!0};Ka(dc,cc);var fm=function(){dc.call(this),this.edit=!0};Ka(fm,dc);var Zs=function(){Yr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,15)},set:function(a){a?this.Ff=Es(this.Ff,15):this.Ff=Cs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,16)},set:function(a){a?this.Ff=Es(this.Ff,16):this.Ff=Cs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,17)},set:function(a){a?this.Ff=Es(this.Ff,17):this.Ff=Cs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,26)},set:function(a){a?this.Ff=Es(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(i){return i};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,n=[];for(r in n.push("<<"),t)n.push("/"+r+" ("+co(a(t[r]))+")");return n.push(">>"),n.join(`
`)}},set:function(a){Ot(a)==="object"&&(t=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(a){typeof a=="string"&&(t.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(a){e="/"+a}})};Ka(Zs,Yr);var gm=function(){Zs.call(this),this.pushButton=!0};Ka(gm,Zs);var uc=function(){Zs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ka(uc,Zs);var a0=function(){var e,t;Yr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),r)l.push("/"+i+" ("+co(n(r[i]))+")");return l.push(">>"),l.join(`
`)},set:function(n){Ot(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(n){a=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(n){a="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Be.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ka(a0,Yr),uc.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var a=this.Kids[t];a.appearanceStreamContent=e.createAppearanceStream(a.optionName),a.caption=e.getCA()}},uc.prototype.createOption=function(e){var t=new a0;return t.Parent=this,t.optionName=e,this.Kids.push(t),_A.call(this.scope,t),t};var pm=function(){Zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Be.CheckBox.createAppearanceStream()};Ka(pm,Zs);var Gl=function(){Yr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,13)},set:function(t){t?this.Ff=Es(this.Ff,13):this.Ff=Cs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,21)},set:function(t){t?this.Ff=Es(this.Ff,21):this.Ff=Cs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,23)},set:function(t){t?this.Ff=Es(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,24)},set:function(t){t?this.Ff=Es(this.Ff,24):this.Ff=Cs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,25)},set:function(t){t?this.Ff=Es(this.Ff,25):this.Ff=Cs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,26)},set:function(t){t?this.Ff=Es(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ka(Gl,Yr);var xm=function(){Gl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!As(this.Ff,14)},set:function(e){e?this.Ff=Es(this.Ff,14):this.Ff=Cs(this.Ff,14)}}),this.password=!0};Ka(xm,Gl);var Be={CheckBox:{createAppearanceStream:function(){return{N:{On:Be.CheckBox.YesNormal},D:{On:Be.CheckBox.YesPushDown,Off:Be.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=cn(e);t.scope=e.scope;var a=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=Wp(e,e.caption);return a.push("0.749023 g"),a.push("0 0 "+ct(Be.internal.getWidth(e))+" "+ct(Be.internal.getHeight(e))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+ct(i.fontSize)+" Tf "+n),a.push("BT"),a.push(i.text),a.push("ET"),a.push("Q"),a.push("EMC"),t.stream=a.join(`
`),t},YesNormal:function(e){var t=cn(e);t.scope=e.scope;var a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),n=[],i=Be.internal.getHeight(e),l=Be.internal.getWidth(e),o=Wp(e,e.caption);return n.push("1 g"),n.push("0 0 "+ct(l)+" "+ct(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+ct(l-1)+" "+ct(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+a+" "+ct(o.fontSize)+" Tf "+r),n.push(o.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=cn(e);t.scope=e.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+ct(Be.internal.getWidth(e))+" "+ct(Be.internal.getHeight(e))+" re"),a.push("f"),t.stream=a.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Be.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Be.RadioButton.Circle.YesNormal,t.D[e]=Be.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=cn(e);t.scope=e.scope;var a=[],r=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Be.internal.Bezier_C,i=Number((r*n).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+wi(Be.internal.getWidth(e)/2)+" "+wi(Be.internal.getHeight(e)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),a.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),a.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),a.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t},YesPushDown:function(e){var t=cn(e);t.scope=e.scope;var a=[],r=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),i=Number((n*Be.internal.Bezier_C).toFixed(5)),l=Number((r*Be.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+wi(Be.internal.getWidth(e)/2)+" "+wi(Be.internal.getHeight(e)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),a.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),a.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),a.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+wi(Be.internal.getWidth(e)/2)+" "+wi(Be.internal.getHeight(e)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=cn(e);t.scope=e.scope;var a=[],r=Be.internal.getWidth(e)<=Be.internal.getHeight(e)?Be.internal.getWidth(e)/4:Be.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),i=Number((n*Be.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+wi(Be.internal.getWidth(e)/2)+" "+wi(Be.internal.getHeight(e)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),a.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),a.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),a.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Be.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Be.RadioButton.Cross.YesNormal,t.D[e]=Be.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=cn(e);t.scope=e.scope;var a=[],r=Be.internal.calculateCross(e);return a.push("q"),a.push("1 1 "+ct(Be.internal.getWidth(e)-2)+" "+ct(Be.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(ct(r.x1.x)+" "+ct(r.x1.y)+" m"),a.push(ct(r.x2.x)+" "+ct(r.x2.y)+" l"),a.push(ct(r.x4.x)+" "+ct(r.x4.y)+" m"),a.push(ct(r.x3.x)+" "+ct(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},YesPushDown:function(e){var t=cn(e);t.scope=e.scope;var a=Be.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+ct(Be.internal.getWidth(e))+" "+ct(Be.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ct(Be.internal.getWidth(e)-2)+" "+ct(Be.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ct(a.x1.x)+" "+ct(a.x1.y)+" m"),r.push(ct(a.x2.x)+" "+ct(a.x2.y)+" l"),r.push(ct(a.x4.x)+" "+ct(a.x4.y)+" m"),r.push(ct(a.x3.x)+" "+ct(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=cn(e);t.scope=e.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+ct(Be.internal.getWidth(e))+" "+ct(Be.internal.getHeight(e))+" re"),a.push("f"),t.stream=a.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+a}};Be.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Be.internal.getWidth(e),a=Be.internal.getHeight(e),r=Math.min(t,a);return{x1:{x:(t-r)/2,y:(a-r)/2+r},x2:{x:(t-r)/2+r,y:(a-r)/2},x3:{x:(t-r)/2,y:(a-r)/2},x4:{x:(t-r)/2+r,y:(a-r)/2+r}}}},Be.internal.getWidth=function(e){var t=0;return Ot(e)==="object"&&(t=T1(e.Rect[2])),t},Be.internal.getHeight=function(e){var t=0;return Ot(e)==="object"&&(t=T1(e.Rect[3])),t};var _A=xs.addField=function(e){if(NA(this,e),!(e instanceof Yr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};xs.AcroFormChoiceField=oc,xs.AcroFormListBox=cc,xs.AcroFormComboBox=dc,xs.AcroFormEditBox=fm,xs.AcroFormButton=Zs,xs.AcroFormPushButton=gm,xs.AcroFormRadioButton=uc,xs.AcroFormCheckBox=pm,xs.AcroFormTextField=Gl,xs.AcroFormPasswordField=xm,xs.AcroFormAppearance=Be,xs.AcroForm={ChoiceField:oc,ListBox:cc,ComboBox:dc,EditBox:fm,Button:Zs,PushButton:gm,RadioButton:uc,CheckBox:pm,TextField:Gl,PasswordField:xm,Appearance:Be},$e.AcroForm={ChoiceField:oc,ListBox:cc,ComboBox:dc,EditBox:fm,Button:Zs,PushButton:gm,RadioButton:uc,CheckBox:pm,TextField:Gl,PasswordField:xm,Appearance:Be};function rz(e){return e.reduce(function(t,a,r){return t[a]=r,t},{})}(function(e){var t="addImage_";e.__addimage__={};var a="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(y,A){var E,L,M,ee,ce,V=a;if((A=A||a)==="RGBA"||y.data!==void 0&&y.data instanceof Uint8ClampedArray&&"height"in y&&"width"in y)return"RGBA";if(q(y))for(ce in r)for(M=r[ce],E=0;E<M.length;E+=1){for(ee=!0,L=0;L<M[E].length;L+=1)if(M[E][L]!==void 0&&M[E][L]!==y[L]){ee=!1;break}if(ee===!0){V=ce;break}}else for(ce in r)for(M=r[ce],E=0;E<M.length;E+=1){for(ee=!0,L=0;L<M[E].length;L+=1)if(M[E][L]!==void 0&&M[E][L]!==y.charCodeAt(L)){ee=!1;break}if(ee===!0){V=ce;break}}return V===a&&A!==a&&(V=A),V},i=function y(A){for(var E=this.internal.write,L=this.internal.putStream,M=(0,this.internal.getFilters)();M.indexOf("FlateEncode")!==-1;)M.splice(M.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:A.width}),ee.push({key:"Height",value:A.height}),A.colorSpace===x.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===x.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)&&A.transparency.length>0){for(var ce="",V=0,le=A.transparency.length;V<le;V++)ce+=A.transparency[V]+" "+A.transparency[V]+" ";ee.push({key:"Mask",value:"["+ce+"]"})}A.sMask!==void 0&&ee.push({key:"SMask",value:A.objectId+1+" 0 R"});var ye=A.filter!==void 0?["/"+A.filter]:void 0;if(L({data:A.data,additionalKeyValues:ee,alreadyAppliedFilters:ye,objectId:A.objectId}),E("endobj"),"sMask"in A&&A.sMask!==void 0){var be,C=(be=A.sMaskBitsPerComponent)!==null&&be!==void 0?be:A.bitsPerComponent,H={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:C,data:A.sMask};"filter"in A&&(H.decodeParameters="/Predictor ".concat(A.predictor," /Colors 1 /BitsPerComponent ").concat(C," /Columns ").concat(A.width),H.filter=A.filter),y.call(this,H)}if(A.colorSpace===x.INDEXED){var W=this.internal.newObject();L({data:D(new Uint8Array(A.palette)),objectId:W}),E("endobj")}},l=function(){var y=this.internal.collections[t+"images"];for(var A in y)i.call(this,y[A])},o=function(){var y,A=this.internal.collections[t+"images"],E=this.internal.write;for(var L in A)E("/I"+(y=A[L]).index,y.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var y=this.internal.collections[t+"images"];return c.call(this),y},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},g=function(y){return typeof e["process"+y.toUpperCase()]=="function"},p=function(y){return Ot(y)==="object"&&y.nodeType===1},f=function(y,A){if(y.nodeName==="IMG"&&y.hasAttribute("src")){var E=""+y.getAttribute("src");if(E.indexOf("data:image/")===0)return mm(unescape(E).split("base64,").pop());var L=e.loadFile(E,!0);if(L!==void 0)return L}if(y.nodeName==="CANVAS"){if(y.width===0||y.height===0)throw new Error("Given canvas must have data. Canvas width: "+y.width+", height: "+y.height);var M;switch(A){case"PNG":M="image/png";break;case"WEBP":M="image/webp";break;default:M="image/jpeg"}return mm(y.toDataURL(M,1).split("base64,").pop())}},k=function(y){var A=this.internal.collections[t+"images"];if(A){for(var E in A)if(y===A[E].alias)return A[E]}},_=function(y,A,E){return y||A||(y=-96,A=-96),y<0&&(y=-1*E.width*72/y/this.internal.scaleFactor),A<0&&(A=-1*E.height*72/A/this.internal.scaleFactor),y===0&&(y=A*E.width/E.height),A===0&&(A=y*E.height/E.width),[y,A]},w=function(y,A,E,L,M,ee){var ce=_.call(this,E,L,M),V=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,ye=d.call(this);if(E=ce[0],L=ce[1],ye[M.index]=M,ee){ee*=Math.PI/180;var be=Math.cos(ee),C=Math.sin(ee),H=function(Q){return Q.toFixed(4)},W=[H(be),H(C),H(-1*C),H(be),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,V(y),le(A+L),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([V(E),"0","0",V(L),"0","0","cm"].join(" "))):this.internal.write([V(E),"0","0",V(L),V(y),le(A+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+M.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},z=e.__addimage__.sHashCode=function(y){var A,E,L=0;if(typeof y=="string")for(E=y.length,A=0;A<E;A++)L=(L<<5)-L+y.charCodeAt(A),L|=0;else if(q(y))for(E=y.byteLength/2,A=0;A<E;A++)L=(L<<5)-L+y[A],L|=0;return L},N=e.__addimage__.validateStringAsBase64=function(y){(y=y||"").toString().trim();var A=!0;return y.length===0&&(A=!1),y.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(y.substr(0,y.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(y.substr(-2))===!1&&(A=!1),A},$=e.__addimage__.extractImageFromDataUrl=function(y){if(y==null||!(y=y.trim()).startsWith("data:"))return null;var A=y.indexOf(",");return A<0?null:y.substring(0,A).trim().endsWith("base64")?y.substring(A+1):null};e.__addimage__.isArrayBuffer=function(y){return y instanceof ArrayBuffer};var q=e.__addimage__.isArrayBufferView=function(y){return y instanceof Int8Array||y instanceof Uint8Array||y instanceof Uint8ClampedArray||y instanceof Int16Array||y instanceof Uint16Array||y instanceof Int32Array||y instanceof Uint32Array||y instanceof Float32Array||y instanceof Float64Array},G=e.__addimage__.binaryStringToUint8Array=function(y){for(var A=y.length,E=new Uint8Array(A),L=0;L<A;L++)E[L]=y.charCodeAt(L);return E},D=e.__addimage__.arrayBufferToBinaryString=function(y){for(var A="",E=q(y)?y:new Uint8Array(y),L=0;L<E.length;L+=8192)A+=String.fromCharCode.apply(null,E.subarray(L,L+8192));return A};e.addImage=function(){var y,A,E,L,M,ee,ce,V,le;if(typeof arguments[1]=="number"?(A=a,E=arguments[1],L=arguments[2],M=arguments[3],ee=arguments[4],ce=arguments[5],V=arguments[6],le=arguments[7]):(A=arguments[1],E=arguments[2],L=arguments[3],M=arguments[4],ee=arguments[5],ce=arguments[6],V=arguments[7],le=arguments[8]),Ot(y=arguments[0])==="object"&&!p(y)&&"imageData"in y){var ye=y;y=ye.imageData,A=ye.format||A||a,E=ye.x||E||0,L=ye.y||L||0,M=ye.w||ye.width||M,ee=ye.h||ye.height||ee,ce=ye.alias||ce,V=ye.compression||V,le=ye.rotation||ye.angle||le}var be=this.internal.getFilters();if(V===void 0&&be.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(E)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var C=I.call(this,y,A,ce,V);return w.call(this,E,L,M,ee,C,le),this};var I=function(y,A,E,L){var M,ee,ce;if(typeof y=="string"&&n(y)===a){y=unescape(y);var V=R(y,!1);(V!==""||(V=e.loadFile(y,!0))!==void 0)&&(y=V)}if(p(y)&&(y=f(y,A)),A=n(y,A),!g(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((ce=E)==null||ce.length===0)&&(E=function(le){return typeof le=="string"||q(le)?z(le):q(le.data)?z(le.data):null}(y)),(M=k.call(this,E))||(y instanceof Uint8Array||A==="RGBA"||(ee=y,y=G(y)),M=this["process"+A.toUpperCase()](y,h.call(this),E,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in e.image_compression?le:j.NONE}(L),ee)),!M)throw new Error("An unknown error occurred whilst processing the image.");return M},R=e.__addimage__.convertBase64ToBinaryString=function(y,A){A=typeof A!="boolean"||A;var E,L="";if(typeof y=="string"){var M;E=(M=$(y))!==null&&M!==void 0?M:y;try{L=mm(E)}catch(ee){if(A)throw N(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return L};e.getImageProperties=function(y){var A,E,L="";if(p(y)&&(y=f(y)),typeof y=="string"&&n(y)===a&&((L=R(y,!1))===""&&(L=e.loadFile(y)||""),y=L),E=n(y),!g(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(y instanceof Uint8Array||(y=G(y)),!(A=this["process"+E.toUpperCase()](y)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=E,A}})($e.API),function(e){var t=function(a){if(a!==void 0&&a!="")return!0};$e.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(a){for(var r,n,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(a.objId),d=a.pageContext.annotations,h=!1,g=0;g<d.length&&!h;g++)switch((r=d[g]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){r=d[p];var f=this.internal.pdfEscape,k=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(_.objId),j=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+l(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+f(x(r.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(x(j))+") >>",_.content=i;var z=_.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+l(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(_.objId,"0 R",w.objId,"0 R");break;case"freetext":n="/Rect ["+l(r.bounds.x)+" "+o(r.bounds.y)+" "+l(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+f(k(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var $=this.annotations._nameMap[r.options.name];r.options.pageNumber=$.page,r.options.top=$.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+f(k(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var q=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},e.link=function(a,r,n,i,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(a),y:d(r),w:c(a+n),h:d(r+i)},options:l,type:"link"})},e.textWithLink=function(a,r,n,i){var l,o,c=this.getTextWidth(a),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var h=this.splitTextToSize(a,o).length;l=Math.ceil(d*h)}else o=c,l=d;return this.text(a,r,n,i),n+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,n-d,o,l,i),c},e.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}($e.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(_){return t[_.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=e.__arabicParser__.isArabicEndLetter=function(_){return l(_)&&i(_)&&t[_.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(_){return l(_)&&n.indexOf(_.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return l(_)&&i(_)&&t[_.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(_){return l(_)&&i(_)&&t[_.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(_){return l(_)&&i(_)&&t[_.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(_){return l(_)&&i(_)&&t[_.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(_){var w=0,x=a,j="",z=0;for(w=0;w<_.length;w+=1)x[_.charCodeAt(w)]!==void 0?(z++,typeof(x=x[_.charCodeAt(w)])=="number"&&(j+=String.fromCharCode(x),x=a,z=0),w===_.length-1&&(x=a,j+=_.charAt(w-(z-1)),w-=z-1,z=0)):(x=a,j+=_.charAt(w-z),w-=z,z=0);return j};e.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(_,w,x){return l(_)?i(_)===!1?-1:!d(_)||!l(w)&&!l(x)||!l(x)&&o(w)||o(_)&&!l(w)||o(_)&&c(w)||o(_)&&o(w)?0:h(_)&&l(w)&&!o(w)&&l(x)&&d(x)?3:o(_)||!l(x)?1:2:-1},f=function(_){var w=0,x=0,j=0,z="",N="",$="",q=(_=_||"").split("\\s+"),G=[];for(w=0;w<q.length;w+=1){for(G.push(""),x=0;x<q[w].length;x+=1)z=q[w][x],N=q[w][x-1],$=q[w][x+1],l(z)?(j=p(z,N,$),G[w]+=j!==-1?String.fromCharCode(t[z.charCodeAt(0)][j]):z):G[w]+=z;G[w]=g(G[w])}return G.join(" ")},k=e.__arabicParser__.processArabic=e.processArabic=function(){var _,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(w)){var j=0;for(x=[],j=0;j<w.length;j+=1)Array.isArray(w[j])?x.push([f(w[j][0]),w[j][1],w[j][2]]):x.push([f(w[j])]);_=x}else _=f(w);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};e.events.push(["preProcessText",k])}($e.API),$e.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(o){a=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(a,r){var n;if((a=a||"2d")!=="2d")return null;for(n in r)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=r[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}($e.API),function(e){var t={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(_){h=_}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(_){k=_}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),g=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,f=0,k=0,_=0,w=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(z,N){return z.concat(w.splitTextToSize(N,x))},[])):c=Array.isArray(c)?c:[c];for(var j=0;j<c.length;j++)f<(_=this.getStringUnitWidth(c[j],{font:g})*h)&&(f=_);return f!==0&&(k=c.length),{w:f/=p,h:Math.max((k*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,f&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,a===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,h,g,p){if(r.call(this),!h)throw new Error("No data for PDF table.");var f,k,_,w,x=[],j=[],z=[],N={},$={},q=[],G=[],D=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,R=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,y=p.margins||Object.assign({width:this.getPageWidth()},t),A=typeof p.padding=="number"?p.padding:3,E=p.headerBackgroundColor||"#c8c8c8",L=p.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=y,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=L,this.setFontSize(R),g==null)j=x=Object.keys(h[0]),z=x.map(function(){return"left"});else if(Array.isArray(g)&&Ot(g[0])==="object")for(x=g.map(function(ye){return ye.name}),j=g.map(function(ye){return ye.prompt||ye.name||""}),z=g.map(function(ye){return ye.align||"left"}),f=0;f<g.length;f+=1)$[g[f].name]=.7499990551181103*g[f].width;else Array.isArray(g)&&typeof g[0]=="string"&&(j=x=g,z=x.map(function(){return"left"}));if(D||Array.isArray(g)&&typeof g[0]=="string")for(f=0;f<x.length;f+=1){for(N[w=x[f]]=h.map(function(ye){return ye[w]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(j[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=N[w],this.setFont(void 0,"normal"),_=0;_<k.length;_+=1)q.push(this.getTextDimensions(k[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);$[w]=Math.max.apply(null,q)+A+A,q=[]}if(I){var M={};for(f=0;f<x.length;f+=1)M[x[f]]={},M[x[f]].text=j[f],M[x[f]].align=z[f];var ee=o.call(this,M,$);G=x.map(function(ye){return new i(c,d,$[ye],ee,M[ye].text,void 0,M[ye].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var ce=g.reduce(function(ye,be){return ye[be.name]=be.align,ye},{});for(f=0;f<h.length;f+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:f,data:h[f]},this);var V=o.call(this,h[f],$);for(_=0;_<x.length;_+=1){var le=h[f][x[_]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:f,col:_,data:le},this),l.call(this,new i(c,d,$[x[_]],V,le,f+2,ce[x[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var h=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(f){var k=c[f];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,d[f]-h-h)},this).map(function(f){return this.getLineHeightFactor()*f.length*g/p+h+h},this).reduce(function(f,k){return Math.max(f,k)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){h=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,p.push(h)),h.lineNumber=c;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,h),this.setTextColor(k)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),a=!1}}($e.API);var nz={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iz=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Jp=rz(iz),lz=[100,200,300,400,500,600,700,800,900],SA=rz(lz);function pg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),a=function(i){return nz[i=i||"normal"]?i:"normal"}(e.style),r=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),n=function(i){return typeof Jp[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:a,weight:r,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,a,r].join(" ")}}}function P1(e,t,a,r){var n;for(n=a;n>=0&&n<t.length;n+=r)if(e[t[n]])return e[t[n]];for(n=a;n>=0&&n<t.length;n-=r)if(e[t[n]])return e[t[n]]}var AA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},I1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function D1(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function M1(e){return e.trimLeft()}function EA(e,t){for(var a=0;a<e.length;){if(e.charAt(a)===t)return[e.substring(0,a),e.substring(a+1)];a+=1}return null}function CA(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Wh,F1,O1,Po,Jh,R1,B1,U1,xg=["times"];function $1(e,t,a,r,n){var i=4,l=V1;switch(n){case $e.API.image_compression.FAST:i=1,l=H1;break;case $e.API.image_compression.MEDIUM:i=6,l=K1;break;case $e.API.image_compression.SLOW:i=9,l=q1}e=function(c,d,h,g){for(var p,f=c.length/d,k=new Uint8Array(c.length+f),_=[LA,H1,V1,K1,q1],w=0;w<f;w+=1){var x=w*d,j=c.subarray(x,x+d);if(g)k.set(g(j,h,p),x+w);else{for(var z=_.length,N=[],$=0;$<z;$+=1)N[$]=_[$](j,h,p);var q=PA(N.concat());k.set(N[q],x+w)}p=j}return k}(e,t,Math.ceil(a*r/8),l);var o=Dp(e,{level:i});return $e.API.__addimage__.arrayBufferToBinaryString(o)}function LA(e){var t=Array.apply([],e);return t.unshift(0),t}function H1(e,t){var a=e.length,r=[];r[0]=1;for(var n=0;n<a;n+=1){var i=e[n-t]||0;r[n+1]=e[n]-i+256&255}return r}function V1(e,t,a){var r=e.length,n=[];n[0]=2;for(var i=0;i<r;i+=1){var l=a&&a[i]||0;n[i+1]=e[i]-l+256&255}return n}function K1(e,t,a){var r=e.length,n=[];n[0]=3;for(var i=0;i<r;i+=1){var l=e[i-t]||0,o=a&&a[i]||0;n[i+1]=e[i]+256-(l+o>>>1)&255}return n}function q1(e,t,a){var r=e.length,n=[];n[0]=4;for(var i=0;i<r;i+=1){var l=TA(e[i-t]||0,a&&a[i]||0,a&&a[i-t]||0);n[i+1]=e[i]-l+256&255}return n}function TA(e,t,a){if(e===t&&t===a)return e;var r=Math.abs(t-a),n=Math.abs(e-a),i=Math.abs(e+t-a-a);return r<=n&&r<=i?e:n<=i?t:a}function PA(e){var t=e.map(function(a){return a.reduce(function(r,n){return r+Math.abs(n)},0)});return t.indexOf(Math.min.apply(null,t))}function vg(e,t,a){var r=t*a,n=Math.floor(r/8),i=16-(r-8*n+a),l=(1<<a)-1;return oz(e,n)>>i&l}function W1(e,t,a,r){var n=a*r,i=Math.floor(n/8),l=16-(n-8*i+r),o=(1<<r)-1,c=(t&o)<<l;(function(d,h,g){if(h+1<d.byteLength)d.setUint16(h,g,!1);else{var p=g>>8&255;d.setUint8(h,p)}})(e,i,oz(e,i)&~(o<<l)&65535|c)}function oz(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function IA(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,n=e[t++],i=n>>7,l=1<<1+(7&n);e[t++],e[t++];var o=null,c=null;i&&(o=t,c=l,t+=3*l);var d=!0,h=[],g=0,p=null,f=0,k=null;for(this.width=a,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,k=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((y=e[t++])>=0))throw Error("Invalid block size");if(y===0)break;t+=y}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var _=e[t++];g=e[t++]|e[t++]<<8,p=e[t++],1&_||(p=null),f=_>>2&7,t++;break;case 254:for(;;){if(!((y=e[t++])>=0))throw Error("Invalid block size");if(y===0)break;t+=y}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var w=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,z=e[t++]|e[t++]<<8,N=e[t++],$=N>>6&1,q=1<<1+(7&N),G=o,D=c,I=!1;N>>7&&(I=!0,G=t,D=q,t+=3*q);var R=t;for(t++;;){var y;if(!((y=e[t++])>=0))throw Error("Invalid block size");if(y===0)break;t+=y}h.push({x:w,y:x,width:j,height:z,has_local_palette:I,palette_offset:G,palette_size:D,data_offset:R,data_length:t-R,transparent_index:p,interlaced:!!$,delay:g,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return k},this.frameInfo=function(A){if(A<0||A>=h.length)throw new Error("Frame index out of range.");return h[A]},this.decodeAndBlitFrameBGRA=function(A,E){var L=this.frameInfo(A),M=L.width*L.height,ee=new Uint8Array(M);J1(e,L.data_offset,ee,M);var ce=L.palette_offset,V=L.transparent_index;V===null&&(V=256);var le=L.width,ye=a-le,be=le,C=4*(L.y*a+L.x),H=4*((L.y+L.height)*a+L.x),W=C,Q=4*ye;L.interlaced===!0&&(Q+=4*a*7);for(var re=8,ue=0,me=ee.length;ue<me;++ue){var te=ee[ue];if(be===0&&(be=le,(W+=Q)>=H&&(Q=4*ye+4*a*(re-1),W=C+(le+ye)*(re<<1),re>>=1)),te===V)W+=4;else{var pe=e[ce+3*te],_e=e[ce+3*te+1],ve=e[ce+3*te+2];E[W++]=ve,E[W++]=_e,E[W++]=pe,E[W++]=255}--be}},this.decodeAndBlitFrameRGBA=function(A,E){var L=this.frameInfo(A),M=L.width*L.height,ee=new Uint8Array(M);J1(e,L.data_offset,ee,M);var ce=L.palette_offset,V=L.transparent_index;V===null&&(V=256);var le=L.width,ye=a-le,be=le,C=4*(L.y*a+L.x),H=4*((L.y+L.height)*a+L.x),W=C,Q=4*ye;L.interlaced===!0&&(Q+=4*a*7);for(var re=8,ue=0,me=ee.length;ue<me;++ue){var te=ee[ue];if(be===0&&(be=le,(W+=Q)>=H&&(Q=4*ye+4*a*(re-1),W=C+(le+ye)*(re<<1),re>>=1)),te===V)W+=4;else{var pe=e[ce+3*te],_e=e[ce+3*te+1],ve=e[ce+3*te+2];E[W++]=pe,E[W++]=_e,E[W++]=ve,E[W++]=255}--be}}}function J1(e,t,a,r){for(var n=e[t++],i=1<<n,l=i+1,o=l+1,c=n+1,d=(1<<c)-1,h=0,g=0,p=0,f=e[t++],k=new Int32Array(4096),_=null;;){for(;h<16&&f!==0;)g|=e[t++]<<h,h+=8,f===1?f=e[t++]:--f;if(h<c)break;var w=g&d;if(g>>=c,h-=c,w!==i){if(w===l)break;for(var x=w<o?w:_,j=0,z=x;z>i;)z=k[z]>>8,++j;var N=z;if(p+j+(x!==w?1:0)>r)return void qt.log("Warning, gif stream longer than expected.");a[p++]=N;var $=p+=j;for(x!==w&&(a[p++]=N),z=x;j--;)z=k[z],a[--$]=255&z,z>>=8;_!==null&&o<4096&&(k[o++]=_<<8|N,o>=d+1&&c<12&&(++c,d=d<<1|1)),_=w}else o=l+1,d=(1<<(c=n+1))-1,_=null}return p!==r&&qt.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function yg(e){var t,a,r,n,i,l=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),g=new Array(65535),p=new Array(65535),f=new Array(64),k=new Array(64),_=[],w=0,x=7,j=new Array(64),z=new Array(64),N=new Array(64),$=new Array(256),q=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(C,H){for(var W=0,Q=0,re=new Array,ue=1;ue<=16;ue++){for(var me=1;me<=C[ue];me++)re[H[Q]]=[],re[H[Q]][0]=W,re[H[Q]][1]=ue,Q++,W++;W*=2}return re}function ce(C){for(var H=C[0],W=C[1]-1;W>=0;)H&1<<W&&(w|=1<<x),W--,--x<0&&(w==255?(V(255),V(0)):V(w),x=7,w=0)}function V(C){_.push(C)}function le(C){V(C>>8&255),V(255&C)}function ye(C,H,W,Q,re){for(var ue,me=re[0],te=re[240],pe=function(Ce,Ye){var Fe,gt,et,Et,dt,ut,Bt,pt,Xe,at,Qe=0;for(Xe=0;Xe<8;++Xe){Fe=Ce[Qe],gt=Ce[Qe+1],et=Ce[Qe+2],Et=Ce[Qe+3],dt=Ce[Qe+4],ut=Ce[Qe+5],Bt=Ce[Qe+6];var Gt=Fe+(pt=Ce[Qe+7]),Ct=Fe-pt,Ge=gt+Bt,ht=gt-Bt,$t=et+ut,tt=et-ut,zt=Et+dt,mt=Et-dt,bs=Gt+zt,Ds=Gt-zt,Ht=Ge+$t,it=Ge-$t;Ce[Qe]=bs+Ht,Ce[Qe+4]=bs-Ht;var Pt=.707106781*(it+Ds);Ce[Qe+2]=Ds+Pt,Ce[Qe+6]=Ds-Pt;var ll=.382683433*((bs=mt+tt)-(it=ht+Ct)),da=.5411961*bs+ll,jn=1.306562965*it+ll,Qr=.707106781*(Ht=tt+ht),st=Ct+Qr,zn=Ct-Qr;Ce[Qe+5]=zn+da,Ce[Qe+3]=zn-da,Ce[Qe+1]=st+jn,Ce[Qe+7]=st-jn,Qe+=8}for(Qe=0,Xe=0;Xe<8;++Xe){Fe=Ce[Qe],gt=Ce[Qe+8],et=Ce[Qe+16],Et=Ce[Qe+24],dt=Ce[Qe+32],ut=Ce[Qe+40],Bt=Ce[Qe+48];var wn=Fe+(pt=Ce[Qe+56]),hr=Fe-pt,mr=gt+Bt,ms=gt-Bt,qs=et+ut,ea=et-ut,ol=Et+dt,ri=Et-dt,Lr=wn+ol,en=wn-ol,Tr=mr+qs,Pr=mr-qs;Ce[Qe]=Lr+Tr,Ce[Qe+32]=Lr-Tr;var fr=.707106781*(Pr+en);Ce[Qe+16]=en+fr,Ce[Qe+48]=en-fr;var cl=.382683433*((Lr=ri+ea)-(Pr=ms+hr)),tn=.5411961*Lr+cl,dl=1.306562965*Pr+cl,uo=.707106781*(Tr=ea+ms),ho=hr+uo,mo=hr-uo;Ce[Qe+40]=mo+tn,Ce[Qe+24]=mo-tn,Ce[Qe+8]=ho+dl,Ce[Qe+56]=ho-dl,Qe++}for(Xe=0;Xe<64;++Xe)at=Ce[Xe]*Ye[Xe],f[Xe]=at>0?at+.5|0:at-.5|0;return f}(C,H),_e=0;_e<64;++_e)k[G[_e]]=pe[_e];var ve=k[0]-W;W=k[0],ve==0?ce(Q[0]):(ce(Q[p[ue=32767+ve]]),ce(g[ue]));for(var je=63;je>0&&k[je]==0;)je--;if(je==0)return ce(me),W;for(var ne,J=1;J<=je;){for(var Ke=J;k[J]==0&&J<=je;)++J;var qe=J-Ke;if(qe>=16){ne=qe>>4;for(var We=1;We<=ne;++We)ce(te);qe&=15}ue=32767+k[J],ce(re[(qe<<4)+p[ue]]),ce(g[ue]),J++}return je!=63&&ce(me),W}function be(C){C=Math.min(Math.max(C,1),100),i!=C&&(function(H){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var re=l((W[Q]*H+50)/100);re=Math.min(Math.max(re,1),255),o[G[Q]]=re}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var te=l((ue[me]*H+50)/100);te=Math.min(Math.max(te,1),255),c[G[me]]=te}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,ve=0;ve<8;ve++)for(var je=0;je<8;je++)d[_e]=1/(o[G[_e]]*pe[ve]*pe[je]*8),h[_e]=1/(c[G[_e]]*pe[ve]*pe[je]*8),_e++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),i=C)}this.encode=function(C,H){H&&be(H),_=new Array,w=0,x=7,le(65496),le(65504),le(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),le(1),le(1),V(0),V(0),function(){le(65499),le(132),V(0);for(var gt=0;gt<64;gt++)V(o[gt]);V(1);for(var et=0;et<64;et++)V(c[et])}(),function(gt,et){le(65472),le(17),V(8),le(et),le(gt),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(C.width,C.height),function(){le(65476),le(418),V(0);for(var gt=0;gt<16;gt++)V(D[gt+1]);for(var et=0;et<=11;et++)V(I[et]);V(16);for(var Et=0;Et<16;Et++)V(R[Et+1]);for(var dt=0;dt<=161;dt++)V(y[dt]);V(1);for(var ut=0;ut<16;ut++)V(A[ut+1]);for(var Bt=0;Bt<=11;Bt++)V(E[Bt]);V(17);for(var pt=0;pt<16;pt++)V(L[pt+1]);for(var Xe=0;Xe<=161;Xe++)V(M[Xe])}(),le(65498),le(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var W=0,Q=0,re=0;w=0,x=7,this.encode.displayName="_encode_";for(var ue,me,te,pe,_e,ve,je,ne,J,Ke=C.data,qe=C.width,We=C.height,Ce=4*qe,Ye=0;Ye<We;){for(ue=0;ue<Ce;){for(_e=Ce*Ye+ue,je=-1,ne=0,J=0;J<64;J++)ve=_e+(ne=J>>3)*Ce+(je=4*(7&J)),Ye+ne>=We&&(ve-=Ce*(Ye+1+ne-We)),ue+je>=Ce&&(ve-=ue+je-Ce+4),me=Ke[ve++],te=Ke[ve++],pe=Ke[ve++],j[J]=(q[me]+q[te+256|0]+q[pe+512|0]>>16)-128,z[J]=(q[me+768|0]+q[te+1024|0]+q[pe+1280|0]>>16)-128,N[J]=(q[me+1280|0]+q[te+1536|0]+q[pe+1792|0]>>16)-128;W=ye(j,d,W,t,r),Q=ye(z,h,Q,a,n),re=ye(N,h,re,a,n),ue+=32}Ye+=8}if(x>=0){var Fe=[];Fe[1]=x+1,Fe[0]=(1<<x+1)-1,ce(Fe)}return le(65497),new Uint8Array(_)},e=e||50,function(){for(var C=String.fromCharCode,H=0;H<256;H++)$[H]=C(H)}(),t=ee(D,I),a=ee(A,E),r=ee(R,y),n=ee(L,M),function(){for(var C=1,H=2,W=1;W<=15;W++){for(var Q=C;Q<H;Q++)p[32767+Q]=W,g[32767+Q]=[],g[32767+Q][1]=W,g[32767+Q][0]=Q;for(var re=-(H-1);re<=-C;re++)p[32767+re]=W,g[32767+re]=[],g[32767+re][1]=W,g[32767+re][0]=H-1+re;C<<=1,H<<=1}}(),function(){for(var C=0;C<256;C++)q[C]=19595*C,q[C+256|0]=38470*C,q[C+512|0]=7471*C+32768,q[C+768|0]=-11059*C,q[C+1024|0]=-21709*C,q[C+1280|0]=32768*C+8421375,q[C+1536|0]=-27439*C,q[C+1792|0]=-5329*C}(),be(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rr(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G1(e){function t(I){if(!I)throw Error("assert :P")}function a(I,R,y){for(var A=0;4>A;A++)if(I[R+A]!=y.charCodeAt(A))return!0;return!1}function r(I,R,y,A,E){for(var L=0;L<E;L++)I[R+L]=y[A+L]}function n(I,R,y,A){for(var E=0;E<A;E++)I[R+E]=y}function i(I){return new Int32Array(I)}function l(I,R){for(var y=[],A=0;A<I;A++)y.push(new R);return y}function o(I,R){var y=[];return function A(E,L,M){for(var ee=M[L],ce=0;ce<ee&&(E.push(M.length>L+1?[]:new R),!(M.length<L+1));ce++)A(E[ce],L+1,M)}(y,0,I),y}var c=function(){var I=this;function R(u,m){for(var b=1<<m-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function y(u,m,b,S,P){t(!(S%b));do u[m+(S-=b)]=P;while(0<S)}function A(u,m,b,S,P){if(t(2328>=P),512>=P)var F=i(512);else if((F=i(P))==null)return 0;return function(O,U,K,Z,ie,ge){var Y,oe,he=U,ke=1<<K,fe=i(16),ze=i(16);for(t(ie!=0),t(Z!=null),t(O!=null),t(0<K),oe=0;oe<ie;++oe){if(15<Z[oe])return 0;++fe[Z[oe]]}if(fe[0]==ie)return 0;for(ze[1]=0,Y=1;15>Y;++Y){if(fe[Y]>1<<Y)return 0;ze[Y+1]=ze[Y]+fe[Y]}for(oe=0;oe<ie;++oe)Y=Z[oe],0<Z[oe]&&(ge[ze[Y]++]=oe);if(ze[15]==1)return(Z=new E).g=0,Z.value=ge[0],y(O,he,1,ke,Z),ke;var Ne,Ee=-1,Se=ke-1,Ze=0,Re=1,vt=1,He=1<<K;for(oe=0,Y=1,ie=2;Y<=K;++Y,ie<<=1){if(Re+=vt<<=1,0>(vt-=fe[Y]))return 0;for(;0<fe[Y];--fe[Y])(Z=new E).g=Y,Z.value=ge[oe++],y(O,he+Ze,ie,He,Z),Ze=R(Ze,Y)}for(Y=K+1,ie=2;15>=Y;++Y,ie<<=1){if(Re+=vt<<=1,0>(vt-=fe[Y]))return 0;for(;0<fe[Y];--fe[Y]){if(Z=new E,(Ze&Se)!=Ee){for(he+=He,Ne=1<<(Ee=Y)-K;15>Ee&&!(0>=(Ne-=fe[Ee]));)++Ee,Ne<<=1;ke+=He=1<<(Ne=Ee-K),O[U+(Ee=Ze&Se)].g=Ne+K,O[U+Ee].value=he-U-Ee}Z.g=Y-K,Z.value=ge[oe++],y(O,he+(Ze>>K),ie,He,Z),Ze=R(Ze,Y)}}return Re!=2*ze[15]-1?0:ke}(u,m,b,S,P,F)}function E(){this.value=this.g=0}function L(){this.value=this.g=0}function M(){this.G=l(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Sl,L)}function ee(u,m,b,S){t(u!=null),t(m!=null),t(2147483648>S),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=m,u.pa=b,u.Jd=m,u.Yc=b+S,u.Zc=4<=S?b+S-4+1:b,me(u)}function ce(u,m){for(var b=0;0<m--;)b|=pe(u,128)<<m;return b}function V(u,m){var b=ce(u,m);return te(u)?-b:b}function le(u,m,b,S){var P,F=0;for(t(u!=null),t(m!=null),t(4294967288>S),u.Sb=S,u.Ra=0,u.u=0,u.h=0,4<S&&(S=4),P=0;P<S;++P)F+=m[b+P]<<8*P;u.Ra=F,u.bb=S,u.oa=m,u.pa=b}function ye(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<ci-8>>>0,++u.bb,u.u-=8;Q(u)&&(u.h=1,u.u=0)}function be(u,m){if(t(0<=m),!u.h&&m<=Wa){var b=W(u)&qa[m];return u.u+=m,ye(u),b}return u.h=1,u.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(u){return u.Ra>>>(u.u&ci-1)>>>0}function Q(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>ci}function re(u,m){u.u=m,u.h=Q(u)}function ue(u){u.u>=Ln&&(t(u.u>=Ln),ye(u))}function me(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function te(u){return ce(u,1)}function pe(u,m){var b=u.Ca;0>u.b&&me(u);var S=u.b,P=b*m>>>8,F=(u.I>>>S>P)+0;for(F?(b-=P,u.I-=P+1<<S>>>0):b=P+1,S=b,P=0;256<=S;)P+=8,S>>=8;return S=7^P+di[S],u.b-=S,u.Ca=(b<<S)-1,F}function _e(u,m,b){u[m+0]=b>>24&255,u[m+1]=b>>16&255,u[m+2]=b>>8&255,u[m+3]=255&b}function ve(u,m){return u[m+0]|u[m+1]<<8}function je(u,m){return ve(u,m)|u[m+2]<<16}function ne(u,m){return ve(u,m)|ve(u,m+2)<<16}function J(u,m){var b=1<<m;return t(u!=null),t(0<m),u.X=i(b),u.X==null?0:(u.Mb=32-m,u.Xa=m,1)}function Ke(u,m){t(u!=null),t(m!=null),t(u.Xa==m.Xa),r(m.X,0,u.X,0,1<<m.Xa)}function qe(){this.X=[],this.Xa=this.Mb=0}function We(u,m,b,S){t(b!=null),t(S!=null);var P=b[0],F=S[0];return P==0&&(P=(u*F+m/2)/m),F==0&&(F=(m*P+u/2)/u),0>=P||0>=F?0:(b[0]=P,S[0]=F,1)}function Ce(u,m){return u+(1<<m)-1>>>m}function Ye(u,m){return((4278255360&u)+(4278255360&m)>>>0&4278255360)+((16711935&u)+(16711935&m)>>>0&16711935)>>>0}function Fe(u,m){I[m]=function(b,S,P,F,O,U,K){var Z;for(Z=0;Z<O;++Z){var ie=I[u](U[K+Z-1],P,F+Z);U[K+Z]=Ye(b[S+Z],ie)}}}function gt(){this.ud=this.hd=this.jd=0}function et(u,m){return((4278124286&(u^m))>>>1)+(u&m)>>>0}function Et(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function dt(u,m){return Et(u+(u-m+.5>>1))}function ut(u,m,b){return Math.abs(m-b)-Math.abs(u-b)}function Bt(u,m,b,S,P,F,O){for(S=F[O-1],b=0;b<P;++b)F[O+b]=S=Ye(u[m+b],S)}function pt(u,m,b,S,P){var F;for(F=0;F<b;++F){var O=u[m+F],U=O>>8&255,K=16711935&(K=(K=16711935&O)+((U<<16)+U));S[P+F]=(4278255360&O)+K>>>0}}function Xe(u,m){m.jd=255&u,m.hd=u>>8&255,m.ud=u>>16&255}function at(u,m,b,S,P,F){var O;for(O=0;O<S;++O){var U=m[b+O],K=U>>>8,Z=U,ie=255&(ie=(ie=U>>>16)+((u.jd<<24>>24)*(K<<24>>24)>>>5));Z=255&(Z=(Z+=(u.hd<<24>>24)*(K<<24>>24)>>>5)+((u.ud<<24>>24)*(ie<<24>>24)>>>5)),P[F+O]=(4278255360&U)+(ie<<16)+Z}}function Qe(u,m,b,S,P){I[m]=function(F,O,U,K,Z,ie,ge,Y,oe){for(K=ge;K<Y;++K)for(ge=0;ge<oe;++ge)Z[ie++]=P(U[S(F[O++])])},I[u]=function(F,O,U,K,Z,ie,ge){var Y=8>>F.b,oe=F.Ea,he=F.K[0],ke=F.w;if(8>Y)for(F=(1<<F.b)-1,ke=(1<<Y)-1;O<U;++O){var fe,ze=0;for(fe=0;fe<oe;++fe)fe&F||(ze=S(K[Z++])),ie[ge++]=P(he[ze&ke]),ze>>=Y}else I["VP8LMapColor"+b](K,Z,he,ke,ie,ge,O,U,oe)}}function Gt(u,m,b,S,P){for(b=m+b;m<b;){var F=u[m++];S[P++]=F>>16&255,S[P++]=F>>8&255,S[P++]=255&F}}function Ct(u,m,b,S,P){for(b=m+b;m<b;){var F=u[m++];S[P++]=F>>16&255,S[P++]=F>>8&255,S[P++]=255&F,S[P++]=F>>24&255}}function Ge(u,m,b,S,P){for(b=m+b;m<b;){var F=(O=u[m++])>>16&240|O>>12&15,O=240&O|O>>28&15;S[P++]=F,S[P++]=O}}function ht(u,m,b,S,P){for(b=m+b;m<b;){var F=(O=u[m++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;S[P++]=F,S[P++]=O}}function $t(u,m,b,S,P){for(b=m+b;m<b;){var F=u[m++];S[P++]=255&F,S[P++]=F>>8&255,S[P++]=F>>16&255}}function tt(u,m,b,S,P,F){if(F==0)for(b=m+b;m<b;)_e(S,((F=u[m++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),P+=32;else r(S,P,u,m,b)}function zt(u,m){I[m][0]=I[u+"0"],I[m][1]=I[u+"1"],I[m][2]=I[u+"2"],I[m][3]=I[u+"3"],I[m][4]=I[u+"4"],I[m][5]=I[u+"5"],I[m][6]=I[u+"6"],I[m][7]=I[u+"7"],I[m][8]=I[u+"8"],I[m][9]=I[u+"9"],I[m][10]=I[u+"10"],I[m][11]=I[u+"11"],I[m][12]=I[u+"12"],I[m][13]=I[u+"13"],I[m][14]=I[u+"0"],I[m][15]=I[u+"0"]}function mt(u){return u==J0||u==G0||u==ih||u==Z0}function bs(){this.eb=[],this.size=this.A=this.fb=0}function Ds(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ht(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bs,this.f.kb=new Ds,this.sd=null}function it(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ll(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function da(u,m){var b=u.T,S=m.ba.f.RGBA,P=S.eb,F=S.fb+u.ka*S.A,O=br[m.ba.S],U=u.y,K=u.O,Z=u.f,ie=u.N,ge=u.ea,Y=u.W,oe=m.cc,he=m.dc,ke=m.Mc,fe=m.Nc,ze=u.ka,Ne=u.ka+u.T,Ee=u.U,Se=Ee+1>>1;for(ze==0?O(U,K,null,null,Z,ie,ge,Y,Z,ie,ge,Y,P,F,null,null,Ee):(O(m.ec,m.fc,U,K,oe,he,ke,fe,Z,ie,ge,Y,P,F-S.A,P,F,Ee),++b);ze+2<Ne;ze+=2)oe=Z,he=ie,ke=ge,fe=Y,ie+=u.Rc,Y+=u.Rc,F+=2*S.A,O(U,(K+=2*u.fa)-u.fa,U,K,oe,he,ke,fe,Z,ie,ge,Y,P,F-S.A,P,F,Ee);return K+=u.fa,u.j+Ne<u.o?(r(m.ec,m.fc,U,K,Ee),r(m.cc,m.dc,Z,ie,Se),r(m.Mc,m.Nc,ge,Y,Se),b--):1&Ne||O(U,K,null,null,Z,ie,ge,Y,Z,ie,ge,Y,P,F+S.A,null,null,Ee),b}function jn(u,m,b){var S=u.F,P=[u.J];if(S!=null){var F=u.U,O=m.ba.S,U=O==nh||O==ih;m=m.ba.f.RGBA;var K=[0],Z=u.ka;K[0]=u.T,u.Kb&&(Z==0?--K[0]:(--Z,P[0]-=u.width),u.j+u.ka+u.T==u.o&&(K[0]=u.o-u.j-Z));var ie=m.eb;Z=m.fb+Z*m.A,u=bv(S,P[0],u.width,F,K,ie,Z+(U?0:3),m.A),t(b==K),u&&mt(O)&&ad(ie,Z,U,F,K,m.A)}return 0}function Qr(u){var m=u.ma,b=m.ba.S,S=11>b,P=b==ah||b==rh||b==nh||b==W0||b==12||mt(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Gc(m.Oa,u,P?11:12))return 0;if(P&&mt(b)&&Yu(),u.da)alert("todo:use_scaling");else{if(S){if(m.Ib=ll,u.Kb){if(b=u.U+1>>1,m.memory=i(u.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+u.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=da,Yu()}}else alert("todo:EmitYUV");P&&(m.Jb=jn,S&&pr())}if(S&&!Fv){for(u=0;256>u;++u)Cz[u]=89858*(u-128)+oh>>lh,Pz[u]=-22014*(u-128)+oh,Tz[u]=-45773*(u-128),Lz[u]=113618*(u-128)+oh>>lh;for(u=nd;u<Q0;++u)m=76283*(u-16)+oh>>lh,Iz[u-nd]=fs(m,255),Dz[u-nd]=fs(m+8>>4,15);Fv=1}return 1}function st(u){var m=u.ma,b=u.U,S=u.T;return t(!(1&u.ka)),0>=b||0>=S?0:(b=m.Ib(u,m),m.Jb!=null&&m.Jb(u,m,b),m.Dc+=b,1)}function zn(u){u.ma.memory=null}function wn(u,m,b,S){return be(u,8)!=47?0:(m[0]=be(u,14)+1,b[0]=be(u,14)+1,S[0]=be(u,1),be(u,3)!=0?0:!u.h)}function hr(u,m){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+be(m,b)+1}function mr(u,m){return 120<m?m-120:1<=(b=((b=pz[m-1])>>4)*u+(8-(15&b)))?b:1;var b}function ms(u,m,b){var S=W(b),P=u[m+=255&S].g-8;return 0<P&&(re(b,b.u+8),S=W(b),m+=u[m].value,m+=S&(1<<P)-1),re(b,b.u+u[m].g),u[m].value}function qs(u,m,b){return b.g+=u.g,b.value+=u.value<<m>>>0,t(8>=b.g),u.g}function ea(u,m,b){var S=u.xc;return t((m=S==0?0:u.vc[u.md*(b>>S)+(m>>S)])<u.Wb),u.Ya[m]}function ol(u,m,b,S){var P=u.ab,F=u.c*m,O=u.C;m=O+m;var U=b,K=S;for(S=u.Ta,b=u.Ua;0<P--;){var Z=u.gc[P],ie=O,ge=m,Y=U,oe=K,he=(K=S,U=b,Z.Ea);switch(t(ie<ge),t(ge<=Z.nc),Z.hc){case 2:js(Y,oe,(ge-ie)*he,K,U);break;case 0:var ke=ie,fe=ge,ze=K,Ne=U,Ee=(He=Z).Ea;ke==0&&(Yc(Y,oe,null,null,1,ze,Ne),Bt(Y,oe+1,0,0,Ee-1,ze,Ne+1),oe+=Ee,Ne+=Ee,++ke);for(var Se=1<<He.b,Ze=Se-1,Re=Ce(Ee,He.b),vt=He.K,He=He.w+(ke>>He.b)*Re;ke<fe;){var wt=vt,Os=He,yt=1;for(ko(Y,oe,ze,Ne-Ee,1,ze,Ne);yt<Ee;){var Ve=(yt&~Ze)+Se;Ve>Ee&&(Ve=Ee),(0,Qc[wt[Os++]>>8&15])(Y,oe+ +yt,ze,Ne+yt-Ee,Ve-yt,ze,Ne+yt),yt=Ve}oe+=Ee,Ne+=Ee,++ke&Ze||(He+=Re)}ge!=Z.nc&&r(K,U-he,K,U+(ge-ie-1)*he,he);break;case 1:for(he=Y,fe=oe,Ee=(Y=Z.Ea)-(Ne=Y&~(ze=(oe=1<<Z.b)-1)),ke=Ce(Y,Z.b),Se=Z.K,Z=Z.w+(ie>>Z.b)*ke;ie<ge;){for(Ze=Se,Re=Z,vt=new gt,He=fe+Ne,wt=fe+Y;fe<He;)Xe(Ze[Re++],vt),ed(vt,he,fe,oe,K,U),fe+=oe,U+=oe;fe<wt&&(Xe(Ze[Re++],vt),ed(vt,he,fe,Ee,K,U),fe+=Ee,U+=Ee),++ie&ze||(Z+=ke)}break;case 3:if(Y==K&&oe==U&&0<Z.b){for(fe=K,Y=he=U+(ge-ie)*he-(Ne=(ge-ie)*Ce(Z.Ea,Z.b)),oe=K,ze=U,ke=[],Ne=(Ee=Ne)-1;0<=Ne;--Ne)ke[Ne]=oe[ze+Ne];for(Ne=Ee-1;0<=Ne;--Ne)fe[Y+Ne]=ke[Ne];Qu(Z,ie,ge,K,he,K,U)}else Qu(Z,ie,ge,Y,oe,K,U)}U=S,K=b}K!=b&&r(S,b,U,K,F)}function ri(u,m){var b=u.V,S=u.Ba+u.c*u.C,P=m-u.C;if(t(m<=u.l.o),t(16>=P),0<P){var F=u.l,O=u.Ta,U=u.Ua,K=F.width;if(ol(u,P,b,S),P=U=[U],t((b=u.C)<(S=m)),t(F.v<F.va),S>F.o&&(S=F.o),b<F.j){var Z=F.j-b;b=F.j,P[0]+=Z*K}if(b>=S?b=0:(P[0]+=4*F.v,F.ka=b-F.j,F.U=F.va-F.v,F.T=S-b,b=1),b){if(U=U[0],11>(b=u.ca).S){var ie=b.f.RGBA,ge=(S=b.S,P=F.U,F=F.T,Z=ie.eb,ie.A),Y=F;for(ie=ie.fb+u.Ma*ie.A;0<Y--;){var oe=O,he=U,ke=P,fe=Z,ze=ie;switch(S){case sh:td(oe,he,ke,fe,ze);break;case ah:ui(oe,he,ke,fe,ze);break;case J0:ui(oe,he,ke,fe,ze),ad(fe,ze,0,ke,1,0);break;case Sv:Al(oe,he,ke,fe,ze);break;case rh:tt(oe,he,ke,fe,ze,1);break;case G0:tt(oe,he,ke,fe,ze,1),ad(fe,ze,0,ke,1,0);break;case nh:tt(oe,he,ke,fe,ze,0);break;case ih:tt(oe,he,ke,fe,ze,0),ad(fe,ze,1,ke,1,0);break;case W0:hi(oe,he,ke,fe,ze);break;case Z0:hi(oe,he,ke,fe,ze),yv(fe,ze,ke,1,0);break;case Av:mi(oe,he,ke,fe,ze);break;default:t(0)}U+=K,ie+=ge}u.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=m,t(u.C<=u.i)}function Lr(u){var m;if(0<u.ua)return 0;for(m=0;m<u.Wb;++m){var b=u.Ya[m].G,S=u.Ya[m].H;if(0<b[1][S[1]+0].g||0<b[2][S[2]+0].g||0<b[3][S[3]+0].g)return 0}return 1}function en(u,m,b,S,P,F){if(u.Z!=0){var O=u.qd,U=u.rd;for(t(pi[u.Z]!=null);m<b;++m)pi[u.Z](O,U,S,P,S,P,F),O=S,U=P,P+=F;u.qd=O,u.rd=U}}function Tr(u,m){var b=u.l.ma,S=b.Z==0||b.Z==1?u.l.j:u.C;if(S=u.C<S?S:u.C,t(m<=u.l.o),m>S){var P=u.l.width,F=b.ca,O=b.tb+P*S,U=u.V,K=u.Ba+u.c*S,Z=u.gc;t(u.ab==1),t(Z[0].hc==3),rn(Z[0],S,m,U,K,F,O),en(b,S,m,F,O,P)}u.C=u.Ma=m}function Pr(u,m,b,S,P,F,O){var U=u.$/S,K=u.$%S,Z=u.m,ie=u.s,ge=b+u.$,Y=ge;P=b+S*P;var oe=b+S*F,he=280+ie.ua,ke=u.Pb?U:16777216,fe=0<ie.ua?ie.Wa:null,ze=ie.wc,Ne=ge<oe?ea(ie,K,U):null;t(u.C<F),t(oe<=P);var Ee=!1;e:for(;;){for(;Ee||ge<oe;){var Se=0;if(U>=ke){var Ze=ge-b;t((ke=u).Pb),ke.wd=ke.m,ke.xd=Ze,0<ke.s.ua&&Ke(ke.s.Wa,ke.s.vb),ke=U+vz}if(K&ze||(Ne=ea(ie,K,U)),t(Ne!=null),Ne.Qb&&(m[ge]=Ne.qb,Ee=!0),!Ee)if(ue(Z),Ne.jc){Se=Z,Ze=m;var Re=ge,vt=Ne.pd[W(Se)&Sl-1];t(Ne.jc),256>vt.g?(re(Se,Se.u+vt.g),Ze[Re]=vt.value,Se=0):(re(Se,Se.u+vt.g-256),t(256<=vt.value),Se=vt.value),Se==0&&(Ee=!0)}else Se=ms(Ne.G[0],Ne.H[0],Z);if(Z.h)break;if(Ee||256>Se){if(!Ee)if(Ne.nd)m[ge]=(Ne.qb|Se<<8)>>>0;else{if(ue(Z),Ee=ms(Ne.G[1],Ne.H[1],Z),ue(Z),Ze=ms(Ne.G[2],Ne.H[2],Z),Re=ms(Ne.G[3],Ne.H[3],Z),Z.h)break;m[ge]=(Re<<24|Ee<<16|Se<<8|Ze)>>>0}if(Ee=!1,++ge,++K>=S&&(K=0,++U,O!=null&&U<=F&&!(U%16)&&O(u,U),fe!=null))for(;Y<ge;)Se=m[Y++],fe.X[(506832829*Se&4294967295)>>>fe.Mb]=Se}else if(280>Se){if(Se=hr(Se-256,Z),Ze=ms(Ne.G[4],Ne.H[4],Z),ue(Z),Ze=mr(S,Ze=hr(Ze,Z)),Z.h)break;if(ge-b<Ze||P-ge<Se)break e;for(Re=0;Re<Se;++Re)m[ge+Re]=m[ge+Re-Ze];for(ge+=Se,K+=Se;K>=S;)K-=S,++U,O!=null&&U<=F&&!(U%16)&&O(u,U);if(t(ge<=P),K&ze&&(Ne=ea(ie,K,U)),fe!=null)for(;Y<ge;)Se=m[Y++],fe.X[(506832829*Se&4294967295)>>>fe.Mb]=Se}else{if(!(Se<he))break e;for(Ee=Se-280,t(fe!=null);Y<ge;)Se=m[Y++],fe.X[(506832829*Se&4294967295)>>>fe.Mb]=Se;Se=ge,t(!(Ee>>>(Ze=fe).Xa)),m[Se]=Ze.X[Ee],Ee=!0}Ee||t(Z.h==Q(Z))}if(u.Pb&&Z.h&&ge<P)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&Ke(u.s.vb,u.s.Wa);else{if(Z.h)break e;O!=null&&O(u,U>F?F:U),u.a=0,u.$=ge-b}return 1}return u.a=3,0}function fr(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var m=u.Wa;m!=null&&(m.X=null),u.vb=null,t(u!=null)}function cl(){var u=new Je;return u==null?null:(u.a=0,u.xb=Lv,zt("Predictor","VP8LPredictors"),zt("Predictor","VP8LPredictors_C"),zt("PredictorAdd","VP8LPredictorsAdd"),zt("PredictorAdd","VP8LPredictorsAdd_C"),js=pt,ed=at,td=Gt,ui=Ct,hi=Ge,mi=ht,Al=$t,I.VP8LMapColor32b=an,I.VP8LMapColor8b=Xc,u)}function tn(u,m,b,S,P){var F=1,O=[u],U=[m],K=S.m,Z=S.s,ie=null,ge=0;e:for(;;){if(b)for(;F&&be(K,1);){var Y=O,oe=U,he=S,ke=1,fe=he.m,ze=he.gc[he.ab],Ne=be(fe,2);if(he.Oc&1<<Ne)F=0;else{switch(he.Oc|=1<<Ne,ze.hc=Ne,ze.Ea=Y[0],ze.nc=oe[0],ze.K=[null],++he.ab,t(4>=he.ab),Ne){case 0:case 1:ze.b=be(fe,3)+2,ke=tn(Ce(ze.Ea,ze.b),Ce(ze.nc,ze.b),0,he,ze.K),ze.K=ze.K[0];break;case 3:var Ee,Se=be(fe,8)+1,Ze=16<Se?0:4<Se?1:2<Se?2:3;if(Y[0]=Ce(ze.Ea,Ze),ze.b=Ze,Ee=ke=tn(Se,1,0,he,ze.K)){var Re,vt=Se,He=ze,wt=1<<(8>>He.b),Os=i(wt);if(Os==null)Ee=0;else{var yt=He.K[0],Ve=He.w;for(Os[0]=He.K[0][0],Re=1;Re<1*vt;++Re)Os[Re]=Ye(yt[Ve+Re],Os[Re-1]);for(;Re<4*wt;++Re)Os[Re]=0;He.K[0]=null,He.K[0]=Os,Ee=1}}ke=Ee;break;case 2:break;default:t(0)}F=ke}}if(O=O[0],U=U[0],F&&be(K,1)&&!(F=1<=(ge=be(K,4))&&11>=ge)){S.a=3;break e}var Me;if(Me=F)t:{var ws,ft,_t,ts=S,sa=O,ja=U,gs=ge,ha=b,za=ts.m,Rs=ts.s,St=[null],Dt=1,ps=0,Mt=xz[gs];s:for(;;){if(ha&&be(za,1)){var aa=be(za,3)+2,Mr=Ce(sa,aa),Ns=Ce(ja,aa),Da=Mr*Ns;if(!tn(Mr,Ns,0,ts,St))break s;for(St=St[0],Rs.xc=aa,ws=0;ws<Da;++ws){var Kt=St[ws]>>8&65535;St[ws]=Kt,Kt>=Dt&&(Dt=Kt+1)}}if(za.h)break s;for(ft=0;5>ft;++ft){var Bs=Ev[ft];!ft&&0<gs&&(Bs+=1<<gs),ps<Bs&&(ps=Bs)}var Ga=l(Dt*Mt,E),wa=Dt,Za=l(wa,M);if(Za==null)var Ya=null;else t(65536>=wa),Ya=Za;var Ma=i(ps);if(Ya==null||Ma==null||Ga==null){ts.a=1;break s}var Xa=Ga;for(ws=_t=0;ws<Dt;++ws){var Yt=Ya[ws],Qa=Yt.G,Fr=Yt.H,Cl=0,In=1,ra=0;for(ft=0;5>ft;++ft){Bs=Ev[ft],Qa[ft]=Xa,Fr[ft]=_t,!ft&&0<gs&&(Bs+=1<<gs);r:{var dh,ef=Bs,uh=ts,id=Ma,Oz=Xa,Rz=_t,tf=0,xi=uh.m,Bz=be(xi,1);if(n(id,0,0,ef),Bz){var Uz=be(xi,1)+1,$z=be(xi,1),Bv=be(xi,$z==0?1:8);id[Bv]=1,Uz==2&&(id[Bv=be(xi,8)]=1);var hh=1}else{var Uv=i(19),$v=be(xi,4)+4;if(19<$v){uh.a=3;var mh=0;break r}for(dh=0;dh<$v;++dh)Uv[gz[dh]]=be(xi,3);var sf=void 0,ld=void 0,Hv=uh,Hz=Uv,fh=ef,Vv=id,af=0,vi=Hv.m,Kv=8,qv=l(128,E);a:for(;A(qv,0,7,Hz,19);){if(be(vi,1)){var Vz=2+2*be(vi,3);if((sf=2+be(vi,Vz))>fh)break a}else sf=fh;for(ld=0;ld<fh&&sf--;){ue(vi);var Wv=qv[0+(127&W(vi))];re(vi,vi.u+Wv.g);var zo=Wv.value;if(16>zo)Vv[ld++]=zo,zo!=0&&(Kv=zo);else{var Kz=zo==16,Jv=zo-16,qz=mz[Jv],Gv=be(vi,hz[Jv])+qz;if(ld+Gv>fh)break a;for(var Wz=Kz?Kv:0;0<Gv--;)Vv[ld++]=Wz}}af=1;break a}af||(Hv.a=3),hh=af}(hh=hh&&!xi.h)&&(tf=A(Oz,Rz,8,id,ef)),hh&&tf!=0?mh=tf:(uh.a=3,mh=0)}if(mh==0)break s;if(In&&fz[ft]==1&&(In=Xa[_t].g==0),Cl+=Xa[_t].g,_t+=mh,3>=ft){var od,rf=Ma[0];for(od=1;od<Bs;++od)Ma[od]>rf&&(rf=Ma[od]);ra+=rf}}if(Yt.nd=In,Yt.Qb=0,In&&(Yt.qb=(Qa[3][Fr[3]+0].value<<24|Qa[1][Fr[1]+0].value<<16|Qa[2][Fr[2]+0].value)>>>0,Cl==0&&256>Qa[0][Fr[0]+0].value&&(Yt.Qb=1,Yt.qb+=Qa[0][Fr[0]+0].value<<8)),Yt.jc=!Yt.Qb&&6>ra,Yt.jc){var gh,Dn=Yt;for(gh=0;gh<Sl;++gh){var yi=gh,bi=Dn.pd[yi],ph=Dn.G[0][Dn.H[0]+yi];256<=ph.value?(bi.g=ph.g+256,bi.value=ph.value):(bi.g=0,bi.value=0,yi>>=qs(ph,8,bi),yi>>=qs(Dn.G[1][Dn.H[1]+yi],16,bi),yi>>=qs(Dn.G[2][Dn.H[2]+yi],0,bi),qs(Dn.G[3][Dn.H[3]+yi],24,bi))}}}Rs.vc=St,Rs.Wb=Dt,Rs.Ya=Ya,Rs.yc=Ga,Me=1;break t}Me=0}if(!(F=Me)){S.a=3;break e}if(0<ge){if(Z.ua=1<<ge,!J(Z.Wa,ge)){S.a=1,F=0;break e}}else Z.ua=0;var nf=S,Zv=O,Jz=U,lf=nf.s,of=lf.xc;if(nf.c=Zv,nf.i=Jz,lf.md=Ce(Zv,of),lf.wc=of==0?-1:(1<<of)-1,b){S.xb=Nz;break e}if((ie=i(O*U))==null){S.a=1,F=0;break e}F=(F=Pr(S,ie,0,O,U,U,null))&&!K.h;break e}return F?(P!=null?P[0]=ie:(t(ie==null),t(b)),S.$=0,b||fr(Z)):fr(Z),F}function dl(u,m){var b=u.c*u.i,S=b+m+16*m;return t(u.c<=m),u.V=i(S),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+m,1)}function uo(u,m){var b=u.C,S=m-b,P=u.V,F=u.Ba+u.c*b;for(t(m<=u.l.o);0<S;){var O=16<S?16:S,U=u.l.ma,K=u.l.width,Z=K*O,ie=U.ca,ge=U.tb+K*b,Y=u.Ta,oe=u.Ua;ol(u,O,P,F),kv(Y,oe,ie,ge,Z),en(U,b,b+O,ie,ge,K),S-=O,P+=O*u.c,b+=O}t(b==m),u.C=u.Ma=m}function ho(){this.ub=this.yd=this.td=this.Rb=0}function mo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function C0(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Dc(){this.Yb=function(){var u=[];return function m(b,S,P){for(var F=P[S],O=0;O<F&&(b.push(P.length>S+1?[]:0),!(P.length<S+1));O++)m(b[O],S+1,P)}(u,0,[3,11]),u}()}function Mu(){this.jb=i(3),this.Wc=o([4,8],Dc),this.Xc=o([4,17],Dc)}function Fu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function gr(){this.ld=this.La=this.dd=this.tc=0}function Mc(){this.Na=this.la=0}function Ou(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ru(){this.uc=this.M=this.Nb=0,this.wa=Array(new gr),this.Y=0,this.ya=Array(new Fc),this.aa=0,this.l=new fo}function Bu(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Uu(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new ho,this.Kc=new mo,this.ed=new Fu,this.Qa=new C0,this.Ic=this.$c=this.Aa=0,this.D=new Ru,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,C),this.ia=0,this.pb=l(4,Ou),this.Pa=new Mu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bu),this.Hd=0,this.rb=Array(new Mc),this.sb=0,this.wa=Array(new gr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fc),this.L=this.aa=0,this.gd=o([4,2],gr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function L0(){var u=new Uu;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,rd||(rd=Nn)),u}function Ls(u,m,b){return u.a==0&&(u.a=m,u.sc=b,u.cb=0),0}function $u(u,m,b){return 3<=b&&u[m+0]==157&&u[m+1]==1&&u[m+2]==42}function Hu(u,m){if(u==null)return 0;if(u.a=0,u.sc="OK",m==null)return Ls(u,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,S=m.w,P=m.ha;if(4>P)return Ls(u,7,"Truncated header.");var F=b[S+0]|b[S+1]<<8|b[S+2]<<16,O=u.Od;if(O.Rb=!(1&F),O.td=F>>1&7,O.yd=F>>4&1,O.ub=F>>5,3<O.td)return Ls(u,3,"Incorrect keyframe parameters.");if(!O.yd)return Ls(u,4,"Frame not displayable.");S+=3,P-=3;var U=u.Kc;if(O.Rb){if(7>P)return Ls(u,7,"cannot parse picture header");if(!$u(b,S,P))return Ls(u,3,"Bad code word");U.c=16383&(b[S+4]<<8|b[S+3]),U.Td=b[S+4]>>6,U.i=16383&(b[S+6]<<8|b[S+5]),U.Ud=b[S+6]>>6,S+=7,P-=7,u.za=U.c+15>>4,u.Ub=U.i+15>>4,m.width=U.c,m.height=U.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,n((F=u.Pa).jb,0,255,F.jb.length),t((F=u.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,n(F.Zb,0,0,F.Zb.length),n(F.Lb,0,0,F.Lb)}if(O.ub>P)return Ls(u,7,"bad partition length");ee(F=u.m,b,S,O.ub),S+=O.ub,P-=O.ub,O.Rb&&(U.Ld=te(F),U.Kd=te(F)),U=u.Qa;var K,Z=u.Pa;if(t(F!=null),t(U!=null),U.Cb=te(F),U.Cb){if(U.Bb=te(F),te(F)){for(U.Fb=te(F),K=0;4>K;++K)U.Zb[K]=te(F)?V(F,7):0;for(K=0;4>K;++K)U.Lb[K]=te(F)?V(F,6):0}if(U.Bb)for(K=0;3>K;++K)Z.jb[K]=te(F)?ce(F,8):255}else U.Bb=0;if(F.Ka)return Ls(u,3,"cannot parse segment header");if((U=u.ed).zd=te(F),U.Tb=ce(F,6),U.wb=ce(F,3),U.Pc=te(F),U.Pc&&te(F)){for(Z=0;4>Z;++Z)te(F)&&(U.vd[Z]=V(F,6));for(Z=0;4>Z;++Z)te(F)&&(U.od[Z]=V(F,6))}if(u.L=U.Tb==0?0:U.zd?1:2,F.Ka)return Ls(u,3,"cannot parse filter header");var ie=P;if(P=K=S,S=K+ie,U=ie,u.Xb=(1<<ce(u.m,2))-1,ie<3*(Z=u.Xb))b=7;else{for(K+=3*Z,U-=3*Z,ie=0;ie<Z;++ie){var ge=b[P+0]|b[P+1]<<8|b[P+2]<<16;ge>U&&(ge=U),ee(u.Jc[+ie],b,K,ge),K+=ge,U-=ge,P+=3}ee(u.Jc[+Z],b,K,U),b=K<S?0:5}if(b!=0)return Ls(u,b,"cannot parse partitions");for(b=ce(K=u.m,7),P=te(K)?V(K,4):0,S=te(K)?V(K,4):0,U=te(K)?V(K,4):0,Z=te(K)?V(K,4):0,K=te(K)?V(K,4):0,ie=u.Qa,ge=0;4>ge;++ge){if(ie.Cb){var Y=ie.Zb[ge];ie.Fb||(Y+=b)}else{if(0<ge){u.pb[ge]=u.pb[0];continue}Y=b}var oe=u.pb[ge];oe.Sc[0]=Y0[fs(Y+P,127)],oe.Sc[1]=X0[fs(Y+0,127)],oe.Eb[0]=2*Y0[fs(Y+S,127)],oe.Eb[1]=101581*X0[fs(Y+U,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=Y0[fs(Y+Z,117)],oe.Qc[1]=X0[fs(Y+K,127)],oe.lc=Y+K}if(!O.Rb)return Ls(u,4,"Not a key frame.");for(te(F),O=u.Pa,b=0;4>b;++b){for(P=0;8>P;++P)for(S=0;3>S;++S)for(U=0;11>U;++U)Z=pe(F,zz[b][P][S][U])?ce(F,8):kz[b][P][S][U],O.Wc[b][P].Yb[S][U]=Z;for(P=0;17>P;++P)O.Xc[b][P]=O.Wc[b][wz[P]]}return u.kc=te(F),u.kc&&(u.Bd=ce(F,8)),u.cb=1}function Nn(u,m,b,S,P,F,O){var U=m[P].Yb[b];for(b=0;16>P;++P){if(!pe(u,U[b+0]))return P;for(;!pe(u,U[b+1]);)if(U=m[++P].Yb[0],b=0,P==16)return 16;var K=m[P+1].Yb;if(pe(u,U[b+2])){var Z=u,ie=0;if(pe(Z,(Y=U)[(ge=b)+3]))if(pe(Z,Y[ge+6])){for(U=0,ge=2*(ie=pe(Z,Y[ge+8]))+(Y=pe(Z,Y[ge+9+ie])),ie=0,Y=yz[ge];Y[U];++U)ie+=ie+pe(Z,Y[U]);ie+=3+(8<<ge)}else pe(Z,Y[ge+7])?(ie=7+2*pe(Z,165),ie+=pe(Z,145)):ie=5+pe(Z,159);else ie=pe(Z,Y[ge+4])?3+pe(Z,Y[ge+5]):2;U=K[2]}else ie=1,U=K[1];K=O+bz[P],0>(Z=u).b&&me(Z);var ge,Y=Z.b,oe=(ge=Z.Ca>>1)-(Z.I>>Y)>>31;--Z.b,Z.Ca+=oe,Z.Ca|=1,Z.I-=(ge+1&oe)<<Y,F[K]=((ie^oe)-oe)*S[(0<P)+0]}return 16}function ul(u){var m=u.rb[u.sb-1];m.la=0,m.Na=0,n(u.zc,0,0,u.zc.length),u.ja=0}function Ir(u,m,b,S,P){P=u[m+b+32*S]+(P>>3),u[m+b+32*S]=-256&P?0>P?0:255:P}function hl(u,m,b,S,P,F){Ir(u,m,0,b,S+P),Ir(u,m,1,b,S+F),Ir(u,m,2,b,S-F),Ir(u,m,3,b,S-P)}function ks(u){return(20091*u>>16)+u}function Oc(u,m,b,S){var P,F=0,O=i(16);for(P=0;4>P;++P){var U=u[m+0]+u[m+8],K=u[m+0]-u[m+8],Z=(35468*u[m+4]>>16)-ks(u[m+12]),ie=ks(u[m+4])+(35468*u[m+12]>>16);O[F+0]=U+ie,O[F+1]=K+Z,O[F+2]=K-Z,O[F+3]=U-ie,F+=4,m++}for(P=F=0;4>P;++P)U=(u=O[F+0]+4)+O[F+8],K=u-O[F+8],Z=(35468*O[F+4]>>16)-ks(O[F+12]),Ir(b,S,0,0,U+(ie=ks(O[F+4])+(35468*O[F+12]>>16))),Ir(b,S,1,0,K+Z),Ir(b,S,2,0,K-Z),Ir(b,S,3,0,U-ie),F++,S+=32}function T0(u,m,b,S){var P=u[m+0]+4,F=35468*u[m+4]>>16,O=ks(u[m+4]),U=35468*u[m+1]>>16;hl(b,S,0,P+O,u=ks(u[m+1]),U),hl(b,S,1,P+F,u,U),hl(b,S,2,P-F,u,U),hl(b,S,3,P-O,u,U)}function P0(u,m,b,S,P){Oc(u,m,b,S),P&&Oc(u,m+16,b,S+4)}function I0(u,m,b,S){El(u,m+0,b,S,1),El(u,m+32,b,S+128,1)}function sn(u,m,b,S){var P;for(u=u[m+0]+4,P=0;4>P;++P)for(m=0;4>m;++m)Ir(b,S,m,P,u)}function Vu(u,m,b,S){u[m+0]&&It(u,m+0,b,S),u[m+16]&&It(u,m+16,b,S+4),u[m+32]&&It(u,m+32,b,S+128),u[m+48]&&It(u,m+48,b,S+128+4)}function Ku(u,m,b,S){var P,F=i(16);for(P=0;4>P;++P){var O=u[m+0+P]+u[m+12+P],U=u[m+4+P]+u[m+8+P],K=u[m+4+P]-u[m+8+P],Z=u[m+0+P]-u[m+12+P];F[0+P]=O+U,F[8+P]=O-U,F[4+P]=Z+K,F[12+P]=Z-K}for(P=0;4>P;++P)O=(u=F[0+4*P]+3)+F[3+4*P],U=F[1+4*P]+F[2+4*P],K=F[1+4*P]-F[2+4*P],Z=u-F[3+4*P],b[S+0]=O+U>>3,b[S+16]=Z+K>>3,b[S+32]=O-U>>3,b[S+48]=Z-K>>3,S+=64}function ni(u,m,b){var S,P=m-32,F=Ja,O=255-u[P-1];for(S=0;S<b;++S){var U,K=F,Z=O+u[m-1];for(U=0;U<b;++U)u[m+U]=K[Z+u[P+U]];m+=32}}function Rc(u,m){ni(u,m,4)}function D0(u,m){ni(u,m,8)}function M0(u,m){ni(u,m,16)}function F0(u,m){var b;for(b=0;16>b;++b)r(u,m+32*b,u,m-32,16)}function Bc(u,m){var b;for(b=16;0<b;--b)n(u,m,u[m-1],16),m+=32}function ml(u,m,b){var S;for(S=0;16>S;++S)n(m,b+32*S,u,16)}function ii(u,m){var b,S=16;for(b=0;16>b;++b)S+=u[m-1+32*b]+u[m+b-32];ml(S>>5,u,m)}function O0(u,m){var b,S=8;for(b=0;16>b;++b)S+=u[m-1+32*b];ml(S>>4,u,m)}function fl(u,m){var b,S=8;for(b=0;16>b;++b)S+=u[m+b-32];ml(S>>4,u,m)}function Uc(u,m){ml(128,u,m)}function lt(u,m,b){return u+2*m+b+2>>2}function R0(u,m){var b,S=m-32;for(S=new Uint8Array([lt(u[S-1],u[S+0],u[S+1]),lt(u[S+0],u[S+1],u[S+2]),lt(u[S+1],u[S+2],u[S+3]),lt(u[S+2],u[S+3],u[S+4])]),b=0;4>b;++b)r(u,m+32*b,S,0,S.length)}function B0(u,m){var b=u[m-1],S=u[m-1+32],P=u[m-1+64],F=u[m-1+96];_e(u,m+0,16843009*lt(u[m-1-32],b,S)),_e(u,m+32,16843009*lt(b,S,P)),_e(u,m+64,16843009*lt(S,P,F)),_e(u,m+96,16843009*lt(P,F,F))}function U0(u,m){var b,S=4;for(b=0;4>b;++b)S+=u[m+b-32]+u[m-1+32*b];for(S>>=3,b=0;4>b;++b)n(u,m+32*b,S,4)}function $0(u,m){var b=u[m-1+0],S=u[m-1+32],P=u[m-1+64],F=u[m-1-32],O=u[m+0-32],U=u[m+1-32],K=u[m+2-32],Z=u[m+3-32];u[m+0+96]=lt(S,P,u[m-1+96]),u[m+1+96]=u[m+0+64]=lt(b,S,P),u[m+2+96]=u[m+1+64]=u[m+0+32]=lt(F,b,S),u[m+3+96]=u[m+2+64]=u[m+1+32]=u[m+0+0]=lt(O,F,b),u[m+3+64]=u[m+2+32]=u[m+1+0]=lt(U,O,F),u[m+3+32]=u[m+2+0]=lt(K,U,O),u[m+3+0]=lt(Z,K,U)}function _n(u,m){var b=u[m+1-32],S=u[m+2-32],P=u[m+3-32],F=u[m+4-32],O=u[m+5-32],U=u[m+6-32],K=u[m+7-32];u[m+0+0]=lt(u[m+0-32],b,S),u[m+1+0]=u[m+0+32]=lt(b,S,P),u[m+2+0]=u[m+1+32]=u[m+0+64]=lt(S,P,F),u[m+3+0]=u[m+2+32]=u[m+1+64]=u[m+0+96]=lt(P,F,O),u[m+3+32]=u[m+2+64]=u[m+1+96]=lt(F,O,U),u[m+3+64]=u[m+2+96]=lt(O,U,K),u[m+3+96]=lt(U,K,K)}function Sn(u,m){var b=u[m-1+0],S=u[m-1+32],P=u[m-1+64],F=u[m-1-32],O=u[m+0-32],U=u[m+1-32],K=u[m+2-32],Z=u[m+3-32];u[m+0+0]=u[m+1+64]=F+O+1>>1,u[m+1+0]=u[m+2+64]=O+U+1>>1,u[m+2+0]=u[m+3+64]=U+K+1>>1,u[m+3+0]=K+Z+1>>1,u[m+0+96]=lt(P,S,b),u[m+0+64]=lt(S,b,F),u[m+0+32]=u[m+1+96]=lt(b,F,O),u[m+1+32]=u[m+2+96]=lt(F,O,U),u[m+2+32]=u[m+3+96]=lt(O,U,K),u[m+3+32]=lt(U,K,Z)}function H0(u,m){var b=u[m+0-32],S=u[m+1-32],P=u[m+2-32],F=u[m+3-32],O=u[m+4-32],U=u[m+5-32],K=u[m+6-32],Z=u[m+7-32];u[m+0+0]=b+S+1>>1,u[m+1+0]=u[m+0+64]=S+P+1>>1,u[m+2+0]=u[m+1+64]=P+F+1>>1,u[m+3+0]=u[m+2+64]=F+O+1>>1,u[m+0+32]=lt(b,S,P),u[m+1+32]=u[m+0+96]=lt(S,P,F),u[m+2+32]=u[m+1+96]=lt(P,F,O),u[m+3+32]=u[m+2+96]=lt(F,O,U),u[m+3+64]=lt(O,U,K),u[m+3+96]=lt(U,K,Z)}function V0(u,m){var b=u[m-1+0],S=u[m-1+32],P=u[m-1+64],F=u[m-1+96];u[m+0+0]=b+S+1>>1,u[m+2+0]=u[m+0+32]=S+P+1>>1,u[m+2+32]=u[m+0+64]=P+F+1>>1,u[m+1+0]=lt(b,S,P),u[m+3+0]=u[m+1+32]=lt(S,P,F),u[m+3+32]=u[m+1+64]=lt(P,F,F),u[m+3+64]=u[m+2+64]=u[m+0+96]=u[m+1+96]=u[m+2+96]=u[m+3+96]=F}function go(u,m){var b=u[m-1+0],S=u[m-1+32],P=u[m-1+64],F=u[m-1+96],O=u[m-1-32],U=u[m+0-32],K=u[m+1-32],Z=u[m+2-32];u[m+0+0]=u[m+2+32]=b+O+1>>1,u[m+0+32]=u[m+2+64]=S+b+1>>1,u[m+0+64]=u[m+2+96]=P+S+1>>1,u[m+0+96]=F+P+1>>1,u[m+3+0]=lt(U,K,Z),u[m+2+0]=lt(O,U,K),u[m+1+0]=u[m+3+32]=lt(b,O,U),u[m+1+32]=u[m+3+64]=lt(S,b,O),u[m+1+64]=u[m+3+96]=lt(P,S,b),u[m+1+96]=lt(F,P,S)}function $c(u,m){var b;for(b=0;8>b;++b)r(u,m+32*b,u,m-32,8)}function gl(u,m){var b;for(b=0;8>b;++b)n(u,m,u[m-1],8),m+=32}function po(u,m,b){var S;for(S=0;8>S;++S)n(m,b+32*S,u,8)}function xo(u,m){var b,S=8;for(b=0;8>b;++b)S+=u[m+b-32]+u[m-1+32*b];po(S>>4,u,m)}function K0(u,m){var b,S=4;for(b=0;8>b;++b)S+=u[m+b-32];po(S>>3,u,m)}function Hc(u,m){var b,S=4;for(b=0;8>b;++b)S+=u[m-1+32*b];po(S>>3,u,m)}function Vc(u,m){po(128,u,m)}function pl(u,m,b){var S=u[m-b],P=u[m+0],F=3*(P-S)+q0[1020+u[m-2*b]-u[m+b]],O=th[112+(F+4>>3)];u[m-b]=Ja[255+S+th[112+(F+3>>3)]],u[m+0]=Ja[255+P-O]}function xl(u,m,b,S){var P=u[m+0],F=u[m+b];return yr[255+u[m-2*b]-u[m-b]]>S||yr[255+F-P]>S}function Kc(u,m,b,S){return 4*yr[255+u[m-b]-u[m+0]]+yr[255+u[m-2*b]-u[m+b]]<=S}function vo(u,m,b,S,P){var F=u[m-3*b],O=u[m-2*b],U=u[m-b],K=u[m+0],Z=u[m+b],ie=u[m+2*b],ge=u[m+3*b];return 4*yr[255+U-K]+yr[255+O-Z]>S?0:yr[255+u[m-4*b]-F]<=P&&yr[255+F-O]<=P&&yr[255+O-U]<=P&&yr[255+ge-ie]<=P&&yr[255+ie-Z]<=P&&yr[255+Z-K]<=P}function qc(u,m,b,S){var P=2*S+1;for(S=0;16>S;++S)Kc(u,m+S,b,P)&&pl(u,m+S,b)}function vl(u,m,b,S){var P=2*S+1;for(S=0;16>S;++S)Kc(u,m+S*b,1,P)&&pl(u,m+S*b,1)}function qu(u,m,b,S){var P;for(P=3;0<P;--P)qc(u,m+=4*b,b,S)}function Wu(u,m,b,S){var P;for(P=3;0<P;--P)vl(u,m+=4,b,S)}function An(u,m,b,S,P,F,O,U){for(F=2*F+1;0<P--;){if(vo(u,m,b,F,O))if(xl(u,m,b,U))pl(u,m,b);else{var K=u,Z=m,ie=b,ge=K[Z-2*ie],Y=K[Z-ie],oe=K[Z+0],he=K[Z+ie],ke=K[Z+2*ie],fe=27*(Ne=q0[1020+3*(oe-Y)+q0[1020+ge-he]])+63>>7,ze=18*Ne+63>>7,Ne=9*Ne+63>>7;K[Z-3*ie]=Ja[255+K[Z-3*ie]+Ne],K[Z-2*ie]=Ja[255+ge+ze],K[Z-ie]=Ja[255+Y+fe],K[Z+0]=Ja[255+oe-fe],K[Z+ie]=Ja[255+he-ze],K[Z+2*ie]=Ja[255+ke-Ne]}m+=S}}function En(u,m,b,S,P,F,O,U){for(F=2*F+1;0<P--;){if(vo(u,m,b,F,O))if(xl(u,m,b,U))pl(u,m,b);else{var K=u,Z=m,ie=b,ge=K[Z-ie],Y=K[Z+0],oe=K[Z+ie],he=th[112+(4+(ke=3*(Y-ge))>>3)],ke=th[112+(ke+3>>3)],fe=he+1>>1;K[Z-2*ie]=Ja[255+K[Z-2*ie]+fe],K[Z-ie]=Ja[255+ge+ke],K[Z+0]=Ja[255+Y-he],K[Z+ie]=Ja[255+oe-fe]}m+=S}}function Ju(u,m,b,S,P,F){An(u,m,b,1,16,S,P,F)}function Gu(u,m,b,S,P,F){An(u,m,1,b,16,S,P,F)}function yl(u,m,b,S,P,F){var O;for(O=3;0<O;--O)En(u,m+=4*b,b,1,16,S,P,F)}function Zu(u,m,b,S,P,F){var O;for(O=3;0<O;--O)En(u,m+=4,1,b,16,S,P,F)}function v(u,m,b,S,P,F,O,U){An(u,m,P,1,8,F,O,U),An(b,S,P,1,8,F,O,U)}function T(u,m,b,S,P,F,O,U){An(u,m,1,P,8,F,O,U),An(b,S,1,P,8,F,O,U)}function X(u,m,b,S,P,F,O,U){En(u,m+4*P,P,1,8,F,O,U),En(b,S+4*P,P,1,8,F,O,U)}function ae(u,m,b,S,P,F,O,U){En(u,m+4,1,P,8,F,O,U),En(b,S+4,1,P,8,F,O,U)}function de(){this.ba=new Ht,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function we(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ae(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ue(){this.ua=0,this.Wa=new qe,this.vb=new qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new E}function Je(){this.xb=this.a=0,this.l=new fo,this.ca=new Ht,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ue,this.ab=0,this.gc=l(4,Ae),this.Oc=0}function nt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ot(u,m,b,S,P,F,O){for(u=u==null?0:u[m+0],m=0;m<O;++m)P[F+m]=u+b[S+m]&255,u=P[F+m]}function Lt(u,m,b,S,P,F,O){var U;if(u==null)ot(null,null,b,S,P,F,O);else for(U=0;U<O;++U)P[F+U]=u[m+U]+b[S+U]&255}function cs(u,m,b,S,P,F,O){if(u==null)ot(null,null,b,S,P,F,O);else{var U,K=u[m+0],Z=K,ie=K;for(U=0;U<O;++U)Z=ie+(K=u[m+U])-Z,ie=b[S+U]+(-256&Z?0>Z?0:255:Z)&255,Z=K,P[F+U]=ie}}function Ts(u,m,b,S){var P=m.width,F=m.o;if(t(u!=null&&m!=null),0>b||0>=S||b+S>F)return null;if(!u.Cc){if(u.ga==null){var O;if(u.ga=new nt,(O=u.ga==null)||(O=m.width*m.o,t(u.Gb.length==0),u.Gb=i(O),u.Uc=0,u.Gb==null?O=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,O=1),O=!O),!O){O=u.ga;var U=u.Fa,K=u.P,Z=u.qc,ie=u.mb,ge=u.nb,Y=K+1,oe=Z-1,he=O.l;if(t(U!=null&&ie!=null&&m!=null),pi[0]=null,pi[1]=ot,pi[2]=Lt,pi[3]=cs,O.ca=ie,O.tb=ge,O.c=m.width,O.i=m.height,t(0<O.c&&0<O.i),1>=Z)m=0;else if(O.$a=3&U[K+0],O.Z=U[K+0]>>2&3,O.Lc=U[K+0]>>4&3,K=U[K+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||K)m=0;else if(he.put=st,he.ac=Qr,he.bc=zn,he.ma=O,he.width=m.width,he.height=m.height,he.Da=m.Da,he.v=m.v,he.va=m.va,he.j=m.j,he.o=m.o,O.$a)e:{t(O.$a==1),m=cl();t:for(;;){if(m==null){m=0;break e}if(t(O!=null),O.mc=m,m.c=O.c,m.i=O.i,m.l=O.l,m.l.ma=O,m.l.width=O.c,m.l.height=O.i,m.a=0,le(m.m,U,Y,oe),!tn(O.c,O.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Lr(m.s)?(O.ic=1,U=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(U),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(O.ic=0,m=dl(m,O.c)),!m))break t;m=1;break e}O.mc=null,m=0}else m=oe>=O.c*O.i;O=!m}if(O)return null;u.ga.Lc!=1?u.Ga=0:S=F-b}t(u.ga!=null),t(b+S<=F);e:{if(m=(U=u.ga).c,F=U.l.o,U.$a==0){if(Y=u.rc,oe=u.Vc,he=u.Fa,K=u.P+1+b*m,Z=u.mb,ie=u.nb+b*m,t(K<=u.P+u.qc),U.Z!=0)for(t(pi[U.Z]!=null),O=0;O<S;++O)pi[U.Z](Y,oe,he,K,Z,ie,m),Y=Z,oe=ie,ie+=m,K+=m;else for(O=0;O<S;++O)r(Z,ie,he,K,m),Y=Z,oe=ie,ie+=m,K+=m;u.rc=Y,u.Vc=oe}else{if(t(U.mc!=null),m=b+S,t((O=U.mc)!=null),t(m<=O.i),O.C>=m)m=1;else if(U.ic||pr(),U.ic){U=O.V,Y=O.Ba,oe=O.c;var ke=O.i,fe=(he=1,K=O.$/oe,Z=O.$%oe,ie=O.m,ge=O.s,O.$),ze=oe*ke,Ne=oe*m,Ee=ge.wc,Se=fe<Ne?ea(ge,Z,K):null;t(fe<=ze),t(m<=ke),t(Lr(ge));t:for(;;){for(;!ie.h&&fe<Ne;){if(Z&Ee||(Se=ea(ge,Z,K)),t(Se!=null),ue(ie),256>(ke=ms(Se.G[0],Se.H[0],ie)))U[Y+fe]=ke,++fe,++Z>=oe&&(Z=0,++K<=m&&!(K%16)&&Tr(O,K));else{if(!(280>ke)){he=0;break t}ke=hr(ke-256,ie);var Ze,Re=ms(Se.G[4],Se.H[4],ie);if(ue(ie),!(fe>=(Re=mr(oe,Re=hr(Re,ie)))&&ze-fe>=ke)){he=0;break t}for(Ze=0;Ze<ke;++Ze)U[Y+fe+Ze]=U[Y+fe+Ze-Re];for(fe+=ke,Z+=ke;Z>=oe;)Z-=oe,++K<=m&&!(K%16)&&Tr(O,K);fe<Ne&&Z&Ee&&(Se=ea(ge,Z,K))}t(ie.h==Q(ie))}Tr(O,K>m?m:K);break t}!he||ie.h&&fe<ze?(he=0,O.a=ie.h?5:3):O.$=fe,m=he}else m=Pr(O,O.V,O.Ba,O.c,O.i,m,uo);if(!m){S=0;break e}}b+S>=F&&(u.Cc=1),S=1}if(!S)return null;if(u.Cc&&((S=u.ga)!=null&&(S.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*P}function Zt(u,m,b,S,P,F){for(;0<P--;){var O,U=u,K=m+(b?1:0),Z=u,ie=m+(b?0:3);for(O=0;O<S;++O){var ge=Z[ie+4*O];ge!=255&&(ge*=32897,U[K+4*O+0]=U[K+4*O+0]*ge>>23,U[K+4*O+1]=U[K+4*O+1]*ge>>23,U[K+4*O+2]=U[K+4*O+2]*ge>>23)}m+=F}}function Ms(u,m,b,S,P){for(;0<S--;){var F;for(F=0;F<b;++F){var O=u[m+2*F+0],U=15&(Z=u[m+2*F+1]),K=4369*U,Z=(240&Z|Z>>4)*K>>16;u[m+2*F+0]=(240&O|O>>4)*K>>16&240|(15&O|O<<4)*K>>16>>4&15,u[m+2*F+1]=240&Z|U}m+=P}}function Ps(u,m,b,S,P,F,O,U){var K,Z,ie=255;for(Z=0;Z<P;++Z){for(K=0;K<S;++K){var ge=u[m+K];F[O+4*K]=ge,ie&=ge}m+=b,O+=U}return ie!=255}function ta(u,m,b,S,P){var F;for(F=0;F<P;++F)b[S+F]=u[m+F]>>8}function pr(){ad=Zt,yv=Ms,bv=Ps,kv=ta}function Ia(u,m,b){I[u]=function(S,P,F,O,U,K,Z,ie,ge,Y,oe,he,ke,fe,ze,Ne,Ee){var Se,Ze=Ee-1>>1,Re=U[K+0]|Z[ie+0]<<16,vt=ge[Y+0]|oe[he+0]<<16;t(S!=null);var He=3*Re+vt+131074>>2;for(m(S[P+0],255&He,He>>16,ke,fe),F!=null&&(He=3*vt+Re+131074>>2,m(F[O+0],255&He,He>>16,ze,Ne)),Se=1;Se<=Ze;++Se){var wt=U[K+Se]|Z[ie+Se]<<16,Os=ge[Y+Se]|oe[he+Se]<<16,yt=Re+wt+vt+Os+524296,Ve=yt+2*(wt+vt)>>3;He=Ve+Re>>1,Re=(yt=yt+2*(Re+Os)>>3)+wt>>1,m(S[P+2*Se-1],255&He,He>>16,ke,fe+(2*Se-1)*b),m(S[P+2*Se-0],255&Re,Re>>16,ke,fe+(2*Se-0)*b),F!=null&&(He=yt+vt>>1,Re=Ve+Os>>1,m(F[O+2*Se-1],255&He,He>>16,ze,Ne+(2*Se-1)*b),m(F[O+2*Se+0],255&Re,Re>>16,ze,Ne+(2*Se+0)*b)),Re=wt,vt=Os}1&Ee||(He=3*Re+vt+131074>>2,m(S[P+Ee-1],255&He,He>>16,ke,fe+(Ee-1)*b),F!=null&&(He=3*vt+Re+131074>>2,m(F[O+Ee-1],255&He,He>>16,ze,Ne+(Ee-1)*b)))}}function Yu(){br[sh]=_z,br[ah]=Tv,br[Sv]=Sz,br[rh]=Pv,br[nh]=Iv,br[W0]=Dv,br[Av]=Az,br[J0]=Tv,br[G0]=Pv,br[ih]=Iv,br[Z0]=Dv}function yo(u){return u&~Ez?0>u?0:255:u>>Mv}function bl(u,m){return yo((19077*u>>8)+(26149*m>>8)-14234)}function li(u,m,b){return yo((19077*u>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function kl(u,m){return yo((19077*u>>8)+(33050*m>>8)-17685)}function jl(u,m,b,S,P){S[P+0]=bl(u,b),S[P+1]=li(u,m,b),S[P+2]=kl(u,m)}function zl(u,m,b,S,P){S[P+0]=kl(u,m),S[P+1]=li(u,m,b),S[P+2]=bl(u,b)}function ua(u,m,b,S,P){var F=li(u,m,b);m=F<<3&224|kl(u,m)>>3,S[P+0]=248&bl(u,b)|F>>5,S[P+1]=m}function wl(u,m,b,S,P){var F=240&kl(u,m)|15;S[P+0]=240&bl(u,b)|li(u,m,b)>>4,S[P+1]=F}function Nl(u,m,b,S,P){S[P+0]=255,jl(u,m,b,S,P+1)}function Wc(u,m,b,S,P){zl(u,m,b,S,P),S[P+3]=255}function Jc(u,m,b,S,P){jl(u,m,b,S,P),S[P+3]=255}function fs(u,m){return 0>u?0:u>m?m:u}function Cn(u,m,b){I[u]=function(S,P,F,O,U,K,Z,ie,ge){for(var Y=ie+(-2&ge)*b;ie!=Y;)m(S[P+0],F[O+0],U[K+0],Z,ie),m(S[P+1],F[O+0],U[K+0],Z,ie+b),P+=2,++O,++K,ie+=2*b;1&ge&&m(S[P+0],F[O+0],U[K+0],Z,ie)}}function bo(u,m,b){return b==0?u==0?m==0?6:5:m==0?4:0:b}function Xu(u,m,b,S,P){switch(u>>>30){case 3:El(m,b,S,P,0);break;case 2:vr(m,b,S,P);break;case 1:It(m,b,S,P)}}function xr(u,m){var b,S,P=m.M,F=m.Nb,O=u.oc,U=u.pc+40,K=u.oc,Z=u.pc+584,ie=u.oc,ge=u.pc+600;for(b=0;16>b;++b)O[U+32*b-1]=129;for(b=0;8>b;++b)K[Z+32*b-1]=129,ie[ge+32*b-1]=129;for(0<P?O[U-1-32]=K[Z-1-32]=ie[ge-1-32]=129:(n(O,U-32-1,127,21),n(K,Z-32-1,127,9),n(ie,ge-32-1,127,9)),S=0;S<u.za;++S){var Y=m.ya[m.aa+S];if(0<S){for(b=-1;16>b;++b)r(O,U+32*b-4,O,U+32*b+12,4);for(b=-1;8>b;++b)r(K,Z+32*b-4,K,Z+32*b+4,4),r(ie,ge+32*b-4,ie,ge+32*b+4,4)}var oe=u.Gd,he=u.Hd+S,ke=Y.ad,fe=Y.Hc;if(0<P&&(r(O,U-32,oe[he].y,0,16),r(K,Z-32,oe[he].f,0,8),r(ie,ge-32,oe[he].ea,0,8)),Y.Za){var ze=O,Ne=U-32+16;for(0<P&&(S>=u.za-1?n(ze,Ne,oe[he].y[15],4):r(ze,Ne,oe[he+1].y,0,4)),b=0;4>b;b++)ze[Ne+128+b]=ze[Ne+256+b]=ze[Ne+384+b]=ze[Ne+0+b];for(b=0;16>b;++b,fe<<=2)ze=O,Ne=U+Ov[b],Dr[Y.Ob[b]](ze,Ne),Xu(fe,ke,16*+b,ze,Ne)}else if(ze=bo(S,P,Y.Ob[0]),gi[ze](O,U),fe!=0)for(b=0;16>b;++b,fe<<=2)Xu(fe,ke,16*+b,O,U+Ov[b]);for(b=Y.Gc,ze=bo(S,P,Y.Dd),Pn[ze](K,Z),Pn[ze](ie,ge),fe=ke,ze=K,Ne=Z,255&(Y=0|b)&&(170&Y?nn(fe,256,ze,Ne):Vt(fe,256,ze,Ne)),Y=ie,fe=ge,255&(b>>=8)&&(170&b?nn(ke,320,Y,fe):Vt(ke,320,Y,fe)),P<u.Ub-1&&(r(oe[he].y,0,O,U+480,16),r(oe[he].f,0,K,Z+224,8),r(oe[he].ea,0,ie,ge+224,8)),b=8*F*u.B,oe=u.sa,he=u.ta+16*S+16*F*u.R,ke=u.qa,Y=u.ra+8*S+b,fe=u.Ha,ze=u.Ia+8*S+b,b=0;16>b;++b)r(oe,he+b*u.R,O,U+32*b,16);for(b=0;8>b;++b)r(ke,Y+b*u.B,K,Z+32*b,8),r(fe,ze+b*u.B,ie,ge+32*b,8)}}function _l(u,m,b,S,P,F,O,U,K){var Z=[0],ie=[0],ge=0,Y=K!=null?K.kd:0,oe=K??new we;if(u==null||12>b)return 7;oe.data=u,oe.w=m,oe.ha=b,m=[m],b=[b],oe.gb=[oe.gb];e:{var he=m,ke=b,fe=oe.gb;if(t(u!=null),t(ke!=null),t(fe!=null),fe[0]=0,12<=ke[0]&&!a(u,he[0],"RIFF")){if(a(u,he[0]+8,"WEBP")){fe=3;break e}var ze=ne(u,he[0]+4);if(12>ze||4294967286<ze){fe=3;break e}if(Y&&ze>ke[0]-8){fe=7;break e}fe[0]=ze,he[0]+=12,ke[0]-=12}fe=0}if(fe!=0)return fe;for(ze=0<oe.gb[0],b=b[0];;){e:{var Ne=u;ke=m,fe=b;var Ee=Z,Se=ie,Ze=he=[0];if((He=ge=[ge])[0]=0,8>fe[0])fe=7;else{if(!a(Ne,ke[0],"VP8X")){if(ne(Ne,ke[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var Re=ne(Ne,ke[0]+8),vt=1+je(Ne,ke[0]+12);if(2147483648<=vt*(Ne=1+je(Ne,ke[0]+15))){fe=3;break e}Ze!=null&&(Ze[0]=Re),Ee!=null&&(Ee[0]=vt),Se!=null&&(Se[0]=Ne),ke[0]+=18,fe[0]-=18,He[0]=1}fe=0}}if(ge=ge[0],he=he[0],fe!=0)return fe;if(ke=!!(2&he),!ze&&ge)return 3;if(F!=null&&(F[0]=!!(16&he)),O!=null&&(O[0]=ke),U!=null&&(U[0]=0),O=Z[0],he=ie[0],ge&&ke&&K==null){fe=0;break}if(4>b){fe=7;break}if(ze&&ge||!ze&&!ge&&!a(u,m[0],"ALPH")){b=[b],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{Re=u,fe=m,ze=b;var He=oe.gb;Ee=oe.na,Se=oe.P,Ze=oe.Sa,vt=22,t(Re!=null),t(ze!=null),Ne=fe[0];var wt=ze[0];for(t(Ee!=null),t(Ze!=null),Ee[0]=null,Se[0]=null,Ze[0]=0;;){if(fe[0]=Ne,ze[0]=wt,8>wt){fe=7;break e}var Os=ne(Re,Ne+4);if(4294967286<Os){fe=3;break e}var yt=8+Os+1&-2;if(vt+=yt,0<He&&vt>He){fe=3;break e}if(!a(Re,Ne,"VP8 ")||!a(Re,Ne,"VP8L")){fe=0;break e}if(wt[0]<yt){fe=7;break e}a(Re,Ne,"ALPH")||(Ee[0]=Re,Se[0]=Ne+8,Ze[0]=Os),Ne+=yt,wt-=yt}}if(b=b[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],fe!=0)break}b=[b],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(He=u,fe=m,ze=b,Ee=oe.gb[0],Se=oe.Ja,Ze=oe.xa,Re=fe[0],Ne=!a(He,Re,"VP8 "),vt=!a(He,Re,"VP8L"),t(He!=null),t(ze!=null),t(Se!=null),t(Ze!=null),8>ze[0])fe=7;else{if(Ne||vt){if(He=ne(He,Re+4),12<=Ee&&He>Ee-12){fe=3;break e}if(Y&&He>ze[0]-8){fe=7;break e}Se[0]=He,fe[0]+=8,ze[0]-=8,Ze[0]=vt}else Ze[0]=5<=ze[0]&&He[Re+0]==47&&!(He[Re+4]>>5),Se[0]=ze[0];fe=0}if(b=b[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],m=m[0],fe!=0)break;if(4294967286<oe.Ja)return 3;if(U==null||ke||(U[0]=oe.xa?2:1),O=[O],he=[he],oe.xa){if(5>b){fe=7;break}U=O,Y=he,ke=F,u==null||5>b?u=0:5<=b&&u[m+0]==47&&!(u[m+4]>>5)?(ze=[0],He=[0],Ee=[0],le(Se=new H,u,m,b),wn(Se,ze,He,Ee)?(U!=null&&(U[0]=ze[0]),Y!=null&&(Y[0]=He[0]),ke!=null&&(ke[0]=Ee[0]),u=1):u=0):u=0}else{if(10>b){fe=7;break}U=he,u==null||10>b||!$u(u,m+3,b-3)?u=0:(Y=u[m+0]|u[m+1]<<8|u[m+2]<<16,ke=16383&(u[m+7]<<8|u[m+6]),u=16383&(u[m+9]<<8|u[m+8]),1&Y||3<(Y>>1&7)||!(Y>>4&1)||Y>>5>=oe.Ja||!ke||!u?u=0:(O&&(O[0]=ke),U&&(U[0]=u),u=1))}if(!u||(O=O[0],he=he[0],ge&&(Z[0]!=O||ie[0]!=he)))return 3;K!=null&&(K[0]=oe,K.offset=m-K.w,t(4294967286>m-K.w),t(K.offset==K.ha-b));break}return fe==0||fe==7&&ge&&K==null?(F!=null&&(F[0]|=oe.na!=null&&0<oe.na.length),S!=null&&(S[0]=O),P!=null&&(P[0]=he),0):fe}function Gc(u,m,b){var S=m.width,P=m.height,F=0,O=0,U=S,K=P;if(m.Da=u!=null&&0<u.Da,m.Da&&(U=u.cd,K=u.bd,F=u.v,O=u.j,11>b||(F&=-2,O&=-2),0>F||0>O||0>=U||0>=K||F+U>S||O+K>P))return 0;if(m.v=F,m.j=O,m.va=F+U,m.o=O+K,m.U=U,m.T=K,m.da=u!=null&&0<u.da,m.da){if(!We(U,K,b=[u.ib],F=[u.hb]))return 0;m.ib=b[0],m.hb=F[0]}return m.ob=u!=null&&u.ob,m.Kb=u==null||!u.Sd,m.da&&(m.ob=m.ib<3*S/4&&m.hb<3*P/4,m.Kb=0),1}function Zc(u){if(u==null)return 2;if(11>u.S){var m=u.f.RGBA;m.fb+=(u.height-1)*m.A,m.A=-m.A}else m=u.f.kb,u=u.height,m.O+=(u-1)*m.fa,m.fa=-m.fa,m.N+=(u-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(u-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(u-1)*m.lb,m.lb=-m.lb);return 0}function oi(u,m,b,S){if(S==null||0>=u||0>=m)return 2;if(b!=null){if(b.Da){var P=b.cd,F=b.bd,O=-2&b.v,U=-2&b.j;if(0>O||0>U||0>=P||0>=F||O+P>u||U+F>m)return 2;u=P,m=F}if(b.da){if(!We(u,m,P=[b.ib],F=[b.hb]))return 2;u=P[0],m=F[0]}}S.width=u,S.height=m;e:{var K=S.width,Z=S.height;if(u=S.S,0>=K||0>=Z||!(u>=sh&&13>u))u=2;else{if(0>=S.Rd&&S.sd==null){O=F=P=m=0;var ie=(U=K*Rv[u])*Z;if(11>u||(F=(Z+1)/2*(m=(K+1)/2),u==12&&(O=(P=K)*Z)),(Z=i(ie+2*F+O))==null){u=1;break e}S.sd=Z,11>u?((K=S.f.RGBA).eb=Z,K.fb=0,K.A=U,K.size=ie):((K=S.f.kb).y=Z,K.O=0,K.fa=U,K.Fd=ie,K.f=Z,K.N=0+ie,K.Ab=m,K.Cd=F,K.ea=Z,K.W=0+ie+F,K.Db=m,K.Ed=F,u==12&&(K.F=Z,K.J=0+ie+2*F),K.Tc=O,K.lb=P)}if(m=1,P=S.S,F=S.width,O=S.height,P>=sh&&13>P)if(11>P)u=S.f.RGBA,m&=(U=Math.abs(u.A))*(O-1)+F<=u.size,m&=U>=F*Rv[P],m&=u.eb!=null;else{u=S.f.kb,U=(F+1)/2,ie=(O+1)/2,K=Math.abs(u.fa),Z=Math.abs(u.Ab);var ge=Math.abs(u.Db),Y=Math.abs(u.lb),oe=Y*(O-1)+F;m&=K*(O-1)+F<=u.Fd,m&=Z*(ie-1)+U<=u.Cd,m=(m&=ge*(ie-1)+U<=u.Ed)&K>=F&Z>=U&ge>=U,m&=u.y!=null,m&=u.f!=null,m&=u.ea!=null,P==12&&(m&=Y>=F,m&=oe<=u.Tc,m&=u.F!=null)}else m=0;u=m?0:2}}return u!=0||b!=null&&b.fd&&(u=Zc(S)),u}var Sl=64,qa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wa=24,ci=32,Ln=8,di=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Fe("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(u){return u},I.Predictor2=function(u,m,b){return m[b+0]},I.Predictor3=function(u,m,b){return m[b+1]},I.Predictor4=function(u,m,b){return m[b-1]},I.Predictor5=function(u,m,b){return et(et(u,m[b+1]),m[b+0])},I.Predictor6=function(u,m,b){return et(u,m[b-1])},I.Predictor7=function(u,m,b){return et(u,m[b+0])},I.Predictor8=function(u,m,b){return et(m[b-1],m[b+0])},I.Predictor9=function(u,m,b){return et(m[b+0],m[b+1])},I.Predictor10=function(u,m,b){return et(et(u,m[b-1]),et(m[b+0],m[b+1]))},I.Predictor11=function(u,m,b){var S=m[b+0];return 0>=ut(S>>24&255,u>>24&255,(m=m[b-1])>>24&255)+ut(S>>16&255,u>>16&255,m>>16&255)+ut(S>>8&255,u>>8&255,m>>8&255)+ut(255&S,255&u,255&m)?S:u},I.Predictor12=function(u,m,b){var S=m[b+0];return(Et((u>>24&255)+(S>>24&255)-((m=m[b-1])>>24&255))<<24|Et((u>>16&255)+(S>>16&255)-(m>>16&255))<<16|Et((u>>8&255)+(S>>8&255)-(m>>8&255))<<8|Et((255&u)+(255&S)-(255&m)))>>>0},I.Predictor13=function(u,m,b){var S=m[b-1];return(dt((u=et(u,m[b+0]))>>24&255,S>>24&255)<<24|dt(u>>16&255,S>>16&255)<<16|dt(u>>8&255,S>>8&255)<<8|dt(255&u,255&S))>>>0};var Yc=I.PredictorAdd0;I.PredictorAdd1=Bt,Fe("Predictor2","PredictorAdd2"),Fe("Predictor3","PredictorAdd3"),Fe("Predictor4","PredictorAdd4"),Fe("Predictor5","PredictorAdd5"),Fe("Predictor6","PredictorAdd6"),Fe("Predictor7","PredictorAdd7"),Fe("Predictor8","PredictorAdd8"),Fe("Predictor9","PredictorAdd9"),Fe("Predictor10","PredictorAdd10"),Fe("Predictor11","PredictorAdd11"),Fe("Predictor12","PredictorAdd12"),Fe("Predictor13","PredictorAdd13");var ko=I.PredictorAdd2;Qe("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),Qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var js,Qu=I.ColorIndexInverseTransform,an=I.MapARGB,rn=I.VP8LColorIndexInverseTransformAlpha,Xc=I.MapAlpha,Qc=I.VP8LPredictorsAdd=[];Qc.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var ed,td,ui,hi,mi,Al,fi,El,vr,nn,It,Vt,zs,Fs,Tn,sd,jo,eh,mv,fv,gv,pv,xv,vv,ad,yv,bv,kv,jv=i(511),zv=i(2041),wv=i(225),Nv=i(767),_v=0,q0=zv,th=wv,Ja=Nv,yr=jv,sh=0,ah=1,Sv=2,rh=3,nh=4,W0=5,Av=6,J0=7,G0=8,ih=9,Z0=10,hz=[2,3,7],mz=[3,3,11],Ev=[280,256,256,256,40],fz=[0,1,1,1,0],gz=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pz=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],xz=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vz=8,Y0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],X0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rd=null,yz=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bz=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Cv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kz=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jz=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],zz=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wz=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],gi=[],Dr=[],Pn=[],Nz=1,Lv=2,pi=[],br=[];Ia("UpsampleRgbLinePair",jl,3),Ia("UpsampleBgrLinePair",zl,3),Ia("UpsampleRgbaLinePair",Jc,4),Ia("UpsampleBgraLinePair",Wc,4),Ia("UpsampleArgbLinePair",Nl,4),Ia("UpsampleRgba4444LinePair",wl,2),Ia("UpsampleRgb565LinePair",ua,2);var _z=I.UpsampleRgbLinePair,Sz=I.UpsampleBgrLinePair,Tv=I.UpsampleRgbaLinePair,Pv=I.UpsampleBgraLinePair,Iv=I.UpsampleArgbLinePair,Dv=I.UpsampleRgba4444LinePair,Az=I.UpsampleRgb565LinePair,lh=16,oh=1<<lh-1,nd=-227,Q0=482,Mv=6,Ez=(256<<Mv)-1,Fv=0,Cz=i(256),Lz=i(256),Tz=i(256),Pz=i(256),Iz=i(Q0-nd),Dz=i(Q0-nd);Cn("YuvToRgbRow",jl,3),Cn("YuvToBgrRow",zl,3),Cn("YuvToRgbaRow",Jc,4),Cn("YuvToBgraRow",Wc,4),Cn("YuvToArgbRow",Nl,4),Cn("YuvToRgba4444Row",wl,2),Cn("YuvToRgb565Row",ua,2);var Ov=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ch=[0,2,8],Mz=[8,7,6,4,4,2,2,2,1,1,1,1],Fz=1;this.WebPDecodeRGBA=function(u,m,b,S,P){var F=ah,O=new de,U=new Ht;O.ba=U,U.S=F,U.width=[U.width],U.height=[U.height];var K=U.width,Z=U.height,ie=new it;if(ie==null||u==null)var ge=2;else t(ie!=null),ge=_l(u,m,b,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(ge!=0?K=0:(K!=null&&(K[0]=ie.width[0]),Z!=null&&(Z[0]=ie.height[0]),K=1),K){U.width=U.width[0],U.height=U.height[0],S!=null&&(S[0]=U.width),P!=null&&(P[0]=U.height);e:{if(S=new fo,(P=new we).data=u,P.w=m,P.ha=b,P.kd=1,m=[0],t(P!=null),((u=_l(P.data,P.w,P.ha,null,null,null,m,null,P))==0||u==7)&&m[0]&&(u=4),(m=u)==0){if(t(O!=null),S.data=P.data,S.w=P.w+P.offset,S.ha=P.ha-P.offset,S.put=st,S.ac=Qr,S.bc=zn,S.ma=O,P.xa){if((u=cl())==null){O=1;break e}if(function(Y,oe){var he=[0],ke=[0],fe=[0];t:for(;;){if(Y==null)return 0;if(oe==null)return Y.a=2,0;if(Y.l=oe,Y.a=0,le(Y.m,oe.data,oe.w,oe.ha),!wn(Y.m,he,ke,fe)){Y.a=3;break t}if(Y.xb=Lv,oe.width=he[0],oe.height=ke[0],!tn(he[0],ke[0],1,Y,null))break t;return 1}return t(Y.a!=0),0}(u,S)){if(S=(m=oi(S.width,S.height,O.Oa,O.ba))==0){t:{S=u;s:for(;;){if(S==null){S=0;break t}if(t(S.s.yc!=null),t(S.s.Ya!=null),t(0<S.s.Wb),t((b=S.l)!=null),t((P=b.ma)!=null),S.xb!=0){if(S.ca=P.ba,S.tb=P.tb,t(S.ca!=null),!Gc(P.Oa,b,rh)){S.a=2;break s}if(!dl(S,b.width)||b.da)break s;if((b.da||mt(S.ca.S))&&pr(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&pr()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!J(S.s.vb,S.s.Wa.Xa)){S.a=1;break s}S.xb=0}if(!Pr(S,S.V,S.Ba,S.c,S.i,b.o,ri))break s;P.Dc=S.Ma,S=1;break t}t(S.a!=0),S=0}S=!S}S&&(m=u.a)}else m=u.a}else{if((u=new L0)==null){O=1;break e}if(u.Fa=P.na,u.P=P.P,u.qc=P.Sa,Hu(u,S)){if((m=oi(S.width,S.height,O.Oa,O.ba))==0){if(u.Aa=0,b=O.Oa,t((P=u)!=null),b!=null){if(0<(K=0>(K=b.Md)?0:100<K?255:255*K/100)){for(Z=ie=0;4>Z;++Z)12>(ge=P.pb[Z]).lc&&(ge.ia=K*Mz[0>ge.lc?0:ge.lc]>>3),ie|=ge.ia;ie&&(alert("todo:VP8InitRandom"),P.ia=1)}P.Ga=b.Id,100<P.Ga?P.Ga=100:0>P.Ga&&(P.Ga=0)}(function(Y,oe){if(Y==null)return 0;if(oe==null)return Ls(Y,2,"NULL VP8Io parameter in VP8Decode().");if(!Y.cb&&!Hu(Y,oe))return 0;if(t(Y.cb),oe.ac==null||oe.ac(oe)){oe.ob&&(Y.L=0);var he=ch[Y.L];if(Y.L==2?(Y.yb=0,Y.zb=0):(Y.yb=oe.v-he>>4,Y.zb=oe.j-he>>4,0>Y.yb&&(Y.yb=0),0>Y.zb&&(Y.zb=0)),Y.Va=oe.o+15+he>>4,Y.Hb=oe.va+15+he>>4,Y.Hb>Y.za&&(Y.Hb=Y.za),Y.Va>Y.Ub&&(Y.Va=Y.Ub),0<Y.L){var ke=Y.ed;for(he=0;4>he;++he){var fe;if(Y.Qa.Cb){var ze=Y.Qa.Lb[he];Y.Qa.Fb||(ze+=ke.Tb)}else ze=ke.Tb;for(fe=0;1>=fe;++fe){var Ne=Y.gd[he][fe],Ee=ze;if(ke.Pc&&(Ee+=ke.vd[0],fe&&(Ee+=ke.od[0])),0<(Ee=0>Ee?0:63<Ee?63:Ee)){var Se=Ee;0<ke.wb&&(Se=4<ke.wb?Se>>2:Se>>1)>9-ke.wb&&(Se=9-ke.wb),1>Se&&(Se=1),Ne.dd=Se,Ne.tc=2*Ee+Se,Ne.ld=40<=Ee?2:15<=Ee?1:0}else Ne.tc=0;Ne.La=fe}}}he=0}else Ls(Y,6,"Frame setup failed"),he=Y.a;if(he=he==0){if(he){Y.$c=0,0<Y.Aa||(Y.Ic=Fz);t:{he=Y.Ic,ke=4*(Se=Y.za);var Ze=32*Se,Re=Se+1,vt=0<Y.L?Se*(0<Y.Aa?2:1):0,He=(Y.Aa==2?2:1)*Se;if((Ne=ke+832+(fe=3*(16*he+ch[Y.L])/2*Ze)+(ze=Y.Fa!=null&&0<Y.Fa.length?Y.Kc.c*Y.Kc.i:0))!=Ne)he=0;else{if(Ne>Y.Vb){if(Y.Vb=0,Y.Ec=i(Ne),Y.Fc=0,Y.Ec==null){he=Ls(Y,1,"no memory during frame initialization.");break t}Y.Vb=Ne}Ne=Y.Ec,Ee=Y.Fc,Y.Ac=Ne,Y.Bc=Ee,Ee+=ke,Y.Gd=l(Ze,Bu),Y.Hd=0,Y.rb=l(Re+1,Mc),Y.sb=1,Y.wa=vt?l(vt,gr):null,Y.Y=0,Y.D.Nb=0,Y.D.wa=Y.wa,Y.D.Y=Y.Y,0<Y.Aa&&(Y.D.Y+=Se),t(!0),Y.oc=Ne,Y.pc=Ee,Ee+=832,Y.ya=l(He,Fc),Y.aa=0,Y.D.ya=Y.ya,Y.D.aa=Y.aa,Y.Aa==2&&(Y.D.aa+=Se),Y.R=16*Se,Y.B=8*Se,Se=(Ze=ch[Y.L])*Y.R,Ze=Ze/2*Y.B,Y.sa=Ne,Y.ta=Ee+Se,Y.qa=Y.sa,Y.ra=Y.ta+16*he*Y.R+Ze,Y.Ha=Y.qa,Y.Ia=Y.ra+8*he*Y.B+Ze,Y.$c=0,Ee+=fe,Y.mb=ze?Ne:null,Y.nb=ze?Ee:null,t(Ee+ze<=Y.Fc+Y.Vb),ul(Y),n(Y.Ac,Y.Bc,0,ke),he=1}}if(he){if(oe.ka=0,oe.y=Y.sa,oe.O=Y.ta,oe.f=Y.qa,oe.N=Y.ra,oe.ea=Y.Ha,oe.Vd=Y.Ia,oe.fa=Y.R,oe.Rc=Y.B,oe.F=null,oe.J=0,!_v){for(he=-255;255>=he;++he)jv[255+he]=0>he?-he:he;for(he=-1020;1020>=he;++he)zv[1020+he]=-128>he?-128:127<he?127:he;for(he=-112;112>=he;++he)wv[112+he]=-16>he?-16:15<he?15:he;for(he=-255;510>=he;++he)Nv[255+he]=0>he?0:255<he?255:he;_v=1}fi=Ku,El=P0,nn=I0,It=sn,Vt=Vu,vr=T0,zs=Ju,Fs=Gu,Tn=v,sd=T,jo=yl,eh=Zu,mv=X,fv=ae,gv=qc,pv=vl,xv=qu,vv=Wu,Dr[0]=U0,Dr[1]=Rc,Dr[2]=R0,Dr[3]=B0,Dr[4]=$0,Dr[5]=Sn,Dr[6]=_n,Dr[7]=H0,Dr[8]=go,Dr[9]=V0,gi[0]=ii,gi[1]=M0,gi[2]=F0,gi[3]=Bc,gi[4]=O0,gi[5]=fl,gi[6]=Uc,Pn[0]=xo,Pn[1]=D0,Pn[2]=$c,Pn[3]=gl,Pn[4]=Hc,Pn[5]=K0,Pn[6]=Vc,he=1}else he=0}he&&(he=function(wt,Os){for(wt.M=0;wt.M<wt.Va;++wt.M){var yt,Ve=wt.Jc[wt.M&wt.Xb],Me=wt.m,ws=wt;for(yt=0;yt<ws.za;++yt){var ft=Me,_t=ws,ts=_t.Ac,sa=_t.Bc+4*yt,ja=_t.zc,gs=_t.ya[_t.aa+yt];if(_t.Qa.Bb?gs.$b=pe(ft,_t.Pa.jb[0])?2+pe(ft,_t.Pa.jb[2]):pe(ft,_t.Pa.jb[1]):gs.$b=0,_t.kc&&(gs.Ad=pe(ft,_t.Bd)),gs.Za=!pe(ft,145)+0,gs.Za){var ha=gs.Ob,za=0;for(_t=0;4>_t;++_t){var Rs,St=ja[0+_t];for(Rs=0;4>Rs;++Rs){St=jz[ts[sa+Rs]][St];for(var Dt=Cv[pe(ft,St[0])];0<Dt;)Dt=Cv[2*Dt+pe(ft,St[Dt])];St=-Dt,ts[sa+Rs]=St}r(ha,za,ts,sa,4),za+=4,ja[0+_t]=St}}else St=pe(ft,156)?pe(ft,128)?1:3:pe(ft,163)?2:0,gs.Ob[0]=St,n(ts,sa,St,4),n(ja,0,St,4);gs.Dd=pe(ft,142)?pe(ft,114)?pe(ft,183)?1:3:2:0}if(ws.m.Ka)return Ls(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(ws=Ve,ft=(Me=wt).rb[Me.sb-1],ts=Me.rb[Me.sb+Me.ja],yt=Me.ya[Me.aa+Me.ja],sa=Me.kc?yt.Ad:0)ft.la=ts.la=0,yt.Za||(ft.Na=ts.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var ps,Mt;if(ft=ts,ts=ws,sa=Me.Pa.Xc,ja=Me.ya[Me.aa+Me.ja],gs=Me.pb[ja.$b],_t=ja.ad,ha=0,za=Me.rb[Me.sb-1],St=Rs=0,n(_t,ha,0,384),ja.Za)var aa=0,Mr=sa[3];else{Dt=i(16);var Ns=ft.Na+za.Na;if(Ns=rd(ts,sa[1],Ns,gs.Eb,0,Dt,0),ft.Na=za.Na=(0<Ns)+0,1<Ns)fi(Dt,0,_t,ha);else{var Da=Dt[0]+3>>3;for(Dt=0;256>Dt;Dt+=16)_t[ha+Dt]=Da}aa=1,Mr=sa[0]}var Kt=15&ft.la,Bs=15&za.la;for(Dt=0;4>Dt;++Dt){var Ga=1&Bs;for(Da=Mt=0;4>Da;++Da)Kt=Kt>>1|(Ga=(Ns=rd(ts,Mr,Ns=Ga+(1&Kt),gs.Sc,aa,_t,ha))>aa)<<7,Mt=Mt<<2|(3<Ns?3:1<Ns?2:_t[ha+0]!=0),ha+=16;Kt>>=4,Bs=Bs>>1|Ga<<7,Rs=(Rs<<8|Mt)>>>0}for(Mr=Kt,aa=Bs>>4,ps=0;4>ps;ps+=2){for(Mt=0,Kt=ft.la>>4+ps,Bs=za.la>>4+ps,Dt=0;2>Dt;++Dt){for(Ga=1&Bs,Da=0;2>Da;++Da)Ns=Ga+(1&Kt),Kt=Kt>>1|(Ga=0<(Ns=rd(ts,sa[2],Ns,gs.Qc,0,_t,ha)))<<3,Mt=Mt<<2|(3<Ns?3:1<Ns?2:_t[ha+0]!=0),ha+=16;Kt>>=2,Bs=Bs>>1|Ga<<5}St|=Mt<<4*ps,Mr|=Kt<<4<<ps,aa|=(240&Bs)<<ps}ft.la=Mr,za.la=aa,ja.Hc=Rs,ja.Gc=St,ja.ia=43690&St?0:gs.ia,sa=!(Rs|St)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[yt.$b][yt.Za],Me.wa[Me.Y+Me.ja].La|=!sa),ws.Ka)return Ls(wt,7,"Premature end-of-file encountered.")}if(ul(wt),Me=Os,ws=1,yt=(Ve=wt).D,ft=0<Ve.L&&Ve.M>=Ve.zb&&Ve.M<=Ve.Va,Ve.Aa==0)t:{if(yt.M=Ve.M,yt.uc=ft,xr(Ve,yt),ws=1,yt=(Mt=Ve.D).Nb,ft=(St=ch[Ve.L])*Ve.R,ts=St/2*Ve.B,Dt=16*yt*Ve.R,Da=8*yt*Ve.B,sa=Ve.sa,ja=Ve.ta-ft+Dt,gs=Ve.qa,_t=Ve.ra-ts+Da,ha=Ve.Ha,za=Ve.Ia-ts+Da,Bs=(Kt=Mt.M)==0,Rs=Kt>=Ve.Va-1,Ve.Aa==2&&xr(Ve,Mt),Mt.uc)for(Ga=(Ns=Ve).D.M,t(Ns.D.uc),Mt=Ns.yb;Mt<Ns.Hb;++Mt){aa=Mt,Mr=Ga;var wa=(Za=(ra=Ns).D).Nb;ps=ra.R;var Za=Za.wa[Za.Y+aa],Ya=ra.sa,Ma=ra.ta+16*wa*ps+16*aa,Xa=Za.dd,Yt=Za.tc;if(Yt!=0)if(t(3<=Yt),ra.L==1)0<aa&&pv(Ya,Ma,ps,Yt+4),Za.La&&vv(Ya,Ma,ps,Yt),0<Mr&&gv(Ya,Ma,ps,Yt+4),Za.La&&xv(Ya,Ma,ps,Yt);else{var Qa=ra.B,Fr=ra.qa,Cl=ra.ra+8*wa*Qa+8*aa,In=ra.Ha,ra=ra.Ia+8*wa*Qa+8*aa;wa=Za.ld,0<aa&&(Fs(Ya,Ma,ps,Yt+4,Xa,wa),sd(Fr,Cl,In,ra,Qa,Yt+4,Xa,wa)),Za.La&&(eh(Ya,Ma,ps,Yt,Xa,wa),fv(Fr,Cl,In,ra,Qa,Yt,Xa,wa)),0<Mr&&(zs(Ya,Ma,ps,Yt+4,Xa,wa),Tn(Fr,Cl,In,ra,Qa,Yt+4,Xa,wa)),Za.La&&(jo(Ya,Ma,ps,Yt,Xa,wa),mv(Fr,Cl,In,ra,Qa,Yt,Xa,wa))}}if(Ve.ia&&alert("todo:DitherRow"),Me.put!=null){if(Mt=16*Kt,Kt=16*(Kt+1),Bs?(Me.y=Ve.sa,Me.O=Ve.ta+Dt,Me.f=Ve.qa,Me.N=Ve.ra+Da,Me.ea=Ve.Ha,Me.W=Ve.Ia+Da):(Mt-=St,Me.y=sa,Me.O=ja,Me.f=gs,Me.N=_t,Me.ea=ha,Me.W=za),Rs||(Kt-=St),Kt>Me.o&&(Kt=Me.o),Me.F=null,Me.J=null,Ve.Fa!=null&&0<Ve.Fa.length&&Mt<Kt&&(Me.J=Ts(Ve,Me,Mt,Kt-Mt),Me.F=Ve.mb,Me.F==null&&Me.F.length==0)){ws=Ls(Ve,3,"Could not decode alpha data.");break t}Mt<Me.j&&(St=Me.j-Mt,Mt=Me.j,t(!(1&St)),Me.O+=Ve.R*St,Me.N+=Ve.B*(St>>1),Me.W+=Ve.B*(St>>1),Me.F!=null&&(Me.J+=Me.width*St)),Mt<Kt&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=Mt-Me.j,Me.U=Me.va-Me.v,Me.T=Kt-Mt,ws=Me.put(Me))}yt+1!=Ve.Ic||Rs||(r(Ve.sa,Ve.ta-ft,sa,ja+16*Ve.R,ft),r(Ve.qa,Ve.ra-ts,gs,_t+8*Ve.B,ts),r(Ve.Ha,Ve.Ia-ts,ha,za+8*Ve.B,ts))}if(!ws)return Ls(wt,6,"Output aborted.")}return 1}(Y,oe)),oe.bc!=null&&oe.bc(oe),he&=1}return he?(Y.cb=0,he):0})(u,S)||(m=u.a)}}else m=u.a}m==0&&O.Oa!=null&&O.Oa.fd&&(m=Zc(O.ba))}O=m}F=O!=0?null:11>F?U.f.RGBA.eb:U.f.kb.y}else F=null;return F};var Rv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(I,R){for(var y="",A=0;A<4;A++)y+=String.fromCharCode(I[R++]);return y}function h(I,R){return I[R+0]|I[R+1]<<8}function g(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16)>>>0}function p(I,R){return(I[R+0]|I[R+1]<<8|I[R+2]<<16|I[R+3]<<24)>>>0}new c;var f=[0],k=[0],_=[],w=new c,x=e,j=function(I,R){var y={},A=0,E=!1,L=0,M=0;if(y.frames=[],!function(C,H){for(var W=0;W<4;W++)if(C[H+W]!="RIFF".charCodeAt(W))return!0;return!1}(I,R)){for(p(I,R+=4),R+=8;R<I.length;){var ee=d(I,R),ce=p(I,R+=4);R+=4;var V=ce+(1&ce);switch(ee){case"VP8 ":case"VP8L":y.frames[A]===void 0&&(y.frames[A]={}),(be=y.frames[A]).src_off=E?M:R-8,be.src_size=L+ce+8,A++,E&&(E=!1,L=0,M=0);break;case"VP8X":(be=y.header={}).feature_flags=I[R];var le=R+4;be.canvas_width=1+g(I,le),le+=3,be.canvas_height=1+g(I,le),le+=3;break;case"ALPH":E=!0,L=V+8,M=R-8;break;case"ANIM":(be=y.header).bgcolor=p(I,R),le=R+4,be.loop_count=h(I,le),le+=2;break;case"ANMF":var ye,be;(be=y.frames[A]={}).offset_x=2*g(I,R),R+=3,be.offset_y=2*g(I,R),R+=3,be.width=1+g(I,R),R+=3,be.height=1+g(I,R),R+=3,be.duration=g(I,R),R+=3,ye=I[R++],be.dispose=1&ye,be.blend=ye>>1&1}ee!="ANMF"&&(R+=V)}return y}}(x,0);j.response=x,j.rgbaoutput=!0,j.dataurl=!1;var z=j.header?j.header:null,N=j.frames?j.frames:null;if(z){z.loop_counter=z.loop_count,f=[z.canvas_height],k=[z.canvas_width];for(var $=0;$<N.length&&N[$].blend!=0;$++);}var q=N[0],G=w.WebPDecodeRGBA(x,q.src_off,q.src_size,k,f);q.rgba=G,q.imgwidth=k[0],q.imgheight=f[0];for(var D=0;D<k[0]*f[0]*4;D++)_[D]=G[D];return this.width=k,this.height=f,this.data=_,this}(function(e){var t,a,r,n,i,l,o,c,d,h=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new c,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new l,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new l,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var g=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=C;Object.defineProperty(this,"pdf",{get:function(){return H}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(ne){W=!!ne}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(ne){Q=!!ne}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ne){isNaN(ne)||(re=ne)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(ne){isNaN(ne)||(ue=ne)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ne){var J;typeof ne=="number"?J=[ne,ne,ne,ne]:((J=new Array(4))[0]=ne[0],J[1]=ne.length>=2?ne[1]:J[0],J[2]=ne.length>=3?ne[2]:J[0],J[3]=ne.length>=4?ne[3]:J[1]),d.margin=J}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ne){me=ne}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(ne){te=ne}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(ne){pe=ne}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ne){ne instanceof h&&(d=ne)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ne){d.path=ne}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(ne){_e=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var J;J=p(ne),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var J=p(ne);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var ve=null,je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(ne){ve=null,je=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var J;if(this.ctx.font=ne,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ne))!==null){var Ke=J[1];J[2];var qe=J[3],We=J[4];J[5];var Ce=J[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(Ye==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var Fe=function(at){var Qe,Gt,Ct=[],Ge=at.trim();if(Ge==="")return xg;if(Ge in I1)return[I1[Ge]];for(;Ge!=="";){switch(Gt=null,Qe=(Ge=M1(Ge)).charAt(0)){case'"':case"'":Gt=EA(Ge.substring(1),Qe);break;default:Gt=CA(Ge)}if(Gt===null||(Ct.push(Gt[0]),(Ge=M1(Gt[1]))!==""&&Ge.charAt(0)!==","))return xg;Ge=Ge.replace(/^,/,"")}return Ct}(Ce);if(this.fontFaces){var gt=function(at,Qe){if(ve===null){var Gt=function(Ct){var Ge=[];return Object.keys(Ct).forEach(function(ht){Ct[ht].forEach(function($t){var tt=null;switch($t){case"bold":tt={family:ht,weight:"bold"};break;case"italic":tt={family:ht,style:"italic"};break;case"bolditalic":tt={family:ht,weight:"bold",style:"italic"};break;case"":case"normal":tt={family:ht}}tt!==null&&(tt.ref={name:ht,style:$t},Ge.push(tt))})}),Ge}(at.getFontList());ve=function(Ct){for(var Ge={},ht=0;ht<Ct.length;++ht){var $t=pg(Ct[ht]),tt=$t.family,zt=$t.stretch,mt=$t.style,bs=$t.weight;Ge[tt]=Ge[tt]||{},Ge[tt][zt]=Ge[tt][zt]||{},Ge[tt][zt][mt]=Ge[tt][zt][mt]||{},Ge[tt][zt][mt][bs]=$t}return Ge}(Gt.concat(Qe))}return ve}(this.pdf,this.fontFaces),et=Fe.map(function(at){return{family:at,stretch:"normal",weight:qe,style:Ke}}),Et=function(at,Qe,Gt){for(var Ct=(Gt=Gt||{}).defaultFontFamily||"times",Ge=Object.assign({},AA,Gt.genericFontFamilies||{}),ht=null,$t=null,tt=0;tt<Qe.length;++tt)if(Ge[(ht=pg(Qe[tt])).family]&&(ht.family=Ge[ht.family]),at.hasOwnProperty(ht.family)){$t=at[ht.family];break}if(!($t=$t||at[Ct]))throw new Error("Could not find a font-family for the rule '"+D1(ht)+"' and default family '"+Ct+"'.");if($t=function(zt,mt){if(mt[zt])return mt[zt];var bs=Jp[zt],Ds=bs<=Jp.normal?-1:1,Ht=P1(mt,iz,bs,Ds);if(!Ht)throw new Error("Could not find a matching font-stretch value for "+zt);return Ht}(ht.stretch,$t),$t=function(zt,mt){if(mt[zt])return mt[zt];for(var bs=nz[zt],Ds=0;Ds<bs.length;++Ds)if(mt[bs[Ds]])return mt[bs[Ds]];throw new Error("Could not find a matching font-style for "+zt)}(ht.style,$t),!($t=function(zt,mt){if(mt[zt])return mt[zt];if(zt===400&&mt[500])return mt[500];if(zt===500&&mt[400])return mt[400];var bs=SA[zt],Ds=P1(mt,lz,bs,zt<400?-1:1);if(!Ds)throw new Error("Could not find a matching font-weight for value "+zt);return Ds}(ht.weight,$t)))throw new Error("Failed to resolve a font for the rule '"+D1(ht)+"'.");return $t}(gt,et);this.pdf.setFont(Et.ref.name,Et.ref.style)}else{var dt="";(qe==="bold"||parseInt(qe,10)>=700||Ke==="bold")&&(dt="bold"),Ke==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var ut="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pt=0;pt<Fe.length;pt++){if(this.pdf.internal.getFont(Fe[pt],dt,{noFallback:!0,disableWarning:!0})!==void 0){ut=Fe[pt];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(Fe[pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=Fe[pt],dt="bold";else if(this.pdf.internal.getFont(Fe[pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=Fe[pt],dt="normal";break}}if(ut===""){for(var Xe=0;Xe<Fe.length;Xe++)if(Bt[Fe[Xe]]){ut=Bt[Fe[Xe]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,be.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,be.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};g.prototype.setLineDash=function(C){this.lineDash=C},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){N.call(this,"fill",!1)},g.prototype.stroke=function(){N.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(C,H){if(isNaN(C)||isNaN(H))throw qt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new l(C,H));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new l(C,H)},g.prototype.closePath=function(){var C=new l(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Ot(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){C=new l(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(C.x,C.y)},g.prototype.lineTo=function(C,H){if(isNaN(C)||isNaN(H))throw qt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new l(C,H));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new l(W.x,W.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},g.prototype.quadraticCurveTo=function(C,H,W,Q){if(isNaN(W)||isNaN(Q)||isNaN(C)||isNaN(H))throw qt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new l(W,Q)),ue=this.ctx.transform.applyToPoint(new l(C,H));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:re.x,y:re.y}),this.ctx.lastPoint=new l(re.x,re.y)},g.prototype.bezierCurveTo=function(C,H,W,Q,re,ue){if(isNaN(re)||isNaN(ue)||isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q))throw qt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new l(re,ue)),te=this.ctx.transform.applyToPoint(new l(C,H)),pe=this.ctx.transform.applyToPoint(new l(W,Q));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:pe.x,y2:pe.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},g.prototype.arc=function(C,H,W,Q,re,ue){if(isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q)||isNaN(re))throw qt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new l(C,H));C=me.x,H=me.y;var te=this.ctx.transform.applyToPoint(new l(0,W)),pe=this.ctx.transform.applyToPoint(new l(0,0));W=Math.sqrt(Math.pow(te.x-pe.x,2)+Math.pow(te.y-pe.y,2))}Math.abs(re-Q)>=2*Math.PI&&(Q=0,re=2*Math.PI),this.path.push({type:"arc",x:C,y:H,radius:W,startAngle:Q,endAngle:re,counterclockwise:ue})},g.prototype.arcTo=function(C,H,W,Q,re){throw new Error("arcTo not implemented.")},g.prototype.rect=function(C,H,W,Q){if(isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q))throw qt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,H),this.lineTo(C+W,H),this.lineTo(C+W,H+Q),this.lineTo(C,H+Q),this.lineTo(C,H),this.lineTo(C+W,H),this.lineTo(C,H)},g.prototype.fillRect=function(C,H,W,Q){if(isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q))throw qt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,H,W,Q),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},g.prototype.strokeRect=function(C,H,W,Q){if(isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q))throw qt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(C,H,W,Q),this.stroke())},g.prototype.clearRect=function(C,H,W,Q){if(isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q))throw qt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,H,W,Q))},g.prototype.save=function(C){C=typeof C!="boolean"||C;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},g.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(H),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(C){var H,W,Q,re;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))H=0,W=0,Q=0,re=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(ue!==null)H=parseInt(ue[1]),W=parseInt(ue[2]),Q=parseInt(ue[3]),re=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)H=parseInt(ue[1]),W=parseInt(ue[2]),Q=parseInt(ue[3]),re=parseFloat(ue[4]);else{if(re=1,typeof C=="string"&&C.charAt(0)!=="#"){var me=new X5(C);C=me.ok?me.toHex():"#000000"}C.length===4?(H=C.substring(1,2),H+=H,W=C.substring(2,3),W+=W,Q=C.substring(3,4),Q+=Q):(H=C.substring(1,3),W=C.substring(3,5),Q=C.substring(5,7)),H=parseInt(H,16),W=parseInt(W,16),Q=parseInt(Q,16)}}return{r:H,g:W,b:Q,a:re,style:C}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(C,H,W,Q){if(isNaN(H)||isNaN(W)||typeof C!="string")throw qt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!f.call(this)){var re=V(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;A.call(this,{text:C,x:H,y:W,scale:ue,angle:re,align:this.textAlign,maxWidth:Q})}},g.prototype.strokeText=function(C,H,W,Q){if(isNaN(H)||isNaN(W)||typeof C!="string")throw qt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){Q=isNaN(Q)?void 0:Q;var re=V(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;A.call(this,{text:C,x:H,y:W,scale:ue,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:Q})}},g.prototype.measureText=function(C){if(typeof C!="string")throw qt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,W=this.pdf.internal.scaleFactor,Q=H.internal.getFontSize(),re=H.getStringUnitWidth(C)*Q/H.internal.scaleFactor;return new function(ue){var me=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:re*=Math.round(96*W/72*1e4)/1e4})},g.prototype.scale=function(C,H){if(isNaN(C)||isNaN(H))throw qt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(C,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.rotate=function(C){if(isNaN(C))throw qt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},g.prototype.translate=function(C,H){if(isNaN(C)||isNaN(H))throw qt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,C,H);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.transform=function(C,H,W,Q,re,ue){if(isNaN(C)||isNaN(H)||isNaN(W)||isNaN(Q)||isNaN(re)||isNaN(ue))throw qt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(C,H,W,Q,re,ue);this.ctx.transform=this.ctx.transform.multiply(me)},g.prototype.setTransform=function(C,H,W,Q,re,ue){C=isNaN(C)?1:C,H=isNaN(H)?0:H,W=isNaN(W)?0:W,Q=isNaN(Q)?1:Q,re=isNaN(re)?0:re,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(C,H,W,Q,re,ue)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(C,H,W,Q,re,ue,me,te,pe){var _e=this.pdf.getImageProperties(C),ve=1,je=1,ne=1,J=1;Q!==void 0&&te!==void 0&&(ne=te/Q,J=pe/re,ve=_e.width/Q*te/Q,je=_e.height/re*pe/re),ue===void 0&&(ue=H,me=W,H=0,W=0),Q!==void 0&&te===void 0&&(te=Q,pe=re),Q===void 0&&te===void 0&&(te=_e.width,pe=_e.height);for(var Ke,qe=this.ctx.transform.decompose(),We=V(qe.rotate.shx),Ce=new c,Ye=(Ce=(Ce=(Ce=Ce.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale)).applyToRectangle(new o(ue-H*ne,me-W*J,Q*ve,re*je)),Fe=w.call(this,Ye),gt=[],et=0;et<Fe.length;et+=1)gt.indexOf(Fe[et])===-1&&gt.push(Fe[et]);if(z(gt),this.autoPaging)for(var Et=gt[0],dt=gt[gt.length-1],ut=Et;ut<dt+1;ut++){this.pdf.setPage(ut);var Bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=ut===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=ut===1?0:Xe+(ut-2)*at;if(this.ctx.clip_path.length!==0){var Gt=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Ke,this.posX+this.margin[3],-Qe+pt+this.ctx.prevPageLastElemOffset),$.call(this,"fill",!0),this.path=Gt}var Ct=JSON.parse(JSON.stringify(Ye));Ct=j([Ct],this.posX+this.margin[3],-Qe+pt+this.ctx.prevPageLastElemOffset)[0];var Ge=(ut>Et||ut<dt)&&_.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,at,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,We),Ge&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",Ye.x,Ye.y,Ye.w,Ye.h,null,null,We)};var w=function(C,H,W){var Q=[];H=H||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":Q.push(Math.floor((C.y+re)/W)+1);break;case"arc":Q.push(Math.floor((C.y+re-C.radius)/W)+1),Q.push(Math.floor((C.y+re+C.radius)/W)+1);break;case"qct":var ue=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);Q.push(Math.floor((ue.y+re)/W)+1),Q.push(Math.floor((ue.y+ue.h+re)/W)+1);break;case"bct":var me=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);Q.push(Math.floor((me.y+re)/W)+1),Q.push(Math.floor((me.y+me.h+re)/W)+1);break;case"rect":Q.push(Math.floor((C.y+re)/W)+1),Q.push(Math.floor((C.y+C.h+re)/W)+1)}for(var te=0;te<Q.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<Q[te];)x.call(this);return Q},x=function(){var C=this.fillStyle,H=this.strokeStyle,W=this.font,Q=this.lineCap,re=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=H,this.font=W,this.lineCap=Q,this.lineWidth=re,this.lineJoin=ue},j=function(C,H,W){for(var Q=0;Q<C.length;Q++)switch(C[Q].type){case"bct":C[Q].x2+=H,C[Q].y2+=W;case"qct":C[Q].x1+=H,C[Q].y1+=W;default:C[Q].x+=H,C[Q].y+=W}return C},z=function(C){return C.sort(function(H,W){return H-W})},N=function(C,H){for(var W,Q,re=this.fillStyle,ue=this.strokeStyle,me=this.lineCap,te=this.lineWidth,pe=Math.abs(te*this.ctx.transform.scaleX),_e=this.lineJoin,ve=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),ne=[],J=0;J<je.length;J++)if(je[J].x!==void 0)for(var Ke=w.call(this,je[J]),qe=0;qe<Ke.length;qe+=1)ne.indexOf(Ke[qe])===-1&&ne.push(Ke[qe]);for(var We=0;We<ne.length;We++)for(;this.pdf.internal.getNumberOfPages()<ne[We];)x.call(this);if(z(ne),this.autoPaging)for(var Ce=ne[0],Ye=ne[ne.length-1],Fe=Ce;Fe<Ye+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=re,this.strokeStyle=ue,this.lineCap=me,this.lineWidth=pe,this.lineJoin=_e;var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=Fe===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Fe===1?0:Et+(Fe-2)*dt;if(this.ctx.clip_path.length!==0){var Bt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(W,this.posX+this.margin[3],-ut+et+this.ctx.prevPageLastElemOffset),$.call(this,C,!0),this.path=Bt}if(Q=JSON.parse(JSON.stringify(ve)),this.path=j(Q,this.posX+this.margin[3],-ut+et+this.ctx.prevPageLastElemOffset),H===!1||Fe===0){var pt=(Fe>Ce||Fe<Ye)&&_.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,dt,null).clip().discardPath()),$.call(this,C,H),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=pe,$.call(this,C,H),this.lineWidth=te;this.path=ve},$=function(C,H){if((C!=="stroke"||H||!k.call(this))&&(C==="stroke"||H||!f.call(this))){for(var W,Q,re=[],ue=this.path,me=0;me<ue.length;me++){var te=ue[me];switch(te.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:te,deltas:[],abs:[]});break;case"lt":var pe=re.length;if(ue[me-1]&&!isNaN(ue[me-1].x)&&(W=[te.x-ue[me-1].x,te.y-ue[me-1].y],pe>0)){for(;pe>=0;pe--)if(re[pe-1].close!==!0&&re[pe-1].begin!==!0){re[pe-1].deltas.push(W),re[pe-1].abs.push(te);break}}break;case"bct":W=[te.x1-ue[me-1].x,te.y1-ue[me-1].y,te.x2-ue[me-1].x,te.y2-ue[me-1].y,te.x-ue[me-1].x,te.y-ue[me-1].y],re[re.length-1].deltas.push(W);break;case"qct":var _e=ue[me-1].x+2/3*(te.x1-ue[me-1].x),ve=ue[me-1].y+2/3*(te.y1-ue[me-1].y),je=te.x+2/3*(te.x1-te.x),ne=te.y+2/3*(te.y1-te.y),J=te.x,Ke=te.y;W=[_e-ue[me-1].x,ve-ue[me-1].y,je-ue[me-1].x,ne-ue[me-1].y,J-ue[me-1].x,Ke-ue[me-1].y],re[re.length-1].deltas.push(W);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(te)}}Q=H?null:C==="stroke"?"stroke":"fill";for(var qe=!1,We=0;We<re.length;We++)if(re[We].arc)for(var Ce=re[We].abs,Ye=0;Ye<Ce.length;Ye++){var Fe=Ce[Ye];Fe.type==="arc"?D.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,H,!qe):E.call(this,Fe.x,Fe.y),qe=!0}else if(re[We].close===!0)this.pdf.internal.out("h"),qe=!1;else if(re[We].begin!==!0){var gt=re[We].start.x,et=re[We].start.y;L.call(this,re[We].deltas,gt,et),qe=!0}Q&&I.call(this,Q),H&&R.call(this)}},q=function(C){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-W;case"top":return C+H-W;case"hanging":return C+H-2*W;case"middle":return C+H/2-W;default:return C}},G=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(H,W){this.colorStops.push([H,W])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(C,H,W,Q,re,ue,me,te,pe){for(var _e=ee.call(this,W,Q,re,ue),ve=0;ve<_e.length;ve++){var je=_e[ve];ve===0&&(pe?y.call(this,je.x1+C,je.y1+H):E.call(this,je.x1+C,je.y1+H)),M.call(this,C,H,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}te?R.call(this):I.call(this,me)},I=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},y=function(C,H){this.pdf.internal.out(a(C)+" "+r(H)+" m")},A=function(C){var H;switch(C.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var W=this.pdf.getTextDimensions(C.text),Q=q.call(this,C.y),re=G.call(this,Q)-W.h,ue=this.ctx.transform.applyToPoint(new l(C.x,Q)),me=this.ctx.transform.decompose(),te=new c;te=(te=(te=te.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var pe,_e,ve,je=this.ctx.transform.applyToRectangle(new o(C.x,Q,W.w,W.h)),ne=te.applyToRectangle(new o(C.x,re,W.w,W.h)),J=w.call(this,ne),Ke=[],qe=0;qe<J.length;qe+=1)Ke.indexOf(J[qe])===-1&&Ke.push(J[qe]);if(z(Ke),this.autoPaging)for(var We=Ke[0],Ce=Ke[Ke.length-1],Ye=We;Ye<Ce+1;Ye++){this.pdf.setPage(Ye);var Fe=Ye===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],Et=et-this.margin[0],dt=this.pdf.internal.pageSize.width-this.margin[1],ut=dt-this.margin[3],Bt=Ye===1?0:gt+(Ye-2)*Et;if(this.ctx.clip_path.length!==0){var pt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(pe,this.posX+this.margin[3],-1*Bt+Fe),$.call(this,"fill",!0),this.path=pt}var Xe=j([JSON.parse(JSON.stringify(ne))],this.posX+this.margin[3],-Bt+Fe+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*C.scale),ve=this.lineWidth,this.lineWidth=ve*C.scale);var at=this.autoPaging!=="text";if(at||Xe.y+Xe.h<=et){if(at||Xe.y>=Fe&&Xe.x<=dt){var Qe=at?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||dt-Xe.x)[0],Gt=j([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-Bt+Fe+this.ctx.prevPageLastElemOffset)[0],Ct=at&&(Ye>We||Ye<Ce)&&_.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Et,null).clip().discardPath()),this.pdf.text(Qe,Gt.x,Gt.y,{angle:C.angle,align:H,renderingMode:C.renderingMode}),Ct&&this.pdf.restoreGraphicsState()}}else Xe.y<et&&(this.ctx.prevPageLastElemOffset+=et-Xe.y);C.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=ve)}else C.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*C.scale),ve=this.lineWidth,this.lineWidth=ve*C.scale),this.pdf.text(C.text,ue.x+this.posX,ue.y+this.posY,{angle:C.angle,align:H,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=ve)},E=function(C,H,W,Q){W=W||0,Q=Q||0,this.pdf.internal.out(a(C+W)+" "+r(H+Q)+" l")},L=function(C,H,W){return this.pdf.lines(C,H,W,null,null)},M=function(C,H,W,Q,re,ue,me,te){this.pdf.internal.out([t(n(W+C)),t(i(Q+H)),t(n(re+C)),t(i(ue+H)),t(n(me+C)),t(i(te+H)),"c"].join(" "))},ee=function(C,H,W,Q){for(var re=2*Math.PI,ue=Math.PI/2;H>W;)H-=re;var me=Math.abs(W-H);me<re&&Q&&(me=re-me);for(var te=[],pe=Q?-1:1,_e=H;me>1e-5;){var ve=_e+pe*Math.min(me,ue);te.push(ce.call(this,C,_e,ve)),me-=Math.abs(ve-_e),_e=ve}return te},ce=function(C,H,W){var Q=(W-H)/2,re=C*Math.cos(Q),ue=C*Math.sin(Q),me=re,te=-ue,pe=me*me+te*te,_e=pe+me*re+te*ue,ve=4/3*(Math.sqrt(2*pe*_e)-_e)/(me*ue-te*re),je=me-ve*te,ne=te+ve*me,J=je,Ke=-ne,qe=Q+H,We=Math.cos(qe),Ce=Math.sin(qe);return{x1:C*Math.cos(H),y1:C*Math.sin(H),x2:je*We-ne*Ce,y2:je*Ce+ne*We,x3:J*We-Ke*Ce,y3:J*Ce+Ke*We,x4:C*Math.cos(W),y4:C*Math.sin(W)}},V=function(C){return 180*C/Math.PI},le=function(C,H,W,Q,re,ue){var me=C+.5*(W-C),te=H+.5*(Q-H),pe=re+.5*(W-re),_e=ue+.5*(Q-ue),ve=Math.min(C,re,me,pe),je=Math.max(C,re,me,pe),ne=Math.min(H,ue,te,_e),J=Math.max(H,ue,te,_e);return new o(ve,ne,je-ve,J-ne)},ye=function(C,H,W,Q,re,ue,me,te){var pe,_e,ve,je,ne,J,Ke,qe,We,Ce,Ye,Fe,gt,et,Et=W-C,dt=Q-H,ut=re-W,Bt=ue-Q,pt=me-re,Xe=te-ue;for(_e=0;_e<41;_e++)We=(Ke=(ve=C+(pe=_e/40)*Et)+pe*((ne=W+pe*ut)-ve))+pe*(ne+pe*(re+pe*pt-ne)-Ke),Ce=(qe=(je=H+pe*dt)+pe*((J=Q+pe*Bt)-je))+pe*(J+pe*(ue+pe*Xe-J)-qe),_e==0?(Ye=We,Fe=Ce,gt=We,et=Ce):(Ye=Math.min(Ye,We),Fe=Math.min(Fe,Ce),gt=Math.max(gt,We),et=Math.max(et,Ce));return new o(Math.round(Ye),Math.round(Fe),Math.round(gt-Ye),Math.round(et-Fe))},be=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,H,W=(C=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:H}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})($e.API),function(e){var t=function(l){var o,c,d,h,g,p,f,k,_,w;for(c=[],d=0,h=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;h>d;d+=4)(g=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(p=(g=((g=((g=((g=(g-(w=g%85))/85)-(_=g%85))/85)-(k=g%85))/85)-(f=g%85))/85)%85,c.push(p+33,f+33,k+33,_+33,w+33)):c.push(122);return function(x,j){for(var z=j;z>0;z--)x.pop()}(c,o.length),String.fromCharCode.apply(String,c)+"~>"},a=function(l){var o,c,d,h,g,p=String,f="length",k=255,_="charCodeAt",w="slice",x="replace";for(l[w](-2),l=l[w](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),d=[],h=0,g=(l+=o="uuuuu"[w](l[f]%5||5))[f];g>h;h+=5)c=52200625*(l[_](h)-33)+614125*(l[_](h+1)-33)+7225*(l[_](h+2)-33)+85*(l[_](h+3)-33)+(l[_](h+4)-33),d.push(k&c>>24,k&c>>16,k&c>>8,k&c);return function(j,z){for(var N=z;N>0;N--)j.pop()}(d,o[f]),p.fromCharCode.apply(p,d)},r=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var c="",d=0;d<l.length;d+=2)c+=String.fromCharCode("0x"+(l[d]+l[d+1]));return c},i=function(l){for(var o=new Uint8Array(l.length),c=l.length;c--;)o[c]=l.charCodeAt(c);return(o=Dp(o)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};e.processDataByFilters=function(l,o){var c=0,d=l||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=a(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=n(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=r(d),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}}($e.API),function(e){e.loadFile=function(t,a,r){return function(n,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=function(c,d,h){var g=new XMLHttpRequest,p=0,f=function(k){var _=k.length,w=[],x=String.fromCharCode;for(p=0;p<_;p+=1)w.push(x(255&k.charCodeAt(p)));return w.join("")};if(g.open("GET",c,!d),g.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(g.onload=function(){g.status===200?h(f(this.responseText)):h(void 0)}),g.send(null),d&&g.status===200)return f(g.responseText)}(n,i,l)}catch{}return o}(t,a,r)},e.loadImageFile=e.loadFile}($e.API),function(e){function t(){return(rt.html2canvas?Promise.resolve(rt.html2canvas):Wi(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function a(){return(rt.DOMPurify?Promise.resolve(rt.DOMPurify):Wi(()=>import("./purify.es-DfngIMfA.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var c=Ot(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},n=function(o,c){var d=document.createElement(o);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},i=function o(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||h.appendChild(o(g,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},l=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),d);return(h=h.setProgress(1,o,1,[o])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,c){return o.__proto__=c||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,c){return this.then(function(){switch(c=c||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),c){case"string":return this.then(a).then(function(d){return this.set({src:n("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var f=0;f<h.length;++f){var k=h[f],_=k.src.find(function(w){return w.format==="truetype"});_&&d.addFont(_.url,k.ref.name,k.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,d.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},l.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(r(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(o,c){return this.then(function(){var d=o in l.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},l.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function c(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(o=o||$e.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,c,d,h){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,c,d,h){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},l.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(h,g){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return d.updateProgress(null,h),p}).then(h,g).then(function(p){return d.updateProgress(1),p})})},l.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var h=this;o&&(o=o.bind(h)),c&&(c=c.bind(h));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:l.convert(Object.assign({},h),Promise.prototype),p=d.call(g,o,c);return l.convert(p,h.__proto__)},l.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},l.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},l.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return l.convert(c,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,$e.getPageSize=function(o,c,d){if(Ot(o)==="object"){var h=o;o=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var g,p=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var k,_=0,w=0;if(f.hasOwnProperty(p))_=f[p][1]/g,w=f[p][0]/g;else try{_=d[1],w=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",w>_&&(k=w,w=_,_=k);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",_>w&&(k=w,w=_,_=k)}return{width:w,height:_,unit:c,k:g,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(pg):null;var d=new l(c);return c.worker?d:d.from(o).doCallback()}}($e.API),$e.API.addJS=function(e){return O1=e,this.internal.events.subscribe("postPutResources",function(){Wh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+O1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wh!==void 0&&F1!==void 0&&this.internal.out("/Names <</JavaScript "+Wh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=a.outline.render().split(/\r\n/),i=0;i<n.length;i++){var l=n[i],o=r.exec(l);if(o!=null){var c=o[1];a.internal.newObjectDeferredBegin(c,!1)}a.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(i=0;i<d;i++){var g=a.internal.newObject();h.push(g);var p=a.internal.getPageInfo(i+1);a.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var f=a.internal.newObject();for(a.internal.write("<< /Names [ "),i=0;i<h.length;i++)a.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");a.internal.write(" ] >>","endobj"),t=a.internal.newObject(),a.internal.write("<< /Dests "+f+" 0 R"),a.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,n,i){var l={title:n,options:i,children:[]};return r==null&&(r=this.root),r.children.push(l),l},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var n=0;n<r.children.length;n++)this.genIds_r(r.children[n])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var l=r.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=a.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,n){for(var i=0;i<n.children.length;i++)r.count++,this.count_r(r,n.children[i]);return r.count}}])}($e.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(a,r,n,i,l,o){var c,d=this.decode.DCT_DECODE,h=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=l||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,c=function(g){for(var p,f=256*g.charCodeAt(4)+g.charCodeAt(5),k=g.length,_={width:0,height:0,numcomponents:1},w=4;w<k;w+=2){if(w+=f,t.indexOf(g.charCodeAt(w+1))!==-1){p=256*g.charCodeAt(w+5)+g.charCodeAt(w+6),_={width:256*g.charCodeAt(w+7)+g.charCodeAt(w+8),height:p,numcomponents:g.charCodeAt(w+9)};break}f=256*g.charCodeAt(w+2)+g.charCodeAt(w+3)}return _}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:a,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:r,alias:n}}return h}}($e.API),$e.API.processPNG=function(e,t,a,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var n,i=mA(e,{checkCrc:!0}),l=i.width,o=i.height,c=i.channels,d=i.palette,h=i.depth;n=d&&c===1?function(D){for(var I=D.width,R=D.height,y=D.data,A=D.palette,E=D.depth,L=!1,M=[],ee=[],ce=void 0,V=!1,le=0,ye=0;ye<A.length;ye++){var be=Tb(A[ye],4),C=be[0],H=be[1],W=be[2],Q=be[3];M.push(C,H,W),Q!=null&&(Q===0?(le++,ee.length<1&&ee.push(ye)):Q<255&&(V=!0))}if(V||le>1){L=!0,ee=void 0;var re=I*R;ce=new Uint8Array(re);for(var ue=new DataView(y.buffer),me=0;me<re;me++){var te=vg(ue,me,E),pe=Tb(A[te],4)[3];ce[me]=pe}}else le===0&&(ee=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:L?8:void 0,colorBytes:y,alphaBytes:ce,needSMask:L,palette:M,mask:ee}}(i):c===2||c===4?function(D){for(var I=D.data,R=D.width,y=D.height,A=D.channels,E=D.depth,L=A===2?"DeviceGray":"DeviceRGB",M=A-1,ee=R*y,ce=M,V=ee*ce,le=1*ee,ye=Math.ceil(V*E/8),be=Math.ceil(le*E/8),C=new Uint8Array(ye),H=new Uint8Array(be),W=new DataView(I.buffer),Q=new DataView(C.buffer),re=new DataView(H.buffer),ue=!1,me=0;me<ee;me++){for(var te=me*A,pe=0;pe<ce;pe++)W1(Q,vg(W,te+pe,E),me*ce+pe,E);var _e=vg(W,te+ce,E);_e<(1<<E)-1&&(ue=!0),W1(re,_e,1*me,E)}return{colorSpace:L,colorsPerPixel:M,sMaskBitsPerComponent:ue?E:void 0,colorBytes:C,alphaBytes:H,needSMask:ue}}(i):function(D){var I=D.data,R=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(y){for(var A=y.length,E=new Uint8Array(2*A),L=new DataView(E.buffer,E.byteOffset,E.byteLength),M=0;M<A;M++)L.setUint16(2*M,y[M],!1);return E}(I):I,needSMask:!1}}(i);var g,p,f,k=n,_=k.colorSpace,w=k.colorsPerPixel,x=k.sMaskBitsPerComponent,j=k.colorBytes,z=k.alphaBytes,N=k.needSMask,$=k.palette,q=k.mask,G=null;return r!==$e.API.image_compression.NONE&&typeof Dp=="function"?(G=function(D){var I;switch(D){case $e.API.image_compression.FAST:I=11;break;case $e.API.image_compression.MEDIUM:I=13;break;case $e.API.image_compression.SLOW:I=14;break;default:I=12}return I}(r),g=this.decode.FLATE_DECODE,p="/Predictor ".concat(G," /Colors ").concat(w," /BitsPerComponent ").concat(h," /Columns ").concat(l),e=$1(j,Math.ceil(l*w*h/8),w,h,r),N&&(f=$1(z,Math.ceil(l*x/8),1,x,r))):(g=void 0,p=void 0,e=j,N&&(f=z)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:a,data:e,index:t,filter:g,decodeParameters:p,transparency:q,palette:$,sMask:f,predictor:G,width:l,height:o,bitsPerComponent:h,sMaskBitsPerComponent:x,colorSpace:_}}},function(e){e.processGIF89A=function(t,a,r,n){var i=new IA(t),l=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:o},h=new yg(100).encode(d,100);return e.processJPEG.call(this,h,a,r,n)},e.processGIF87A=e.processGIF89A}($e.API),Rr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:r,blue:a,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rr.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(a){qt.log("bit decode error:"+a)}},Rr.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),a=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+8*n*4,o=0;o<8&&8*n+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}a!==0&&(this.pos+=4-a)}},Rr.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+2*n*4,o=i>>4,c=15&i,d=this.palette[o];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*n+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Rr.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=a*this.width*4+4*r;if(n<this.palette.length){var l=this.palette[n];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Rr.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,h=r*this.width*4+4*n;this.data[h]=c,this.data[h+1]=o,this.data[h+2]=l,this.data[h+3]=d}this.pos+=e}},Rr.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,c=(l>>5&a)/a*255|0,d=(l>>11)/t*255|0,h=n*this.width*4+4*i;this.data[h]=d,this.data[h+1]=c,this.data[h+2]=o,this.data[h+3]=255}this.pos+=e}},Rr.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*a;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=r,this.data[l+3]=255}this.pos+=this.width%4}},Rr.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*a;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=r,this.data[o+3]=l}},Rr.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,a,r,n){var i=new Rr(t,!1),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new yg(100).encode(c,100);return e.processJPEG.call(this,d,a,r,n)}}($e.API),G1.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,a,r,n){var i=new G1(t),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new yg(100).encode(c,100);return e.processJPEG.call(this,d,a,r,n)}}($e.API),$e.API.processRGBA=function(e,t,a){for(var r=e.data,n=r.length,i=new Uint8Array(n/4*3),l=new Uint8Array(n/4),o=0,c=0,d=0;d<n;d+=4){var h=r[d],g=r[d+1],p=r[d+2],f=r[d+3];i[o++]=h,i[o++]=g,i[o++]=p,l[c++]=f}var k=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:k,index:t,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},$e.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Po=$e.API,Jh=Po.getCharWidthsArray=function(e,t){var a,r,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:n.metadata.Unicode.widths,c=o.fof?o.fof:1,d=t.kerning?t.kerning:n.metadata.Unicode.kerning,h=d.fof?d.fof:1,g=t.doKerning!==!1,p=0,f=e.length,k=0,_=o[0]||c,w=[];for(a=0;a<f;a++)r=e.charCodeAt(a),typeof n.metadata.widthOfString=="function"?w.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(r))+l*(1e3/i)||0)/1e3):(p=g&&Ot(d[r])==="object"&&!isNaN(parseInt(d[r][k],10))?d[r][k]/h:0,w.push((o[r]||_)/c+p)),k=r;return w},R1=Po.getStringUnitWidth=function(e,t){var a=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Po.processArabic&&(e=Po.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,a,n)/a:Jh.apply(this,arguments).reduce(function(i,l){return i+l},0)},B1=function(e,t,a,r){for(var n=[],i=0,l=e.length,o=0;i!==l&&o+t[i]<a;)o+=t[i],i++;n.push(e.slice(0,i));var c=i;for(o=0;i!==l;)o+t[i]>r&&(n.push(e.slice(c,i)),o=0,c=i),o+=t[i],i++;return c!==i&&n.push(e.slice(c,i)),n},U1=function(e,t,a){a||(a={});var r,n,i,l,o,c,d,h=[],g=[h],p=a.textIndent||0,f=0,k=0,_=e.split(" "),w=Jh.apply(this,[" ",a])[0];if(c=a.lineIndent===-1?_[0].length+2:a.lineIndent||0){var x=Array(c).join(" "),j=[];_.map(function(N){(N=N.split(/\s*\n/)).length>1?j=j.concat(N.map(function($,q){return(q&&$.length?`
`:"")+$})):j.push(N[0])}),_=j,c=R1.apply(this,[x,a])}for(i=0,l=_.length;i<l;i++){var z=0;if(r=_[i],c&&r[0]==`
`&&(r=r.substr(1),z=1),p+f+(k=(n=Jh.apply(this,[r,a])).reduce(function(N,$){return N+$},0))>t||z){if(k>t){for(o=B1.apply(this,[r,n,t-(p+f),t]),h.push(o.shift()),h=[o.pop()];o.length;)g.push([o.shift()]);k=n.slice(r.length-(h[0]?h[0].length:0)).reduce(function(N,$){return N+$},0)}else h=[r];g.push(h),p=k+c,f=w}else h.push(r),p+=f+k,f=w}return d=c?function(N,$){return($?x:"")+N.join(" ")}:function(N){return N.join(" ")},g.map(d)},Po.splitTextToSize=function(e,t,a){var r,n=(a=a||{}).fontSize||this.internal.getFontSize(),i=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var g=this.internal.getFont(h.fontName,h.fontStyle),p="Unicode";return g.metadata[p]?{widths:g.metadata[p].widths||{0:1},kerning:g.metadata[p].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/n;i.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=a.lineIndent;var o,c,d=[];for(o=0,c=r.length;o<c;o++)d=d.concat(U1.apply(this,[r[o],l,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",a="klmnopqrstuvwxyz",r={},n={},i=0;i<16;i++)r[a[i]]=t[i],n[t[i]]=a[i];var l=function(p){return"0x"+parseInt(p,10).toString(16)},o=e.__fontmetrics__.compress=function(p){var f,k,_,w,x=["{"];for(var j in p){if(f=p[j],isNaN(parseInt(j,10))?k="'"+j+"'":(j=parseInt(j,10),k=(k=l(j).slice(2)).slice(0,-1)+n[k.slice(-1)]),typeof f=="number")f<0?(_=l(f).slice(3),w="-"):(_=l(f).slice(2),w=""),_=w+_.slice(0,-1)+n[_.slice(-1)];else{if(Ot(f)!=="object")throw new Error("Don't know what to do with value type "+Ot(f)+".");_=o(f)}x.push(k+_)}return x.push("}"),x.join("")},c=e.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,k,_,w,x={},j=1,z=x,N=[],$="",q="",G=p.length-1,D=1;D<G;D+=1)(w=p[D])=="'"?f?(_=f.join(""),f=void 0):f=[]:f?f.push(w):w=="{"?(N.push([z,_]),z={},_=void 0):w=="}"?((k=N.pop())[0][k[1]]=z,_=void 0,z=k[0]):w=="-"?j=-1:_===void 0?r.hasOwnProperty(w)?($+=r[w],_=parseInt($,16)*j,j=1,$=""):$+=w:r.hasOwnProperty(w)?(q+=r[w],z[_]=parseInt(q,16)*j,j=1,_=void 0,q=""):q+=w;return x},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(p){var f=p.font,k=g.Unicode[f.postScriptName];k&&(f.metadata.Unicode={},f.metadata.Unicode.widths=k.widths,f.metadata.Unicode.kerning=k.kerning);var _=h.Unicode[f.postScriptName];_&&(f.metadata.Unicode.encoding=_,f.encoding=_.codePages[0])}])}($e.API),function(e){var t=function(a){for(var r=a.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=a.charCodeAt(i);return n};e.API.events.push(["addFont",function(a){var r=void 0,n=a.font,i=a.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(r=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(mm(o)),l.metadata=e.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(n,r)}}])}($e),$e.API.addSvgAsImage=function(e,t,a,r,n,i,l,o){if(isNaN(t)||isNaN(a))throw qt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(n))throw qt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=n;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(rt.canvg?Promise.resolve(rt.canvg):Wi(()=>import("./index.es-5GB5sqpK.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(d,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){g.addImage(c.toDataURL("image/jpeg",1),t,a,r,n,l,o)})},$e.API.putTotalPages=function(e){var t,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),a=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var n=0;n<this.internal.pages[r].length;n++)this.internal.pages[r][n]=this.internal.pages[r][n].replace(t,a);return this},$e.API.viewerPreferences=function(e,t){var a;e=e||{},t=t||!1;var r,n,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],d=0,h=0,g=0;function p(k,_){var w,x=!1;for(w=0;w<k.length;w+=1)k[w]===_&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var f=o.length;for(g=0;g<f;g+=1)a[o[g]].value=a[o[g]].defaultValue,a[o[g]].explicitSet=!1}if(Ot(e)==="object"){for(n in e)if(i=e[n],p(o,n)&&i!==void 0){if(a[n].type==="boolean"&&typeof i=="boolean")a[n].value=i;else if(a[n].type==="name"&&p(a[n].valueSet,i))a[n].value=i;else if(a[n].type==="integer"&&Number.isInteger(i))a[n].value=i;else if(a[n].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(h=0;h<i[d].length;h+=1)typeof i[d][h]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}a[n].value="["+c.join(" ")+"]"}else a[n].value=a[n].defaultValue;a[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,_=[];for(k in a)a[k].explicitSet===!0&&(a[k].type==="name"?_.push("/"+k+" /"+a[k].value):_.push("/"+k+" "+a[k].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+l.length+o.length+n.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(n+i+l+o+c),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",t)),this}}($e.API),function(e){var t=e.API,a=t.pdfEscape16=function(i,l){for(var o,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],g=0,p=i.length;g<p;++g){if(o=l.metadata.characterToGlyph(i.charCodeAt(g)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(g),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return h.join("");o=o.toString(16),h.push(d[4-o.length],o)}return h.join("")},r=function(i){var l,o,c,d,h,g,p;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,p=(o=Object.keys(i).sort(function(f,k){return f-k})).length;g<p;g++)l=o[g],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(d=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,h=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var g=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",k=0;k<p.length;k++)f+=String.fromCharCode(p[k]);var _=d();h({data:f,addLength1:!0,objectId:_}),c("endobj");var w=d();h({data:r(o.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Oo(o.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var j=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Oo(o.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+w+" 0 R"),c("/BaseFont /"+Oo(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+j+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,h=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var g=o.metadata.rawData,p="",f=0;f<g.length;f++)p+=String.fromCharCode(g[f]);var k=d();h({data:p,addLength1:!0,objectId:k}),c("endobj");var _=d();h({data:r(o.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var w=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+k+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Oo(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Oo(o.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var n=function(i){var l,o=i.text||"",c=i.x,d=i.y,h=i.options||{},g=i.mutex||{},p=g.pdfEscape,f=g.activeFontKey,k=g.fonts,_=f,w="",x=0,j="",z=k[_].encoding;if(k[_].encoding!=="Identity-H")return{text:o,x:c,y:d,options:h,mutex:g};for(j=o,_=f,Array.isArray(o)&&(j=o[0]),x=0;x<j.length;x+=1)k[_].metadata.hasOwnProperty("cmap")&&(l=k[_].metadata.cmap.unicode.codeMap[j[x].charCodeAt(0)]),l||j[x].charCodeAt(0)<256&&k[_].metadata.hasOwnProperty("Unicode")?w+=j[x]:w+="";var N="";return parseInt(_.slice(1))<14||z==="WinAnsiEncoding"?N=p(w,_).split("").map(function($){return $.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(N=a(w,k[_])),g.isHex=!0,{text:N,x:c,y:d,options:h,mutex:g}};t.events.push(["postProcessText",function(i){var l=i.text||"",o=[],c={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?o.push([n(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):o.push(n(Object.assign({},c,{text:l[d]})).text);i.text=o}else i.text=n(Object.assign({},c,{text:l})).text}])}($e),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(a){return t.call(this),this.internal.vFS[a]!==void 0},e.addFileToVFS=function(a,r){return t.call(this),this.internal.vFS[a]=r,this},e.getFileFromVFS=function(a){return t.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}($e.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var n,i,l,o,c,d,h,g=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,z=0;this.__bidiEngine__={};var N=function(y){var A=y.charCodeAt(),E=A>>8,L=_[E];return L!==void 0?g[256*L+(255&A)]:E===252||E===253?"AL":x.test(E)?"L":E===8?"R":"N"},$=function(y){for(var A,E=0;E<y.length;E++){if((A=N(y.charAt(E)))==="L")return!1;if(A==="R")return!0}return!1},q=function(y,A,E,L){var M,ee,ce,V,le=A[L];switch(le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(le="AN");break;case"AL":j=!0,le="R";break;case"WS":case"BN":le="N";break;case"CS":L<1||L+1>=A.length||(M=E[L-1])!=="EN"&&M!=="AN"||(ee=A[L+1])!=="EN"&&ee!=="AN"?le="N":j&&(ee="AN"),le=ee===M?ee:"N";break;case"ES":le=(M=L>0?E[L-1]:"B")==="EN"&&L+1<A.length&&A[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&E[L-1]==="EN"){le="EN";break}if(j){le="N";break}for(ce=L+1,V=A.length;ce<V&&A[ce]==="ET";)ce++;le=ce<V&&A[ce]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(V=A.length,ce=L+1;ce<V&&A[ce]==="NSM";)ce++;if(ce<V){var ye=y[L],be=ye>=1425&&ye<=2303||ye===64286;if(M=A[ce],be&&(M==="R"||M==="AL")){le="R";break}}}le=L<1||(M=A[L-1])==="B"?"N":E[L-1];break;case"B":j=!1,n=!0,le=z;break;case"S":i=!0,le="N"}return le},G=function(y,A,E){var L=y.split("");return E&&D(L,E,{hiLevel:z}),L.reverse(),A&&A.reverse(),L.join("")},D=function(y,A,E){var L,M,ee,ce,V,le=-1,ye=y.length,be=0,C=[],H=z?f:p,W=[];for(j=!1,n=!1,i=!1,M=0;M<ye;M++)W[M]=N(y[M]);for(ee=0;ee<ye;ee++){if(V=be,C[ee]=q(y,W,C,ee),L=240&(be=H[V][k[C[ee]]]),be&=15,A[ee]=ce=H[be][5],L>0)if(L===16){for(M=le;M<ee;M++)A[M]=1;le=-1}else le=-1;if(H[be][6])le===-1&&(le=ee);else if(le>-1){for(M=le;M<ee;M++)A[M]=ce;le=-1}W[ee]==="B"&&(A[ee]=0),E.hiLevel|=ce}i&&function(Q,re,ue){for(var me=0;me<ue;me++)if(Q[me]==="S"){re[me]=z;for(var te=me-1;te>=0&&Q[te]==="WS";te--)re[te]=z}}(W,A,ye)},I=function(y,A,E,L,M){if(!(M.hiLevel<y)){if(y===1&&z===1&&!n)return A.reverse(),void(E&&E.reverse());for(var ee,ce,V,le,ye=A.length,be=0;be<ye;){if(L[be]>=y){for(V=be+1;V<ye&&L[V]>=y;)V++;for(le=be,ce=V-1;le<ce;le++,ce--)ee=A[le],A[le]=A[ce],A[ce]=ee,E&&(ee=E[le],E[le]=E[ce],E[ce]=ee);be=V}be++}}},R=function(y,A,E){var L=y.split(""),M={hiLevel:z};return E||(E=[]),D(L,E,M),function(ee,ce,V){if(V.hiLevel!==0&&h)for(var le,ye=0;ye<ee.length;ye++)ce[ye]===1&&(le=w.indexOf(ee[ye]))>=0&&(ee[ye]=w[le+1])}(L,E,M),I(2,L,A,E,M),I(1,L,A,E,M),L.join("")};return this.__bidiEngine__.doBidiReorder=function(y,A,E){if(function(M,ee){if(ee)for(var ce=0;ce<M.length;ce++)ee[ce]=ce;o===void 0&&(o=$(M)),d===void 0&&(d=$(M))}(y,A),l||!c||d)if(l&&c&&o^d)z=o?1:0,y=G(y,A,E);else if(!l&&c&&d)z=o?1:0,y=R(y,A,E),y=G(y,A);else if(!l||o||c||d){if(l&&!c&&o^d)y=G(y,A),o?(z=0,y=R(y,A,E)):(z=1,y=R(y,A,E),y=G(y,A));else if(l&&o&&!c&&d)z=1,y=R(y,A,E),y=G(y,A);else if(!l&&!c&&o^d){var L=h;o?(z=1,y=R(y,A,E),z=0,h=!1,y=R(y,A,E),h=L):(z=0,y=R(y,A,E),y=G(y,A),z=1,h=!1,y=R(y,A,E),h=L,y=G(y,A))}}else z=0,y=R(y,A,E);else z=o?1:0,y=R(y,A,E);return y},this.__bidiEngine__.setOptions=function(y){y&&(l=y.isInputVisual,c=y.isOutputVisual,o=y.isInputRtl,d=y.isOutputRtl,h=y.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var n=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,a.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var o=0;for(l=[],o=0;o<n.length;o+=1)Object.prototype.toString.call(n[o])==="[object Array]"?l.push([a.doBidiReorder(n[o][0]),n[o][1],n[o][2]]):l.push([a.doBidiReorder(n[o])]);r.text=l}else r.text=a.doBidiReorder(n);a.setOptions({isInputVisual:!0})}])}($e),$e.API.TTFFont=function(){function e(t){var a;if(this.rawData=t,a=this.contents=new el(t),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new GA(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new DA(this.contents),this.head=new FA(this),this.name=new $A(this),this.cmap=new cz(this),this.toUnicode={},this.hhea=new OA(this),this.maxp=new HA(this),this.hmtx=new VA(this),this.post=new BA(this),this.os2=new RA(this),this.loca=new JA(this),this.glyf=new KA(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,a,r,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,d;for(d=[],l=0,o=(c=this.bbox).length;l<o;l++)t=c[l],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),32768&(a=n>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var a;return((a=this.cmap.unicode)!=null?a.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*a},e.prototype.widthOfString=function(t,a,r){var n,i,l,o;for(l=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)n=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/a)||0;return l*(a/1e3)},e.prototype.lineHeight=function(t,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Xr,el=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var a,r;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var a,r,n;for(n=[],a=0,r=t.length;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push(this.writeByte(t.charCodeAt(a)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,a,r,n,i,l,o,c;return t=this.readByte(),a=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*a+1099511627776*r+4294967296*n+16777216*i+65536*l+256*o+c},e.prototype.writeLongLong=function(t){var a,r;return a=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var a,r;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a.push(this.readByte());return a},e.prototype.write=function(t){var a,r,n,i;for(i=[],r=0,n=t.length;r<n;r++)a=t[r],i.push(this.writeByte(a));return i},e}(),DA=function(){var e;function t(a){var r,n,i;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(a){var r,n,i,l,o,c,d,h,g,p,f,k,_;for(_ in f=Object.keys(a).length,c=Math.log(2),g=16*Math.floor(Math.log(f)/c),l=Math.floor(g/c),h=16*f-g,(n=new el).writeInt(this.scalarType),n.writeShort(f),n.writeShort(g),n.writeShort(l),n.writeShort(h),i=16*f,d=n.pos+i,o=null,k=[],a)for(p=a[_],n.writeString(_),n.writeInt(e(p)),n.writeInt(d),n.writeInt(p.length),k=k.concat(p),_==="head"&&(o=d),d+=p.length;d%4;)k.push(0),d++;return n.write(k),r=2981146554-e(n.data),n.pos=o+8,n.writeUInt32(r),n.data},e=function(a){var r,n,i,l;for(a=dz.call(a);a.length%4;)a.push(0);for(i=new el(a),n=0,r=0,l=a.length;r<l;r=r+=4)n+=i.readUInt32();return 4294967295&n},t}(),MA={}.hasOwnProperty,kn=function(e,t){for(var a in t)MA.call(t,a)&&(e[a]=t[a]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Xr=function(){function e(t){var a;this.file=t,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var FA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var a;return(a=new el).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(t),a.writeShort(this.glyphDataFormat),a.data},e}(),Z1=function(){function e(t,a){var r,n,i,l,o,c,d,h,g,p,f,k,_,w,x,j,z;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=a+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(f=t.readUInt16(),p=f/2,t.pos+=6,i=function(){var N,$;for($=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)$.push(t.readUInt16());return $}(),t.pos+=2,_=function(){var N,$;for($=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)$.push(t.readUInt16());return $}(),d=function(){var N,$;for($=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)$.push(t.readUInt16());return $}(),h=function(){var N,$;for($=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)$.push(t.readUInt16());return $}(),n=(this.length-t.pos+this.offset)/2,o=function(){var N,$;for($=[],c=N=0;0<=n?N<n:N>n;c=0<=n?++N:--N)$.push(t.readUInt16());return $}(),c=x=0,z=i.length;x<z;c=++x)for(w=i[c],r=j=k=_[c];k<=w?j<=w:j>=w;r=k<=w?++j:--j)h[c]===0?l=r+d[c]:(l=o[h[c]/2+(r-k)-(p-c)]||0)!==0&&(l+=d[c]),this.codeMap[r]=65535&l}t.pos=g}return e.encode=function(t,a){var r,n,i,l,o,c,d,h,g,p,f,k,_,w,x,j,z,N,$,q,G,D,I,R,y,A,E,L,M,ee,ce,V,le,ye,be,C,H,W,Q,re,ue,me,te,pe,_e,ve;switch(L=new el,l=Object.keys(t).sort(function(je,ne){return je-ne}),a){case"macroman":for(_=0,w=function(){var je=[];for(k=0;k<256;++k)je.push(0);return je}(),j={0:0},i={},M=0,le=l.length;M<le;M++)j[te=t[n=l[M]]]==null&&(j[te]=++_),i[n]={old:t[n],new:j[t[n]]},w[n]=j[t[n]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(w),{charMap:i,subtable:L.data,maxGlyphID:_+1};case"unicode":for(A=[],g=[],z=0,j={},r={},x=d=null,ee=0,ye=l.length;ee<ye;ee++)j[$=t[n=l[ee]]]==null&&(j[$]=++z),r[n]={old:$,new:j[$]},o=j[$]-n,x!=null&&o===d||(x&&g.push(x),A.push(n),d=o),x=n;for(x&&g.push(x),g.push(65535),A.push(65535),R=2*(I=A.length),D=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(D/2)/Math.LN2,G=2*I-D,c=[],q=[],f=[],k=ce=0,be=A.length;ce<be;k=++ce){if(y=A[k],h=g[k],y===65535){c.push(0),q.push(0);break}if(y-(E=r[y].new)>=32768)for(c.push(0),q.push(2*(f.length+I-k)),n=V=y;y<=h?V<=h:V>=h;n=y<=h?++V:--V)f.push(r[n].new);else c.push(E-y),q.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*I+2*f.length),L.writeUInt16(0),L.writeUInt16(R),L.writeUInt16(D),L.writeUInt16(p),L.writeUInt16(G),ue=0,C=g.length;ue<C;ue++)n=g[ue],L.writeUInt16(n);for(L.writeUInt16(0),me=0,H=A.length;me<H;me++)n=A[me],L.writeUInt16(n);for(pe=0,W=c.length;pe<W;pe++)o=c[pe],L.writeUInt16(o);for(_e=0,Q=q.length;_e<Q;_e++)N=q[_e],L.writeUInt16(N);for(ve=0,re=f.length;ve<re;ve++)_=f[ve],L.writeUInt16(_);return{charMap:r,subtable:L.data,maxGlyphID:z+1}}},e}(),cz=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="cmap",e.prototype.parse=function(t){var a,r,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)a=new Z1(t,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},e.encode=function(t,a){var r,n;return a==null&&(a="macroman"),r=Z1.encode(t,a),(n=new el).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},e}(),OA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),RA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var a,r;for(r=[],a=0;a<10;++a)r.push(t.readByte());return r}(),this.charRange=function(){var a,r;for(r=[],a=0;a<4;++a)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var a,r;for(r=[],a=0;a<2;a=++a)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),BA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="post",e.prototype.parse=function(t){var a,r,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)a=t.readByte(),n.push(this.names.push(t.readString(a)));return n;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 262144:return this.map=(function(){var l,o,c;for(c=[],i=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;i=0<=o?++l:--l)c.push(t.readUInt32());return c}).call(this)}},e}(),UA=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},$A=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="name",e.prototype.parse=function(t){var a,r,n,i,l,o,c,d,h,g,p;for(t.pos=this.offset,t.readShort(),a=t.readShort(),o=t.readShort(),r=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},i=h=0,g=r.length;h<g;i=++h)n=r[i],t.pos=n.offset,d=t.readString(n.length),l=new UA(d,n),c[p=n.nameID]==null&&(c[p]=[]),c[n.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),HA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),VA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="hmtx",e.prototype.parse=function(t){var a,r,n,i,l,o,c;for(t.pos=this.offset,this.metrics=[],a=0,o=this.file.hhea.numberOfMetrics;0<=o?a<o:a>o;a=0<=o?++a:--a)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],a=d=0;0<=n?d<n:d>n;a=0<=n?++d:--d)h.push(t.readInt16());return h}(),this.widths=(function(){var d,h,g,p;for(p=[],d=0,h=(g=this.metrics).length;d<h;d++)i=g[d],p.push(i.advance);return p}).call(this),r=this.widths[this.widths.length-1],c=[],a=l=0;0<=n?l<n:l>n;a=0<=n?++l:--l)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),dz=[].slice,KA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var a,r,n,i,l,o,c,d,h,g;return t in this.cache?this.cache[t]:(i=this.file.loca,a=this.file.contents,r=i.indexOf(t),(n=i.lengthOf(t))===0?this.cache[t]=null:(a.pos=this.offset+r,l=(o=new el(a.read(n))).readShort(),d=o.readShort(),g=o.readShort(),c=o.readShort(),h=o.readShort(),this.cache[t]=l===-1?new WA(o,d,g,c,h):new qA(o,l,d,g,c,h),this.cache[t]))},e.prototype.encode=function(t,a,r){var n,i,l,o,c;for(l=[],i=[],o=0,c=a.length;o<c;o++)n=t[a[o]],i.push(l.length),n&&(l=l.concat(n.encode(r)));return i.push(l.length),{table:l,offsets:i}},e}(),qA=function(){function e(t,a,r,n,i,l){this.raw=t,this.numberOfContours=a,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),WA=function(){function e(t,a,r,n,i){var l,o;for(this.raw=t,this.xMin=a,this.yMin=r,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return e.prototype.encode=function(){var t,a,r;for(a=new el(dz.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)a.pos=this.glyphOffsets[t];return a.data},e}(),JA=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kn(e,Xr),e.prototype.tag="loca",e.prototype.parse=function(t){var a,r;return t.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var n,i;for(i=[],r=0,n=this.length;r<n;r+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],r=0,n=this.length;r<n;r+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,a){for(var r=new Uint32Array(this.offsets.length),n=0,i=0,l=0;l<r.length;++l)if(r[l]=n,i<a.length&&a[i]==l){++i,r[l]=n;var o=this.offsets[l],c=this.offsets[l+1]-o;c>0&&(n+=c)}for(var d=new Array(4*r.length),h=0;h<r.length;++h)d[4*h+3]=255&r[h],d[4*h+2]=(65280&r[h])>>8,d[4*h+1]=(16711680&r[h])>>16,d[4*h]=(4278190080&r[h])>>24;return d},e}(),GA=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,a,r,n,i;for(a in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[a],t[a]=n[r];return t},e.prototype.glyphsFor=function(t){var a,r,n,i,l,o,c;for(n={},l=0,o=t.length;l<o;l++)n[i=t[l]]=this.font.glyf.glyphFor(i);for(i in a=[],n)(r=n[i])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(i in c=this.glyphsFor(a))r=c[i],n[i]=r;return n},e.prototype.encode=function(t,a){var r,n,i,l,o,c,d,h,g,p,f,k,_,w,x;for(n in r=cz.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),f={0:0},x=r.charMap)f[(c=x[n]).old]=c.new;for(k in p=r.maxGlyphID,l)k in f||(f[k]=p++);return h=function(j){var z,N;for(z in N={},j)N[j[z]]=z;return N}(f),g=Object.keys(h).sort(function(j,z){return j-z}),_=function(){var j,z,N;for(N=[],j=0,z=g.length;j<z;j++)o=g[j],N.push(h[o]);return N}(),i=this.font.glyf.encode(l,_,f),d=this.font.loca.encode(i.offsets,_),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},e}();$e.API.PDFObject=function(){var e;function t(){}return e=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},t.convert=function(a){var r,n,i,l;if(Array.isArray(a))return"["+function(){var o,c,d;for(d=[],o=0,c=a.length;o<c;o++)r=a[o],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+e(a.getUTCFullYear(),4)+e(a.getUTCMonth(),2)+e(a.getUTCDate(),2)+e(a.getUTCHours(),2)+e(a.getUTCMinutes(),2)+e(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(n in i=["<<"],a)l=a[n],i.push("/"+n+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+a},t}();const Te={primary:[0,51,153],secondary:[0,102,204],accent:[255,102,0],text:[51,51,51],textLight:[102,102,102],lightGray:[245,245,245],mediumGray:[204,204,204],darkGray:[102,102,102]};function ti(e,t,a){const r=e.internal.pageSize.getWidth();let n=10;return e.setFillColor(...Te.primary),e.rect(0,0,r,25,"F"),e.setFontSize(14),e.setFont("helvetica","bold"),e.setTextColor(255,255,255),e.text("ÉKM",15,12),e.setFontSize(8),e.setFont("helvetica","normal"),e.text("Építési és Közlekedési",15,17),e.text("Minisztérium",15,21),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(t,r-15,15,{align:"right"}),a&&(e.setFontSize(9),e.setFont("helvetica","normal"),e.text(a,r-15,21,{align:"right"})),n=30,e.setDrawColor(...Te.accent),e.setLineWidth(1.5),e.line(15,n,r-15,n),n+=8,e.setFontSize(10),e.setFont("helvetica","bold"),e.setTextColor(...Te.primary),e.text("Vasúti Hatósági Főosztály",15,n),n+=10,n}function si(e,t,a){const r=e.internal.pageSize.getWidth(),i=e.internal.pageSize.getHeight()-15;e.setDrawColor(...Te.mediumGray),e.setLineWidth(.3),e.line(15,i-5,r-15,i-5),e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(...Te.darkGray),e.text("Építési és Közlekedési Minisztérium | Vasúti Hatósági Főosztály",15,i);const o=`${t}. oldal / ${a}`;e.text(o,r-15,i,{align:"right"}),e.setFontSize(7);const c="1054 Budapest, Alkotmány utca 3.",d=`Generálva: ${new Date().toLocaleString("hu-HU")}`;e.text(c,15,i+4),e.text(d,r-15,i+4,{align:"right"})}function Vs(e,t,a,r){return e.setFillColor(...Te.lightGray),e.rect(r-2,a-5,e.internal.pageSize.getWidth()-2*r+4,10,"F"),e.setFontSize(11),e.setFont("helvetica","bold"),e.setTextColor(...Te.primary),e.text(t,r,a+2),a+12}function Wt(e,t,a,r,n,i){const o=e.internal.pageSize.getWidth()-2*r;e.setFontSize(9),e.setFont("helvetica","bold"),e.setTextColor(...Te.darkGray),e.text(t,r,n),e.setFont("helvetica","normal"),e.setTextColor(...Te.text);const c=r+e.getTextWidth(t)+3,d=o-e.getTextWidth(t)-3;if(a){const h=e.splitTextToSize(a,d);return e.text(h,c,n),n+h.length*5}return e.text("–",c,n),n+5}function Y1(e,t,a,r,n,i="info"){const l=e.internal.pageSize.getWidth(),o=n,c=l-n-o,h={info:{bg:[230,240,255],border:Te.secondary},warning:{bg:[255,240,230],border:Te.accent},success:{bg:[230,255,230],border:[0,170,0]}}[i];e.setFillColor(...h.bg),e.roundedRect(n,r,c,20,2,2,"F"),e.setDrawColor(...h.border),e.setLineWidth(.5),e.roundedRect(n,r,c,20,2,2,"S"),e.setFontSize(10),e.setFont("helvetica","bold"),e.setTextColor(...Te.primary),e.text(t,n+5,r+7),e.setFontSize(9),e.setFont("helvetica","normal"),e.setTextColor(...Te.text);const g=e.splitTextToSize(a,c-10);return e.text(g,n+5,r+13),r+22}function bg(e,t,a,r){return e.setDrawColor(...Te.darkGray),e.setLineWidth(.3),e.line(r,a,r+60,a),e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(...Te.darkGray),e.text(t,r,a+5),a+10}function ZA(e){const t=new $e;t.internal.pageSize.getWidth();const a=t.internal.pageSize.getHeight(),r=20;let n=0,i=1;const l=(g,p=30)=>g+p>a-30?(t.addPage(),i++,ti(t,"KÉRELEM LAP","V-044 - Vasúti járművezetők előzetes alkalmassági vizsgálata"),si(t,i,0),55):g;n=ti(t,"KÉRELEM LAP","V-044 - Vasúti járművezetők előzetes alkalmassági vizsgálata"),e.viharAzonosito&&(t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(...Te.primary),t.text("VIHAR azonosító:",r,n),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.text(e.viharAzonosito,r+40,n),n+=6),e.iktatoszam&&(t.setFont("helvetica","bold"),t.setTextColor(...Te.primary),t.text("Iktatószám:",r,n),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.text(e.iktatoszam,r+25,n),n+=6),n+=8,n=l(n,40),n=Vs(t,"A KÉRELEM TÁRGYA, AMELYBEN A HATÓSÁG DÖNTÉSÉT KÉREM",n,r),t.setFontSize(9),t.setTextColor(...Te.textLight),t.text('A kérelem tárgyát szíveskedjék "X"-el jelölni!',r,n),n+=8,Object.entries({elozetes_egeszsegi:"Előzetes egészségi alkalmassági vizsgálat",munkakorvaltozas_elotti:"Munkakörváltozás előtti",hat_honapon_tul_ismetelten:"Hat hónapon túl ismételten foglalkoztatott"}).forEach(([g,p])=>{const f=e.kerellemTargya===g;t.setFont("helvetica",f?"bold":"normal"),t.setTextColor(...f?Te.primary:Te.text),t.text(f?"[X]":"[ ]",r,n),t.text(p,r+8,n),n+=6}),n+=8,n=l(n,80),n=Vs(t,"1. A KÉRELMEZŐ (MUNKÁLTATÓ) ADATAI",n,r),n=Wt(t,"Cég neve:",e.kérelmező.cegNeve,r,n),n=Wt(t,"Címe (székhely):",e.kérelmező.cimSzekhely,r,n),e.kérelmező.cegjegyzekszam&&(n=Wt(t,"Cégjegyzékszám:",e.kérelmező.cegjegyzekszam,r,n)),e.kérelmező.kepviseloMeghatalmazottNeve&&(n=Wt(t,"Képviselő neve:",e.kérelmező.kepviseloMeghatalmazottNeve,r,n)),n=Wt(t,"Ügyintéző telefonszám:",e.kérelmező.ugyintezoTelefon,r,n),e.kérelmező.iktatoszam&&(n=Wt(t,"Iktatószám:",e.kérelmező.iktatoszam,r,n)),n+=10,n=l(n,100),n=Vs(t,"2. A MUNKAVÁLLALÓ (LEENDŐ) ADATAI",n,r),n=Wt(t,"Neve (születéskori neve):",e.munkavállaló.nev,r,n),n=Wt(t,"Születési hely, idő:",`${e.munkavállaló.szuletesiHely}, ${e.munkavállaló.szuletesiIdo}`,r,n),n=Wt(t,"Anyja neve:",e.munkavállaló.anyjaNeve,r,n),n=Wt(t,"TAJ-száma:",e.munkavállaló.tajSzam,r,n),n=Wt(t,"Címe (lakcím):",e.munkavállaló.lakcim,r,n),n=Wt(t,"Értesítési címe:",e.munkavállaló.ertesitesiCim,r,n),e.munkavállaló.vasutiJarmuvezIgazolvSzam&&(n=Wt(t,"Vasúti járművezetői igazolvány száma:",e.munkavállaló.vasutiJarmuvezIgazolvSzam,r,n)),n=Wt(t,"Munkakör/betöltendő munkakör:",e.munkavállaló.munkakorBetoltendoMunkakor,r,n),n+=8,n=l(n,30),t.setFontSize(8),t.setFont("helvetica","italic"),t.setTextColor(...Te.textLight),["Aláírásommal hozzájárulok megadott személyes adataimnak, a hivatal által,","jogszabályi felhatalmazás alapján való kezeléséhez és felhasználásához.","","Büntetőjogi felelősségem teljes tudatában kijelentem, hogy a fenti adatok","megfelelnek a valóságnak és minden szükséges információt rendelkezésre bocsátottam."].forEach(g=>{t.text(g,r,n),n+=4}),n+=4,n=Wt(t,"Dátum:",e.munkavallaloDatum,r,n),t.text(e.munkavallaloAlairas?"[X] Aláírva":"[ ] Nincs aláírva",r,n),n+=10,n=l(n,60),n=Vs(t,"3. A CSATOLT MELLÉKLETEK FELSOROLÁSA",n,r),t.setFontSize(9),t.setTextColor(...Te.textLight),t.text('Kérjük, a "☐" jelbe darabszámot írjon.',r,n),n+=8,[{nev:"Banki átutalási bizonylat a hatósági minősítés díjának megfizetéséről",eredeti:e.mellekletek.bankiAtutalasiBizonylatEredeti,masolat:e.mellekletek.bankiAtutalasiBizonylatMasolat},{nev:"Minősítést tartalmazó tanúsítvány",eredeti:e.mellekletek.minositestTartalmazoTanusitvanyEredeti,masolat:0},{nev:"Vasúti járművezetői igazolvány másolata (ha van)",eredeti:0,masolat:e.mellekletek.vasutiJarmuvezIgazolvMasolat}].forEach(g=>{t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.text(g.nev,r,n),n+=5,t.setFontSize(8),g.eredeti>0&&t.text(`Eredeti: ${g.eredeti} db`,r+5,n),g.masolat>0&&t.text(`Másolat: ${g.masolat} db`,r+35,n),n+=6,t.setFontSize(9)}),e.mellekletek.egyebDokumentumok.length>0&&(n+=4,t.setFont("helvetica","bold"),t.text("Egyéb:",r,n),n+=5,e.mellekletek.egyebDokumentumok.forEach(g=>{t.setFont("helvetica","normal"),t.text(`- ${g.nev}${g.leiras?` (${g.leiras})`:""}`,r+5,n),n+=5})),n+=4,t.setFont("helvetica","normal"),t.text(`Feltöltött fájlok száma: ${e.mellekletFajlok.length} db`,r,n),n+=10,n=l(n,25),n=Wt(t,"Dátum:",e.kerelmezoDatum,r,n),t.text(e.kérelmezőAlairas?"[X] PH. Aláírva":"[ ] Nincs aláírva",r,n),n+=10,e.dijfizetes&&(n=l(n,30),n=Vs(t,"DÍJFIZETÉSI INFORMÁCIÓ",n,r),n=Wt(t,"Díjbekérő szám:",e.dijfizetes.dijbekeroSzam,r,n),n=Wt(t,"Összeg:",`${e.dijfizetes.osszeg.toLocaleString("hu-HU")} Ft`,r,n),n=Wt(t,"Tranzakció azonosító:",e.dijfizetes.tranzakcioAzonosito,r,n)),si(t,i,0);const h=`V044_Kerelem_${e.munkavállaló.nev.replace(/\s+/g,"_")}_${Date.now()}.pdf`;t.save(h)}function YA({onComplete:e,onCancel:t}){var _,w,x,j,z;const[a,r]=B.useState("kerelem"),[n,i]=B.useState(null),[l,o]=B.useState(null),[c,d]=B.useState(""),[h,g]=B.useState(""),p=N=>{i(N),r("dijfizetes")},f=N=>{o(N),r("veglegesites")},k=async()=>{if(!n||!l)return;const N=`VIHAR-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`;g(N);try{ZA({...n,dijfizetes:l,viharAzonosito:N})}catch($){console.error("PDF generálási hiba:",$)}try{const $=await m6({viharAzonosito:N,kerelemAdatok:n,dokumentumTipus:"Kérelem",feladoNeve:n.munkavállaló.nev||"Ismeretlen"});if($.sikeres&&$.erkezteto_szam){const q=await f6({erkezteto_szam:$.erkezteto_szam,dokumentumTipus:"V-044 Kérelem"});if(q.sikeres&&q.iktatoszam)d(q.iktatoszam),r("sikeres"),setTimeout(()=>{e({...n,dijfizetes:l,iktatoszam:q.iktatoszam,viharAzonosito:N,statusz:"Formai és tartalmi vizsgálat",benyujtasDatum:new Date().toISOString()})},5e3);else throw new Error(q.hibauzenet||"Iktatás sikertelen")}else throw new Error($.hibauzenet||"Érkeztetés sikertelen")}catch($){console.error("EKEIDR hiba:",$),alert("EKEIDR érkeztetés sikertelen. Kérem próbálja újra később, vagy forduljon az ügyfélszolgálathoz."),r("veglegesites")}};if(a==="kerelem")return s.jsx(Yj,{modusz:"kitoltes",onSubmit:p,onCancel:t});if(a==="dijfizetes")return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-md transition-colors",children:[s.jsx(ei,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Vissza a listához"})]})}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-neutral-200",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Kérelem benyújtási folyamat"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-success-100 text-success-600 flex items-center justify-center",children:s.jsx(Pe,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Kérelem kitöltve"})]}),s.jsx("div",{className:"flex-1 h-1 bg-primary-200 mx-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 text-white flex items-center justify-center",children:s.jsx(Jl,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"Díjfizetés"})]}),s.jsx("div",{className:"flex-1 h-1 bg-neutral-200 mx-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-200 text-neutral-400 flex items-center justify-center",children:s.jsx(De,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm text-neutral-500",children:"Véglegesítés"})]}),s.jsx("div",{className:"flex-1 h-1 bg-neutral-200 mx-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-200 text-neutral-400 flex items-center justify-center",children:s.jsx(Ea,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm text-neutral-500",children:"Benyújtás"})]})]})]}),s.jsx(J6,{onBefejezve:(N,$,q)=>{f({dijbekeroSzam:$,osszeg:N,tranzakcioAzonosito:q||""})},onMegsem:()=>r("kerelem")})]});if(a==="veglegesites"){const N=["Személyazonosító okmány másolata","Lakcímet igazoló hatósági igazolvány másolata","Tanúsító szervezet által kiállított tanúsítvány"],$=(n==null?void 0:n.mellekletFajlok.length)||0,q=$<N.length,G=()=>{if(q){const D=N.length-$;if(!window.confirm(`Figyelem! A kötelező dokumentumok közül ${D} db hiányzik.

Kötelező mellékletek:
${N.map((R,y)=>`${y+1}. ${R}`).join(`
`)}

Feltöltött dokumentumok száma: ${$} db

Biztosan folytatja a benyújtást? A hiányzó dokumentumok miatt hiánypótlási felszólítás várható.`))return}k()};return s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-md transition-colors",children:[s.jsx(ei,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Vissza a listához"})]})}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-neutral-200",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Kérelem benyújtási folyamat"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-success-100 text-success-600 flex items-center justify-center",children:s.jsx(Pe,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Kitöltve"})]}),s.jsx("div",{className:"flex-1 h-1 bg-success-200 mx-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-success-100 text-success-600 flex items-center justify-center",children:s.jsx(Pe,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Befizetve"})]}),s.jsx("div",{className:"flex-1 h-1 bg-primary-200 mx-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 text-white flex items-center justify-center",children:s.jsx(De,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm font-medium text-neutral-900",children:"Véglegesítés"})]}),s.jsx("div",{className:"flex-1 h-1 bg-neutral-200 mx-4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-200 text-neutral-400 flex items-center justify-center",children:s.jsx(Ea,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-sm text-neutral-500",children:"Benyújtás"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-sm border border-neutral-200",children:[s.jsxs("h3",{className:"text-xl font-bold text-neutral-900 mb-6 flex items-center gap-2",children:[s.jsx(De,{className:"h-6 w-6 text-primary-600"}),"Kérelem véglegesítése és benyújtása"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-6",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-4",children:"Kérelem adatok:"}),s.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Kérelmező (munkáltató):"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:((_=n==null?void 0:n.kerelmező)==null?void 0:_.cegNeve)||"–"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Munkáltató székhely:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:((w=n==null?void 0:n.kerelmező)==null?void 0:w.cimSzekhely)||"–"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Munkavállaló neve:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:((x=n==null?void 0:n.munkavallaló)==null?void 0:x.nev)||"–"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Munkakör:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:((j=n==null?void 0:n.munkavallaló)==null?void 0:j.munkakorBetoltendoMunkakor)||"–"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Kérelem tárgya:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:(n==null?void 0:n.kerellemTargya)==="elozetes_egeszsegi"?"Előzetes egészségi alkalmassági":(n==null?void 0:n.kerellemTargya)==="munkakorvaltozas_elotti"?"Munkakörváltozás előtti":"Hat hónapon túl ismételten foglalkoztatott"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Feltöltött mellékletek:"}),s.jsxs("dd",{className:"font-medium text-neutral-900",children:[((z=n==null?void 0:n.mellekletFajlok)==null?void 0:z.length)||0," db"]})]})]})]}),q&&s.jsx("div",{className:"bg-warning-50 border-2 border-warning-300 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-warning-500 text-white flex items-center justify-center text-sm font-bold",children:"!"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-warning-900 mb-2",children:"Figyelem! Hiányoznak kötelező dokumentumok"}),s.jsx("p",{className:"text-sm text-warning-800 mb-3",children:"A kérelem benyújtható hiányos dokumentumokkal is, de várható hogy hiánypótlási felszólítást fog kapni az ügyintézőtől."}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"font-medium text-warning-900 mb-2",children:["Kötelező dokumentumok (",N.length," db):"]}),s.jsx("ul",{className:"space-y-1 list-disc list-inside text-warning-800",children:N.map((D,I)=>s.jsx("li",{children:D},I))}),s.jsxs("p",{className:"mt-3 font-medium text-warning-900",children:["Feltöltött dokumentumok: ",$," db"]})]})]})]})}),s.jsxs("div",{className:"bg-success-50 rounded-lg p-6",children:[s.jsxs("h4",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5 text-success-600"}),"Díjfizetés teljesítve"]}),s.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Díjbekérő száma:"}),s.jsx("dd",{className:"font-medium text-neutral-900",children:l==null?void 0:l.dijbekeroSzam})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-neutral-600",children:"Összeg:"}),s.jsxs("dd",{className:"font-medium text-success-700",children:[l==null?void 0:l.osszeg.toLocaleString()," Ft"]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("dt",{className:"text-neutral-600",children:"Tranzakció azonosító:"}),s.jsx("dd",{className:"font-mono text-xs font-medium text-neutral-900",children:l==null?void 0:l.tranzakcioAzonosito})]})]})]}),s.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-neutral-700",children:[s.jsx("strong",{children:"Nyilatkozat:"})," A kérelem benyújtásával kijelentem, hogy a megadott adatok a valóságnak megfelelnek, és tudomásul veszem, hogy valótlan adatszolgáltatás esetén a kérelmet elutasíthatják."]})}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>r("dijfizetes"),className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 font-medium",children:"Vissza"}),s.jsxs("button",{type:"button",onClick:G,className:"px-8 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-semibold flex items-center gap-2 shadow-md",children:[s.jsx(Ea,{className:"h-5 w-5"}),"Kérelem véglegesítése és benyújtása"]})]})]})]})]})}return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsx("div",{className:"bg-white rounded-lg p-8 shadow-lg border border-success-200",children:s.jsxs("div",{className:"text-center space-y-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-success-100",children:s.jsx(Pe,{className:"h-12 w-12 text-success-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Kérelem sikeresen benyújtva!"}),s.jsx("p",{className:"text-neutral-600",children:"A kérelme beérkezett a vasúti hatósághoz és érkeztetésre került."})]}),s.jsxs("div",{className:"bg-primary-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-primary-900 mb-2",children:"VIHAR azonosító:"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-primary-700",children:h})]}),s.jsxs("div",{className:"bg-success-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-success-900 mb-2",children:"EKEIDR iktatószám:"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-success-700",children:c}),s.jsx("p",{className:"text-xs text-neutral-600 mt-2",children:"Ezt az iktatószámot használja minden további kapcsolatfelvétel során."})]}),s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-6 text-left",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Mi történik ezután?"}),s.jsxs("ul",{className:"space-y-2 text-sm text-neutral-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-primary-600 font-bold",children:"1."}),s.jsx("span",{children:"Az ügyintéző megkezdi a kérelem formai és tartalmi vizsgálatát"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-primary-600 font-bold",children:"2."}),s.jsx("span",{children:"Értesítést kap, ha hiánypótlás vagy további dokumentum szükséges"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-primary-600 font-bold",children:"3."}),s.jsx("span",{children:"Az eljárás várható időtartama: 60 nap (sommás eljárás esetén 8 nap)"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-primary-600 font-bold",children:"4."}),s.jsx("span",{children:"A döntésről írásban értesítjük a megadott email címre"})]})]})]}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Az oldal 5 másodperc múlva automatikusan visszatér a főoldalra..."})]})})})}function XA({kerelemAdatok:e,ugyId:t,ugyAzonosito:a="",onBefejez:r,onHianypotlas:n}){const[i,l]=B.useState([]),[o,c]=B.useState({}),[d,h]=B.useState(""),[g,p]=B.useState(!1);B.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await nc.getUgytuekParameterErtekek("V-044"),x=Array.isArray(w.FORMAI_ELLENORZES_LISTA)?w.FORMAI_ELLENORZES_LISTA:[];l(x);const j={};x.forEach((z,N)=>{j[N]=!0}),c(j)}catch(w){console.error("Paraméterek betöltési hiba:",w),l(["Kérelem adatlap kitöltött","Kötelező mezők kitöltve","Személyes adatok egyértelműek","Munkáltatói adatok megadva","Mellékletek csatolva","Díjfizetés igazolása"]);const x={};for(let j=0;j<6;j++)x[j]=!0;c(x)}},k=(w,x)=>{c(j=>({...j,[w]:x}))},_=async w=>{const x=d?d.split(`
`).filter(z=>z.trim()):[],j={sikeres:w,hianyossagok:x,megjegyzesek:w?"Formai megfelelőség rendben.":"Formai hiányosságok.",ellenorzes_datuma:new Date().toISOString(),kovetkezo_lepes:w?"tartalmi_vizsgalat":"formai_hianypotlas"};if(t)try{await La.letrehoz({ugy_id:t,esemeny_tipus:"formai_vizsgalat",esemeny_leiras:w?"Formai megfelelőség vizsgálat: Megfelelő":`Formai megfelelőség vizsgálat: Hiányosságok (${x.length} db)`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:j})}catch(z){console.error("Esemény naplózási hiba:",z)}w?r(j):n()};return g?s.jsx(Xj,{kerelemAdatok:e,onVissza:()=>p(!1)}):s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"bg-accent-100 p-3 rounded-lg",children:s.jsx(lr,{className:"h-6 w-6 text-accent-700"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Formai Megfelelőség Vizsgálata"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"UCE-1799 | Funkció: F-0065"})]})]}),s.jsx("div",{className:"mb-6 pb-6 border-b border-neutral-200",children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Benyújtott kérelem adatlap"}),s.jsx("p",{className:"text-sm text-blue-800",children:"A formai ellenőrzéshez tekintse meg a benyújtott kérelem adatlapot és csatolt dokumentumokat."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium flex items-center gap-2 whitespace-nowrap",children:[s.jsx(ba,{className:"h-5 w-5"}),"Kérelem megtekintése"]})]})})}),s.jsxs("div",{className:"mb-6 pb-6 border-b border-neutral-200",children:[s.jsx("h3",{className:"font-semibold text-neutral-900 mb-3",children:"Csatolt dokumentumok"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Kérelem adatlap - V-044"}),s.jsx("p",{className:"text-xs text-neutral-600",children:"PDF dokumentum"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium",children:[s.jsx(ba,{className:"h-4 w-4"}),"Betekintés"]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Személyazonosító okmány"}),s.jsx("p",{className:"text-xs text-neutral-600",children:"PDF dokumentum"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium",children:[s.jsx(ba,{className:"h-4 w-4"}),"Betekintés"]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 border border-neutral-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(De,{className:"h-5 w-5 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Tanúsító szervezet tanúsítványa"}),s.jsx("p",{className:"text-xs text-neutral-600",children:"PDF dokumentum"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium",children:[s.jsx(ba,{className:"h-4 w-4"}),"Betekintés"]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 bg-primary-600 text-white rounded-md hover:bg-primary-700 text-sm font-medium",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]})]})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"border-l-4 border-l-accent-500 bg-accent-50 p-4",children:[s.jsx("h3",{className:"font-semibold text-neutral-900 mb-3",children:"Formai ellenőrzési lista (F-0065 paraméterek):"}),i.length>0?s.jsx("div",{className:"space-y-2",children:i.map((w,x)=>s.jsxs("label",{className:"flex items-center gap-3 text-sm cursor-pointer hover:bg-accent-100 p-2 rounded",children:[s.jsx("input",{type:"checkbox",id:`formai-checkbox-${x}`,checked:o[x]||!1,onChange:j=>k(x,j.target.checked),className:"w-4 h-4 text-accent-600 border-neutral-300 rounded focus:ring-accent-500"}),s.jsx("span",{className:"flex-1",children:w})]},x))}):s.jsx("p",{className:"text-sm text-neutral-600 italic",children:"Paraméterek betöltése..."})]})}),a&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5 text-blue-600"}),"Kapcsolódó dokumentumok"]}),s.jsx(lo,{ugyId:t,ugyAzonosito:a,workflowLepes:"Formai vizsgálat",readonly:!0})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>_(!0),className:"flex-1 bg-success-600 hover:bg-success-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Formai megfelelőség rendben"]}),s.jsxs("button",{onClick:()=>_(!1),className:"flex-1 bg-warning-600 hover:bg-warning-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[s.jsx(Jt,{className:"h-5 w-5"}),"Formai hiánypótlás szükséges"]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-xs text-neutral-600",children:[s.jsx("strong",{children:"Figyelem:"})," A formai hiánypótlásból csak EGYSZER lehet kérni az AKR szerint."]})})]})})}function QA({kerelemAdatok:e,ugyId:t,ugyAzonosito:a="",onBefejez:r,onHianypotlas:n,onTenyallas:i}){var y;const[l,o]=B.useState(null),[c,d]=B.useState(!1),[h,g]=B.useState([]),[p,f]=B.useState({}),[k,_]=B.useState(""),[w,x]=B.useState(""),[j,z]=B.useState(!1),[N,$]=B.useState(null);B.useEffect(()=>{q(),G(),D()},[]);const q=async()=>{try{const A=await nc.getUgytuekParameterErtekek("V-044"),E=Array.isArray(A.TARTALMI_ELLENORZES_LISTA)?A.TARTALMI_ELLENORZES_LISTA:[],L=A.VNY024_ELLENORZES_KOTELEZO===!0,M=[...E];L&&M.push("VNY024 vasútegészségügyi nyilvántartás ellenőrzése"),g(M);const ee={};M.forEach((ce,V)=>{ee[V]=!0}),f(ee)}catch(A){console.error("Paraméterek betöltési hiba:",A),g(["Vizsgálat típusa megfelelő","Munkakör adatok egyértelműek","Korábbi vizsgálatok összhangban","Egészségügyi igazolás érvényes","Tömeges kérelem esetén kollégák adatai helyesek"]);const E={};for(let L=0;L<5;L++)E[L]=!0;f(E)}},G=async()=>{d(!0);try{const A=await p6({nev:e.kerelemzoNev||e.teljesNev||"",szuletesi_datum:e.szuletesiDatum||"",anyja_neve:e.anyjaNeveNev||e.anyjaNeve||""});o(A)}catch(A){console.error("VNY024 lekérdezési hiba:",A),o({van_korabbi_vizsgalat:!1,osszes_vizsgalat_szam:0})}finally{d(!1)}},D=async()=>{try{const A=await La.hianypotlasElozmenyei(t,"tartalmi");A.osszes_hianypotlas>0&&A.legutolso_hianypotlas&&$({osszes_hianypotlas:A.osszes_hianypotlas,legutolso_datum:A.legutolso_hianypotlas.datum,legutolso_leiras:A.legutolso_hianypotlas.esemeny_leiras})}catch(A){console.error("Hiánypótlás előzmény lekérdezési hiba:",A)}},I=(A,E)=>{f(L=>({...L,[A]:E}))},R=async A=>{const E=k?k.split(`
`).filter(ee=>ee.trim()):[],L=A==="sommas_eljaras"||A==="teljes_eljaras",M={sikeres:L,vny024_adatok:l||void 0,hianyossagok:E,megjegyzesek:w||(L?"Tartalmi megfelelőség rendben.":"Tartalmi hiányosságok."),ellenorzes_datuma:new Date().toISOString(),kovetkezo_lepes:A};if(t)try{await La.letrehoz({ugy_id:t,esemeny_tipus:"tartalmi_vizsgalat",esemeny_leiras:L?"Tartalmi megfelelőség vizsgálat: Megfelelő":`Tartalmi megfelelőség vizsgálat: Hiányosságok (${E.length} db)`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:M})}catch(ee){console.error("Esemény naplózási hiba:",ee)}A==="tartalmi_hianypotlas"?n():A==="tenyallas_tisztazas"?i():r(M)};return j?s.jsx(Xj,{kerelemAdatok:e,onVissza:()=>z(!1)}):s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"bg-accent-100 p-3 rounded-lg",children:s.jsx(Df,{className:"h-6 w-6 text-accent-700"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Tartalmi Megfelelőség Vizsgálata"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"UCE-1794 | Funkció: F-0066, F-0090"})]})]}),N&&N.osszes_hianypotlas>0&&s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Jt,{className:"h-5 w-5 text-warning-700 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-warning-900 mb-2",children:"Előző tartalmi hiánypótlás információ"}),s.jsxs("div",{className:"text-sm text-warning-800 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Összes hiánypótlás:"})," ",N.osszes_hianypotlas," alkalom"]}),N.legutolso_datum&&s.jsxs("p",{children:[s.jsx("strong",{children:"Legutolsó hiánypótlás:"})," ",new Date(N.legutolso_datum).toLocaleString("hu-HU")]}),N.legutolso_leiras&&s.jsxs("p",{children:[s.jsx("strong",{children:"Leírás:"})," ",N.legutolso_leiras]})]})]})]})})}),s.jsx("div",{className:"mb-6 pb-6 border-b border-neutral-200",children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Benyújtott kérelem adatlap"}),s.jsx("p",{className:"text-sm text-blue-800",children:"A tartalmi ellenőrzéshez tekintse meg a benyújtott kérelem adatlapot és nyilvántartási adatokat."})]}),s.jsxs("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium flex items-center gap-2 whitespace-nowrap",children:[s.jsx(ba,{className:"h-5 w-5"}),"Kérelem megtekintése"]})]})})}),c?s.jsxs("div",{className:"text-center py-8 mb-6",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-600 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"VNY024 nyilvántartás lekérdezése..."})]}):s.jsxs(s.Fragment,{children:[l&&s.jsxs("div",{className:"mb-6 border-l-4 border-l-primary-500 bg-primary-50 p-4",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(Df,{className:"h-5 w-5 text-primary-700"}),"VNY024 Vasútegészségügyi Nyilvántartás (F-0090)"]}),l.van_korabbi_vizsgalat?s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Vizsgálatok száma:"}),s.jsx("span",{className:"ml-2 font-semibold",children:l.osszes_vizsgalat_szam})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Aktuális alkalmasság:"}),s.jsx("span",{className:"ml-2 font-semibold",children:l.aktualis_alkalmasság==="alkalmas"?"Alkalmas":l.aktualis_alkalmasság==="alkalmas_korlatozassal"?"Alkalmas korlátozással":"Nem alkalmas"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Érvényesség:"}),s.jsx("span",{className:"ml-2 font-semibold",children:l.ervenyesseg_statusz==="ervenyes"?"Érvényes":l.ervenyesseg_statusz==="lejaroban"?"Lejáróban":"Lejárt"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Utolsó vizsgálat:"}),s.jsx("span",{className:"ml-2 font-semibold",children:((y=l.utolso_vizsgalat)==null?void 0:y.vizsgalat_datuma)||"-"})]})]}),l.aktualis_korlatozasok&&l.aktualis_korlatozasok.length>0&&s.jsxs("div",{className:"bg-warning-50 border border-warning-200 p-3 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-warning-900 mb-1",children:"Korlátozások:"}),s.jsx("ul",{className:"list-disc list-inside space-y-1 text-warning-800",children:l.aktualis_korlatozasok.map((A,E)=>s.jsx("li",{children:A},E))})]})]}):s.jsx("p",{className:"text-sm text-neutral-600",children:"ℹ️ Nincs korábbi vasútegészségügyi vizsgálat a nyilvántartásban."})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"border-l-4 border-l-accent-500 bg-accent-50 p-4",children:[s.jsx("h3",{className:"font-semibold text-neutral-900 mb-3",children:"Tartalmi ellenőrzési szempontok (F-0066 paraméterek):"}),h.length>0?s.jsx("div",{className:"space-y-2",children:h.map((A,E)=>s.jsxs("label",{className:"flex items-center gap-3 text-sm cursor-pointer hover:bg-accent-100 p-2 rounded",children:[s.jsx("input",{type:"checkbox",id:`tartalmi-checkbox-${E}`,checked:p[E]||!1,onChange:L=>I(E,L.target.checked),className:"w-4 h-4 text-accent-600 border-neutral-300 rounded focus:ring-accent-500"}),s.jsx("span",{className:"flex-1",children:A})]},E))}):s.jsx("p",{className:"text-sm text-neutral-600 italic",children:"Paraméterek betöltése..."})]})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-700 mb-2 block",children:"Tartalmi hiányosságok (ha vannak):"}),s.jsx("textarea",{id:"tartalmi-hianyossagok",value:k,onChange:A=>_(A.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-accent-500 focus:border-accent-500",rows:3,placeholder:"Pl.: Előző vizsgálat igazolása hiányzik"}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Minden hiányt külön sorba írjon"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-700 mb-2 block",children:"Ügyintézői megjegyzés:"}),s.jsx("textarea",{id:"tartalmi-megjegyzes",value:w,onChange:A=>x(A.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-accent-500 focus:border-accent-500",rows:2,placeholder:"Tartalmi vizsgálat eredménye..."})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Következő lépés meghatározása"}),s.jsx("p",{className:"text-sm text-blue-800",children:"A tartalmi vizsgálat eredménye alapján válassza ki a megfelelő folytatást:"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>R("sommas_eljaras"),className:"w-full bg-success-600 hover:bg-success-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors text-left flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pe,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"Sommás eljárás (8 nap)"}),s.jsx("div",{className:"text-xs text-success-100 mt-0.5",children:"Minden rendben, nincs hiányosság"})]})]}),s.jsx("span",{className:"text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"→"})]}),s.jsxs("button",{onClick:()=>R("tartalmi_hianypotlas"),className:"w-full bg-warning-600 hover:bg-warning-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors text-left flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jt,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"Hiánypótlás kérése"}),s.jsx("div",{className:"text-xs text-warning-100 mt-0.5",children:"Tartalmi hiányosságok pótlása szükséges"})]})]}),s.jsx("span",{className:"text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"→"})]}),s.jsxs("button",{onClick:()=>R("tenyallas_tisztazas"),className:"w-full bg-primary-600 hover:bg-primary-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors text-left flex items-center justify-between group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Df,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:"Tényállás tisztázása → Teljes eljárás (60 nap)"}),s.jsx("div",{className:"text-xs text-primary-100 mt-0.5",children:"További szakmai vizsgálat, megkeresés, szakhatóság"})]})]}),s.jsx("span",{className:"text-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"→"})]})]})]}),a&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5 text-blue-600"}),"Kapcsolódó dokumentumok"]}),s.jsx(lo,{ugyId:t,ugyAzonosito:a,workflowLepes:"Tartalmi vizsgálat",readonly:!0})]})]})})}class eE{async ellenorizDijfizetes(t){if(console.log("FORRÁS SQL díjfizetés ellenőrzés:",t),await new Promise(d=>setTimeout(d,800)),!(Math.random()>.1))return{sikeres:!1,fizetve:!1,hibauzenet:"FORRÁS SQL rendszer átmenetileg nem elérhető. Próbálja meg később."};if(!(Math.random()>.3))return{sikeres:!0,fizetve:!1,statusz:"nem_fizetve"};const n=["átutalás","bankkártya","készpénz","csekk"],i=[5e3,1e4,15e3,2e4],l=n[Math.floor(Math.random()*n.length)],o=t.osszeg||i[Math.floor(Math.random()*i.length)],c=new Date;return c.setDate(c.getDate()-Math.floor(Math.random()*30)),{sikeres:!0,fizetve:!0,tranzakcio_azonosito:`TRX-${Date.now()}-${Math.floor(Math.random()*9999)}`,fizetes_datum:c.toISOString(),osszeg:o,fizetes_mod:l,statusz:"befizetve"}}async genralDijbekero(t){if(console.log("FORRÁS SQL díjbekérő generálás:",t),await new Promise(o=>setTimeout(o,600)),!(Math.random()>.05))return{sikeres:!1,hibauzenet:"Díjbekérő generálása sikertelen: érvénytelen ügyadatok."};const r=new Date().getFullYear(),n=Math.floor(Math.random()*999999)+1,i=`DÍJ-${r}-${n.toString().padStart(6,"0")}`,l=new Date;return l.setDate(l.getDate()+15),{sikeres:!0,dijbekero_szam:i,fizetesi_hatarido:l.toISOString(),kozponti_szamla_szam:"10032000-00299843-00000000",kozlemeny:`${t.ugy_azonosito} - ${i}`}}async szamitsDij(t){console.log("FORRÁS díj kalkuláció:",t),await new Promise(d=>setTimeout(d,300));const r={"V-044":1e4,"V-045":15e3,"V-046":8e3}[t.ugytipus]||1e4,n=t.sűrgősség==="sürgős"?1.5:t.sűrgősség==="kiemelt"?2:1,i=t.komplexitas==="komplex"?1.3:t.komplexitas==="normál"?1:.8,l=Math.round(r*n*i),o=0,c=l-o;return{sikeres:!0,osszeg:l,jogcim:`${t.ugytipus} ügytípus eljárási díja`,kedvezmeny:o,vegosszeg:c}}async lekerdezTortenet(t){console.log("FORRÁS díjfizetési történet:",t),await new Promise(n=>setTimeout(n,400));const a=Math.floor(Math.random()*4),r=[];for(let n=0;n<a;n++){const i=new Date;i.setDate(i.getDate()-Math.floor(Math.random()*60)),r.push({tranzakcio_id:`TRX-${Date.now()}-${n}`,datum:i.toISOString(),osszeg:Math.floor(Math.random()*2e4)+5e3,fizetes_mod:["átutalás","bankkártya"][Math.floor(Math.random()*2)],statusz:["befizetve","folyamatban"][Math.floor(Math.random()*2)]})}return{sikeres:!0,tranzakciok:r}}}const tE=new eE;class sE{async ugyVelemenyei(t){const{data:a,error:r}=await xe.from("velemenyek").select("*").eq("ugy_id",t).order("kikuldve",{ascending:!1});if(r)throw console.error("Hiba a vélemények lekérdezésekor:",r),r;return a||[]}async velemenyezesreKuld(t){const a=t.velemenyezok.map(i=>({ugy_id:t.ugy_id,dokumentum_tipus:t.dokumentum_tipus,dokumentum_verzio:t.dokumentum_verzio||1,velemenyezo_id:i.id,velemenyezo_szerepkor:i.szerepkor,statusz:"kiküldve",kikuldve:new Date().toISOString()})),{data:r,error:n}=await xe.from("velemenyek").insert(a).select();if(n)throw console.error("Hiba a véleményezésre küldéskor:",n),n;return r||[]}async velemenyezValaszol(t,a,r){const{data:n,error:i}=await xe.from("velemenyek").update({dontes:a,velemeny_szoveg:r,statusz:"válaszolt",valaszolt:new Date().toISOString()}).eq("id",t).select().single();if(i)throw console.error("Hiba a vélemény válaszoláskor:",i),i;return n}async elolvasva(t){const{data:a,error:r}=await xe.from("velemenyek").update({statusz:"elolvasva",elolvasva:new Date().toISOString()}).eq("id",t).select().single();if(r)throw console.error("Hiba a vélemény megjelöléskor:",r),r;return a}async ugyintezoErtekel(t,a,r){const{data:n,error:i}=await xe.from("velemenyek").update({ugyintezo_dontes:a,ugyintezo_indoklas:r,statusz:a==="figyelembe_veszem"?"elfogadva":"elutasítva",feldolgozva:new Date().toISOString()}).eq("id",t).select().single();if(i)throw console.error("Hiba a vélemény értékeléskor:",i),i;return n}async statisztika(t){const a=await this.ugyVelemenyei(t);return{osszes:a.length,kikuldve:a.filter(r=>r.statusz==="kiküldve").length,valaszolt:a.filter(r=>r.statusz==="válaszolt").length,elfogadva:a.filter(r=>r.statusz==="elfogadva").length,elutasitva:a.filter(r=>r.statusz==="elutasítva").length}}async sajatVelemenyek(t){const{data:a,error:r}=await xe.from("velemenyek").select("*").eq("velemenyezo_id",t).order("kikuldve",{ascending:!1});if(r)throw console.error("Hiba a saját vélemények lekérdezésekor:",r),r;return a||[]}async createVelemeny(t){const{data:a,error:r}=await xe.from("velemenyek").insert([{ugy_id:t.ugy_id,dokumentum_tipus:"döntési_javaslat",dokumentum_verzio:1,velemenyezo_id:t.velemenyezo_nev,velemenyezo_szerepkor:"vezető",statusz:t.jovahagyva?"elfogadva":"elutasítva",velemeny_szoveg:t.velemeny_szoveg,dontes:t.jovahagyva?"elfogadom":"elutasítom",kikuldve:t.datum,valaszolt:t.datum,feldolgozva:t.datum}]).select().single();if(r)throw console.error("Hiba a vezetői vélemény létrehozásakor:",r),r;return a}async getVelemenyek(t){const{data:a,error:r}=await xe.from("velemenyek").select("*").eq("ugy_id",t).order("valaszolt",{ascending:!1});return r?(console.error("Hiba a vélemények lekérdezésekor:",r),[]):(a||[]).map(n=>({...n,velemenyezo_nev:n.velemenyezo_id,jovahagyva:n.statusz==="elfogadva",modositasok_szuksegesek:n.dontes==="megjegyzéssel_visszaküldöm",tenyallas_tisztazas_szukseges:!1}))}async osszesVelemenyStatisztika(t){const a=await this.getVelemenyek(t),r=a.filter(o=>o.jovahagyva).length,n=a.filter(o=>!o.jovahagyva&&o.valaszolt).length,i=a.filter(o=>!o.valaszolt).length,l=a.length>0?Math.round(r/a.length*100):0;return{osszes_velemeny:a.length,jovahagyott:r,elutasitott:n,varako:i,konszenzus_szazalek:l}}}const Gh=new sE;function aE({ugyId:e,dokumentumTipus:t,dokumentumVerzio:a=1,onBezaras:r}){const[n,i]=B.useState("ugy_reszletek"),[l,o]=B.useState([]),[c,d]=B.useState(null),[h,g]=B.useState([]),[p,f]=B.useState([]),[k,_]=B.useState(!1),[w,x]=B.useState(null),[j,z]=B.useState({dontes:"",szoveg:""}),[N,$]=B.useState({});B.useEffect(()=>{G(),D(),q()},[e]);const q=async()=>{var L,M;try{const ee=await Gn.leker(e),ce={id:ee.id,ugyAzonosito:ee.ugy_azonosito,ugytuekKod:ee.ugytuek_kod,ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",statusz:ee.statusz,prioritas:ee.prioritas,ugyfelNev:((L=ee.workflow_adatok)==null?void 0:L.ugyfel_nev)||"Ismeretlen",ugyintezoNev:((M=ee.workflow_adatok)==null?void 0:M.ugyintezo_nev)||"",letrehozva:ee.created_at||new Date().toISOString(),hataridoDatum:ee.hatarido_datum,iktatoszam:ee.iktatoszam,workflow_fazis:ee.workflow_fazis,workflow_adatok:ee.workflow_adatok,dontesi_dokumentum:ee.dontesi_dokumentum,dontesi_datum:ee.dontesi_datum};d(ce)}catch(ee){console.error("Ügy betöltési hiba:",ee)}},G=async()=>{try{const L=await gu.osszesAktiv();o(L)}catch(L){console.error("Ügyintézők betöltési hiba:",L)}},D=async()=>{try{const L=await Gh.ugyVelemenyei(e);f(L)}catch(L){console.error("Vélemények betöltési hiba:",L)}},I=L=>{g(M=>M.includes(L)?M.filter(ee=>ee!==L):[...M,L])},R=async()=>{if(h.length===0){alert("Válasszon ki legalább egy véleményezőt!");return}_(!0);try{const L=h.map(M=>{const ee=l.find(ce=>ce.id===M);return{id:M,szerepkor:(ee==null?void 0:ee.szerepkor)==="vezető"?"vezető":"ügyintéző"}});await Gh.velemenyezesreKuld({ugy_id:e,dokumentum_tipus:t,dokumentum_verzio:a,velemenyezok:L}),alert(`Dokumentum sikeresen kiküldve ${h.length} véleményezőnek!`),g([]),D(),i("ertekeles")}catch(L){console.error("Véleményezésre küldés hiba:",L),alert("Hiba történt a véleményezésre küldés során!")}finally{_(!1)}},y=async()=>{if(!w||!j.dontes){alert("Kérjük válasszon döntést!");return}_(!0);try{await Gh.velemenyezValaszol(w.id,j.dontes,j.szoveg),alert("Vélemény sikeresen elküldve!"),x(null),z({dontes:"",szoveg:""}),D()}catch(L){console.error("Vélemény válaszolás hiba:",L),alert("Hiba történt a vélemény elküldése során!")}finally{_(!1)}},A=async()=>{const L=Object.entries(N);if(L.length===0){alert("Nincs értékelendő vélemény!");return}_(!0);try{for(const[M,{dontes:ee,indoklas:ce}]of L)ee&&await Gh.ugyintezoErtekel(M,ee,ce);alert("Vélemények értékelése befejezve!"),$({}),D(),r&&r()}catch(M){console.error("Vélemények értékelése hiba:",M),alert("Hiba történt a vélemények értékelése során!")}finally{_(!1)}},E=p.reduce((L,M)=>(L[M.statusz]=(L[M.statusz]||0)+1,L),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Véleményezési Workflow - ",t]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>i("ugy_reszletek"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="ugy_reszletek"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(ba,{className:"inline h-4 w-4 mr-1"}),"Ügy részletek"]}),s.jsx("button",{onClick:()=>i("kikuldés"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="kikuldés"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Kiküldés"}),s.jsx("button",{onClick:()=>i("valaszolas"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="valaszolas"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Válaszolás"}),s.jsx("button",{onClick:()=>i("ertekeles"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="ertekeles"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Értékelés"})]})]}),p.length>0&&s.jsx(se,{className:"bg-blue-50 border-blue-200",children:s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bt,{className:"w-5 h-5 text-blue-600"}),s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Kiküldve: ",E.kiküldve||0]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qr,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("span",{className:"text-sm font-medium text-yellow-900",children:["Válaszolt: ",E.válaszolt||0]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"text-sm font-medium text-green-900",children:["Elfogadva: ",E.elfogadva||0]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qs,{className:"w-5 h-5 text-red-600"}),s.jsxs("span",{className:"text-sm font-medium text-red-900",children:["Elutasítva: ",E.elutasítva||0]})]})]})}),n==="ugy_reszletek"&&s.jsx("div",{children:c?s.jsx(M6,{ugy:c}):s.jsx(se,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(bt,{className:"h-8 w-8 text-neutral-400 mx-auto mb-2 animate-spin"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Ügy adatok betöltése..."})]})})}),n==="kikuldés"&&s.jsxs(se,{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Véleményezők kiválasztása"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:"Fontos:"})," A szakértők külső közreműködők, akik NEM lépnek be a rendszerbe. A véleményeket email vagy papír alapon kéri be tőlük, majd ",s.jsx("strong",{children:"manuálisan rögzíti"})," itt a rendszerben."]})}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Belső véleményezők (automatikus értesítés):"}),l.map(L=>s.jsxs("label",{className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:h.includes(L.id),onChange:()=>I(L.id),className:"w-4 h-4 text-blue-600"}),s.jsx(os,{className:"w-5 h-5 text-gray-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:L.nev}),s.jsxs("div",{className:"text-sm text-gray-500",children:[L.szerepkor," - ",L.email]})]}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${L.szerepkor==="vezető"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:L.szerepkor})]},L.id))]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[h.length," véleményező kiválasztva"]}),s.jsxs("button",{onClick:R,disabled:k||h.length===0,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Ea,{className:"w-4 h-4"}),"Véleményezésre küld"]})]})]}),n==="valaszolas"&&s.jsxs(se,{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Vélemény rögzítése"}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-sm text-amber-900",children:[s.jsx("strong",{children:"Manuális rögzítés:"})," A külső szakértőktől emailben vagy papíron beérkezett véleményeket itt rögzítheti a rendszerbe. A belső véleményezők (vezetők, ügyintézők) közvetlenül a rendszerben adják meg véleményüket."]})}),w?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"font-medium mb-2",children:w.dokumentum_tipus}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Verzió: ",w.dokumentum_verzio]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Döntés *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"dontes",value:"elfogadom",checked:j.dontes==="elfogadom",onChange:L=>z({...j,dontes:L.target.value}),className:"text-green-600"}),s.jsx(Pe,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Elfogadom"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"dontes",value:"elutasítom",checked:j.dontes==="elutasítom",onChange:L=>z({...j,dontes:L.target.value}),className:"text-red-600"}),s.jsx(Qs,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:"font-medium",children:"Elutasítom, módosítást kérek"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"dontes",value:"megjegyzéssel_visszaküldöm",checked:j.dontes==="megjegyzéssel_visszaküldöm",onChange:L=>z({...j,dontes:L.target.value}),className:"text-yellow-600"}),s.jsx(qr,{className:"w-5 h-5 text-yellow-600"}),s.jsx("span",{className:"font-medium",children:"Megjegyzéssel visszaküldöm"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vélemény / Megjegyzés"}),s.jsx("textarea",{value:j.szoveg,onChange:L=>z({...j,szoveg:L.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Írja be véleményét, megjegyzéseit..."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{x(null),z({dontes:"",szoveg:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Mégse"}),s.jsx("button",{onClick:y,disabled:k||!j.dontes,className:"flex-1 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Vélemény elküldése"})]})]}):s.jsxs("div",{className:"space-y-2",children:[p.filter(L=>L.statusz==="kiküldve"||L.statusz==="elolvasva").map(L=>s.jsxs("button",{onClick:()=>x(L),className:"w-full text-left p-4 border rounded-lg hover:bg-gray-50",children:[s.jsx("div",{className:"font-medium",children:L.dokumentum_tipus}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Kiküldve: ",new Date(L.kikuldve||"").toLocaleString("hu-HU")]})]},L.id)),p.filter(L=>L.statusz==="kiküldve"||L.statusz==="elolvasva").length===0&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nincs véleményezésre váró dokumentum"})]})]}),n==="ertekeles"&&s.jsxs(se,{children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Beérkezett vélemények értékelése"}),s.jsxs("div",{className:"space-y-4",children:[p.filter(L=>L.statusz==="válaszolt").map(L=>{var ee,ce,V,le;const M=l.find(ye=>ye.id===L.velemenyezo_id);return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(M==null?void 0:M.nev)||"Ismeretlen"}),s.jsxs("div",{className:"text-sm text-gray-500",children:[L.velemenyezo_szerepkor," - ",new Date(L.valaszolt||"").toLocaleString("hu-HU")]})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${L.dontes==="elfogadom"?"bg-green-100 text-green-700":L.dontes==="elutasítom"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:L.dontes==="elfogadom"?"Elfogadta":L.dontes==="elutasítom"?"Elutasította":"Megjegyzéssel"})]}),L.velemeny_szoveg&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700",children:L.velemeny_szoveg})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ügyintézői döntés"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("label",{className:"flex-1 flex items-center justify-center gap-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"radio",name:`ertekeles-${L.id}`,value:"figyelembe_veszem",checked:((ee=N[L.id])==null?void 0:ee.dontes)==="figyelembe_veszem",onChange:()=>$({...N,[L.id]:{...N[L.id],dontes:"figyelembe_veszem"}}),className:"text-green-600"}),s.jsx(_d,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Figyelembe veszem"})]}),s.jsxs("label",{className:"flex-1 flex items-center justify-center gap-2 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"radio",name:`ertekeles-${L.id}`,value:"nem_veszem_figyelembe",checked:((ce=N[L.id])==null?void 0:ce.dontes)==="nem_veszem_figyelembe",onChange:()=>$({...N,[L.id]:{...N[L.id],dontes:"nem_veszem_figyelembe"}}),className:"text-red-600"}),s.jsx(es,{className:"w-4 h-4 text-red-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Nem veszem figyelembe"})]})]})]}),((V=N[L.id])==null?void 0:V.dontes)==="nem_veszem_figyelembe"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Indoklás (miért nem veszi figyelembe?)"}),s.jsx("textarea",{value:((le=N[L.id])==null?void 0:le.indoklas)||"",onChange:ye=>$({...N,[L.id]:{...N[L.id],indoklas:ye.target.value}}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Adja meg az indoklást..."})]})]})]},L.id)}),p.filter(L=>L.statusz==="válaszolt").length===0&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nincs értékelésre váró vélemény"}),p.filter(L=>L.statusz==="válaszolt").length>0&&s.jsx("button",{onClick:A,disabled:k||Object.keys(N).length===0,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:"Vélemények értékelése befejezve"})]})]})]})}function rE(e){const t=new $e,a=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight(),n=20,i=20;let l=0,o=1;const c=1,d=(w,x=30)=>{if(w+x>r-30){t.addPage(),o++;const j=e.jogiForma==="határozat"?"HATÁROZAT":e.jogiForma==="vegzes"?"VÉGZÉS":"IGAZOLÁS";return ti(t,j,"Vasútegészségügyi alkalmassági vizsgálat"),si(t,o,c),55}return w},h=e.jogiForma==="határozat"?"HATÁROZAT":e.jogiForma==="vegzes"?"VÉGZÉS":"IGAZOLÁS";l=ti(t,h,"Vasútegészségügyi alkalmassági vizsgálat"),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(...Te.primary),t.text("Ügy azonosító:",n,l),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.text(e.ugyAzonosito,n+35,l),l+=6,e.iktatatlanSzam&&(t.setFont("helvetica","bold"),t.setTextColor(...Te.primary),t.text("Iktatószám:",n,l),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.text(e.iktatatlanSzam,n+35,l),l+=6),l+=6,l=d(l,30),l=Vs(t,"CÍMZETT",l,n),l=Wt(t,"Kérelmező neve:",e.kerelemzoNev,n,l),l+=8,l=d(l,40),l=Vs(t,"DÖNTÉS",l,n),l=Wt(t,"Döntés típusa:",{engedelyezes:"Engedélyezés",elutasitas:"Elutasítás",visszakuldes:"Visszaküldés"}[e.dontesTipusa],n,l),l=Wt(t,"Jogi forma:",e.jogiForma.toUpperCase(),n,l),l+=8,l=d(l,50),l=Vs(t,"INDOKOLÁS",l,n),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.splitTextToSize(e.indoklas,a-n-i).forEach(w=>{l=d(l,6),t.text(w,n,l),l+=5}),l+=8,l=d(l,35),l=Vs(t,"DÍJFIZETÉS ELLENŐRZÉS",l,n);const f=e.dijfizetesEllenorizve?e.dijfizetesOk?"✓ Rendezve":"✗ Hiányzik":"Ellenőrzés alatt";l=Wt(t,"Státusz:",f,n,l),l+=8,e.nyilvantartasFrissitendo&&(l=d(l,30),l=Y1(t,"NYILVÁNTARTÁS FRISSÍTÉS","A döntés után a VNY024 Vasútegészségügyi nyilvántartás frissítésre kerül.",l,n,"info"),l+=5),e.tovabbiFeladatok&&e.tovabbiFeladatok.trim()&&(l=d(l,40),l=Vs(t,"TOVÁBBI FELADATOK",l,n),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.splitTextToSize(e.tovabbiFeladatok,a-n-i).forEach(x=>{l=d(l,6),t.text(x,n,l),l+=5}),l+=8),e.expediciosAdatok&&(l=d(l,50),l=Vs(t,"EXPEDÍCIÓS ADATOK",l,n),l=Wt(t,"Címzettek:",e.expediciosAdatok.cimzettek,n,l),l=Wt(t,"Küldési mód:",e.expediciosAdatok.kuldesiMod,n,l),l=Wt(t,"Példányszám:",e.expediciosAdatok.peldanyszam.toString(),n,l),e.expediciosAdatok.megjegyzesek&&(l=Wt(t,"Megjegyzések:",e.expediciosAdatok.megjegyzesek,n,l)),l+=8),(e.jogiForma==="határozat"||e.jogiForma==="vegzes")&&(l=d(l,35),l=Y1(t,"JOGORVOSLATI LEHETŐSÉG","Jelen döntés ellen 15 napon belül az Építési és Közlekedési Minisztérium címére benyújtott fellebbezéssel lehet élni.",l,n,"warning"),l+=5),l=d(l,50),l+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(...Te.primary),t.text("Kelt:",n,l),t.setFont("helvetica","normal"),t.setTextColor(...Te.text),t.text(e.datum||new Date().toLocaleDateString("hu-HU"),n+15,l),l+=15,e.ugyintezoNev?l=bg(t,`${e.ugyintezoNev} - VHF Ügyintéző`,l,n):l=bg(t,"VHF Ügyintéző",l,n),l+=10,l=bg(t,"Vezető - Kiadmányozó",l,a-i-60),si(t,1,1);const _=`${e.jogiForma==="határozat"?"Határozat":e.jogiForma==="vegzes"?"Vegzes":"Igazolas"}_${e.ugyAzonosito}_${new Date().getTime()}.pdf`;t.save(_)}function nE(e){const t=new $e,a=t.internal.pageSize.getWidth(),r=20;let n=0,i=1;const l=1;if(n=ti(t,"VÉGZÉS",e.alcim||""),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Iktatószám:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.iktatoszam||e.ugy.ugyAzonosito,r+30,n),n+=6,t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Ügyintéző:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.ugyintezoNev,r+30,n),n+=12,e.tartalom.forEach(o=>{if(n=Vs(t,o.szekcio,n,r),o.mezok&&o.mezok.forEach(c=>{t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(Te.darkGray),t.text(c.cimke,r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const d=t.getTextWidth(c.cimke),h=t.splitTextToSize(c.ertek,a-r*2-d-5);t.text(h,r+d+3,n),n+=h.length*5}),o.szabad_szoveg){t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const c=t.splitTextToSize(o.szabad_szoveg,a-r*2);t.text(c,r,n),n+=c.length*5+8}}),e.jogorvoslat){n+=5,n=Vs(t,"JOGORVOSLATI LEHETŐSÉG",n,r),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const c=t.splitTextToSize("Ezen végzés ellen fellebbezéssel lehet élni. A fellebbezést a végzés kézhezvételétől számított 15 napon belül, az elsőfokú hatóságnál kell benyújtani. A fellebbezést az illetékes másodfokon eljáró hatóság (Építési és Közlekedési Minisztérium) bírálja el.",a-r*2);t.text(c,r,n),n+=c.length*5+10}return e.alairas&&(n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Kelt:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.alairas.datum,r+15,n),n+=15,t.setDrawColor(Te.darkGray),t.setLineWidth(.3),t.line(r,n,r+60,n),n+=5,t.setFontSize(9),t.text(e.alairas.nev,r,n),n+=4,t.text(e.alairas.beosztas,r,n)),si(t,i,l),t}function iE(e){const t=new $e,a=t.internal.pageSize.getWidth(),r=20;let n=0,i=1;const l=1;n=ti(t,"HATÁROZAT",e.alcim||""),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Iktatószám:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.iktatoszam||e.ugy.ugyAzonosito,r+30,n),n+=6,t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Ügyfél:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.ugyfelNev,r+30,n),n+=12,n=Vs(t,"RENDELKEZŐ RÉSZ",n,r),e.tartalom.forEach(d=>{if(d.szekcio!=="RENDELKEZŐ RÉSZ"&&(n=Vs(t,d.szekcio,n,r)),d.mezok&&d.mezok.forEach(h=>{t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(Te.darkGray),t.text(h.cimke,r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const g=t.getTextWidth(h.cimke),p=t.splitTextToSize(h.ertek,a-r*2-g-5);t.text(p,r+g+3,n),n+=p.length*5}),d.szabad_szoveg){t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const h=t.splitTextToSize(d.szabad_szoveg,a-r*2);t.text(h,r,n),n+=h.length*5+8}}),n+=5,n=Vs(t,"JOGORVOSLATI TÁJÉKOZTATÁS",n,r),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const c=t.splitTextToSize("Ezen határozat ellen fellebbezéssel lehet élni. A fellebbezést a határozat kézhezvételétől számított 15 napon belül, az elsőfokú hatóságnál kell benyújtani. A fellebbezést az illetékes másodfokon eljáró hatóság (Építési és Közlekedési Minisztérium) bírálja el.",a-r*2);return t.text(c,r,n),n+=c.length*5+10,e.alairas&&(n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Kelt:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.alairas.datum,r+15,n),n+=15,t.setDrawColor(Te.darkGray),t.setLineWidth(.3),t.line(r,n,r+60,n),n+=5,t.setFontSize(9),t.text(e.alairas.nev,r,n),n+=4,t.text(e.alairas.beosztas,r,n)),si(t,i,l),t}function lE(e){const t=new $e,a=t.internal.pageSize.getWidth(),r=20;let n=0,i=1;const l=1;return n=ti(t,"IGAZOLÁS",e.alcim||""),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Iktatószám:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.iktatoszam||e.ugy.ugyAzonosito,r+30,n),n+=12,e.tartalom.forEach(o=>{if(o.szekcio&&(n=Vs(t,o.szekcio,n,r)),o.mezok&&o.mezok.forEach(c=>{t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(Te.darkGray),t.text(c.cimke,r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const d=t.getTextWidth(c.cimke),h=t.splitTextToSize(c.ertek,a-r*2-d-5);t.text(h,r+d+3,n),n+=h.length*5}),o.szabad_szoveg){t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const c=t.splitTextToSize(o.szabad_szoveg,a-r*2);t.text(c,r,n),n+=c.length*5+8}}),e.alairas&&(n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Kelt:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.alairas.datum,r+15,n),n+=15,t.setDrawColor(Te.darkGray),t.setLineWidth(.3),t.line(r,n,r+60,n),n+=5,t.setFontSize(9),t.text(e.alairas.nev,r,n),n+=4,t.text(e.alairas.beosztas,r,n)),si(t,i,l),t}function oE(e){const t=new $e,a=t.internal.pageSize.getWidth(),r=20;let n=0,i=1;const l=1;return n=ti(t,"TÁJÉKOZTATÁS",e.alcim||""),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Iktatószám:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.iktatoszam||e.ugy.ugyAzonosito,r+30,n),n+=6,t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Címzett:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.ugyfelNev,r+30,n),n+=12,e.tartalom.forEach(o=>{if(o.szekcio&&(n=Vs(t,o.szekcio,n,r)),o.mezok&&o.mezok.forEach(c=>{t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(Te.darkGray),t.text(c.cimke,r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const d=t.getTextWidth(c.cimke),h=t.splitTextToSize(c.ertek,a-r*2-d-5);t.text(h,r+d+3,n),n+=h.length*5}),o.szabad_szoveg){t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const c=t.splitTextToSize(o.szabad_szoveg,a-r*2);t.text(c,r,n),n+=c.length*5+8}}),e.alairas&&(n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Kelt:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.alairas.datum,r+15,n),n+=15,t.setDrawColor(Te.darkGray),t.setLineWidth(.3),t.line(r,n,r+60,n),n+=5,t.setFontSize(9),t.text(e.alairas.nev,r,n),n+=4,t.text(e.alairas.beosztas,r,n)),si(t,i,l),t}function cE(e){var c;const t=new $e,a=t.internal.pageSize.getWidth(),r=20;let n=0,i=1;const l=1;n=ti(t,"HIRDETMÉNY",e.alcim||""),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Iktatószám:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text(e.ugy.iktatoszam||e.ugy.ugyAzonosito,r+30,n),n+=6,t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Közzététel dátuma:",r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const o=((c=e.alairas)==null?void 0:c.datum)||new Date().toISOString().split("T")[0];return t.text(o,r+50,n),n+=15,e.tartalom.forEach(d=>{if(d.szekcio&&(n=Vs(t,d.szekcio,n,r)),d.mezok&&d.mezok.forEach(h=>{t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.darkGray),t.text(h.cimke,r,n),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const g=t.getTextWidth(h.cimke),p=t.splitTextToSize(h.ertek,a-r*2-g-5);t.text(p,r+g+3,n),n+=p.length*6}),d.szabad_szoveg){t.setFontSize(11),t.setFont("helvetica","normal"),t.setTextColor(Te.text);const h=t.splitTextToSize(d.szabad_szoveg,a-r*2);t.text(h,r,n),n+=h.length*6+10}}),n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(Te.primary),t.text("Kiadó:",r,n),n+=6,t.setFont("helvetica","normal"),t.setTextColor(Te.text),t.text("Építési és Közlekedési Minisztérium",r,n),n+=5,t.text("Vasúti Hatósági Főosztály",r,n),si(t,i,l),t}const Pl={határozat_engedelyezes:{cim:"HATÁROZAT",bevezeto:"Az Építési és Közlekedési Minisztérium Vasúti Hatósági Főosztálya a {ugyfel_nev} által {datum} napján benyújtott, vasúti járművezető előzetes egészségügyi alkalmassági vizsgálata tárgyában az alábbi határozatot hozza:",rendelkezo:`A kérelmező vasúti járművezető előzetes egészségügyi alkalmassági vizsgálata alapján ALKALMAS.

A jelen határozat alapján a kérelmező jogosult a vasúti járművezetői tevékenység megkezdésére, a VNY024 vasútegészségügyi nyilvántartásban rögzített feltételek mellett.

Az alkalmassági igazolás érvényessége: {ervenyesseg_datum}`,jogorvoslat:`Jelen határozat ellen a közléstől számított 15 napon belül az Építési és Közlekedési Minisztériumhoz címzett, de a Vasúti Hatósági Főosztályhoz benyújtandó fellebbezésnek van helye.

A fellebbezés benyújtásának a határozat végrehajtására halasztó hatálya nincs.`},határozat_elutasitas:{cim:"HATÁROZAT",bevezeto:"Az Építési és Közlekedési Minisztérium Vasúti Hatósági Főosztálya a {ugyfel_nev} által {datum} napján benyújtott, vasúti járművezető előzetes egészségügyi alkalmassági vizsgálata tárgyában az alábbi határozatot hozza:",rendelkezo:"A kérelmet ELUTASÍTOM.",jogorvoslat:`Jelen határozat ellen a közléstől számított 15 napon belül az Építési és Közlekedési Minisztériumhoz címzett, de a Vasúti Hatósági Főosztályhoz benyújtandó fellebbezésnek van helye.

A fellebbezés benyújtásának a határozat végrehajtására halasztó hatálya nincs.`},vegzes_hianypotlas:{cim:"VÉGZÉS",bevezeto:"Az Építési és Közlekedési Minisztérium Vasúti Hatósági Főosztálya a {ugyfel_nev} által {datum} napján benyújtott kérelem tárgyában az alábbi végzést hozza:",rendelkezo:`Felhívom a kérelmezőt, hogy a hiányzó dokumentumokat és adatokat a jelen végzés kézhezvételétől számított 15 napon belül pótolja.

Hiánypótlandó elemek:
{hianyzik_lista}

A hiánypótlás elmaradása esetén az eljárás megszüntetésre kerül.`,jogorvoslat:"Jelen végzés ellen jogorvoslatnak nincs helye, de az ügyet érdemben eldöntő határozat ellen lehet fellebbezést benyújtani."},vegzes_elutasitas:{cim:"VÉGZÉS",bevezeto:"Az Építési és Közlekedési Minisztérium Vasúti Hatósági Főosztálya a {ugyfel_nev} által {datum} napján benyújtott kérelem tárgyában az alábbi végzést hozza:",rendelkezo:"A kérelmet ELUTASÍTOM és az eljárást MEGSZÜNTETEM.",jogorvoslat:"Jelen végzés ellen a közléstől számított 8 napon belül az Építési és Közlekedési Minisztériumhoz címzett, de a Vasúti Hatósági Főosztályhoz benyújtandó fellebbezésnek van helye."},igazolas:{cim:"IGAZOLÁS",bevezeto:"Az Építési és Közlekedési Minisztérium Vasúti Hatósági Főosztálya igazolja, hogy {ugyfel_nev} részére lefolytatott vasúti járművezető előzetes egészségügyi alkalmassági vizsgálat eredményeként az alábbi megállapítást tesszük:",rendelkezo:`A vizsgált személy ALKALMAS vasúti járművezetői munkakör betöltésére.

Érvényesség: {ervenyesseg_datum}
Nyilvántartási szám: VNY024/{nyilv_szam}

Az igazolás a VNY024 vasútegészségügyi nyilvántartásban rögzített feltételek mellett érvényes.`,jogorvoslat:""},tajekoztatas:{cim:"TÁJÉKOZTATÁS",bevezeto:"Az Építési és Közlekedési Minisztérium Vasúti Hatósági Főosztálya tájékoztatja {ugyfel_nev}-t az alábbi határozatról/végzésről:",rendelkezo:`{targy}

{reszletek}`,jogorvoslat:""}};function dE({ugy:e,jogiForma:t,dontesTipusa:a,indoklas:r,onMentes:n,onVissza:i}){const[l,o]=B.useState(!0),[c,d]=B.useState(()=>{let f=Pl.határozat_engedelyezes;t==="határozat"?f=a==="engedelyezes"?Pl.határozat_engedelyezes:Pl.határozat_elutasitas:t==="vegzes"?f=a==="elutasitas"?Pl.vegzes_elutasitas:Pl.vegzes_hianypotlas:t==="igazolas"?f=Pl.igazolas:t==="tajekoztatas"&&(f=Pl.tajekoztatas);const k=new Date().toLocaleDateString("hu-HU"),_=new Date(Date.now()+365*24*60*60*1e3).toLocaleDateString("hu-HU"),w=f.bevezeto.replace("{ugyfel_nev}",e.ugyfelNev||"N/A").replace("{datum}",k),x=f.rendelkezo.replace("{ervenyesseg_datum}",_).replace("{nyilv_szam}",e.ugyAzonosito);return{jogi_forma:t,cim:f.cim,bevezeto_szoveg:w,rendelkezo_resz:x,indoklas:r||`A döntés az alábbi indokok alapján született:

${r}`,jogorvoslat:f.jogorvoslat,alairo_nev:"Dr. Kovács István",alairo_beosztas:"főosztályvezető",kelt_helyszin:"Budapest",mentve:!1}}),h=()=>{const f={...c,mentve:!0};d(f),o(!1),n(f)},g=()=>{const f={ugy:e,dontes_tipusa:a,indoklas:c.indoklas,alairo:{nev:c.alairo_nev,beosztas:c.alairo_beosztas},kelt:{helyszin:c.kelt_helyszin,datum:new Date().toLocaleDateString("hu-HU")},egyedi_szoveg:{bevezeto:c.bevezeto_szoveg,rendelkezo:c.rendelkezo_resz,jogorvoslat:c.jogorvoslat}};try{t==="határozat"?iE(f):t==="vegzes"?nE(f):t==="igazolas"?lE(f):t==="tajekoztatas"?oE(f):t==="hirdetmeny"&&cE(f)}catch(k){console.error("PDF generálási hiba:",k),alert("Hiba történt a PDF generálása során!")}},p={határozat:"Határozat",vegzes:"Végzés",igazolas:"Igazolás",tajekoztatas:"Tájékoztatás",hirdetmeny:"Hirdetmény"}[t];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(se,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),p," tervezet szerkesztése"]}),s.jsxs("div",{className:"flex gap-2",children:[!l&&s.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 flex items-center gap-2",children:[s.jsx(zj,{className:"h-4 w-4"}),"Szerkesztés"]}),s.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",disabled:!c.mentve,children:[s.jsx(ys,{className:"h-4 w-4"}),"PDF letöltés"]})]})]}),l?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Dokumentum címe"}),s.jsx("input",{type:"text",value:c.cim,onChange:f=>d({...c,cim:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Bevezető szöveg"}),s.jsx("textarea",{value:c.bevezeto_szoveg,onChange:f=>d({...c,bevezeto_szoveg:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Rendelkező rész"}),s.jsx("textarea",{value:c.rendelkezo_resz,onChange:f=>d({...c,rendelkezo_resz:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 font-semibold",rows:6})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Indokolás"}),s.jsx("textarea",{value:c.indoklas,onChange:f=>d({...c,indoklas:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:8})]}),c.jogorvoslat&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Jogorvoslati tájékoztatás"}),s.jsx("textarea",{value:c.jogorvoslat,onChange:f=>d({...c,jogorvoslat:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Aláíró neve"}),s.jsx("input",{type:"text",value:c.alairo_nev,onChange:f=>d({...c,alairo_nev:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Aláíró beosztása"}),s.jsx("input",{type:"text",value:c.alairo_beosztas,onChange:f=>d({...c,alairo_beosztas:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Kelt helyszíne"}),s.jsx("input",{type:"text",value:c.kelt_helyszin,onChange:f=>d({...c,kelt_helyszin:f.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:i,className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Vissza"}),s.jsxs("button",{onClick:h,className:"px-6 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5"}),"Tervezet mentése"]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-6 bg-white border-2 border-neutral-300 rounded-lg",children:[s.jsx("div",{className:"text-center mb-6",children:s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:c.cim})}),s.jsxs("div",{className:"space-y-4 text-neutral-800",children:[s.jsx("p",{className:"text-justify",children:c.bevezeto_szoveg}),s.jsx("div",{className:"my-6 p-4 bg-neutral-50 border-l-4 border-primary-600",children:s.jsx("p",{className:"font-semibold whitespace-pre-line",children:c.rendelkezo_resz})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-semibold",children:"Indokolás:"}),s.jsx("p",{className:"text-justify whitespace-pre-line",children:c.indoklas})]}),c.jogorvoslat&&s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsx("p",{className:"font-semibold",children:"Jogorvoslat:"}),s.jsx("p",{className:"text-justify",children:c.jogorvoslat})]}),s.jsxs("div",{className:"mt-8 text-right",children:[s.jsxs("p",{children:[c.kelt_helyszin,", ",new Date().toLocaleDateString("hu-HU")]}),s.jsx("p",{className:"mt-4 font-semibold",children:c.alairo_nev}),s.jsx("p",{className:"text-sm",children:c.alairo_beosztas})]})]})]}),s.jsx("div",{className:"flex justify-end gap-3",children:s.jsx("button",{onClick:i,className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Vissza a javaslathoz"})})]})]}),c.mentve&&s.jsxs("div",{className:"p-4 bg-success-50 border border-success-200 rounded-lg flex items-center gap-3",children:[s.jsx(ba,{className:"h-5 w-5 text-success-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-success-900",children:"Tervezet elmentve"}),s.jsx("p",{className:"text-sm text-success-700",children:"A dokumentum tervezet sikeresen mentésre került. Letöltheti PDF formátumban, vagy továbbküldheti véleményezésre."})]})]})]})}const X1=[{típus:"megkeresés",név:"Megkeresés",leírás:"Más hatóság vagy szervezet megkeresése",icon:De},{típus:"szakhatósági_állásfoglalás",név:"Szakhatósági állásfoglalás",leírás:"Szakhatóság állásfoglalásának kérése",icon:hu},{típus:"ügyfél_nyilatkozat",név:"Ügyfél nyilatkozat",leírás:"Ügyfél írásbeli nyilatkozattétele",icon:Wx},{típus:"tanú_meghallgatás",név:"Tanú meghallgatás",leírás:"Tanúk meghallgatása jegyzőkönyv készítésével",icon:Ca},{típus:"szemle",név:"Szemle lefolytatása",leírás:"Helyszíni szemle jegyzőkönyv készítésével",icon:Km},{típus:"irat_bemutatás",név:"Irat bemutatás",leírás:"Iratok, dokumentumok bemutatásának kérése",icon:ba},{típus:"szakértői_vélemény",név:"Szakértői vélemény",leírás:"Szakértő kirendelése és vélemény bekérése",icon:hu},{típus:"tárgyalás",név:"Tárgyalás",leírás:"Tárgyalás megtartása jegyzőkönyv készítésével",icon:Ca},{típus:"hiánypótlás",név:"Hiánypótlás kérése",leírás:"Hiányzó dokumentumok vagy információk pótlása",icon:Ut},{típus:"egyedi",név:"Egyedi cselekmény",leírás:"Egyedi eljárási cselekmény",icon:Ec}];function uE({ugy:e,onBefejez:t,onMegse:a}){const[r,n]=B.useState([]),[i,l]=B.useState(null),[o,c]=B.useState(""),[d,h]=B.useState(!1),[g,p]=B.useState(!1),f=()=>{l({id:`UC-${Date.now()}`,datum:new Date().toISOString().split("T")[0],statusz:"folyamatban"})},k=async()=>{if(i&&i.tipus&&i.megnevezes&&i.leiras){const N=i;n([...r,N]);try{await La.letrehoz({ugy_id:e.id,esemeny_tipus:"tenyallas_tisztazas_cselekmeny",esemeny_leiras:`Új tényállás tisztázó cselekmény: ${N.tipus} - ${N.megnevezes}`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:N})}catch($){console.error("Esemény naplózási hiba:",$)}l(null)}else alert("Kérjük, töltse ki az összes kötelező mezőt!")},_=(N,$)=>{n(r.map(q=>q.id===N?{...q,statusz:$}:q))},w=N=>{confirm("Biztosan törli ezt a cselekményt?")&&n(r.filter($=>$.id!==N))},x=async()=>{const N=r.filter($=>$.statusz==="befejezett").length;if(N===0||!o){alert("Legalább egy befejezett cselekmény és összefoglaló szükséges!");return}h(!0);try{await La.letrehoz({ugy_id:e.id,esemeny_tipus:"tenyallas_tisztazas_osszegzes",esemeny_leiras:`Tényállás tisztázása befejezve: ${N} cselekmény végrehajtva`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:{cselekmenyek:r,befejezettek_szama:N,osszefoglalo:o,tovabbi_cselekmenyek:g}}),g||await xe.from("ugyek").update({statusz:"folyamatban",workflow_fazis:"donteshozatal_elozes",updated_at:new Date().toISOString()}).eq("id",e.id),t({vegzett_cselekmenyek:r,osszefoglalo:o,dokumentumok:r.flatMap($=>$.dokumentumok||[]),tovabb_cselekmenyek_szuksegesek:g,befejezve:!g})}catch($){console.error("Tényállás tisztázás befejezési hiba:",$),alert("Hiba történt a mentés során. Próbálja újra!")}finally{h(!1)}},j=r.filter(N=>N.statusz==="befejezett").length,z=r.filter(N=>N.statusz==="folyamatban").length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900",children:"Tényállás tisztázása (F-0102)"}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"UC-0306 - Rugalmas workflow"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"text-center px-4 py-2 bg-success-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-success-900",children:j}),s.jsx("p",{className:"text-xs text-success-700",children:"Befejezett"})]}),s.jsxs("div",{className:"text-center px-4 py-2 bg-warning-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-warning-900",children:z}),s.jsx("p",{className:"text-xs text-warning-700",children:"Folyamatban"})]})]})]}),s.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-4 mb-4",children:s.jsxs("p",{className:"text-sm text-accent-900",children:[s.jsx("strong",{children:"Rugalmas workflow:"})," Válasszon ki egy vagy több eljárási cselekményt, amelyek szükségesek a tényállás tisztázásához. A cselekmények bármilyen sorrendben végrehajthatók."]})})]}),!i&&s.jsx(se,{className:"bg-white",children:s.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-dashed border-neutral-300 text-neutral-600 rounded-lg hover:border-primary-400 hover:text-primary-600 transition-colors",children:[s.jsx(rl,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Új eljárási cselekmény hozzáadása"})]})}),i&&s.jsxs(se,{className:"bg-white border-2 border-primary-200",children:[s.jsx("h4",{className:"text-md font-bold text-neutral-900 mb-4",children:"Új eljárási cselekmény"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Cselekmény típusa *"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:X1.map(N=>{const $=N.icon;return s.jsxs("button",{onClick:()=>l({...i,tipus:N.típus,megnevezes:N.név}),className:`p-3 rounded-lg border-2 transition-all text-left ${i.tipus===N.típus?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx($,{className:`h-5 w-5 mb-2 ${i.tipus===N.típus?"text-primary-600":"text-neutral-400"}`}),s.jsx("p",{className:"text-xs font-semibold text-neutral-900",children:N.név}),s.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:N.leírás})]},N.típus)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Cselekmény megnevezése *"}),s.jsx("input",{type:"text",value:i.megnevezes||"",onChange:N=>l({...i,megnevezes:N.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Pl.: Dr. Nagy Péter szakértő kirendelése"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Részletes leírás *"}),s.jsx("textarea",{value:i.leiras||"",onChange:N=>l({...i,leiras:N.target.value}),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4,placeholder:"Adja meg a cselekmény részletes leírását..."})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:()=>l(null),className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Mégse"}),s.jsxs("button",{onClick:k,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Cselekmény hozzáadása"]})]})]})]}),r.length>0&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h4",{className:"text-md font-bold text-neutral-900 mb-4",children:["Eljárási cselekmények (",r.length,")"]}),s.jsx("div",{className:"space-y-3",children:r.map(N=>{const $=X1.find(G=>G.típus===N.tipus),q=($==null?void 0:$.icon)||De;return s.jsx("div",{className:`p-4 rounded-lg border-2 ${N.statusz==="befejezett"?"border-success-200 bg-success-50":"border-neutral-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx(q,{className:`h-5 w-5 mt-0.5 ${N.statusz==="befejezett"?"text-success-600":"text-neutral-600"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h5",{className:"font-semibold text-neutral-900",children:N.megnevezes}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${N.statusz==="befejezett"?"bg-success-600 text-white":"bg-warning-100 text-warning-800"}`,children:N.statusz==="befejezett"?"Befejezett":"Folyamatban"})]}),s.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:N.leiras}),s.jsxs("p",{className:"text-xs text-neutral-500",children:["Dátum: ",N.datum]})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[N.statusz==="folyamatban"&&s.jsxs("button",{onClick:()=>_(N.id,"befejezett"),className:"px-3 py-1 bg-success-600 text-white text-sm rounded-md hover:bg-success-700 flex items-center gap-1",children:[s.jsx(Pe,{className:"h-4 w-4"}),"Befejezés"]}),s.jsxs("button",{onClick:()=>w(N.id),className:"px-3 py-1 border border-error-300 text-error-600 text-sm rounded-md hover:bg-error-50 flex items-center gap-1",children:[s.jsx(b0,{className:"h-4 w-4"}),"Törlés"]})]})]})},N.id)})})]}),r.length>0&&s.jsxs(se,{className:"bg-white",children:[s.jsx("h4",{className:"text-md font-bold text-neutral-900 mb-4",children:"Tényállás tisztázás összefoglalása"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Összefoglaló értékelés *"}),s.jsx("textarea",{value:o,onChange:N=>c(N.target.value),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:6,placeholder:"Összefoglalja a tényállás tisztázása során szerzett információkat és megállapításokat..."})]}),j===0&&s.jsxs("div",{className:"mt-4 flex items-start gap-2 p-3 bg-warning-50 border border-warning-200 rounded-lg",children:[s.jsx(Ut,{className:"h-5 w-5 text-warning-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-warning-900",children:"Legalább egy cselekményt be kell fejezni a folyamat lezárásához."})]}),s.jsx("div",{className:"mt-6 p-4 bg-neutral-50 border border-neutral-200 rounded-lg",children:s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g,onChange:N=>p(N.target.checked),className:"w-5 h-5 text-primary-600 border-neutral-300 rounded focus:ring-primary-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-900",children:"További tényállás tisztázó cselekmények szükségesek"}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Ha be van jelölve, az ügy tényállás tisztázás fázisban marad. Ha nincs bejelölve, az ügy továbbhaladhat a döntéshozatalra."})]})]})}),s.jsxs("div",{className:"flex justify-between gap-3 pt-4 border-t mt-6",children:[s.jsx("button",{onClick:a,className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Vissza"}),s.jsx("button",{onClick:x,disabled:d||j===0||!o,className:`px-6 py-2 rounded-md flex items-center gap-2 ${d||j===0||!o?"bg-neutral-300 text-neutral-500 cursor-not-allowed":"bg-success-600 text-white hover:bg-success-700"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"h-5 w-5 animate-spin"}),"Mentés..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"h-5 w-5"}),g?"Folytatás később":"Tényállás tisztázás lezárása"]})})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5 text-blue-600"}),"Kapcsolódó dokumentumok"]}),s.jsx(lo,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,workflowLepes:"Tényállás tisztázás",readonly:!0})]})]})]})}function hE({ugytipusKod:e,ugytipusNev:t,onMentes:a,onMegse:r}){const[n,i]=B.useState({ugytipusKod:e,prioritas:"Normál"}),[l,o]=B.useState({}),c=(g,p)=>{i(f=>({...f,[g]:p})),l[g]&&o(f=>{const k={...f};return delete k[g],k})},d=()=>{var p,f,k,_,w,x;const g={};return(p=n.ugyfelNev)!=null&&p.trim()||(g.ugyfelNev="Ügyfél neve kötelező"),(f=n.ugyfelEmail)!=null&&f.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.ugyfelEmail)||(g.ugyfelEmail="Érvénytelen e-mail cím"):g.ugyfelEmail="E-mail cím kötelező",(k=n.ugyfelTelefon)!=null&&k.trim()||(g.ugyfelTelefon="Telefonszám kötelező"),n.szuletesiDatum||(g.szuletesiDatum="Születési dátum kötelező"),(_=n.anyjaNeveNev)!=null&&_.trim()||(g.anyjaNeveNev="Anyja neve kötelező"),(w=n.targy)!=null&&w.trim()||(g.targy="Ügy tárgya kötelező"),(x=n.leiras)!=null&&x.trim()||(g.leiras="Leírás kötelező"),o(g),Object.keys(g).length===0},h=()=>{d()&&a(n)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Új ügy rögzítése"}),s.jsxs("p",{className:"text-sm text-neutral-600 mt-1",children:["Ügytípus: ",s.jsx("span",{className:"font-semibold text-primary-600",children:e})," - ",t]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:r,className:"px-4 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 flex items-center gap-2",children:[s.jsx(es,{className:"h-5 w-5"}),"Mégse"]}),s.jsxs("button",{onClick:h,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5"}),"Ügy mentése"]})]})]}),s.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ut,{className:"h-5 w-5 text-accent-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-accent-900",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Fontos:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:'Az ügy rögzítése után automatikusan "Benyújtva" státuszba kerül'}),s.jsx("li",{children:"A rendszer automatikusan generál ügyazonosítót"}),s.jsx("li",{children:"Az ügyfél értesítést kap e-mailben az ügy rögzítéséről"})]})]})]})})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-primary-600"}),"Ügyfél adatok"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Ügyfél neve *"}),s.jsx("input",{type:"text",value:n.ugyfelNev||"",onChange:g=>c("ugyfelNev",g.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 ${l.ugyfelNev?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`,placeholder:"Pl.: Kovács János"}),l.ugyfelNev&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.ugyfelNev})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Születési dátum *"}),s.jsx("input",{type:"date",value:n.szuletesiDatum||"",onChange:g=>c("szuletesiDatum",g.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 ${l.szuletesiDatum?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`}),l.szuletesiDatum&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.szuletesiDatum})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Anyja neve *"}),s.jsx("input",{type:"text",value:n.anyjaNeveNev||"",onChange:g=>c("anyjaNeveNev",g.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 ${l.anyjaNeveNev?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`,placeholder:"Pl.: Kiss Mária"}),l.anyjaNeveNev&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.anyjaNeveNev})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"E-mail cím *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Kx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"email",value:n.ugyfelEmail||"",onChange:g=>c("ugyfelEmail",g.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 ${l.ugyfelEmail?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`,placeholder:"pelda@email.com"})]}),l.ugyfelEmail&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.ugyfelEmail})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Telefonszám *"}),s.jsxs("div",{className:"relative",children:[s.jsx(qx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"tel",value:n.ugyfelTelefon||"",onChange:g=>c("ugyfelTelefon",g.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 ${l.ugyfelTelefon?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`,placeholder:"+36 30 123 4567"})]}),l.ugyfelTelefon&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.ugyfelTelefon})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Lakcím"}),s.jsxs("div",{className:"relative",children:[s.jsx(Km,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:n.ugyfelLakcim||"",onChange:g=>c("ugyfelLakcim",g.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Város, utca, házszám"})]})]})]})]}),e==="V-044"&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(yc,{className:"h-5 w-5 text-primary-600"}),"Munkáltatói adatok"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Munkáltató neve"}),s.jsx("input",{type:"text",value:n.munkaltato||"",onChange:g=>c("munkaltato",g.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Pl.: MÁV Zrt."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Munkakör"}),s.jsx("input",{type:"text",value:n.munkakor||"",onChange:g=>c("munkakor",g.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Pl.: Mozdonyvezető"})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Ügy adatok"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Ügy tárgya *"}),s.jsx("input",{type:"text",value:n.targy||"",onChange:g=>c("targy",g.target.value),className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 ${l.targy?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`,placeholder:"Rövid összefoglaló az ügy tárgyáról"}),l.targy&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.targy})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Részletes leírás *"}),s.jsx("textarea",{value:n.leiras||"",onChange:g=>c("leiras",g.target.value),className:`w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-2 ${l.leiras?"border-error-500 focus:ring-error-500":"border-neutral-300 focus:ring-primary-500"}`,rows:6,placeholder:"Részletes leírás az üggyel kapcsolatban..."}),l.leiras&&s.jsx("p",{className:"text-sm text-error-600 mt-1",children:l.leiras})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Prioritás *"}),s.jsxs("select",{value:n.prioritas||"Normál",onChange:g=>c("prioritas",g.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"Alacsony",children:"Alacsony"}),s.jsx("option",{value:"Normál",children:"Normál"}),s.jsx("option",{value:"Sürgős",children:"Sürgős"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Belső megjegyzések"}),s.jsx("input",{type:"text",value:n.megjegyzesek||"",onChange:g=>c("megjegyzesek",g.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Belső megjegyzések az ügyről"})]})]})]})]}),s.jsx(se,{className:"bg-neutral-50 border-2 border-dashed border-neutral-300",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-2 text-neutral-600",children:[s.jsx(Pe,{className:"h-5 w-5 text-success-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-semibold text-neutral-900 mb-1",children:"Ügy rögzítése után:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:'Az ügy automatikusan "Benyújtva" státuszba kerül'}),s.jsx("li",{children:"Generálódik egy egyedi ügyazonosító"}),s.jsx("li",{children:"Az ügyfél e-mail értesítést kap"}),s.jsx("li",{children:"Az ügy megjelenik az ügyek listájában"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 border-2 border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-100 font-semibold",children:"Mégse"}),s.jsxs("button",{onClick:h,className:"px-6 py-3 bg-success-600 text-white rounded-md hover:bg-success-700 font-semibold flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5"}),"Ügy mentése és rögzítése"]})]})]})})]})}const Q1={"hataskor-illetekesseg":"Hatáskör vizsgálat","formai-vizsgalat":"Formai vizsgálat","tartalmi-vizsgalat":"Tartalmi vizsgálat","tenyallas-tisztazas":"Tényállás tisztázás",donteshozatal:"Döntéshozatal",lezaras:"Lezárás"},e2=({ugyId:e,ugyAzonosito:t,workflowLepes:a})=>s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5 text-blue-600"}),"Kapcsolódó dokumentumok"]}),s.jsx(lo,{ugyId:e,ugyAzonosito:t,workflowLepes:a,readonly:!0})]});function mE({ugy:e,onBefejez:t,onMegse:a,currentIndex:r,totalUgyek:n,onElozoUgy:i,onKovetkezoUgy:l}){var re,ue,me,te,pe,_e,ve,je;const[o,c]=B.useState("workflow"),[d,h]=B.useState(()=>localStorage.getItem("vahap_teszt_mod")==="true"),g=()=>{const ne=!d;h(ne),localStorage.setItem("vahap_teszt_mod",ne.toString())},p=()=>{const ne=e.workflow_fazis,J=e.statusz;if(J==="lezárt")return"lezaras";if(J==="döntéshozatal")return"donteshozatal";if(J==="hiánypótlás")return"hianypotlas";if(J==="folyamatban"){if(ne==="tenyallas_tisztazas")return"tenyallas-tisztazas";if(ne==="formai_vizsgalat")return"formai-vizsgalat";if(ne==="tartalmi_vizsgalat")return"tartalmi-vizsgalat"}return"hataskor-illetekesseg"},[f,k]=B.useState(p()),[_,w]=B.useState(null),[x,j]=B.useState(null),[z,N]=B.useState(null),[$,q]=B.useState(e.statusz==="folyamatban"&&e.workflow_fazis==="tenyallas_tisztazas"),[G,D]=B.useState(!1),[I,R]=B.useState(!1),[y,A]=B.useState(!1),[E,L]=B.useState({"hataskor-illetekesseg":"","formai-vizsgalat":"","tartalmi-vizsgalat":"","tenyallas-tisztazas":"",donteshozatal:"",lezaras:""});B.useEffect(()=>{const ne=e.workflow_fazis,J=e.statusz;J!=="beküldött"&&w(!0),(J==="folyamatban"||J==="hiánypótlás"||J==="döntéshozatal"||J==="lezárt")&&(j({sikeres:!0,hianyossagok:[],megjegyzesek:"",ellenorzes_datuma:new Date().toISOString(),kovetkezo_lepes:"tartalmi_vizsgalat"}),N({sikeres:!0,hianyossagok:[],megjegyzesek:"",ellenorzes_datuma:new Date().toISOString(),kovetkezo_lepes:ne==="hianypotlas"?"tartalmi_hianypotlas":ne==="tenyallas_tisztazas"?"tenyallas_tisztazas":"sommas_eljaras"}))},[e.workflow_fazis,e.statusz]);const M=B.useMemo(()=>{const ne=["hataskor-illetekesseg","formai-vizsgalat","tartalmi-vizsgalat"];$&&ne.push("tenyallas-tisztazas"),ne.push("donteshozatal","lezaras");const J=ne.indexOf(f),Ke=We=>{const Ce=ne.indexOf(We);return We===f?"aktiv":Ce<J?"kesz":"varakozik"},qe=[{id:"hataskor-illetekesseg",nev:"Hatáskör és illetékesség",leiras:"Ellenőrzés, hogy a hatóság hatásköre és illetékessége biztosított",ikon:hu,statusz:Ke("hataskor-illetekesseg"),kotelezo:!0},{id:"formai-vizsgalat",nev:"Formai vizsgálat",leiras:"Kérelem formai megfelelőségének vizsgálata",ikon:lr,statusz:Ke("formai-vizsgalat"),kotelezo:!0},{id:"tartalmi-vizsgalat",nev:"Tartalmi vizsgálat",leiras:"Kérelem tartalmi követelményeinek vizsgálata",ikon:lr,statusz:Ke("tartalmi-vizsgalat"),kotelezo:!0}];return $&&qe.push({id:"tenyallas-tisztazas",nev:"Tényállás tisztázása",leiras:"Eljárási cselekmények végrehajtása a tényállás tisztázására",ikon:ba,statusz:Ke("tenyallas-tisztazas"),kotelezo:!0}),qe.push({id:"donteshozatal",nev:"Döntés-előkészítés",leiras:"Döntési javaslat elkészítése, dokumentum tervezetek, véleményezés, jóváhagyásra küldés",ikon:bj,statusz:Ke("donteshozatal"),kotelezo:!0},{id:"lezaras",nev:"Ügy lezárása",leiras:"Végső dokumentumok és ügy lezárása",ikon:Pe,statusz:Ke("lezaras"),kotelezo:!0}),qe},[f,_,x,z,$]),ce=(M.findIndex(ne=>ne.id===f)+1)/M.length*100,V=ne=>{w(ne),ne?k("formai-vizsgalat"):(alert("Nincs hatáskör vagy illetékesség. Az ügy automatikusan a Döntés-előkészítésbe kerül áttételi végzés készítéséhez."),k("donteshozatal"))},le=()=>{alert("✅ Ügy sikeresen visszaküldve az EKEIDR rendszerbe átirányításra!"),t()},ye=ne=>{j(ne),ne.sikeres&&k("tartalmi-vizsgalat")},be=ne=>{N(ne),ne.kovetkezo_lepes==="sommas_eljaras"||ne.kovetkezo_lepes==="teljes_eljaras"?k("donteshozatal"):ne.kovetkezo_lepes==="tenyallas_tisztazas"&&(q(!0),k("tenyallas-tisztazas"))},C=ne=>{console.log("Tényállás tisztázás befejezve:",ne),k("donteshozatal")},H=ne=>{console.log("Döntés befejezve:",ne),k("lezaras")},W=()=>{alert("Ügy sikeresen lezárva!"),t()},Q=ne=>{L(J=>({...J,[f]:ne}))};return s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx("div",{className:"bg-white border-b border-neutral-200 sticky top-0 z-20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-6",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("button",{onClick:a,className:"p-2 text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 rounded-lg transition-colors flex-shrink-0",title:"Vissza a listához",children:s.jsx(ei,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[s.jsx("h1",{className:"text-lg font-bold text-neutral-900",children:e.ugyAzonosito}),s.jsx(oa,{type:"statusz",value:e.statusz}),s.jsx(oa,{type:"prioritas",value:e.prioritas})]}),s.jsx("div",{className:"h-8 w-px bg-neutral-300 flex-shrink-0"}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-600 flex-1 min-w-0",children:[s.jsxs("span",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(os,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:e.ugyfelNev})]}),s.jsxs("span",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(cr,{className:"h-4 w-4"}),s.jsx("span",{className:"whitespace-nowrap",children:new Date(e.letrehozva).toLocaleDateString("hu-HU")})]}),e.hataridoDatum&&s.jsxs("span",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx(bt,{className:"h-4 w-4"}),s.jsxs("span",{className:"whitespace-nowrap",children:["Határidő: ",new Date(e.hataridoDatum).toLocaleDateString("hu-HU")]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[n!==void 0&&r!==void 0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm text-neutral-600 bg-neutral-50 px-3 py-1.5 rounded-md border border-neutral-200",children:[s.jsx("span",{className:"font-semibold text-primary-600",children:r+1}),s.jsxs("span",{children:[" / ",n," ügy"]})]}),s.jsx("div",{className:"h-8 w-px bg-neutral-300"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:"Folyamat"}),s.jsxs("p",{className:"text-lg font-bold text-primary-700 leading-tight",children:[Math.round(ce),"%"]})]}),s.jsx("div",{className:"w-24 h-2 bg-neutral-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-accent-500 transition-all duration-500",style:{width:`${ce}%`}})})]}),(i||l)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-8 w-px bg-neutral-300"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i&&s.jsxs("button",{onClick:i,className:"px-3 py-1.5 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700 font-medium flex items-center gap-1.5 transition-colors",title:"Előző ügy",children:[s.jsx(ei,{className:"h-4 w-4"}),"Előző"]}),l&&s.jsxs("button",{onClick:l,className:"px-3 py-1.5 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700 font-medium flex items-center gap-1.5 transition-colors",title:"Következő ügy",children:["Következő",s.jsx(Ws,{className:"h-4 w-4"})]})]})]})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"w-80 flex-shrink-0 space-y-4",children:[s.jsx(se,{className:"bg-white p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:"Teszt Mód"}),s.jsx("p",{className:"text-xs text-neutral-500",children:"Szabadon választható lépések"})]}),s.jsx("button",{onClick:g,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d?"bg-primary-600":"bg-neutral-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`})})]})}),s.jsx("div",{className:"sticky top-24",children:s.jsx(wE,{aktualisLepes:f,onLepesValtas:ne=>k(ne),tesztMod:d})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"bg-white border-b-2 border-neutral-200 sticky top-[73px] z-10 mb-6 shadow-sm",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsxs("button",{onClick:()=>c("workflow"),className:`px-8 py-4 font-semibold text-sm transition-all border-b-3 relative ${o==="workflow"?"text-primary-700 border-primary-600 bg-primary-50":"text-neutral-600 border-transparent hover:text-neutral-900 hover:bg-neutral-50"}`,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"w-5 h-5"}),"Workflow"]}),o==="workflow"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-primary-600"})]}),s.jsxs("button",{onClick:()=>c("dokumentumok"),className:`px-8 py-4 font-semibold text-sm transition-all border-b-3 relative ${o==="dokumentumok"?"text-primary-700 border-primary-600 bg-primary-50":"text-neutral-600 border-transparent hover:text-neutral-900 hover:bg-neutral-50"}`,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(lr,{className:"w-5 h-5"}),"Dokumentumok"]}),o==="dokumentumok"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-primary-600"})]})]})}),o==="dokumentumok"&&s.jsx(se,{className:"bg-white",children:s.jsx(lo,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito})}),o==="workflow"&&s.jsxs(s.Fragment,{children:[f==="hataskor-illetekesseg"&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-primary-100 rounded-lg",children:s.jsx(hu,{className:"h-6 w-6 text-primary-700"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Hatáskör és illetékesség vizsgálata"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"UC-0303 / F-0064"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-neutral-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-neutral-900 mb-2",children:"Ellenőrzési szempontok:"}),s.jsxs("ul",{className:"space-y-2 text-sm text-neutral-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"A kérelem V-044 ügytípushoz (vasúti járművezetők előzetes alkalmassági vizsgálata) tartozik"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Az ÉKM Vasúti Hatósági Főosztály hatáskörébe tartozik"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Illetékesség: országos hatáskör"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Megjegyzések (opcionális)"}),s.jsx("textarea",{defaultValue:E["hataskor-illetekesseg"],onBlur:ne=>Q(ne.target.value),rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Írjon megjegyzést a hatáskör vizsgálatról..."})]}),s.jsx(e2,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,workflowLepes:Q1["hataskor-illetekesseg"]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs("button",{onClick:()=>V(!0),className:"flex-1 px-6 py-3 bg-success-600 text-white rounded-lg font-semibold hover:bg-success-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Hatáskör és illetékesség rendben"]}),s.jsxs("button",{onClick:()=>V(!1),className:"flex-1 px-6 py-3 bg-error-600 text-white rounded-lg font-semibold hover:bg-error-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ut,{className:"h-5 w-5"}),"Nincs hatáskör / illetékesség"]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:[s.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4 mb-3",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(uu,{className:"h-5 w-5 text-warning-700 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-warning-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Rossz osztályra érkezett ügy?"}),s.jsx("p",{children:"Ha az ügy nem a Vasúti Hatósági Főosztályhoz tartozik (pl. hajózási ügy), akkor visszaküldheti az EKEIDR rendszerbe átirányításra."})]})]})}),s.jsxs("button",{onClick:()=>D(!0),className:"w-full px-6 py-3 bg-warning-600 text-white rounded-lg font-semibold hover:bg-warning-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(uu,{className:"h-5 w-5"}),"EKEIDR Visszaadás (rossz osztály)"]})]})]})]}),f==="formai-vizsgalat"&&s.jsx(XA,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,kerelemAdatok:{kerelemzoNev:e.ugyfelNev,szuletesiDatum:((re=e.workflow_adatok)==null?void 0:re.szuletesiDatum)||"1985-03-15",anyjaNeveNev:((ue=e.workflow_adatok)==null?void 0:ue.anyjaNeveNev)||"Kiss Mária",munkaltatoNev:((me=e.workflow_adatok)==null?void 0:me.munkaltatoNev)||"MÁV Zrt.",vizsgalatTipusa:((te=e.workflow_adatok)==null?void 0:te.vizsgalatTipusa)||"elozo"},onBefejez:ye,onHianypotlas:()=>{R(!0)}}),f==="tartalmi-vizsgalat"&&s.jsx(QA,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,kerelemAdatok:{kerelemzoNev:e.ugyfelNev,szuletesiDatum:((pe=e.workflow_adatok)==null?void 0:pe.szuletesiDatum)||"1985-03-15",anyjaNeveNev:((_e=e.workflow_adatok)==null?void 0:_e.anyjaNeveNev)||"Kiss Mária",munkaltatoNev:((ve=e.workflow_adatok)==null?void 0:ve.munkaltatoNev)||"MÁV Zrt.",vizsgalatTipusa:((je=e.workflow_adatok)==null?void 0:je.vizsgalatTipusa)||"elozo"},onBefejez:be,onHianypotlas:()=>{A(!0)},onTenyallas:()=>{q(!0),k("tenyallas-tisztazas")}}),f==="tenyallas-tisztazas"&&s.jsx(uE,{ugy:e,onBefejez:C,onMegse:a}),f==="donteshozatal"&&s.jsx(TE,{ugy:e,onBefejez:H,onMegse:a,tesztMod:d}),f==="lezaras"&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-success-100 rounded-full mb-6",children:s.jsx(Pe,{className:"h-10 w-10 text-success-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Ügy lezárása"}),s.jsx("p",{className:"text-neutral-600 mb-8 max-w-md mx-auto",children:"Az ügyintézési folyamat sikeresen befejeződött. Kattintson a lezárás gombra az ügy véglegesítéséhez."}),s.jsxs("div",{className:"bg-neutral-50 p-6 rounded-lg mb-8 max-w-md mx-auto",children:[s.jsx("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Összefoglalás:"}),s.jsxs("div",{className:"space-y-2 text-sm text-left",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Ügy azonosító:"}),s.jsx("span",{className:"font-semibold text-neutral-900",children:e.ugyAzonosito})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Ügyfél:"}),s.jsx("span",{className:"font-semibold text-neutral-900",children:e.ugyfelNev})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Ügyintéző:"}),s.jsx("span",{className:"font-semibold text-neutral-900",children:e.ugyintezoNev})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Befejezett lépések:"}),s.jsx("span",{className:"font-semibold text-neutral-900",children:M.length})]})]})]}),s.jsxs("button",{onClick:W,className:"px-8 py-3 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-colors inline-flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5"}),"Ügy lezárása"]})]}),s.jsx(e2,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,workflowLepes:Q1.lezaras})]})]})]})]})}),G&&s.jsx(NE,{ugyAzonosito:e.ugyAzonosito,iktatoszam:e.iktatoszam||"N/A",onVisszaad:le,onMegse:()=>D(!1)}),I&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsx(_b,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,tipusa:"formai",onSubmit:ne=>{console.log("Formai hiánypótlási felszólítás összeállítva:",ne),R(!1),alert(`✅ Formai hiánypótlási felszólítás rögzítve!

Most folytathatja a "Formai megfelelőség rendben" gombbal.`)},onCancel:()=>R(!1)})})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsx(_b,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,tipusa:"tartalmi",onSubmit:ne=>{console.log("Tartalmi hiánypótlási felszólítás összeállítva:",ne),A(!1),alert(`✅ Tartalmi hiánypótlási felszólítás rögzítve!

Most folytathatja a tartalmi vizsgálat megfelelő gombjaival (sommás/teljes eljárás vagy tényállás tisztázás).`)},onCancel:()=>A(!1)})})})]})}const fE="https://wybmcykpsbkwpapputbw.supabase.co",gE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind5Ym1jeWtwc2Jrd3BhcHB1dGJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMDc0MzAsImV4cCI6MjA3NTY4MzQzMH0.2qjVgR3EXIlKq-KMKj6Xx_W4wFuSC6kJwhyJvJg3_6Q",kd=ev(fE,gE),t2={async osszesSzures(e={}){let t=kd.from("vny024_vasutegeszseugyi_adatok").select("*").order("created_at",{ascending:!1});if(e.kereses){const n=`%${e.kereses}%`;t=t.or(`vezeteknev.ilike.${n},keresztnev.ilike.${n},taj_szam.ilike.${n}`)}e.alkalmasság&&(t=t.eq("alkalmasság",e.alkalmasság)),e.statusz&&(t=t.eq("statusz",e.statusz)),e.vizsgalat_tipusa&&(t=t.eq("vizsgalat_tipusa",e.vizsgalat_tipusa)),e.munkaltato&&(t=t.ilike("munkaltato_neve",`%${e.munkaltato}%`)),e.ervenyesseg_tol&&(t=t.gte("ervenyesseg_vege",e.ervenyesseg_tol)),e.ervenyesseg_ig&&(t=t.lte("ervenyesseg_vege",e.ervenyesseg_ig));const{data:a,error:r}=await t;if(r)throw console.error("VNY024 lekérdezési hiba:",r),new Error("Nem sikerült betölteni a nyilvántartási adatokat");return a||[]},async lekerdezRekord(e){const{data:t,error:a}=await kd.from("vny024_vasutegeszseugyi_adatok").select("*").eq("id",e).maybeSingle();if(a)throw console.error("VNY024 rekord lekérdezési hiba:",a),new Error("Nem sikerült betölteni a rekordot");return t},async lekerdezTajSzam(e){const{data:t,error:a}=await kd.from("vny024_vasutegeszseugyi_adatok").select("*").eq("taj_szam",e).order("vizsgalat_datuma",{ascending:!1});if(a)throw console.error("VNY024 TAJ szám lekérdezési hiba:",a),new Error("Nem sikerült betölteni a TAJ szám alapján");return t||[]},async lekerdezUtolsoVizsgalat(e){const t=await this.lekerdezTajSzam(e);return t.length>0?t[0]:null},async ellenorizAlkalmassag(e){const t=await this.lekerdezUtolsoVizsgalat(e);if(!t)return{alkalmas:!1};const a=new Date,r=new Date(t.ervenyesseg_vege),n=Math.ceil((r.getTime()-a.getTime())/(1e3*60*60*24));let i="ervenyes";return n<0?i="lejart":n<=30&&(i="lejaro"),{alkalmas:t.alkalmasság==="alkalmas"||t.alkalmasság==="korlátozottan_alkalmas",utolso_vizsgalat:t,ervenyesseg:i,napok:n}},async statisztika(){const{data:e,error:t}=await kd.from("vny024_vasutegeszseugyi_adatok").select("alkalmasság, statusz");if(t)return console.error("VNY024 statisztikai hiba:",t),{osszes:0,alkalmas:0,korlatozottan_alkalmas:0,alkalmatlan:0,aktiv:0,lejart:0};const a=e.length,r=e.filter(c=>c.alkalmasság==="alkalmas").length,n=e.filter(c=>c.alkalmasság==="korlátozottan_alkalmas").length,i=e.filter(c=>c.alkalmasság==="alkalmatlan").length,l=e.filter(c=>c.statusz==="aktív").length,o=e.filter(c=>c.statusz==="lejárt").length;return{osszes:a,alkalmas:r,korlatozottan_alkalmas:n,alkalmatlan:i,aktiv:l,lejart:o}},async lejaro30Napon(){const e=new Date,t=new Date;t.setDate(e.getDate()+30);const{data:a,error:r}=await kd.from("vny024_vasutegeszseugyi_adatok").select("*").eq("statusz","aktív").gte("ervenyesseg_vege",e.toISOString().split("T")[0]).lte("ervenyesseg_vege",t.toISOString().split("T")[0]).order("ervenyesseg_vege",{ascending:!0});return r?(console.error("VNY024 lejáró rekordok lekérdezési hiba:",r),[]):a||[]}};function Io({children:e,variant:t="neutral"}){const a={success:"bg-success-100 text-success-800 border-success-300",warning:"bg-warning-100 text-warning-900 border-warning-300",error:"bg-error-100 text-error-800 border-error-300",neutral:"bg-neutral-100 text-neutral-800 border-neutral-300"};return s.jsx("span",{className:`px-3 py-1 rounded-md text-xs font-semibold uppercase border ${a[t]}`,children:e})}function pE(){const[e,t]=B.useState([]),[a,r]=B.useState([]),[n,i]=B.useState(null),[l,o]=B.useState(""),[c,d]=B.useState({}),[h,g]=B.useState(!1),[p,f]=B.useState(!1),[k,_]=B.useState(null);B.useEffect(()=>{w(),x()},[]),B.useEffect(()=>{j()},[l,c,e]);const w=async()=>{f(!0);try{const I=await t2.osszesSzures();t(I)}catch(I){console.error("Betöltési hiba:",I)}finally{f(!1)}},x=async()=>{const I=await t2.statisztika();_(I)},j=()=>{let I=[...e];if(l){const R=l.toLowerCase();I=I.filter(y=>y.vezeteknev.toLowerCase().includes(R)||y.keresztnev.toLowerCase().includes(R)||y.taj_szam.includes(l))}if(c.alkalmasság&&(I=I.filter(R=>R.alkalmasság===c.alkalmasság)),c.statusz&&(I=I.filter(R=>R.statusz===c.statusz)),c.vizsgalat_tipusa&&(I=I.filter(R=>R.vizsgalat_tipusa===c.vizsgalat_tipusa)),c.munkaltato){const R=c.munkaltato.toLowerCase();I=I.filter(y=>{var A;return(A=y.munkaltato_neve)==null?void 0:A.toLowerCase().includes(R)})}r(I)},z=()=>{o(""),d({}),g(!1)},N=I=>{switch(I){case"alkalmas":return"success";case"korlátozottan_alkalmas":return"warning";case"alkalmatlan":return"error";default:return"neutral"}},$=I=>{switch(I){case"aktív":return"success";case"lejárt":return"error";case"érvénytelen":return"error";case"archiválva":return"neutral";default:return"neutral"}},q=I=>new Date(I).toLocaleDateString("hu-HU"),G=I=>{const R=new Date,y=new Date(I),A=Math.ceil((y.getTime()-R.getTime())/(1e3*60*60*24));return A<0?{szoveg:"Lejárt",szin:"error"}:A<=30?{szoveg:`${A} nap múlva jár le`,szin:"warning"}:{szoveg:"Érvényes",szin:"success"}},D=[{key:"taj_szam",label:"TAJ szám"},{key:"vezeteknev",label:"Név",render:(I,R)=>`${R.vezeteknev} ${R.keresztnev}`},{key:"szuletesi_datum",label:"Születési dátum",render:(I,R)=>q(R.szuletesi_datum)},{key:"vizsgalat_tipusa",label:"Vizsgálat típusa",render:(I,R)=>R.vizsgalat_tipusa.replace("_"," ")},{key:"alkalmasság",label:"Alkalmasság",render:(I,R)=>s.jsx(Io,{variant:N(R.alkalmasság),children:R.alkalmasság==="korlátozottan_alkalmas"?"Korlátozottan alkalmas":R.alkalmasság})},{key:"ervenyesseg_vege",label:"Érvényesség",render:(I,R)=>{const{szoveg:y,szin:A}=G(R.ervenyesseg_vege);return s.jsx(Io,{variant:A,children:y})}},{key:"statusz",label:"Státusz",render:(I,R)=>s.jsx(Io,{variant:$(R.statusz),children:R.statusz})},{key:"id",label:"Műveletek",render:(I,R)=>s.jsxs("button",{onClick:y=>{y.stopPropagation(),i(R)},className:"px-3 py-1 text-sm bg-primary-600 text-white rounded hover:bg-primary-700 flex items-center gap-1",children:[s.jsx(ba,{className:"h-4 w-4"}),"Részletek"]})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-4",children:"VNY024 Vasútegészségügyi Nyilvántartás"}),k&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[s.jsxs(se,{className:"bg-white p-4",children:[s.jsx("div",{className:"text-sm text-neutral-600",children:"Összes rekord"}),s.jsx("div",{className:"text-2xl font-bold text-neutral-900",children:k.osszes})]}),s.jsxs(se,{className:"bg-success-50 p-4",children:[s.jsxs("div",{className:"text-sm text-success-700 flex items-center gap-1",children:[s.jsx(Pe,{className:"h-4 w-4"}),"Alkalmas"]}),s.jsx("div",{className:"text-2xl font-bold text-success-900",children:k.alkalmas})]}),s.jsxs(se,{className:"bg-warning-50 p-4",children:[s.jsxs("div",{className:"text-sm text-warning-700 flex items-center gap-1",children:[s.jsx(Ut,{className:"h-4 w-4"}),"Korlátozottan"]}),s.jsx("div",{className:"text-2xl font-bold text-warning-900",children:k.korlatozottan_alkalmas})]}),s.jsxs(se,{className:"bg-error-50 p-4",children:[s.jsxs("div",{className:"text-sm text-error-700 flex items-center gap-1",children:[s.jsx(Qs,{className:"h-4 w-4"}),"Alkalmatlan"]}),s.jsx("div",{className:"text-2xl font-bold text-error-900",children:k.alkalmatlan})]}),s.jsxs(se,{className:"bg-primary-50 p-4",children:[s.jsx("div",{className:"text-sm text-primary-700",children:"Aktív"}),s.jsx("div",{className:"text-2xl font-bold text-primary-900",children:k.aktiv})]}),s.jsxs(se,{className:"bg-neutral-100 p-4",children:[s.jsx("div",{className:"text-sm text-neutral-600",children:"Lejárt"}),s.jsx("div",{className:"text-2xl font-bold text-neutral-900",children:k.lejart})]})]})]}),s.jsx(se,{className:"bg-white",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:l,onChange:I=>o(I.target.value),placeholder:"Keresés név, TAJ szám alapján...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("button",{onClick:()=>g(!h),className:"px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 flex items-center gap-2",children:[s.jsx(bc,{className:"h-5 w-5"}),"Részletes szűrés"]}),(l||Object.keys(c).length>0)&&s.jsx("button",{onClick:z,className:"px-4 py-2 bg-error-600 text-white rounded-md hover:bg-error-700",children:"Szűrés törlése"})]}),h&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-neutral-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Alkalmasság"}),s.jsxs("select",{value:c.alkalmasság||"",onChange:I=>d({...c,alkalmasság:I.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"Összes"}),s.jsx("option",{value:"alkalmas",children:"Alkalmas"}),s.jsx("option",{value:"korlátozottan_alkalmas",children:"Korlátozottan alkalmas"}),s.jsx("option",{value:"alkalmatlan",children:"Alkalmatlan"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Státusz"}),s.jsxs("select",{value:c.statusz||"",onChange:I=>d({...c,statusz:I.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"Összes"}),s.jsx("option",{value:"aktív",children:"Aktív"}),s.jsx("option",{value:"lejárt",children:"Lejárt"}),s.jsx("option",{value:"érvénytelen",children:"Érvénytelen"}),s.jsx("option",{value:"archiválva",children:"Archiválva"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Vizsgálat típusa"}),s.jsxs("select",{value:c.vizsgalat_tipusa||"",onChange:I=>d({...c,vizsgalat_tipusa:I.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"Összes"}),s.jsx("option",{value:"előzetes",children:"Előzetes"}),s.jsx("option",{value:"időszakos",children:"Időszakos"}),s.jsx("option",{value:"soron_kívüli",children:"Soron kívüli"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Munkáltató"}),s.jsx("input",{type:"text",value:c.munkaltato||"",onChange:I=>d({...c,munkaltato:I.target.value}),placeholder:"Munkáltató neve...",className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]})}),s.jsx(se,{className:"bg-white",children:p?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),s.jsx("p",{className:"mt-4 text-neutral-600",children:"Adatok betöltése..."})]}):a.length>0?s.jsx(Qi,{data:a,columns:D}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(De,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"Nincs megjeleníthető rekord"})]})}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-xl font-bold text-neutral-900 flex items-center gap-2",children:[s.jsx(os,{className:"h-6 w-6"}),"Vasútegészségügyi Adatlap"]}),s.jsx("button",{onClick:()=>i(null),className:"text-neutral-500 hover:text-neutral-700",children:s.jsx(Qs,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5"}),"Személyes adatok"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"TAJ szám:"}),s.jsx("div",{className:"font-medium",children:n.taj_szam})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Név:"}),s.jsxs("div",{className:"font-medium",children:[n.vezeteknev," ",n.keresztnev]})]}),n.szuletesi_nev&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Születési név:"}),s.jsx("div",{className:"font-medium",children:n.szuletesi_nev})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Születési dátum:"}),s.jsx("div",{className:"font-medium",children:q(n.szuletesi_datum)})]}),n.anyja_neve&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Anyja neve:"}),s.jsx("div",{className:"font-medium",children:n.anyja_neve})]}),n.munkaltato_neve&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Munkáltató:"}),s.jsx("div",{className:"font-medium",children:n.munkaltato_neve})]})]})]}),s.jsxs("div",{className:"border-t border-neutral-200 pt-6",children:[s.jsxs("h4",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(cr,{className:"h-5 w-5"}),"Vizsgálati adatok"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Vizsgálat típusa:"}),s.jsx("div",{className:"font-medium",children:n.vizsgalat_tipusa.replace("_"," ")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Vizsgálat dátuma:"}),s.jsx("div",{className:"font-medium",children:q(n.vizsgalat_datuma)})]}),n.kovetkezo_vizsgalat_datum&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Következő vizsgálat:"}),s.jsx("div",{className:"font-medium",children:q(n.kovetkezo_vizsgalat_datum)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Munkakör:"}),s.jsx("div",{className:"font-medium",children:n.munkakori_jogosultsag})]})]})]}),s.jsxs("div",{className:"border-t border-neutral-200 pt-6",children:[s.jsxs("h4",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5"}),"Alkalmassági minősítés"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Alkalmasság:"}),s.jsx("div",{className:"mt-1",children:s.jsx(Io,{variant:N(n.alkalmasság),children:n.alkalmasság==="korlátozottan_alkalmas"?"Korlátozottan alkalmas":n.alkalmasság})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Státusz:"}),s.jsx("div",{className:"mt-1",children:s.jsx(Io,{variant:$(n.statusz),children:n.statusz})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Érvényesség kezdete:"}),s.jsx("div",{className:"font-medium",children:q(n.ervenyesseg_kezdete)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Érvényesség vége:"}),s.jsxs("div",{className:"font-medium",children:[q(n.ervenyesseg_vege),s.jsx("div",{className:"mt-1",children:s.jsx(Io,{variant:G(n.ervenyesseg_vege).szin,children:G(n.ervenyesseg_vege).szoveg})})]})]})]}),n.korlatozasok&&s.jsxs("div",{className:"mt-4 p-3 bg-warning-50 border border-warning-200 rounded-md",children:[s.jsx("div",{className:"text-sm font-medium text-warning-900 mb-1",children:"Korlátozások:"}),s.jsx("div",{className:"text-sm text-warning-800",children:n.korlatozasok})]})]}),s.jsxs("div",{className:"border-t border-neutral-200 pt-6",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Orvosi adatok"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Orvosi intézmény:"}),s.jsx("div",{className:"font-medium",children:n.orvosi_intezmeny})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Vizsgáló orvos:"}),s.jsx("div",{className:"font-medium",children:n.orvos_neve})]}),n.orvosi_pecset_szam&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Orvosi pecsétszám:"}),s.jsx("div",{className:"font-medium",children:n.orvosi_pecset_szam})]})]})]}),n.megjegyzes&&s.jsxs("div",{className:"border-t border-neutral-200 pt-6",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Megjegyzések"}),s.jsx("div",{className:"text-sm text-neutral-700 bg-neutral-50 p-3 rounded-md",children:n.megjegyzes})]})]}),s.jsx("div",{className:"sticky bottom-0 bg-neutral-50 border-t border-neutral-200 px-6 py-4 flex justify-end",children:s.jsx("button",{onClick:()=>i(null),className:"px-6 py-2 bg-neutral-600 text-white rounded-md hover:bg-neutral-700",children:"Bezárás"})})]})})]})}const Ei={async osszes(e){let t=xe.from("ekeidr_erkeztett_ugyek").select("*").order("erkeztetes_datum",{ascending:!1});(e==null?void 0:e.atveve)!==void 0&&(t=t.eq("atveve",e.atveve)),e!=null&&e.ugyTipus&&(t=t.eq("ugyTipus",e.ugyTipus)),e!=null&&e.datumTol&&(t=t.gte("erkeztetes_datum",e.datumTol)),e!=null&&e.datumIg&&(t=t.lte("erkeztetes_datum",e.datumIg));const{data:a,error:r}=await t;if(r)throw console.error("Hiba az EKEIDR érkeztetett ügyek lekérdezésekor:",r),r;return a||[]},async atvetelreVarok(e){return this.osszes({atveve:!1,ugyTipus:e})},async atvettek(e){return this.osszes({atveve:!0,ugyTipus:e})},async egyReszletes(e){const{data:t,error:a}=await xe.from("ekeidr_erkeztett_ugyek").select("*").eq("id",e).maybeSingle();if(a)throw console.error("Hiba az EKEIDR ügy lekérdezésekor:",a),a;return t},async egyAtvetel(e,t,a){const r=await this.egyReszletes(e);if(!r)throw new Error("Az érkeztetett ügy nem található!");if(r.atveve)throw new Error("Ez az ügy már át lett véve!");const n=r,{data:i,error:l}=await xe.from("ugyek").insert([{ugytuek_kod:n.ugytipus||r.ugyTipus,statusz:"Beérkezett",prioritas:"Normál",workflow_adatok:{ugyfel_nev:n.feladonev||r.feladoNev,ugyfel_cim:n.feladocim||r.feladoCim,targy:r.targy,ekeidr_erkezteto_szam:r.erkezteto_szam,ekeidr_kuldemeny_azonosito:r.kuldemeny_azonosito,vihar_azonosito:n.viharazonosito||r.viharAzonosito,mellekletek:r.mellekletek,dokumentum_tipus:n.dokumentumtipus||r.dokumentumTipus,eredeti_feladasi_datum:n.feladodatum||r.feladoDatum,ekeidr_erkeztetes_datum:r.erkeztetes_datum,atvevo_felhasznalo:t},hataridok:{sommás_eljárás_határidő:null,teljes_eljárás_határidő:null}}]).select().single();if(l)throw console.error("Hiba az ügy létrehozásakor:",l),l;const{error:o}=await xe.from("ekeidr_erkeztett_ugyek").update({atveve:!0,atvetel_datum:new Date().toISOString(),atvevo_felhasznalo:t,ugy_id:i.id,megjegyzesek:a||null}).eq("id",e);if(o)throw console.error("Hiba az EKEIDR ügy frissítésekor:",o),o;return await xe.from("ugy_esemenyek").insert([{ugy_id:i.id,esemeny_tipus:"ekeidr_atvetel",esemeny_leiras:`Ügy átvéve EKEIDR-ből. Érkeztető szám: ${r.erkezteto_szam}`,metaadatok:{erkezteto_szam:r.erkezteto_szam,kuldemeny_azonosito:r.kuldemeny_azonosito,ekeidr_erkeztetes_datum:r.erkeztetes_datum,atvevo_felhasznalo:t,megjegyzesek:a},szereplo:t}]),console.log("✅ Ügy sikeresen átvéve EKEIDR-ből:",{ekeidr_id:e,ugy_id:i.id,erkezteto_szam:r.erkezteto_szam}),{ugy_id:i.id}},async tobbAtvetel(e,t,a){let r=0,n=0;const i=[];for(const l of e)try{const{ugy_id:o}=await this.egyAtvetel(l,t,a);i.push(o),r++}catch(o){console.error(`Hiba az ügy átvételekor (${l}):`,o),n++}return console.log("📊 Tömeges átvétel eredménye:",{sikeres:r,sikertelen:n,osszes:e.length}),{sikeres:r,sikertelen:n,ugy_idek:i}},async statisztikak(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).toISOString(),a=new Date(e.getTime()-7*24*60*60*1e3).toISOString(),[r,n,i,l,o]=await Promise.all([this.osszes(),this.atvettek(),this.atvetelreVarok(),this.osszes({datumTol:t}),this.osszes({datumTol:a})]);return{osszes:r.length,atveve:n.length,atvetelre_varo:i.length,mai_erkeztetesek:l.length,heti_erkeztetesek:o.length}}};function xE({onUgyAtveve:e,onVissza:t}){const[a,r]=B.useState([]),[n,i]=B.useState(!0),[l,o]=B.useState("atvetelre_varo"),[c,d]=B.useState(""),[h,g]=B.useState(new Set),[p,f]=B.useState({osszes:0,atveve:0,atvetelre_varo:0,mai_erkeztetesek:0,heti_erkeztetesek:0}),[k,_]=B.useState(!1);B.useEffect(()=>{w(),x()},[l]);const w=async()=>{i(!0);try{let D;l==="atvetelre_varo"?D=await Ei.atvetelreVarok():l==="atvett"?D=await Ei.atvettek():D=await Ei.osszes(),r(D)}catch(D){console.error("Hiba az EKEIDR ügyek betöltésekor:",D),alert("Hiba történt az ügyek betöltése során!")}finally{i(!1)}},x=async()=>{try{const D=await Ei.statisztikak();f(D)}catch(D){console.error("Hiba a statisztikák betöltésekor:",D)}},j=D=>{const I=new Set(h);I.has(D)?I.delete(D):I.add(D),g(I)},z=()=>{const D=q.filter(I=>!I.atveve);h.size===D.length?g(new Set):g(new Set(D.map(I=>I.id)))},N=async D=>{if(confirm("Biztosan átveszi ezt az ügyet a VAHAP rendszerbe?")){_(!0);try{const I="Demo Ügyintéző",{ugy_id:R}=await Ei.egyAtvetel(D,I,"Átvéve EKEIDR felületről");alert("✅ Ügy sikeresen átvéve a VAHAP rendszerbe!"),await w(),await x(),g(new Set),e&&e(R)}catch(I){console.error("Hiba az ügy átvételekor:",I),alert(`Hiba történt az átvétel során: ${I.message}`)}finally{_(!1)}}},$=async()=>{if(h.size===0){alert("Nincs kiválasztott ügy!");return}if(confirm(`Biztosan átveszi a kiválasztott ${h.size} ügyet a VAHAP rendszerbe?`)){_(!0);try{const D="Demo Ügyintéző",{sikeres:I,sikertelen:R}=await Ei.tobbAtvetel(Array.from(h),D,"Tömeges átvétel EKEIDR felületről");alert(`✅ Átvétel befejezve!

Sikeres: ${I}
Sikertelen: ${R}`),await w(),await x(),g(new Set)}catch(D){console.error("Hiba a tömeges átvételkor:",D),alert("Hiba történt a tömeges átvétel során!")}finally{_(!1)}}},q=a.filter(D=>{if(!c)return!0;const I=c.toLowerCase();return D.erkezteto_szam.toLowerCase().includes(I)||D.feladoNev.toLowerCase().includes(I)||D.targy.toLowerCase().includes(I)||D.kuldemeny_azonosito.toLowerCase().includes(I)}),G=D=>new Date(D).toLocaleString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"EKEIDR Érkeztetett Ügyek"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"EKEIDR rendszerből érkezett ügyek átvétele VAHAP rendszerbe"})]}),t&&s.jsx("button",{onClick:t,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Vissza"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx(se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Átvételre vár"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:p.atvetelre_varo})]}),s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:s.jsx(bt,{className:"w-6 h-6 text-orange-600"})})]})}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Átvéve"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:p.atveve})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Pe,{className:"w-6 h-6 text-green-600"})})]})}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Összes"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:p.osszes})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(F_,{className:"w-6 h-6 text-blue-600"})})]})}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Mai érkeztetések"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:p.mai_erkeztetesek})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(cr,{className:"w-6 h-6 text-purple-600"})})]})}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Heti érkeztetések"}),s.jsx("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:p.heti_erkeztetesek})]}),s.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:s.jsx(lr,{className:"w-6 h-6 text-indigo-600"})})]})})]}),s.jsx(se,{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>o("atvetelre_varo"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${l==="atvetelre_varo"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(bt,{className:"w-4 h-4"}),"Átvételre vár"]}),s.jsxs("button",{onClick:()=>o("atvett"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${l==="atvett"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(Pe,{className:"w-4 h-4"}),"Átvett"]}),s.jsxs("button",{onClick:()=>o("mind"),className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${l==="mind"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(bc,{className:"w-4 h-4"}),"Összes"]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",value:c,onChange:D=>d(D.target.value),placeholder:"Keresés érkeztető szám, feladó vagy tárgy alapján...",className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]}),s.jsxs("button",{onClick:()=>{w(),x()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",disabled:n,children:[s.jsx(yp,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Frissítés"]})]})}),l==="atvetelre_varo"&&h.size>0&&s.jsx(se,{className:"bg-blue-50 border-2 border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"w-5 h-5 text-blue-600"}),s.jsxs("span",{className:"font-medium text-gray-900",children:[h.size," ügy kiválasztva"]})]}),s.jsxs("button",{onClick:$,disabled:k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(ys,{className:"w-4 h-4"}),k?"Átvétel folyamatban...":"Kiválasztottak átvétele"]})]})}),s.jsx(se,{children:n?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"text-gray-600 mt-4",children:"Betöltés..."})]}):q.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ut,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Nincs megjeleníthető ügy"})]}):s.jsxs("div",{className:"space-y-4",children:[l==="atvetelre_varo"&&q.filter(D=>!D.atveve).length>0&&s.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b",children:[s.jsx("input",{type:"checkbox",checked:h.size===q.filter(D=>!D.atveve).length&&q.filter(D=>!D.atveve).length>0,onChange:z,className:"w-5 h-5 rounded"}),s.jsxs("label",{className:"text-sm font-medium text-gray-700 cursor-pointer",onClick:z,children:["Összes kijelölése (",q.filter(D=>!D.atveve).length," ügy)"]})]}),q.map(D=>s.jsx("div",{className:`p-4 border rounded-lg ${D.atveve?"bg-green-50 border-green-200":"bg-white border-gray-200"} ${h.has(D.id)?"ring-2 ring-blue-500":""}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[!D.atveve&&s.jsx("input",{type:"checkbox",checked:h.has(D.id),onChange:()=>j(D.id),className:"w-5 h-5 mt-1 rounded"}),s.jsx("div",{className:`p-3 rounded-lg flex-shrink-0 ${D.atveve?"bg-green-100":"bg-orange-100"}`,children:D.atveve?s.jsx(Pe,{className:"w-6 h-6 text-green-600"}):s.jsx(bt,{className:"w-6 h-6 text-orange-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-1",children:D.targy}),s.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(De,{className:"w-4 h-4"}),D.erkezteto_szam]}),s.jsx("span",{children:"•"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(os,{className:"w-4 h-4"}),D.feladoNev]}),s.jsx("span",{children:"•"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(cr,{className:"w-4 h-4"}),G(D.erkeztetes_datum)]})]})]}),s.jsx("div",{children:D.atveve?s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm font-semibold rounded-full",children:"Átvéve"}):s.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 text-sm font-semibold rounded-full",children:"Átvételre vár"})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Küldemény azonosító:"}),s.jsx("p",{className:"font-medium text-gray-900",children:D.kuldemeny_azonosito})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Dokumentum típus:"}),s.jsx("p",{className:"font-medium text-gray-900",children:D.dokumentumTipus})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Ügytípus:"}),s.jsx("p",{className:"font-medium text-gray-900",children:D.ugyTipus})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Mellékletek:"}),s.jsxs("p",{className:"font-medium text-gray-900",children:[D.mellekletek.length," db"]})]})]}),D.feladoCim&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("p",{className:"text-gray-500",children:"Cím:"}),s.jsx("p",{className:"text-gray-700",children:D.feladoCim})]}),D.atveve&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[s.jsx(Ca,{className:"w-4 h-4"}),s.jsxs("span",{children:["Átvéve: ",G(D.atvetel_datum)," - ",D.atvevo_felhasznalo]})]}),D.megjegyzesek&&s.jsx("p",{className:"mt-1 text-gray-600",children:D.megjegyzesek})]}),!D.atveve&&s.jsx("div",{className:"mt-4",children:s.jsxs("button",{onClick:()=>N(D.id),disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(ys,{className:"w-4 h-4"}),"Ügy átvétele VAHAP-ba",s.jsx(Ws,{className:"w-4 h-4"})]})})]})]})},D.id))]})})]})}class vE{async kategoriak(){const{data:t,error:a}=await xe.from("dokumentumtar_kategoria").select("*").eq("aktiv",!0).order("sorrend",{ascending:!0});if(a)throw a;return t||[]}async dokumentumokUgytuekKod(t){const{data:a,error:r}=await xe.from("dokumentumtar_dokumentum").select(`
        *,
        kategoria:kategoria_id(id, kod, nev, leiras, ikon),
        kapcsolat:dokumentumtar_ugytuek_kapcsolat!inner(
          kotelezo,
          megjegyzes,
          sorrend,
          ugytuek_kod
        )
      `).eq("aktiv",!0).eq("kapcsolat.ugytuek_kod",t);if(r)throw console.error("Dokumentumok lekérdezési hiba:",r),r;return(a||[]).map(i=>{var l,o,c,d,h,g;return{...i,kategoria:Array.isArray(i.kategoria)?i.kategoria[0]:i.kategoria,kotelezo:Array.isArray(i.kapcsolat)?(l=i.kapcsolat[0])==null?void 0:l.kotelezo:(o=i.kapcsolat)==null?void 0:o.kotelezo,kapcsolat_megjegyzes:Array.isArray(i.kapcsolat)?(c=i.kapcsolat[0])==null?void 0:c.megjegyzes:(d=i.kapcsolat)==null?void 0:d.megjegyzes,_sorrend:Array.isArray(i.kapcsolat)?(h=i.kapcsolat[0])==null?void 0:h.sorrend:(g=i.kapcsolat)==null?void 0:g.sorrend}}).sort((i,l)=>(i._sorrend||0)-(l._sorrend||0))}async dokumentumKategoriaval(t){const{data:a,error:r}=await xe.from("dokumentumtar_dokumentum").select(`
        *,
        kategoria:kategoria_id(id, kod, nev, leiras, ikon)
      `).eq("id",t).eq("aktiv",!0).maybeSingle();if(r)throw r;return a?{...a,kategoria:Array.isArray(a.kategoria)?a.kategoria[0]:a.kategoria}:null}async letoltesNoveles(t){const{error:a}=await xe.rpc("increment_letoltes_szam",{dok_id:t});a&&console.error("Letöltésszám növelési hiba:",a)}formatFajlMeret(t){if(!t)return"-";const a=t/1024;return a<1024?`${a.toFixed(1)} KB`:`${(a/1024).toFixed(1)} MB`}}const Ii=new vE;function yE({ugytuekKod:e,ugytuekNev:t,onClose:a}){const[r,n]=B.useState([]),[i,l]=B.useState([]),[o,c]=B.useState(!0),[d,h]=B.useState(""),[g,p]=B.useState(""),[f,k]=B.useState(null),[_,w]=B.useState("lista"),[x,j]=B.useState([]);B.useEffect(()=>{z()},[e]);const z=async()=>{c(!0);try{const[E,L]=await Promise.all([Ii.dokumentumokUgytuekKod(e),Ii.kategoriak()]);n(E),l(L)}catch(E){console.error("Dokumentumtár betöltési hiba:",E)}finally{c(!1)}},N=async E=>{try{await Ii.letoltesNoveles(E.id);const L=document.createElement("a");L.href=E.fajl_url,L.download=E.fajl_nev,document.body.appendChild(L),L.click(),document.body.removeChild(L)}catch(L){console.error("Letöltési hiba:",L)}},$=r.filter(E=>{var ee,ce,V;const L=!d||E.nev.toLowerCase().includes(d.toLowerCase())||((ee=E.leiras)==null?void 0:ee.toLowerCase().includes(d.toLowerCase()))||((ce=E.kulcsszavak)==null?void 0:ce.some(le=>le.toLowerCase().includes(d.toLowerCase()))),M=!g||((V=E.kategoria)==null?void 0:V.kod)===g;return L&&M}),q=i.map(E=>({kategoria:E,dokumentumok:$.filter(L=>{var M;return((M=L.kategoria)==null?void 0:M.kod)===E.kod})})).filter(E=>E.dokumentumok.length>0),G=r.filter(E=>E.kotelezo).length,D=r.filter(E=>!E.kotelezo).length,I=E=>{j(L=>L.includes(E)?L.filter(M=>M!==E):[...L,E])},R=()=>{x.length===$.length?j([]):j($.map(E=>E.id))},y=async()=>{if(x.length===0)return;const E=r.filter(L=>x.includes(L.id));for(const L of E)await N(L),await new Promise(M=>setTimeout(M,500));alert(`${x.length} dokumentum letöltése megkezdődött.`),j([])},A=()=>{if(x.length===0){alert("Kérjük, válasszon ki legalább egy dokumentumot nyomtatáshoz!");return}const L=r.filter(M=>x.includes(M.id)).map(M=>`- ${M.nev}`).join(`
`);alert(`Nyomtatás előkészítése:

${L}

A dokumentumok nyomtatása megkezdődik...`)};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:"Dokumentumtár"}),s.jsxs("p",{className:"text-neutral-600",children:[s.jsx("span",{className:"font-semibold",children:t})," ügytípushoz kapcsolódó letölthető dokumentumok"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jx,{aktualisNezet:_,onNezetValtas:w}),s.jsx("button",{onClick:a,className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-md transition-colors","aria-label":"Dokumentumtár bezárása",children:s.jsx(es,{className:"h-6 w-6"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(se,{className:"bg-primary-50 border border-primary-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:s.jsx(De,{className:"h-6 w-6 text-primary-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:r.length}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Összes dokumentum"})]})]})}),s.jsx(se,{className:"bg-error-50 border border-error-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-error-100 p-3 rounded-lg",children:s.jsx(Ut,{className:"h-6 w-6 text-error-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:G}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Kötelező dokumentum"})]})]})}),s.jsx(se,{className:"bg-success-50 border border-success-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-success-100 p-3 rounded-lg",children:s.jsx(Vx,{className:"h-6 w-6 text-success-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:D}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Ajánlott dokumentum"})]})]})})]})]}),s.jsx("div",{className:"mb-6 bg-accent-50 border-l-4 border-accent-500 rounded-md p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-accent-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-accent-900",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Dokumentumok használata:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-accent-800",children:[s.jsx("li",{children:"Töltse le a szükséges dokumentumokat"}),s.jsx("li",{children:"Nyomtassa ki és töltse ki kézzel (fizikai aláírás szükséges)"}),s.jsx("li",{children:"Szkennelés után töltse vissza a kérelem benyújtása során"})]})]})]})}),s.jsxs(se,{className:"mb-6",children:[x.length>0&&s.jsx("div",{className:"mb-4 p-4 bg-primary-50 border border-primary-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-5 w-5 text-primary-600"}),s.jsxs("span",{className:"font-semibold text-primary-900",children:[x.length," dokumentum kiválasztva"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:y,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold flex items-center gap-2",children:[s.jsx(ys,{className:"h-4 w-4"}),"Kijelöltek letöltése"]}),s.jsxs("button",{onClick:A,className:"px-4 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 font-semibold flex items-center gap-2",children:[s.jsx(B_,{className:"h-4 w-4"}),"Nyomtatás"]}),s.jsx("button",{onClick:()=>j([]),className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 font-medium",children:"Mégse"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"Keresés név, leírás vagy kulcsszó alapján...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),d&&s.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:s.jsx(es,{className:"h-5 w-5"})})]}),s.jsxs("select",{value:g,onChange:E=>p(E.target.value),className:"px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"Minden kategória"}),i.map(E=>s.jsx("option",{value:E.kod,children:E.nev},E.kod))]})]}),$.length>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:s.jsx("button",{onClick:R,className:"flex items-center gap-2 text-sm font-medium text-primary-600 hover:text-primary-700",children:x.length===$.length?s.jsxs(s.Fragment,{children:[s.jsx(Jn,{className:"h-4 w-4"}),"Összes kijelölés törlése"]}):s.jsxs(s.Fragment,{children:[s.jsx(H_,{className:"h-4 w-4"}),"Összes kijelölése (",$.length," db)"]})})})]}),o?s.jsx(se,{className:"text-center py-12",children:s.jsx("p",{className:"text-neutral-600",children:"Dokumentumok betöltése..."})}):$.length===0?s.jsxs(se,{className:"text-center py-12",children:[s.jsx(De,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:d||g?"Nincs találat a megadott szűrési feltételekkel":"Nincs elérhető dokumentum ehhez az ügytípushoz"}),(d||g)&&s.jsx("button",{onClick:()=>{h(""),p("")},className:"mt-4 px-6 py-2 bg-neutral-600 text-white rounded-md hover:bg-neutral-700 font-semibold",children:"Szűrők törlése"})]}):_==="lista"?s.jsx("div",{className:"space-y-6",children:q.map(({kategoria:E,dokumentumok:L})=>s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-3 flex items-center gap-2",children:[E.nev,s.jsxs("span",{className:"text-sm font-normal text-neutral-500",children:["(",L.length,")"]})]}),s.jsx("div",{className:"space-y-3",children:L.map(M=>s.jsx(se,{className:"bg-white hover:bg-neutral-50 transition-colors",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:x.includes(M.id),onChange:()=>I(M.id),className:"mt-1 h-5 w-5 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-neutral-900",children:M.nev}),M.kotelezo&&s.jsx("span",{className:"px-2 py-0.5 bg-error-100 text-error-800 text-xs font-semibold rounded",children:"Kötelező"}),s.jsxs("span",{className:"px-2 py-0.5 bg-neutral-100 text-neutral-700 text-xs font-mono rounded",children:["v",M.verzio]})]}),s.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:M.leiras}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500",children:[s.jsx("span",{children:Ii.formatFajlMeret(M.fajl_meret)}),s.jsx("span",{className:"uppercase",children:M.fajl_tipus.split("/")[1]}),s.jsxs("span",{children:[M.letoltes_szam," letöltés"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>k(f===M.id?null:M.id),className:"px-3 py-2 text-sm text-neutral-600 hover:text-neutral-900 border border-neutral-300 rounded-md hover:bg-neutral-50 flex items-center gap-2",children:f===M.id?s.jsxs(s.Fragment,{children:[s.jsx(xp,{className:"h-4 w-4"}),"Kevesebb"]}):s.jsxs(s.Fragment,{children:[s.jsx(du,{className:"h-4 w-4"}),"Részletek"]})}),s.jsxs("button",{onClick:()=>N(M),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 font-semibold",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]})]})]}),f===M.id&&s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-700 mb-1",children:"Fájlnév:"}),s.jsx("p",{className:"text-neutral-600 font-mono text-xs",children:M.fajl_nev})]}),M.kulcsszavak&&M.kulcsszavak.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-700 mb-1",children:"Kulcsszavak:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:M.kulcsszavak.map((ee,ce)=>s.jsx("span",{className:"px-2 py-1 bg-primary-50 text-primary-700 text-xs rounded",children:ee},ce))})]}),M.kapcsolat_megjegyzes&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("p",{className:"font-semibold text-neutral-700 mb-1",children:"Megjegyzés:"}),s.jsx("p",{className:"text-neutral-600",children:M.kapcsolat_megjegyzes})]})]})})]})},M.id))})]},E.kod))}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(E=>s.jsx(se,{className:"bg-white hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("input",{type:"checkbox",checked:x.includes(E.id),onChange:()=>I(E.id),className:"h-5 w-5 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),s.jsxs("div",{className:"flex gap-2",children:[E.kotelezo&&s.jsx("span",{className:"px-2 py-0.5 bg-error-100 text-error-800 text-xs font-semibold rounded",children:"Kötelező"}),s.jsxs("span",{className:"px-2 py-0.5 bg-neutral-100 text-neutral-700 text-xs font-mono rounded",children:["v",E.verzio]})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-2 line-clamp-2",children:E.nev}),s.jsx("p",{className:"text-sm text-neutral-600 mb-3 line-clamp-2",children:E.leiras}),s.jsxs("div",{className:"text-xs text-neutral-500 space-y-1 mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Méret:"}),s.jsx("span",{className:"font-medium",children:Ii.formatFajlMeret(E.fajl_meret)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Típus:"}),s.jsx("span",{className:"font-medium uppercase",children:E.fajl_tipus.split("/")[1]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Letöltések:"}),s.jsx("span",{className:"font-medium",children:E.letoltes_szam})]})]}),E.kategoria&&s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:"inline-block px-2 py-1 bg-primary-50 text-primary-700 text-xs rounded",children:E.kategoria.nev})})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-3 border-t border-neutral-200",children:[s.jsxs("button",{onClick:()=>N(E),className:"w-full px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center justify-center gap-2 font-semibold",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]}),s.jsx("button",{onClick:()=>k(f===E.id?null:E.id),className:"w-full px-3 py-2 text-sm text-neutral-600 hover:text-neutral-900 border border-neutral-300 rounded-md hover:bg-neutral-50 flex items-center justify-center gap-2",children:f===E.id?s.jsxs(s.Fragment,{children:[s.jsx(xp,{className:"h-4 w-4"}),"Kevesebb"]}):s.jsxs(s.Fragment,{children:[s.jsx(du,{className:"h-4 w-4"}),"Részletek"]})})]}),f===E.id&&s.jsx("div",{className:"mt-3 pt-3 border-t border-neutral-200",children:s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-700 mb-1",children:"Fájlnév:"}),s.jsx("p",{className:"text-neutral-600 font-mono text-xs break-all",children:E.fajl_nev})]}),E.kulcsszavak&&E.kulcsszavak.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-700 mb-1",children:"Kulcsszavak:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:E.kulcsszavak.map((L,M)=>s.jsx("span",{className:"px-2 py-1 bg-primary-50 text-primary-700 text-xs rounded",children:L},M))})]}),E.kapcsolat_megjegyzes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-700 mb-1",children:"Megjegyzés:"}),s.jsx("p",{className:"text-neutral-600 text-xs",children:E.kapcsolat_megjegyzes})]})]})})]})},E.id))}),s.jsx("div",{className:"mt-8",children:s.jsx("button",{onClick:a,className:"px-6 py-3 bg-neutral-600 text-white rounded-md hover:bg-neutral-700 font-semibold",children:"Vissza a saját ügyeimhez"})})]})}const vm={async osszesLekerese(e="demo@vasut.hu"){const{data:t,error:a}=await xe.from("dijfizetesek").select(`
        *,
        szamla:szamlak(*)
      `).eq("kerelmező_email",e).order("created_at",{ascending:!1});if(a)throw console.error("Díjfizetések lekérési hiba:",a),a;return await Promise.all((t||[]).map(async n=>{let i;if(n.ugy_id){const{data:l}=await xe.from("ugyek").select("ugy_azonosito").eq("id",n.ugy_id).single();l&&(i=l.ugy_azonosito)}return{...n,ugy_azonosito:i,szamla:Array.isArray(n.szamla)&&n.szamla.length>0?n.szamla[0]:void 0}}))},async ujNemMegtekintettSzamlakSzama(e="demo@vasut.hu"){const{data:t,error:a}=await xe.from("szamlak").select(`
        id,
        megtekintve,
        dijfizetes:dijfizetesek!inner(kerelmező_email)
      `).eq("megtekintve",!1).eq("dijfizetes.kerelmező_email",e);return a?(console.error("Új számlák számának lekérési hiba:",a),0):(t==null?void 0:t.length)||0},async szamlaMegtekintve(e){const{error:t}=await xe.from("szamlak").update({megtekintve:!0,letoltesek_szama:xe.rpc("increment",{row_id:e,amount:1})}).eq("id",e);if(t)throw console.error("Számla megtekintés jelzési hiba:",t),t},async szamlaLetoltesNoveles(e){const{data:t}=await xe.from("szamlak").select("letoltesek_szama").eq("id",e).single();t&&await xe.from("szamlak").update({letoltesek_szama:t.letoltesek_szama+1,megtekintve:!0}).eq("id",e)}};function bE({onClose:e}){const[t,a]=B.useState([]),[r,n]=B.useState(!0),[i,l]=B.useState("osszes"),[o,c]=B.useState("lista");B.useEffect(()=>{d()},[]);const d=async()=>{n(!0);try{const x=await vm.osszesLekerese("demo@vasut.hu");a(x)}catch(x){console.error("Díjfizetések betöltési hiba:",x)}finally{n(!1)}},h=async x=>{if(x.szamla)try{await vm.szamlaLetoltesNoveles(x.szamla.id),alert(`Számla letöltése: ${x.szamla.szamla_szam}

A számla PDF fájl letöltése megkezdődött.`),await d()}catch(j){console.error("Számla letöltési hiba:",j),alert("Hiba történt a számla letöltése során")}},g=async x=>{if(x.szamla)try{x.szamla.megtekintve||(await vm.szamlaMegtekintve(x.szamla.id),await d()),alert(`Számla részletei: ${x.szamla.szamla_szam}

A számla megtekintése megnyílt új ablakban.`)}catch(j){console.error("Számla megtekintési hiba:",j)}},p=t.filter(x=>i==="osszes"?!0:x.statusz===i),f=t.filter(x=>x.statusz==="nyitott").length,k=t.filter(x=>x.statusz==="fizetve").length,_=t.filter(x=>x.szamla&&!x.szamla.megtekintve).length,w=x=>{const j={nyitott:{bg:"bg-warning-100",text:"text-warning-800",label:"Fizetésre vár"},fizetve:{bg:"bg-success-100",text:"text-success-800",label:"Fizetve"},lejart:{bg:"bg-error-100",text:"text-error-800",label:"Lejárt"},torolve:{bg:"bg-neutral-100",text:"text-neutral-600",label:"Törölve"}},z=j[x]||j.nyitott;return s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ${z.bg} ${z.text}`,children:z.label})};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:s.jsx(vp,{className:"h-8 w-8 text-primary-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Díjfizetések és számlák"}),s.jsxs("p",{className:"text-neutral-600 mt-1 flex items-center gap-2",children:["Eljárásokhoz kapcsolódó díjfizetések és kiállított számlák",s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-accent-100 text-accent-800 text-xs font-semibold rounded",children:[s.jsx(cm,{className:"h-3 w-3"}),"ForrásSQL"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jx,{aktualisNezet:o,onNezetValtas:c}),s.jsxs("button",{onClick:e,className:"px-6 py-3 border border-neutral-300 rounded-md hover:bg-neutral-50 font-semibold flex items-center gap-2",children:[s.jsx(es,{className:"h-5 w-5"}),"Vissza"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(se,{className:"bg-gradient-to-br from-warning-50 to-warning-100 border-warning-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-warning-800 font-medium",children:"Fizetésre vár"}),s.jsx("p",{className:"text-3xl font-bold text-warning-900 mt-1",children:f})]}),s.jsx(bt,{className:"h-10 w-10 text-warning-600"})]})}),s.jsx(se,{className:"bg-gradient-to-br from-success-50 to-success-100 border-success-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-success-800 font-medium",children:"Fizetve"}),s.jsx("p",{className:"text-3xl font-bold text-success-900 mt-1",children:k})]}),s.jsx(Pe,{className:"h-10 w-10 text-success-600"})]})}),s.jsx(se,{className:`bg-gradient-to-br ${_>0?"from-primary-50 to-primary-100 border-primary-200":"from-neutral-50 to-neutral-100 border-neutral-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${_>0?"text-primary-800":"text-neutral-600"}`,children:"Új számlák"}),s.jsx("p",{className:`text-3xl font-bold mt-1 ${_>0?"text-primary-900":"text-neutral-700"}`,children:_})]}),s.jsx(De,{className:`h-10 w-10 ${_>0?"text-primary-600":"text-neutral-400"}`})]})})]})]}),s.jsx(se,{className:"mb-6",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>l("osszes"),className:`px-6 py-3 rounded-md font-semibold transition-colors ${i==="osszes"?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:["Összes (",t.length,")"]}),s.jsxs("button",{onClick:()=>l("nyitott"),className:`px-6 py-3 rounded-md font-semibold transition-colors ${i==="nyitott"?"bg-warning-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:["Fizetésre vár (",f,")"]}),s.jsxs("button",{onClick:()=>l("fizetve"),className:`px-6 py-3 rounded-md font-semibold transition-colors ${i==="fizetve"?"bg-success-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:["Fizetve (",k,")"]})]})}),r?s.jsxs(se,{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-primary-600 border-t-transparent"}),s.jsx("p",{className:"mt-4 text-neutral-600",children:"Díjfizetések betöltése..."})]}):p.length===0?s.jsxs(se,{className:"text-center py-12",children:[s.jsx(vp,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600 mb-2",children:"Nincs megjeleníthető díjfizetés"}),s.jsxs("p",{className:"text-sm text-neutral-500",children:[i==="nyitott"&&"Nincs nyitott díjfizetés",i==="fizetve"&&"Még nincs kifizetett díj",i==="osszes"&&"Még nincs rögzített díjfizetés"]})]}):o==="lista"?s.jsx("div",{className:"space-y-4",children:p.map(x=>s.jsx(se,{className:`transition-all ${x.szamla&&!x.szamla.megtekintve?"border-2 border-primary-300 shadow-lg":"hover:border-neutral-300"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.szamla&&!x.szamla.megtekintve&&s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-primary-600 text-white animate-pulse",children:"ÚJ"}),s.jsx("span",{className:"font-mono text-sm font-semibold text-neutral-900",children:x.dijbekero_szam}),w(x.statusz)]}),s.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:x.leiras}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Összeg:"}),s.jsxs("div",{className:"font-bold text-lg text-primary-600",children:[x.osszeg.toLocaleString("hu-HU")," Ft"]})]}),x.ugy_azonosito&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Ügy azonosító:"}),s.jsx("div",{className:"font-medium text-neutral-900",children:x.ugy_azonosito})]}),x.fizetesi_mod&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Fizetési mód:"}),s.jsx("div",{className:"font-medium text-neutral-900 capitalize",children:x.fizetesi_mod})]}),x.fizetes_datum&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Fizetés dátuma:"}),s.jsx("div",{className:"font-medium text-neutral-900",children:new Date(x.fizetes_datum).toLocaleDateString("hu-HU")})]}),x.szamla&&s.jsxs("div",{children:[s.jsx("span",{className:"text-neutral-600",children:"Számla szám:"}),s.jsx("div",{className:"font-mono text-sm font-semibold text-neutral-900",children:x.szamla.szamla_szam})]})]}),x.megjegyzesek&&s.jsx("div",{className:"mt-3 p-3 bg-neutral-50 rounded-md",children:s.jsxs("p",{className:"text-sm text-neutral-700",children:[s.jsx(Ut,{className:"inline h-4 w-4 mr-1"}),x.megjegyzesek]})})]}),s.jsxs("div",{className:"flex flex-col gap-2 ml-6",children:[x.statusz==="nyitott"&&s.jsxs("button",{onClick:()=>alert("Díjfizetés funkció hamarosan elérhető"),className:"px-4 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 font-semibold whitespace-nowrap flex items-center gap-2",children:[s.jsx(Jl,{className:"h-4 w-4"}),"Fizetés"]}),x.szamla&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>g(x),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold whitespace-nowrap flex items-center gap-2",children:[s.jsx(ba,{className:"h-4 w-4"}),"Megtekintés"]}),s.jsxs("button",{onClick:()=>h(x),className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 font-medium whitespace-nowrap flex items-center gap-2",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]}),x.szamla.letoltesek_szama>0&&s.jsxs("span",{className:"text-xs text-neutral-500 text-center",children:[x.szamla.letoltesek_szama,"× letöltve"]})]})]})]})},x.id))}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(x=>s.jsx(se,{className:`transition-all ${x.szamla&&!x.szamla.megtekintve?"border-2 border-primary-300 shadow-lg":"hover:border-neutral-300"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[x.szamla&&!x.szamla.megtekintve&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-primary-600 text-white animate-pulse",children:"ÚJ"}),w(x.statusz)]})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:"font-mono text-xs font-semibold text-neutral-600",children:x.dijbekero_szam})}),s.jsx("h3",{className:"text-base font-semibold text-neutral-900 mb-3 line-clamp-2",children:x.leiras}),s.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Összeg:"}),s.jsxs("div",{className:"font-bold text-lg text-primary-600",children:[x.osszeg.toLocaleString("hu-HU")," Ft"]})]}),x.ugy_azonosito&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Ügy:"}),s.jsx("div",{className:"font-medium text-neutral-900 text-xs",children:x.ugy_azonosito})]}),x.fizetesi_mod&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Fizetés:"}),s.jsx("div",{className:"font-medium text-neutral-900 capitalize text-xs",children:x.fizetesi_mod})]}),x.fizetes_datum&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Dátum:"}),s.jsx("div",{className:"font-medium text-neutral-900 text-xs",children:new Date(x.fizetes_datum).toLocaleDateString("hu-HU")})]}),x.szamla&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Számla:"}),s.jsx("div",{className:"font-mono text-xs font-semibold text-neutral-900",children:x.szamla.szamla_szam})]})]}),x.megjegyzesek&&s.jsx("div",{className:"p-2 bg-neutral-50 rounded-md",children:s.jsxs("p",{className:"text-xs text-neutral-700",children:[s.jsx(Ut,{className:"inline h-3 w-3 mr-1"}),x.megjegyzesek]})})]}),s.jsxs("div",{className:"flex flex-col gap-2 mt-4 pt-3 border-t border-neutral-200",children:[x.statusz==="nyitott"&&s.jsxs("button",{onClick:()=>alert("Díjfizetés funkció hamarosan elérhető"),className:"w-full px-4 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 font-semibold flex items-center justify-center gap-2",children:[s.jsx(Jl,{className:"h-4 w-4"}),"Fizetés"]}),x.szamla&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>g(x),className:"w-full px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold flex items-center justify-center gap-2",children:[s.jsx(ba,{className:"h-4 w-4"}),"Megtekintés"]}),s.jsxs("button",{onClick:()=>h(x),className:"w-full px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(ys,{className:"h-4 w-4"}),"Letöltés"]}),x.szamla.letoltesek_szama>0&&s.jsxs("span",{className:"text-xs text-neutral-500 text-center",children:[x.szamla.letoltesek_szama,"× letöltve"]})]})]})]})},x.id))})]})}function kE({onVissza:e}){const[t,a]=B.useState([]),[r,n]=B.useState([]),[i,l]=B.useState([]),[o,c]=B.useState(new Set),[d,h]=B.useState(""),[g,p]=B.useState(!0),[f,k]=B.useState("szignalando"),[_,w]=B.useState(new Map);B.useEffect(()=>{x()},[]);const x=async()=>{p(!0);try{await Promise.all([j(),N(),z(),$()])}finally{p(!1)}},j=async()=>{try{const{data:M,error:ee}=await xe.from("ugyek").select("*").is("ugyintezo_id",null).order("created_at",{ascending:!1});if(ee)throw ee;a(M||[])}catch(M){console.error("Hiba a be nem osztott ügyek betöltésekor:",M)}},z=async()=>{try{const M=await Ei.atvetelreVarok();n(M)}catch(M){console.error("Hiba az EKEIDR ügyek betöltésekor:",M)}},N=async()=>{try{const ee=(await gu.osszesAktiv()).filter(ce=>ce.szerepkor==="ugyintezo");l(ee)}catch(M){console.error("Hiba az ügyintézők betöltésekor:",M)}},$=async()=>{try{const M=await gu.osszesAktiv(),ee=new Map;for(const ce of M){const{data:V}=await xe.from("ugyek").select("id",{count:"exact"}).eq("ugyintezo_id",ce.id).neq("statusz","lezárt");ee.set(ce.id,(V==null?void 0:V.length)||0)}w(ee)}catch(M){console.error("Hiba az ügyintéző statisztikák számításakor:",M)}},q=M=>{const ee=new Set(o);ee.has(M)?ee.delete(M):ee.add(M),c(ee)},G=()=>{const M=new Set(t.map(ee=>ee.id));c(M)},D=()=>{c(new Set)},I=async()=>{if(o.size===0){alert("Nincs kiválasztott ügy!");return}if(!d){alert("Válasszon ügyintézőt!");return}try{const M=i.find(ee=>ee.id===d);if(!M)return;for(const ee of Array.from(o))await Gn.szignal(ee,d),await La.letrehoz({ugy_id:ee,esemeny_tipus:"szignálás",esemeny_leiras:`Ügy szignálva ${M.nev} ügyintézőre`,szereplo:"Szignáló",datum:new Date().toISOString()});alert(`${o.size} ügy sikeresen kiosztva ${M.nev} ügyintézőnek!`),c(new Set),h(""),await x()}catch(M){console.error("Hiba a szignálás során:",M),alert("Hiba történt a szignálás során!")}},R=async M=>{try{const ee=await Ei.egyAtvetel(M.id,"Szignáló","Átvéve a VAHAP rendszerbe");alert(`Ügy sikeresen átvéve EKEIDR-ből! Új ügy ID: ${ee.ugy_id}`),await x()}catch(ee){console.error("Hiba az EKEIDR ügy átvételekor:",ee),alert("Hiba történt az ügy átvételekor!")}},y=async M=>{alert("Ez a funkció hamarosan elérhető lesz. Jelenleg az átvett ügyeket kézzel kell kezelni.")},A=M=>M>=18?"bg-error-100 text-error-900 border-error-300":M>=12?"bg-warning-100 text-warning-900 border-warning-300":"bg-success-100 text-success-900 border-success-300",E=[{key:"select",label:s.jsx("input",{type:"checkbox",checked:o.size===t.length&&t.length>0,onChange:M=>M.target.checked?G():D(),className:"h-4 w-4 text-primary-600 rounded border-neutral-300 focus:ring-2 focus:ring-primary-500"}),render:(M,ee)=>s.jsx("input",{type:"checkbox",checked:o.has(ee.id),onChange:()=>q(ee.id),className:"h-4 w-4 text-primary-600 rounded border-neutral-300 focus:ring-2 focus:ring-primary-500"})},{key:"ugy_azonosito",label:"Ügy azonosító",className:"font-mono text-sm"},{key:"iktatoszam",label:"Iktatószám",className:"font-mono text-sm",render:M=>M||s.jsx("span",{className:"text-neutral-400",children:"-"})},{key:"ugytuek_kod",label:"Ügytípus",className:"text-sm"},{key:"statusz",label:"Státusz",render:M=>s.jsx(oa,{type:"statusz",value:M})},{key:"prioritas",label:"Prioritás",render:M=>s.jsx(oa,{type:"prioritas",value:M})},{key:"created_at",label:"Beérkezés",render:M=>M?new Date(M).toLocaleDateString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}],L=[{key:"erkezteto_szam",label:"Érkeztetési szám",className:"font-mono text-sm"},{key:"kuldemeny_azonosito",label:"Küldemény azonosító",className:"font-mono text-sm"},{key:"targy",label:"Tárgy"},{key:"feladoNev",label:"Feladó"},{key:"ugyTipus",label:"Ügytípus",render:M=>M||s.jsx("span",{className:"text-neutral-400",children:"Ismeretlen"})},{key:"erkeztetes_datum",label:"Érkeztetés",render:M=>M?new Date(M).toLocaleDateString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"},{key:"actions",label:"Műveletek",render:(M,ee)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>R(ee),className:"px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 flex items-center gap-1",children:[s.jsx(Pe,{className:"h-4 w-4"}),"Átvétel"]}),s.jsxs("button",{onClick:()=>y(),className:"px-3 py-1 bg-error-600 text-white text-sm rounded hover:bg-error-700 flex items-center gap-1",children:[s.jsx(Qs,{className:"h-4 w-4"}),"Visszaküld"]})]})}];return s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx("div",{className:"bg-primary-600 text-white border-b border-primary-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Szignáló munkaterület"}),s.jsx("p",{className:"text-primary-100 mt-1",children:"VHF Szignálás és ügyosztás"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:e,className:"px-4 py-2 bg-white text-primary-600 rounded-md hover:bg-primary-50 font-medium flex items-center gap-2 transition-colors",children:[s.jsx(Eu,{className:"h-4 w-4"}),"Főoldal"]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-100 bg-primary-700 px-3 py-2 rounded-md",children:[s.jsx(Ca,{className:"h-4 w-4"}),s.jsx("span",{children:"Szignáló"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(se,{className:"bg-white/95 border-white/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-500 p-3 rounded-lg",children:s.jsx(Ea,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-600 font-medium",children:"Be nem osztott"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.length})]})]})}),s.jsx(se,{className:"bg-white/95 border-white/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-accent-600 p-3 rounded-lg",children:s.jsx(ys,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-600 font-medium",children:"EKEIDR ügyek"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:r.length})]})]})}),s.jsx(se,{className:"bg-white/95 border-white/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-success-600 p-3 rounded-lg",children:s.jsx(Ca,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-600 font-medium",children:"Ügyintézők"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:i.length})]})]})}),s.jsx(se,{className:"bg-white/95 border-white/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-warning-600 p-3 rounded-lg",children:s.jsx(Jt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-600 font-medium",children:"Túlterhelt"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:Array.from(_.values()).filter(M=>M>=18).length})]})]})})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s.jsx("div",{className:"mb-6 border-b border-neutral-200",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>k("szignalando"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${f==="szignalando"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(Ea,{className:"inline h-5 w-5 mr-2"}),"Szignálandó ügyek (",t.length,")"]}),s.jsxs("button",{onClick:()=>k("ekeidr"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${f==="ekeidr"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(ys,{className:"inline h-5 w-5 mr-2"}),"EKEIDR ügyek (",r.length,")"]})]})}),g?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"Adatok betöltése..."})]})}):s.jsxs(s.Fragment,{children:[f==="szignalando"&&s.jsxs("div",{className:"space-y-6",children:[o.size>0&&s.jsx(se,{className:"bg-primary-50 border-primary-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-primary-900",children:[o.size," ügy kiválasztva"]}),s.jsx("p",{className:"text-xs text-primary-700 mt-1",children:"Válasszon ügyintézőt a kiosztáshoz"})]}),s.jsxs("select",{value:d,onChange:M=>h(M.target.value),className:"px-4 py-2 border border-primary-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"-- Válasszon ügyintézőt --"}),i.map(M=>{const ee=_.get(M.id)||0;return s.jsxs("option",{value:M.id,children:[M.nev," (",ee," feladat)"]},M.id)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:D,className:"px-4 py-2 bg-white text-neutral-700 rounded-md hover:bg-neutral-100 border border-neutral-300",children:"Kijelölés megszüntetése"}),s.jsxs("button",{onClick:I,disabled:!d,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:bg-neutral-300 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(Ea,{className:"h-5 w-5"}),"Kiosztás"]})]})]})}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Ügyintézők terheltsége"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:i.map(M=>{const ee=_.get(M.id)||0,ce=A(ee);return s.jsxs("div",{className:`p-3 rounded-lg border-2 ${ce}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ca,{className:"h-4 w-4"}),s.jsx("p",{className:"font-semibold text-sm",children:M.nev})]}),s.jsx("p",{className:"text-2xl font-bold",children:ee}),s.jsx("p",{className:"text-xs mt-1",children:"aktív feladat"})]},M.id)})})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900",children:["Be nem osztott ügyek (",t.length,")"]}),s.jsxs("button",{onClick:x,className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 flex items-center gap-2",children:[s.jsx(yp,{className:"h-4 w-4"}),"Frissítés"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[s.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 text-neutral-400"}),s.jsx("p",{children:"Nincs be nem osztott ügy"})]}):s.jsx(Qi,{columns:E,data:t})]})]}),f==="ekeidr"&&s.jsx("div",{className:"space-y-6",children:s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900",children:["EKEIDR érkeztetett ügyek (",r.length,")"]}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Az EKEIDR rendszerből érkeztetett, még át nem vett ügyek"})]}),s.jsxs("button",{onClick:x,className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200 flex items-center gap-2",children:[s.jsx(yp,{className:"h-4 w-4"}),"Frissítés"]})]}),r.length===0?s.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[s.jsx(Pe,{className:"h-12 w-12 mx-auto mb-4 text-success-400"}),s.jsx("p",{children:"Nincs át nem vett EKEIDR ügy"})]}):s.jsx(Qi,{columns:L,data:r})]})})]})]})]})}class jE{async letrehoz(t){const{data:a,error:r}=await xe.from("dokumentum_tervezetek").insert({...t,statusz:"draft"}).select().single();if(r)throw console.error("Dokumentum tervezet létrehozási hiba:",r),new Error("Nem sikerült létrehozni a dokumentum tervezetet");return a}async getById(t){const{data:a,error:r}=await xe.from("dokumentum_tervezetek").select("*").eq("id",t).single();return r?(console.error("Dokumentum tervezet lekérdezési hiba:",r),null):a}async getByUgyId(t){const{data:a,error:r}=await xe.from("dokumentum_tervezetek").select("*").eq("ugy_id",t).order("created_at",{ascending:!1});return r?(console.error("Ügy tervezetek lekérdezési hiba:",r),[]):a||[]}async getByDontesiJavaslatId(t){const{data:a,error:r}=await xe.from("dokumentum_tervezetek").select("*").eq("dontesi_javaslat_id",t).order("created_at",{ascending:!1});return r?(console.error("Döntési javaslat tervezetek lekérdezési hiba:",r),[]):a||[]}async getJovahagyasraVaroak(){const{data:t,error:a}=await xe.from("dokumentum_tervezetek").select("*").eq("statusz","jovahagyasra_var").order("created_at",{ascending:!1});return a?(console.error("Jóváhagyásra váró tervezetek lekérdezési hiba:",a),[]):t||[]}async getByStatusz(t){const{data:a,error:r}=await xe.from("dokumentum_tervezetek").select("*").eq("statusz",t).order("created_at",{ascending:!1});return r?(console.error("Státusz szerinti lekérdezési hiba:",r),[]):a||[]}async modosit(t,a){const{data:r,error:n}=await xe.from("dokumentum_tervezetek").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw console.error("Dokumentum tervezet módosítási hiba:",n),new Error("Nem sikerült módosítani a dokumentum tervezetet");return r}async jovahagyasraKuld(t){await this.modosit(t,{statusz:"iktatas_kesz",ekeidr_iktatas_keres_datum:new Date().toISOString()});const a=await this.mockEKEIDRIktatas();return await this.modosit(t,{statusz:"jovahagyasra_var",ekeidr_iktatoszam:a,ekeidr_valasz_datum:new Date().toISOString()})}async mockEKEIDRIktatas(){await new Promise(r=>setTimeout(r,1e3+Math.random()*1e3));const t=new Date().getFullYear(),a=Math.floor(Math.random()*9e4)+1e4;return`VHF-${t}-${a}`}async jovahagyas(t,a){const r=await this.modosit(t,{statusz:"jovahagyva",jovahagyta_vezeto_nev:a.jovahagyta_vezeto_nev,jovahagyas_datum:new Date().toISOString(),jovahagyas_megjegyzes:a.jovahagyas_megjegyzes,szemelyes_alairas:a.szemelyes_alairas||!1});return await this.expediolas(t),r}async elutasitas(t,a){return await this.modosit(t,{statusz:"elutasitva",jovahagyta_vezeto_nev:a.elutasitotta_vezeto_nev,jovahagyas_datum:new Date().toISOString(),elutasitas_indok:a.elutasitas_indok})}async expediolas(t){var n;const a=await this.getById(t);if(!a)throw new Error("Tervezet nem található");const r=await this.mockExpedicio(a);return await this.modosit(t,{statusz:"kikuldve",expedicio_datum:new Date().toISOString(),expedicio_mod:(n=a.expedicio)==null?void 0:n.kuldesi_mod,expedicio_statusz:r?"sikeres":"sikertelen"})}async mockExpedicio(t){var a,r,n;return console.log("📧 Mock expedíció - Dokumentum kiküldése"),console.log("Címzett:",(a=t.expedicio)==null?void 0:a.cimzett_nev),console.log("Cím/Email:",(r=t.expedicio)==null?void 0:r.cimzett_cim),console.log("Küldési mód:",(n=t.expedicio)==null?void 0:n.kuldesi_mod),console.log("Dokumentum:",t.dokumentum_cim),console.log("Szöveg:",t.dokumentum_szoveg.substring(0,100)+"..."),await new Promise(i=>setTimeout(i,500)),Math.random()<.95}async torol(t){const{error:a}=await xe.from("dokumentum_tervezetek").delete().eq("id",t);if(a)throw console.error("Dokumentum tervezet törlési hiba:",a),new Error("Nem sikerült törölni a dokumentum tervezetet")}async getStatisztikak(){const{data:t,error:a}=await xe.from("dokumentum_tervezetek").select("statusz");if(a)return console.error("Statisztikák lekérdezési hiba:",a),{draft:0,jovahagyasra_var:0,jovahagyva:0,elutasitva:0,kikuldve:0};const r={draft:0,jovahagyasra_var:0,jovahagyva:0,elutasitva:0,kikuldve:0};return t==null||t.forEach(n=>{n.statusz in r&&r[n.statusz]++}),r}async visszakuldes(t,a){const{error:r}=await xe.from("dokumentum_tervezetek").update({statusz:"visszakuldve",visszakuldotte_vezeto_nev:a.visszakuldotte_vezeto_nev,visszakuldes_megjegyzes:a.visszakuldes_megjegyzes,visszakuldve_datum:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",t);if(r)throw new Error(`Visszaküldés hiba: ${r.message}`)}}const wr=new jE,zE=[{id:"hataskor-illetekesseg",nev:"Hatáskör és illetékesség",leiras:"Hatáskör és illetékesség vizsgálata",ikon:hu,szin:"bg-blue-500"},{id:"formai-vizsgalat",nev:"Formai vizsgálat",leiras:"Formai megfelelőség ellenőrzése",ikon:lr,szin:"bg-green-500"},{id:"tartalmi-vizsgalat",nev:"Tartalmi vizsgálat",leiras:"Tartalmi megfelelőség ellenőrzése",ikon:lr,szin:"bg-teal-500"},{id:"tenyallas-tisztazas",nev:"Tényállás tisztázása",leiras:"Tényállás tisztázó cselekmények",ikon:lr,szin:"bg-indigo-500"},{id:"donteshozatal",nev:"Döntés-előkészítés",leiras:"Döntési javaslat, véleményezés, expedíciós adatok, jóváhagyásra küldés",ikon:bj,szin:"bg-blue-600"},{id:"lezaras",nev:"Lezárás",leiras:"Ügy lezárása és archiválás",ikon:D_,szin:"bg-neutral-500"}];function wE({aktualisLepes:e,onLepesValtas:t,tesztMod:a=!0}){return s.jsxs(se,{className:"p-4 bg-neutral-50",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-1",children:"Workflow Lépések"}),a&&s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-warning-100 border border-warning-300 rounded text-xs text-warning-800",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"TESZT MÓD"}),s.jsx("span",{children:"- Szabadon választható lépések"})]})]}),s.jsx("div",{className:"space-y-2",children:zE.map((r,n)=>{const i=r.ikon,l=r.id===e;return s.jsx("button",{onClick:()=>t(r.id),disabled:!a&&!l,className:`
                w-full text-left p-3 rounded-lg transition-all
                ${l?"bg-primary-600 text-white shadow-lg scale-105":a?"bg-white hover:bg-neutral-100 text-neutral-700 hover:shadow-md":"bg-neutral-200 text-neutral-400 cursor-not-allowed"}
              `,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:`
                    w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                    ${l?"bg-white text-primary-600":a?"bg-neutral-200 text-neutral-600":"bg-neutral-300 text-neutral-400"}
                  `,children:n+1})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(i,{className:`h-4 w-4 ${l?"text-white":"text-neutral-500"}`}),s.jsx("span",{className:`font-semibold text-sm ${l?"text-white":"text-neutral-900"}`,children:r.nev})]}),s.jsx("p",{className:`text-xs ${l?"text-white/90":"text-neutral-500"}`,children:r.leiras})]}),l&&s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})},r.id)})}),s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:s.jsxs("div",{className:"text-xs text-neutral-600 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-primary-600 rounded"}),s.jsx("span",{children:"Aktuális lépés"})]}),a&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-white border-2 border-neutral-300 rounded"}),s.jsx("span",{children:"Elérhető lépések (teszt módban)"})]})]})})]})}function NE({ugyAzonosito:e,iktatoszam:t,onVisszaad:a,onMegse:r}){const[n,i]=B.useState(""),[l,o]=B.useState(""),[c,d]=B.useState(!1),h=async()=>{if(!n.trim()||!l){alert("Kérjük töltse ki az összes kötelező mezőt!");return}d(!0);try{const g=await ic.ekeidrVisszaadas({ugyAzonosito:e,iktatoszam:t,indoklas:n.trim(),helyes_osztaly:l});g.sikeres?(alert(`✅ Ügy sikeresen visszaadva az EKEIDR rendszerbe!

Visszaadási azonosító: ${g.visszaadasi_azonosito}
Az ügy átirányításra kerül: ${l}`),a()):alert(`❌ Hiba történt: ${g.hibauzenet}`)}catch(g){console.error("EKEIDR visszaadási hiba:",g),alert("❌ Hiba történt az EKEIDR visszaadás során.")}finally{d(!1)}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs(se,{className:"w-full max-w-2xl bg-white mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-warning-100 rounded-lg",children:s.jsx(Jt,{className:"h-6 w-6 text-warning-700"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"EKEIDR Visszaadás"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Rossz helyre érkezett ügy visszaküldése az EKEIDR rendszerbe"})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",disabled:c,children:s.jsx(es,{className:"h-5 w-5 text-neutral-600"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-neutral-50 p-4 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Ügy azonosító:"}),s.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Iktatószám:"}),s.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:t})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Helyes osztály / szakterület ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsxs("select",{value:l,onChange:g=>o(g.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:c,children:[s.jsx("option",{value:"",children:"-- Válasszon osztályt --"}),s.jsx("option",{value:"ÉKM / Hajózási Hatósági Főosztály",children:"ÉKM / Hajózási Hatósági Főosztály"}),s.jsx("option",{value:"ÉKM / Közúti Hatósági Főosztály",children:"ÉKM / Közúti Hatósági Főosztály"}),s.jsx("option",{value:"ÉKM / Légiközlekedési Hatóság",children:"ÉKM / Légiközlekedési Hatóság"}),s.jsx("option",{value:"Más minisztérium",children:"Más minisztérium"}),s.jsx("option",{value:"Területi hatóság",children:"Területi hatóság"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Visszaadás indoklása ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("textarea",{value:n,onChange:g=>i(g.target.value),rows:5,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Adja meg részletesen, hogy miért kerül visszaadásra az ügy és miért a megadott osztályhoz tartozik...",disabled:c}),s.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Minimum 20 karakter szükséges az indokláshoz"})]}),s.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Jt,{className:"h-5 w-5 text-warning-700 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-warning-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Figyelem!"}),s.jsx("p",{children:"Az EKEIDR visszaadás után az ügy lezárásra kerül ebben a rendszerben, és átirányításra kerül a megadott osztályhoz. Ez a művelet nem visszavonható."})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:r,className:"flex-1 px-6 py-3 bg-neutral-200 text-neutral-700 rounded-lg font-semibold hover:bg-neutral-300 transition-colors",disabled:c,children:"Mégse"}),s.jsx("button",{onClick:h,disabled:c||!n.trim()||n.trim().length<20||!l,className:"flex-1 px-6 py-3 bg-warning-600 text-white rounded-lg font-semibold hover:bg-warning-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Visszaadás folyamatban..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ea,{className:"h-5 w-5"}),"EKEIDR visszaadás"]})})]})]})]})})}const _E={hianypotlas_formai:"Formai hiánypótlási felszólítás",hianypotlas_tartalmi:"Tartalmi hiánypótlási felszólítás",vegzes:"Végzés",határozat:"Határozat",igazolas:"Igazolás",tajekoztatas:"Tájékoztatás",hirdetmeny:"Hirdetmény"},SE={draft:"bg-neutral-100 text-neutral-700",iktatas_kesz:"bg-blue-100 text-blue-700",jovahagyasra_var:"bg-warning-100 text-warning-700",jovahagyva:"bg-success-100 text-success-700",elutasitva:"bg-error-100 text-error-700",kikuldve:"bg-neutral-100 text-neutral-700"},AE=e=>{switch(e){case"jovahagyasra_var":return s.jsx(bt,{className:"h-5 w-5 text-warning-600"});case"jovahagyva":return s.jsx(Pe,{className:"h-5 w-5 text-success-600"});case"elutasitva":return s.jsx(Qs,{className:"h-5 w-5 text-error-600"});case"kikuldve":return s.jsx(Pe,{className:"h-5 w-5 text-neutral-600"});default:return s.jsx(De,{className:"h-5 w-5 text-neutral-600"})}},EE={draft:"Piszkozat",iktatas_kesz:"Iktatásra kész",jovahagyasra_var:"Jóváhagyásra vár",jovahagyva:"Jóváhagyva",elutasitva:"Elutasítva",kikuldve:"Kiküldve"};function s2({onDokumentumValaszt:e}){const[t,a]=B.useState([]),[r,n]=B.useState(!0),[i,l]=B.useState("jovahagyasra_var");B.useEffect(()=>{o()},[i]);const o=async()=>{n(!0);try{let h;if(i==="osszes"){const g=await wr.getByStatusz("jovahagyasra_var"),p=await wr.getByStatusz("jovahagyva"),f=await wr.getByStatusz("elutasitva"),k=await wr.getByStatusz("kikuldve");h=[...g,...p,...f,...k],h.sort((_,w)=>{const x=new Date(_.created_at||0).getTime();return new Date(w.created_at||0).getTime()-x})}else h=await wr.getByStatusz(i);a(h)}catch(h){console.error("Tervezetek betöltési hiba:",h)}finally{n(!1)}},c=h=>h?new Date(h).toLocaleString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",d=h=>{if(!h)return null;const g=new Date(h),f=new Date().getTime()-g.getTime(),k=Math.floor(f/(1e3*60*60)),_=Math.floor(k/24);return k<1?"Most":k<24?`${k} órája`:_<7?`${_} napja`:null};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Dokumentum tervezetek jóváhagyása"}),s.jsx("p",{className:"text-neutral-600 mt-1",children:"Ügyviteli dokumentumok (hiánypótlás, végzés, határozat) jóváhagyása"})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>l("jovahagyasra_var"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="jovahagyasra_var"?"bg-warning-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[s.jsx(bt,{className:"inline h-4 w-4 mr-2"}),"Jóváhagyásra vár"]}),s.jsxs("button",{onClick:()=>l("jovahagyva"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="jovahagyva"?"bg-success-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[s.jsx(Pe,{className:"inline h-4 w-4 mr-2"}),"Jóváhagyva"]}),s.jsxs("button",{onClick:()=>l("elutasitva"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="elutasitva"?"bg-error-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[s.jsx(Qs,{className:"inline h-4 w-4 mr-2"}),"Elutasítva"]}),s.jsxs("button",{onClick:()=>l("osszes"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="osszes"?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[s.jsx(De,{className:"inline h-4 w-4 mr-2"}),"Összes"]})]}),r&&s.jsxs(se,{className:"bg-white text-center py-12",children:[s.jsx(bt,{className:"h-16 w-16 text-primary-600 mx-auto mb-4 animate-spin"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Betöltés..."}),s.jsx("p",{className:"text-neutral-600",children:"Dokumentum tervezetek lekérdezése."})]}),!r&&t.length===0&&s.jsxs(se,{className:"bg-white text-center py-12",children:[s.jsx(Jt,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Nincs találat"}),s.jsxs("p",{className:"text-neutral-600",children:[i==="jovahagyasra_var"&&"Jelenleg nincs jóváhagyásra váró dokumentum.",i==="jovahagyva"&&"Még nincs jóváhagyott dokumentum.",i==="elutasitva"&&"Nincs elutasított dokumentum.",i==="osszes"&&"Még nincs dokumentum tervezet."]})]}),!r&&t.length>0&&s.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map(h=>{const g=d(h.created_at);return s.jsx(se,{className:`bg-white hover:shadow-lg transition-shadow cursor-pointer border-l-4 ${h.statusz==="jovahagyasra_var"?"border-warning-500":h.statusz==="jovahagyva"?"border-success-500":h.statusz==="elutasitva"?"border-error-500":"border-neutral-300"}`,onClick:()=>e(h),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[AE(h.statusz),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900",children:_E[h.tervezet_tipus]||h.tervezet_tipus}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${SE[h.statusz]}`,children:EE[h.statusz]})]}),s.jsx("p",{className:"text-sm text-neutral-600 font-mono",children:h.ugy_azonosito})]})]}),s.jsx("div",{className:"pl-8 mb-3",children:s.jsx("p",{className:"text-sm text-neutral-700 line-clamp-2",children:h.dokumentum_szoveg})}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pl-8",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"h-4 w-4 text-neutral-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"Ügyintéző"}),s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:h.letrehozta_ugyintezo_nev||"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cr,{className:"h-4 w-4 text-neutral-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"Létrehozva"}),s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:g||c(h.created_at)})]})]}),h.ekeidr_iktatoszam&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(De,{className:"h-4 w-4 text-neutral-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"Iktatószám"}),s.jsx("p",{className:"text-sm font-medium text-neutral-900 font-mono",children:h.ekeidr_iktatoszam})]})]}),h.jovahagyta_vezeto_nev&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"h-4 w-4 text-neutral-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:h.statusz==="jovahagyva"?"Jóváhagyta":"Elutasította"}),s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:h.jovahagyta_vezeto_nev})]})]})]}),h.elutasitas_indok&&s.jsxs("div",{className:"pl-8 mt-3 p-3 bg-error-50 border border-error-200 rounded-lg",children:[s.jsx("p",{className:"text-xs font-semibold text-error-900 mb-1",children:"Elutasítás indoka:"}),s.jsx("p",{className:"text-sm text-error-700",children:h.elutasitas_indok})]})]}),s.jsxs("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2 text-sm font-medium",onClick:p=>{p.stopPropagation(),e(h)},children:[s.jsx(ba,{className:"h-4 w-4"}),"Megtekintés"]})]})},h.id)})}),!r&&t.length>0&&s.jsx(se,{className:"bg-gradient-to-r from-primary-50 to-accent-50 border border-primary-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),s.jsxs("span",{className:"text-sm font-medium text-neutral-700",children:["Találatok száma: ",s.jsx("strong",{className:"text-neutral-900",children:t.length})]})]}),s.jsx("button",{onClick:o,className:"px-3 py-1.5 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700 transition-colors",children:"Frissítés"})]})})]})}const kg={hianypotlas_formai:"Formai hiánypótlási felszólítás",hianypotlas_tartalmi:"Tartalmi hiánypótlási felszólítás",vegzes:"Végzés",határozat:"Határozat",igazolas:"Igazolás",tajekoztatas:"Tájékoztatás",hirdetmeny:"Hirdetmény"};function CE({tervezet:e,onVissza:t,onJovahagyva:a,onElutasitva:r}){const[n,i]=B.useState(""),[l,o]=B.useState(""),[c,d]=B.useState(""),[h,g]=B.useState(!1),[p,f]=B.useState(!1),[k]=B.useState("Dr. Kovács István (VHF Főosztályvezető)"),_=N=>N?new Date(N).toLocaleString("hu-HU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",w=async()=>{if(e.statusz!=="jovahagyasra_var"){d("Csak jóváhagyásra váró dokumentumot lehet jóváhagyni!");return}g(!0);try{await wr.jovahagyas(e.id,{jovahagyta_vezeto_nev:k,jovahagyas_megjegyzes:n||void 0}),await La.letrehoz({ugy_id:e.ugy_id,esemeny_tipus:"dokumentum_jovahagyva",esemeny_leiras:`Dokumentum jóváhagyva: ${kg[e.tervezet_tipus]} (${e.ekeidr_iktatoszam})`,szereplo:k,datum:new Date().toISOString(),metaadatok:{tervezet_id:e.id,tervezet_tipus:e.tervezet_tipus,megjegyzes:n}}),a()}catch(N){console.error("Jóváhagyási hiba:",N),d("Hiba történt a jóváhagyás során. Próbálja újra!")}finally{g(!1)}},x=async()=>{if(!l.trim()){d("Kérem indokolja meg az elutasítást!");return}if(e.statusz!=="jovahagyasra_var"){d("Csak jóváhagyásra váró dokumentumot lehet elutasítani!");return}g(!0);try{await wr.elutasitas(e.id,{elutasitotta_vezeto_nev:k,elutasitas_indok:l}),await La.letrehoz({ugy_id:e.ugy_id,esemeny_tipus:"dokumentum_elutasitva",esemeny_leiras:`Dokumentum elutasítva: ${kg[e.tervezet_tipus]} (${e.ekeidr_iktatoszam})`,szereplo:k,datum:new Date().toISOString(),metaadatok:{tervezet_id:e.id,tervezet_tipus:e.tervezet_tipus,elutasitas_indok:l}}),r()}catch(N){console.error("Elutasítási hiba:",N),d("Hiba történt az elutasítás során. Próbálja újra!")}finally{g(!1)}},j=()=>{i("A dokumentum tartalma megfelelő, az eljárási előírásoknak megfelel. Jóváhagyom a kiküldést."),d("")},z=()=>{o("A hiánypótlási felszólítás szövege túl általános. Kérem pontosítsa a hiányosságokat konkrét jogszabályi hivatkozásokkal és részletesebb leírással."),d("")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-neutral-600 hover:text-neutral-900 transition-colors",children:[s.jsx(ei,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Vissza a listához"})]}),s.jsx(se,{className:"bg-gradient-to-r from-primary-50 to-accent-50 border-2 border-primary-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(De,{className:"h-8 w-8 text-primary-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:kg[e.tervezet_tipus]||e.tervezet_tipus}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Dokumentum tervezet vezetői jóváhagyásra"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(De,{className:"h-4 w-4 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"Ügy azonosító"}),s.jsx("p",{className:"font-mono text-sm font-semibold text-neutral-900",children:e.ugy_azonosito})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(De,{className:"h-4 w-4 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"EKEIDR iktatószám"}),s.jsx("p",{className:"font-mono text-sm font-semibold text-neutral-900",children:e.ekeidr_iktatoszam||"Még nincs"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"h-4 w-4 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"Létrehozta"}),s.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:e.letrehozta_ugyintezo_nev||"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cr,{className:"h-4 w-4 text-neutral-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-600",children:"Létrehozva"}),s.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:_(e.created_at)})]})]})]})]}),s.jsxs("button",{onClick:()=>f(!p),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${p?"bg-primary-600 text-white hover:bg-primary-700":"bg-white text-neutral-700 hover:bg-neutral-50 border border-neutral-300"}`,children:[s.jsx(ba,{className:"h-5 w-5"}),p?"Elrejtés":"Előnézet"]})]})}),e.expedicio&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Expedíciós adatok"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Címzett neve"}),s.jsx("p",{className:"font-semibold text-neutral-900",children:e.expedicio.cimzett_nev})]}),s.jsxs("div",{className:"p-4 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Címzett elérhetőség"}),s.jsx("p",{className:"font-semibold text-neutral-900",children:e.expedicio.cimzett_cim})]}),s.jsxs("div",{className:"p-4 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Küldési mód"}),s.jsx("p",{className:"font-semibold text-neutral-900",children:e.expedicio.kuldesi_mod==="email"?"Email":e.expedicio.kuldesi_mod==="postai"?"Postai":e.expedicio.kuldesi_mod==="ekeidr"?"EKEIDR":"Egyéb"})]}),s.jsxs("div",{className:"p-4 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-neutral-600 mb-1",children:"Teljesítési határidő"}),s.jsxs("p",{className:"font-semibold text-neutral-900",children:[e.expedicio.hatarid_napok," nap"]})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Dokumentum tartalma"]}),p?s.jsxs("div",{className:"p-6 bg-neutral-50 border-2 border-neutral-200 rounded-lg",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-xl font-bold text-center text-neutral-900 mb-2",children:e.dokumentum_cim}),e.ekeidr_iktatoszam&&s.jsxs("p",{className:"text-sm text-center text-neutral-600 font-mono",children:["Iktatószám: ",e.ekeidr_iktatoszam]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-neutral-800 whitespace-pre-wrap leading-relaxed",children:e.dokumentum_szoveg}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-neutral-300 text-right",children:[s.jsxs("p",{className:"text-sm text-neutral-700",children:["Budapest, ",new Date().toLocaleDateString("hu-HU")]}),s.jsx("p",{className:"mt-4 font-semibold text-neutral-900",children:e.letrehozta_ugyintezo_nev||"N/A"}),s.jsx("p",{className:"text-sm text-neutral-700",children:"ügyintéző"})]})]})]}):s.jsx("div",{className:"p-4 bg-neutral-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-neutral-800 whitespace-pre-wrap",children:e.dokumentum_szoveg})})]}),s.jsx(se,{className:"bg-accent-50 border-accent-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ut,{className:"h-5 w-5 text-accent-600"}),s.jsx("p",{className:"text-sm font-medium text-accent-900",children:"Teszt adatok"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:j,className:"px-3 py-1.5 bg-success-600 text-white text-sm rounded-md hover:bg-success-700 transition-colors",children:"Teszt: Jóváhagyás"}),s.jsx("button",{onClick:z,className:"px-3 py-1.5 bg-error-600 text-white text-sm rounded-md hover:bg-error-700 transition-colors",children:"Teszt: Elutasítás"})]})]})}),e.statusz==="jovahagyasra_var"&&s.jsxs(s.Fragment,{children:[s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Pe,{className:"h-5 w-5 text-success-600"}),"Vezetői jóváhagyás"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-primary-50 rounded-lg border border-primary-200",children:s.jsxs("p",{className:"text-sm text-primary-900",children:[s.jsx("strong",{children:"Jóváhagyó:"})," ",k]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Vezetői megjegyzés (opcionális)"}),s.jsx("textarea",{value:n,onChange:N=>{i(N.target.value),d("")},rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Írjon megjegyzést a dokumentumról, ha szükséges...",disabled:h})]}),s.jsx("button",{onClick:w,disabled:h,className:"w-full px-6 py-3 bg-success-600 text-white rounded-lg font-semibold hover:bg-success-700 transition-colors flex items-center justify-center gap-2 disabled:bg-neutral-400 disabled:cursor-not-allowed",children:h?s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"h-5 w-5 animate-spin"}),"Mentés..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"h-5 w-5"}),"Dokumentum jóváhagyása és kiküldés"]})})]})]}),s.jsxs(se,{className:"bg-white border-2 border-error-200",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Qs,{className:"h-5 w-5 text-error-600"}),"Dokumentum elutasítása"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Elutasítás indoklása ",s.jsx("span",{className:"text-error-600",children:"*"})]}),s.jsx("textarea",{value:l,onChange:N=>{o(N.target.value),d("")},rows:4,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-error-500",placeholder:"Írja le részletesen, miért utasítja el a dokumentumot...",disabled:h})]}),s.jsx("button",{onClick:x,disabled:h||!l.trim(),className:"w-full px-6 py-3 bg-error-600 text-white rounded-lg font-semibold hover:bg-error-700 transition-colors flex items-center justify-center gap-2 disabled:bg-neutral-400 disabled:cursor-not-allowed",children:h?s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"h-5 w-5 animate-spin"}),"Mentés..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Qs,{className:"h-5 w-5"}),"Dokumentum elutasítása és visszaküldés"]})})]})]})]}),(e.statusz==="jovahagyva"||e.statusz==="elutasitva"||e.statusz==="kikuldve")&&s.jsx(se,{className:`border-2 ${e.statusz==="jovahagyva"||e.statusz==="kikuldve"?"bg-success-50 border-success-200":"bg-error-50 border-error-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[e.statusz==="jovahagyva"||e.statusz==="kikuldve"?s.jsx(Pe,{className:"h-6 w-6 text-success-600 flex-shrink-0"}):s.jsx(Qs,{className:"h-6 w-6 text-error-600 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-semibold text-neutral-900 mb-2",children:[e.statusz==="jovahagyva"&&"Dokumentum jóváhagyva",e.statusz==="kikuldve"&&"Dokumentum kiküldve",e.statusz==="elutasitva"&&"Dokumentum elutasítva"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("p",{className:"text-neutral-700",children:[s.jsx("strong",{children:"Vezető:"})," ",e.jovahagyta_vezeto_nev]}),s.jsxs("p",{className:"text-neutral-700",children:[s.jsx("strong",{children:"Dátum:"})," ",_(e.jovahagyas_datum)]}),e.jovahagyas_megjegyzes&&s.jsxs("div",{className:"mt-2 p-3 bg-white rounded-md",children:[s.jsx("p",{className:"text-xs font-semibold text-neutral-700 mb-1",children:"Megjegyzés:"}),s.jsx("p",{className:"text-neutral-800",children:e.jovahagyas_megjegyzes})]}),e.elutasitas_indok&&s.jsxs("div",{className:"mt-2 p-3 bg-white rounded-md",children:[s.jsx("p",{className:"text-xs font-semibold text-neutral-700 mb-1",children:"Elutasítás indoka:"}),s.jsx("p",{className:"text-neutral-800",children:e.elutasitas_indok})]}),e.statusz==="kikuldve"&&e.expedicio_datum&&s.jsxs("p",{className:"text-neutral-700",children:[s.jsx("strong",{children:"Kiküldve:"})," ",_(e.expedicio_datum)," - ",e.expedicio_mod]})]})]})]})}),c&&s.jsx(se,{className:"bg-error-50 border-2 border-error-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ut,{className:"h-5 w-5 text-error-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-error-900",children:"Hiba"}),s.jsx("p",{className:"text-sm text-error-700 mt-1",children:c})]})]})})]})}const ym={async getByUgyId(e){try{const{data:t,error:a}=await xe.from("dontesi_javaslatok").select("*").eq("ugy_id",e).order("datum",{ascending:!1}).limit(1).maybeSingle();if(a)return console.error("Hiba a döntési javaslat lekérdezésekor:",a),null;if(!t)return null;const r=t;return{ugyintezoNev:r.ugyintezo_nev,datum:r.datum,jogiForma:r.jogi_forma,dontesiTipus:r.dontesi_tipus,indoklas:r.indoklas,javaslat:r.javaslat,mellekletek:r.mellekletek||[],dijEllenorzve:r.dij_ellenorizve,nyilvantartasFrissites:r.nyilvantartas_frissites}}catch(t){return console.error("Hiba a döntési javaslat lekérdezésekor:",t),null}},async getByUgyAzonosito(e){try{const{data:t,error:a}=await xe.from("ugyek").select("id").eq("ugy_azonosito",e).maybeSingle();return a||!t?(console.error("Hiba az ügy lekérdezésekor:",a),null):this.getByUgyId(t.id)}catch(t){return console.error("Hiba a döntési javaslat lekérdezésekor:",t),null}},async getByUgyIdKiterjesztett(e){try{const{data:t,error:a}=await xe.from("dontesi_javaslatok").select("*").eq("ugy_id",e).order("datum",{ascending:!1}).limit(1).maybeSingle();if(a)return console.error("Hiba a döntési javaslat lekérdezésekor:",a),null;if(!t)return null;const r=t,n=await wr.getByDontesiJavaslatId(r.id);return{id:r.id,ugyintezoNev:r.ugyintezo_nev,datum:r.datum,jogiForma:r.jogi_forma,dontesiTipus:r.dontesi_tipus,indoklas:r.indoklas,javaslat:r.javaslat,mellekletek:r.mellekletek||[],dijEllenorzve:r.dij_ellenorizve,nyilvantartasFrissites:r.nyilvantartas_frissites,dokumentumok:n}}catch(t){return console.error("Hiba a döntési javaslat lekérdezésekor:",t),null}},async getJovahagyasraVaroak(){try{const{data:e,error:t}=await xe.from("dontesi_javaslatok").select("*").order("datum",{ascending:!1});return t?(console.error("Hiba a döntési javaslatok lekérdezésekor:",t),[]):!e||e.length===0?[]:await Promise.all(e.map(async r=>{const n=await wr.getByDontesiJavaslatId(r.id);return{id:r.id,ugyintezoNev:r.ugyintezo_nev,datum:r.datum,jogiForma:r.jogi_forma,dontesiTipus:r.dontesi_tipus,indoklas:r.indoklas,javaslat:r.javaslat,mellekletek:r.mellekletek||[],dijEllenorzve:r.dij_ellenorizve,nyilvantartasFrissites:r.nyilvantartas_frissites,dokumentumok:n}}))}catch(e){return console.error("Hiba a döntési javaslatok lekérdezésekor:",e),[]}},async jovahagyas(e,t){const{error:a}=await xe.from("dontesi_javaslatok").update({workflow_statusz:"jovahagyva",jovahagyta_vezeto_nev:t.jovahagyta_vezeto_nev,jovahagyas_megjegyzes:t.jovahagyas_megjegyzes,jovahagyas_datum:new Date().toISOString(),szemelyes_alairas:t.szemelyes_alairas||!1,updated_at:new Date().toISOString()}).eq("id",e);if(a)throw new Error(`Jóváhagyás hiba: ${a.message}`)},async visszakuldes(e,t){const{error:a}=await xe.from("dontesi_javaslatok").update({workflow_statusz:"visszakuldve",visszakuldotte_vezeto_nev:t.visszakuldotte_vezeto_nev,vezeto_megjegyzes:t.visszakuldes_megjegyzes,visszakuldve_datum:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(a)throw new Error(`Visszaküldés hiba: ${a.message}`)},async getById(e){const{data:t,error:a}=await xe.from("dontesi_javaslatok").select("*").eq("id",e).maybeSingle();if(a)throw new Error(`Lekérdezési hiba: ${a.message}`);return t}};function LE({javaslatId:e,vezetoNev:t,onVissza:a,onMuveletKesz:r}){const[n,i]=B.useState(null),[l,o]=B.useState([]),[c,d]=B.useState(!0),[h,g]=B.useState("megtekintes"),[p,f]=B.useState(""),[k,_]=B.useState(""),[w,x]=B.useState(!1),[j,z]=B.useState(!1),N=(n==null?void 0:n.workflow_statusz)||"draft";B.useEffect(()=>{$()},[e]);const $=async()=>{try{d(!0);const R=await ym.getById(e);i(R);const y=await wr.getByDontesiJavaslatId(e);o(y)}catch(R){console.error("Adatok betöltése sikertelen:",R),alert("❌ Hiba történt az adatok betöltése során")}finally{d(!1)}},q=async()=>{if(!(j||!window.confirm(`Biztosan jóváhagyja a döntési javaslatot és az összes dokumentumot (${l.length} db)?

${w?"✍️ SZEMÉLYES ALÁÍRÁS - Az aláírás elhelyezésre kerül a dokumentumokon":"🔐 ELEKTRONIKUS ALÁÍRÁS"}`)))try{z(!0),await ym.jovahagyas(e,{jovahagyta_vezeto_nev:t,jovahagyas_megjegyzes:p||void 0,szemelyes_alairas:w});for(const y of l)await wr.jovahagyas(y.id,{jovahagyta_vezeto_nev:t,jovahagyas_megjegyzes:p||void 0,szemelyes_alairas:w});alert(`✅ Döntési javaslat és ${l.length} db dokumentum sikeresen jóváhagyva${w?" személyes aláírással":""}!`),r()}catch(y){console.error("Jóváhagyás hiba:",y),alert("❌ Hiba történt a jóváhagyás során")}finally{z(!1)}},G=async()=>{if(j)return;if(!k.trim()){alert("⚠️ Kérem, adja meg a visszaküldés okát és a szükséges módosításokat!");return}if(window.confirm("Biztosan visszaküldi a döntési javaslatot módosításra? Az ügyintéző megkapja a megjegyzéseit és javítás után újra benyújthatja."))try{z(!0),await ym.visszakuldes(e,{visszakuldotte_vezeto_nev:t,visszakuldes_megjegyzes:k});for(const y of l)await wr.visszakuldes(y.id,{visszakuldotte_vezeto_nev:t,visszakuldes_megjegyzes:k});alert("✅ Döntési javaslat visszaküldve módosításra. Az ügyintéző értesítést kap."),r()}catch(y){console.error("Visszaküldés hiba:",y),alert("❌ Hiba történt a visszaküldés során")}finally{z(!1)}},D=()=>{switch(N){case"jovahagyva":return s.jsx("div",{className:"bg-green-100 border-2 border-green-400 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pe,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-green-900",children:"Jóváhagyva"}),s.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Jóváhagyta: ",s.jsx("strong",{children:n.jovahagyta_vezeto_nev})," •",new Date(n.jovahagyas_datum).toLocaleString("hu-HU"),n.szemelyes_alairas&&s.jsx("span",{className:"ml-2",children:"✍️ Személyes aláírással"})]}),n.jovahagyas_megjegyzes&&s.jsxs("p",{className:"text-sm text-green-700 mt-1",children:['Megjegyzés: "',n.jovahagyas_megjegyzes,'"']})]}),s.jsx("span",{className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"✅ Jóváhagyva"})]})});case"visszakuldve":return s.jsx("div",{className:"bg-orange-100 border-2 border-orange-400 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qr,{className:"w-8 h-8 text-orange-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-orange-900",children:"Visszaküldve módosításra"}),s.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Visszaküldte: ",s.jsx("strong",{children:n.visszakuldotte_vezeto_nev})," •",new Date(n.visszakuldve_datum).toLocaleString("hu-HU")]}),s.jsxs("p",{className:"text-sm text-orange-800 mt-2 bg-orange-50 p-2 rounded border border-orange-300",children:[s.jsx("strong",{children:"Megjegyzés:"})," ",n.visszakuldes_megjegyzes]})]}),s.jsx("span",{className:"px-4 py-2 bg-orange-600 text-white rounded-lg font-semibold",children:"🔄 Visszaküldve"})]})});case"jovahagyasra_var":case"draft":default:return s.jsx("div",{className:"bg-yellow-100 border-2 border-yellow-400 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bt,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-900",children:"Jóváhagyásra vár"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Ezt a döntési javaslatot és a hozzá tartozó dokumentumokat még nem hagyta jóvá.",s.jsx("strong",{children:" PDF formában tekintheti meg őket."})]})]}),s.jsx("span",{className:"px-4 py-2 bg-yellow-600 text-white rounded-lg font-semibold",children:"⏳ Döntésre vár"})]})})}};if(c)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bt,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Adatok betöltése..."})]})});if(!n)return s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Jt,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Döntési javaslat nem található"}),s.jsx("button",{onClick:a,className:"mt-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg",children:"Vissza"})]});const I=N==="jovahagyasra_var"||N==="draft";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[s.jsx(ei,{className:"w-5 h-5"}),"Vissza a listához"]}),I&&h==="megtekintes"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>g("jovahagyas"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[s.jsx(Pe,{className:"w-5 h-5"}),"Jóváhagyás"]}),s.jsxs("button",{onClick:()=>g("visszakuldes"),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[s.jsx(qr,{className:"w-5 h-5"}),"Visszaküldés megjegyzéssel"]})]})]}),D(),s.jsx(se,{children:s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n.ugy_azonosito}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Készítette: ",n.letrehozta_ugyintezo_nev," • ",new Date(n.created_at).toLocaleString("hu-HU")]})]})})}),s.jsxs(se,{className:"bg-blue-50 border-2 border-blue-300",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(De,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:["📄 Dokumentumok PDF formában (",l.length," db)"]}),s.jsx("p",{className:"text-sm text-blue-800",children:"A dokumentumokat PDF formában tekintheti meg. A megtekintés után dönthet a jóváhagyásról vagy visszaküldésről."})]})]}),s.jsx("div",{className:"space-y-3",children:l.map((R,y)=>s.jsx("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-bold text-gray-900",children:[y+1,". ",R.dokumentum_cim||R.tervezet_tipus.toUpperCase()]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Típus: ",R.tervezet_tipus," • Verzió: ",R.verzio]})]}),s.jsxs("button",{onClick:()=>{alert("📄 PDF megnyitása: "+R.dokumentum_cim)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(ba,{className:"w-5 h-5"}),"PDF megtekintése"]})]})},R.id))})]}),h==="jovahagyas"&&I&&s.jsxs(se,{className:"bg-green-50 border-2 border-green-300",children:[s.jsxs("h3",{className:"text-xl font-bold text-green-900 mb-4 flex items-center gap-2",children:[s.jsx(Pe,{className:"w-6 h-6"}),"Döntési javaslat jóváhagyása"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-gray-700 mb-2",children:"A jóváhagyással a következők történnek:"}),s.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1 ml-2",children:[s.jsx("li",{children:"A döntési javaslat jóváhagyott státuszra vált"}),s.jsxs("li",{children:["Minden dokumentum (",l.length," db) kiküldésre kerül az ügyfélnek"]}),s.jsx("li",{children:"Az ügy továbbhalad a workflow-ban"}),s.jsx("li",{children:"Automatikus értesítés küldése az érintetteknek"})]})]}),s.jsx("div",{className:"bg-white border-2 border-blue-300 rounded-lg p-4",children:s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w,onChange:R=>x(R.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-bold text-gray-900 flex items-center gap-2",children:"✍️ Személyes aláírást helyezek rá a dokumentumokra"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ha bejelöli, a dokumentumokon grafikai aláírás elem jelenik meg a neve mellett. Ha nem jelöli be, csak elektronikus jóváhagyás történik."})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Megjegyzés (opcionális)"}),s.jsx("textarea",{value:p,onChange:R=>f(R.target.value),placeholder:"Pl.: Jóváhagyom, minden dokumentum rendben van...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:q,disabled:j,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 font-semibold",children:j?s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"w-5 h-5 animate-spin"}),"Jóváhagyás folyamatban..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-5 h-5"}),w?"✍️ Jóváhagyom személyes aláírással":"🔐 Jóváhagyom elektronikusan"]})}),s.jsx("button",{onClick:()=>g("megtekintes"),className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Mégse"})]})]})]}),h==="visszakuldes"&&I&&s.jsxs(se,{className:"bg-orange-50 border-2 border-orange-300",children:[s.jsxs("h3",{className:"text-xl font-bold text-orange-900 mb-4 flex items-center gap-2",children:[s.jsx(qr,{className:"w-6 h-6"}),"Visszaküldés módosításra megjegyzéssel"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white border border-orange-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-gray-700 mb-2",children:"A visszaküldéssel a következők történnek:"}),s.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1 ml-2",children:[s.jsx("li",{children:"A döntési javaslat visszakerül az ügyintézőhöz"}),s.jsxs("li",{children:["Minden dokumentum (",l.length," db) módosításra vár"]}),s.jsx("li",{children:"Az ügyintéző látja a megjegyzéseit és javíthat"}),s.jsx("li",{children:"Javítás után újra benyújtható jóváhagyásra"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Megjegyzés és módosítási kérések ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx("textarea",{value:k,onChange:R=>_(R.target.value),placeholder:"Pl.: A 2. dokumentumban a jogi hivatkozás pontatlan, kérem javítani. Az indoklás bővítése szükséges a 45/2020 rendelet szerinti szempontokkal...",className:"w-full px-3 py-2 border border-orange-300 rounded-lg",rows:5,required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Részletesen írja le, mit kell módosítani. Az ügyintéző ezt látja."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:G,disabled:j||!k.trim(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:bg-gray-400 font-semibold",children:j?s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"w-5 h-5 animate-spin"}),"Visszaküldés folyamatban..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qr,{className:"w-5 h-5"}),"Visszaküldöm módosításra"]})}),s.jsx("button",{onClick:()=>g("megtekintes"),className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Mégse"})]})]})]}),!I&&s.jsx(se,{children:s.jsx("div",{className:"text-center py-8",children:N==="jovahagyva"?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"A döntési javaslat már jóváhagyásra került"}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"A dokumentumok kiküldésre kerültek az ügyfélnek"})]}):s.jsxs(s.Fragment,{children:[s.jsx(qr,{className:"w-16 h-16 text-orange-600 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"A döntési javaslat visszaküldésre került"}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Az ügyintéző javítás után újra benyújthatja"})]})})})]})}function TE({ugy:e,onBefejez:t,onMegse:a,tesztMod:r=!1}){const[n,i]=B.useState("javaslat"),[l,o]=B.useState("engedelyezes"),[c,d]=B.useState("határozat"),[h,g]=B.useState(null),[p,f]=B.useState({cimzettek:"",kuldesiMod:"hivatali_kapu",peldanyszam:1,megjegyzesek:""}),[k,_]=B.useState(!1),[w,x]=B.useState(!1),[j,z]=B.useState(!1),[N,$]=B.useState(!0),[q,G]=B.useState("");B.useEffect(()=>{n==="javaslat"&&D()},[n]);const D=async()=>{try{const M=await tE.ellenorizDijfizetes({ugy_azonosito:e.ugyAzonosito,dijfizetes_tipus:"eljárási_díj"});z(M.sikeres&&M.fizetve),x(!0),await La.letrehoz({ugy_id:e.id,esemeny_tipus:"dijfizetes_ellenorzes",esemeny_leiras:`Díjfizetés ellenőrzése: ${M.fizetve?"Rendezve":"Hiányzik"}`,szereplo:"Rendszer",datum:new Date().toISOString(),metaadatok:M})}catch(M){console.error("Díjfizetés ellenőrzési hiba:",M),x(!0),z(!0)}},I=async()=>{if(!w){alert("Kérem, várja meg a díjfizetés ellenőrzését!");return}try{await La.letrehoz({ugy_id:e.id,esemeny_tipus:"dontesi_javaslat_kezdes",esemeny_leiras:`Döntés-előkészítés megkezdve: ${l}`,szereplo:"VHF Ügyintéző",datum:new Date().toISOString(),metaadatok:{dontes_tipusa:l,jogi_forma:c,dijfizetes_ok:j}})}catch(M){console.error("Esemény naplózási hiba:",M)}i("tervezet_szerkesztes")},R=M=>{g(M),alert("✅ Dokumentum tervezet sikeresen mentve!"),setTimeout(()=>{i("velemenyezes")},500)},y=()=>{_(!1),i("expedicio")},A=()=>{_(!0)},E=()=>{i("expedicio")},L=()=>{if(!h){alert("Nincs még dokumentum tervezet!");return}const M={ugyAzonosito:e.ugyAzonosito,ugyTipus:e.ugytuekKod||"V-044",kerelemzoNev:e.ugyfelNev||"Ismeretlen ügyfél",dontesTipusa:l,jogiForma:c,indoklas:h.indoklas,dijfizetesEllenorizve:w,dijfizetesOk:j,nyilvantartasFrissitendo:N,tovabbiFeladatok:q,expediciosAdatok:p.cimzettek?{cimzettek:p.cimzettek,kuldesiMod:p.kuldesiMod,peldanyszam:p.peldanyszam,megjegyzesek:p.megjegyzesek}:void 0,datum:new Date().toLocaleDateString("hu-HU"),ugyintezoNev:"VHF Ügyintéző"};try{rE(M),alert("A dokumentum tervezet sikeresen letöltésre került!")}catch(ee){console.error("PDF generálási hiba:",ee),alert("Hiba történt a PDF generálása során. Próbálja újra!")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(se,{className:"bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900",children:"Döntés-előkészítés folyamata"}),s.jsxs("div",{className:"flex items-center gap-3",children:[r&&s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-warning-100 border border-warning-300 rounded text-xs text-warning-800",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"TESZT MÓD"}),s.jsx("span",{children:"- Szabadon választható lépések"})]}),s.jsx("span",{className:"text-sm text-neutral-600",children:"UCE-1826 - UC-0304"})]})]}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center justify-between",children:[{id:"javaslat",label:"Alapadatok megadása"},{id:"tervezet_szerkesztes",label:"Dokumentum tervezet"},{id:"velemenyezes",label:"Véleményezés"},{id:"expedicio",label:"Expedíciós adatok"},{id:"jovahagyasra_kuldes",label:"Jóváhagyásra küldés"}].map((M,ee)=>{const ce=n===M.id,V=["javaslat","tervezet_szerkesztes","velemenyezes","expedicio","jovahagyasra_kuldes"].indexOf(n)>ee,le=r;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("button",{onClick:()=>le&&i(M.id),disabled:!le,className:`w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all ${V?"bg-success-600 text-white":ce?"bg-primary-600 text-white ring-4 ring-primary-200":"bg-neutral-200 text-neutral-500"} ${le?"cursor-pointer hover:opacity-80 hover:scale-105":"cursor-default"}`,children:V?s.jsx(Pe,{className:"h-5 w-5"}):ee+1}),s.jsx("span",{className:`text-xs text-center font-medium ${ce?"text-primary-900 font-bold":"text-neutral-600"}`,children:M.label})]},M.id)})})})]}),n==="javaslat"&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Alapadatok megadása"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Döntés típusa"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{onClick:()=>o("engedelyezes"),className:`p-4 rounded-lg border-2 transition-all ${l==="engedelyezes"?"border-success-500 bg-success-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx(Pe,{className:`h-6 w-6 mx-auto mb-2 ${l==="engedelyezes"?"text-success-600":"text-neutral-400"}`}),s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Engedélyezés"})]}),s.jsxs("button",{onClick:()=>o("elutasitas"),className:`p-4 rounded-lg border-2 transition-all ${l==="elutasitas"?"border-error-500 bg-error-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx(Qs,{className:`h-6 w-6 mx-auto mb-2 ${l==="elutasitas"?"text-error-600":"text-neutral-400"}`}),s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Elutasítás"})]}),s.jsxs("button",{onClick:()=>o("visszakuldes"),className:`p-4 rounded-lg border-2 transition-all ${l==="visszakuldes"?"border-warning-500 bg-warning-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx(Jt,{className:`h-6 w-6 mx-auto mb-2 ${l==="visszakuldes"?"text-warning-600":"text-neutral-400"}`}),s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Visszaküldés"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Jogi forma"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{onClick:()=>d("határozat"),className:`p-3 rounded-lg border-2 transition-all text-left ${c==="határozat"?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:"Határozat"}),s.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:"Eljárást lezáró döntés"})]}),s.jsxs("button",{onClick:()=>d("vegzes"),className:`p-3 rounded-lg border-2 transition-all text-left ${c==="vegzes"?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:"Végzés"}),s.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:"Eljárási döntés"})]}),s.jsxs("button",{onClick:()=>d("igazolas"),className:`p-3 rounded-lg border-2 transition-all text-left ${c==="igazolas"?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"}`,children:[s.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:"Igazolás"}),s.jsx("p",{className:"text-xs text-neutral-600 mt-1",children:"Alkalmassági igazolás"})]})]})]}),s.jsx("div",{className:`p-4 rounded-lg border-2 ${w?j?"border-success-200 bg-success-50":"border-warning-200 bg-warning-50":"border-neutral-200 bg-neutral-50"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[w?j?s.jsx(Pe,{className:"h-5 w-5 text-success-600"}):s.jsx(Jt,{className:"h-5 w-5 text-warning-600"}):s.jsx(bt,{className:"h-5 w-5 text-neutral-500 animate-spin"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-neutral-900",children:"Díjfizetés ellenőrzés (FORRÁS SQL)"}),s.jsxs("p",{className:"text-sm text-neutral-600 mt-1",children:[!w&&"Díjfizetési adatok lekérdezése...",w&&j&&"Eljárási díj rendezve",w&&!j&&"Díjfizetés hiányzik vagy nem megfelelő"]})]})]})}),s.jsx("div",{className:"p-4 bg-neutral-50 border border-neutral-200 rounded-lg",children:s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:N,onChange:M=>$(M.target.checked),className:"w-5 h-5 text-primary-600 border-neutral-300 rounded focus:ring-primary-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-900",children:"Nyilvántartás frissítése szükséges"}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Ha be van jelölve, a döntés után a releváns nyilvántartások (pl. VNY024) frissítésre kerülnek."})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"További feladatok (opcionális)"}),s.jsx("textarea",{value:q,onChange:M=>G(M.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"Döntés után szükséges további feladatok, utasítások..."})]}),s.jsxs("div",{className:"flex justify-between gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:a,className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Mégse"}),s.jsxs("button",{onClick:I,disabled:!w,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:["Tovább a dokumentum tervezethez",s.jsx(Vm,{className:"h-5 w-5"})]})]})]})]}),n==="tervezet_szerkesztes"&&s.jsx(dE,{ugy:e,jogiForma:c,dontesTipusa:l,indoklas:(h==null?void 0:h.indoklas)||"",onMentes:R,onVissza:()=>i("javaslat")}),n==="velemenyezes"&&s.jsx("div",{className:"space-y-6",children:k?s.jsx(aE,{ugyId:e.id,dokumentumTipus:c,dokumentumVerzio:1,onBezaras:y}):s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5 text-primary-600"}),"Véleményeztetés (F-0096 - Rugalmas workflow)"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-accent-900",children:[s.jsx("strong",{children:"Opcionális lépés:"})," Véleményeztetés szakértőkkel vagy kollégákkal. Kihagyható, ha nem szükséges."]})}),s.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-2",children:"Mi történik a véleményeztetés során?"}),s.jsxs("ul",{className:"space-y-2 text-sm text-neutral-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Kiválasztja a szakértőket akik véleményezni fogják a határozat tervezetet"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"A szakértők read-only módban látják az ügy összes adatát"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Pe,{className:"h-4 w-4 text-success-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Minden szakértő szöveges véleményt írhat a határozathoz"})]})]})]})]}),s.jsxs("div",{className:"flex justify-between gap-3 pt-4 border-t mt-6",children:[s.jsx("button",{onClick:()=>i("tervezet_szerkesztes"),className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Vissza"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:E,className:"px-6 py-2 border border-primary-600 text-primary-600 rounded-md hover:bg-primary-50",children:"Véleményezés kihagyása"}),s.jsxs("button",{onClick:A,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5"}),"Véleményezés indítása"]})]})]})]})}),n==="expedicio"&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Ea,{className:"h-5 w-5 text-primary-600"}),"Expedíciós adatok megadása"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-accent-50 border border-accent-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-accent-900",children:[s.jsx("strong",{children:"Fontos:"}),' Ezek az adatok bekerülnek a határozatba/végzésbe. Pl. "Jelen határozat ellen 15 napon belül ... címre benyújtott fellebbezéssel lehet élni"']})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Címzettek listája *"}),s.jsx("textarea",{value:p.cimzettek,onChange:M=>f({...p,cimzettek:M.target.value}),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"Címzettek nevei és címei..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Küldési mód *"}),s.jsxs("select",{value:p.kuldesiMod,onChange:M=>f({...p,kuldesiMod:M.target.value}),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"hivatali_kapu",children:"Hivatali kapu"}),s.jsx("option",{value:"ceges_kapu",children:"Céges kapu"}),s.jsx("option",{value:"email",children:"E-mail"}),s.jsx("option",{value:"posta",children:"Postai út"}),s.jsx("option",{value:"szemelyes",children:"Személyes átvétel"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Példányszám"}),s.jsx("input",{type:"number",min:"1",value:p.peldanyszam,onChange:M=>f({...p,peldanyszam:parseInt(M.target.value)}),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Megjegyzések (opcionális)"}),s.jsx("textarea",{value:p.megjegyzesek,onChange:M=>f({...p,megjegyzesek:M.target.value}),className:"w-full px-4 py-3 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"További megjegyzések az expedicióval kapcsolatban..."})]})]}),s.jsxs("div",{className:"flex justify-between gap-3 pt-4 border-t mt-6",children:[s.jsx("button",{onClick:()=>i("velemenyezes"),className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Vissza"}),s.jsxs("button",{onClick:()=>i("jovahagyasra_kuldes"),className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2",children:["Tovább jóváhagyásra küldéshez",s.jsx(Vm,{className:"h-5 w-5"})]})]})]}),n==="jovahagyasra_kuldes"&&s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Ea,{className:"h-5 w-5 text-primary-600"}),"Jóváhagyásra küldés (Vezetői döntéshez)"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-accent-50 border-2 border-accent-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(kj,{className:"h-5 w-5 mt-0.5 flex-shrink-0 text-accent-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-900 mb-1",children:"Döntés-előkészítés befejezése"}),s.jsxs("p",{className:"text-sm text-neutral-700",children:["A tervezet elkészült és ellenőrizve lett. Most küldje jóváhagyásra a vezetőnek, aki meghozza a végső döntést.",s.jsx("strong",{children:" A vezető PDF formában látja majd a dokumentumot"}),", és megjegyzéssel küldheti vissza módosításra."]})]})]})}),s.jsxs("div",{className:"bg-primary-50 border-2 border-primary-200 rounded-lg p-6",children:[s.jsx("h4",{className:"font-bold text-primary-900 mb-3",children:"Összefoglaló"}),s.jsxs("dl",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("dt",{className:"text-primary-700",children:"Döntés típusa:"}),s.jsx("dd",{className:"font-semibold text-primary-900",children:l==="engedelyezes"?"Engedélyezés":l==="elutasitas"?"Elutasítás":"Visszaküldés"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("dt",{className:"text-primary-700",children:"Jogi forma:"}),s.jsx("dd",{className:"font-semibold text-primary-900 capitalize",children:c})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("dt",{className:"text-primary-700",children:"Dokumentum tervezet:"}),s.jsx("dd",{className:"font-semibold text-primary-900",children:h?"Elkészült ✅":"Nincs még ❌"})]})]})]}),h&&s.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4 border border-neutral-200",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Dokumentum indoklás (előnézet):"}),s.jsx("p",{className:"text-sm text-neutral-900 line-clamp-3",children:h.indoklas})]}),s.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-warning-900",children:[s.jsx("strong",{children:"Figyelem:"}),' A jóváhagyásra küldés után az ügy átkerül a "Döntés" folyamatba, ahol a vezető PDF formában látja a dokumentumot és meghozza a végső döntést.']})})]}),s.jsxs("div",{className:"flex justify-between gap-3 pt-4 border-t mt-6",children:[s.jsx("button",{onClick:()=>i("expedicio"),className:"px-6 py-2 border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50",children:"Vissza"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:L,disabled:!h,className:"px-6 py-2 border border-primary-600 text-primary-600 rounded-md hover:bg-primary-50 flex items-center gap-2 disabled:opacity-50",children:[s.jsx(ys,{className:"h-5 w-5"}),"PDF előnézet letöltése"]}),s.jsxs("button",{onClick:()=>{if(!h){alert("Nincs még dokumentum tervezet!");return}t({dontes_tipusa:l,jogi_forma:c,dokumentum_tervezet:h,dokumentumok:[c],dijfizetes_ellenorizve:w,nyilvantartas_frissitendo:N,jovahagyva:!1,jovahagyo_nev:void 0,jovahagyas_datum:void 0})},disabled:!h,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 disabled:opacity-50",children:[s.jsx(Ea,{className:"h-5 w-5"}),"Küldés jóváhagyásra"]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[s.jsx(lr,{className:"h-5 w-5 text-blue-600"}),"Kapcsolódó dokumentumok"]}),s.jsx(lo,{ugyId:e.id,ugyAzonosito:e.ugyAzonosito,workflowLepes:"Döntéshozatal",readonly:!0})]})]})]})}const uz=e=>{const t=e.toLowerCase().trim();return{piszkozat:"Piszkozat","ügy indítása":"Eljárás elindult",új:"Eljárás elindult",ellenőrzés:"Eljárás folyamatban",ellenorzes:"Eljárás folyamatban","formai ellenőrzés":"Eljárás folyamatban","tartalmi ellenőrzés":"Eljárás folyamatban",küldés:"Eljárás folyamatban",kuldes:"Eljárás folyamatban","benyújtás alatt":"Eljárás folyamatban",díjfizetés:"Eljárás folyamatban",dijfizetes:"Eljárás folyamatban","díjfizetésre vár":"Eljárás folyamatban",elküldött:"Eljárás folyamatban",elkuldott:"Eljárás folyamatban",benyújtva:"Eljárás folyamatban",érkezett:"Eljárás folyamatban",erkezett:"Eljárás folyamatban",iktatva:"Eljárás folyamatban","vizsgálat alatt":"Eljárás folyamatban","vizsgalat alatt":"Eljárás folyamatban","feldolgozás alatt":"Eljárás folyamatban","feldolgozas alatt":"Eljárás folyamatban",folyamatban:"Eljárás folyamatban","hiánypótlás szükséges":"Eljárás folyamatban","hianypotlas szukseges":"Eljárás folyamatban","tényállás tisztázás":"Eljárás folyamatban","tenyallas tisztazas":"Eljárás folyamatban",döntéshozatal:"Eljárás folyamatban",donteshozatal:"Eljárás folyamatban","döntés-előkészítés":"Eljárás folyamatban","dontes-elokeszites":"Eljárás folyamatban",véleményezés:"Eljárás folyamatban",velemenyezes:"Eljárás folyamatban","vezetői jóváhagyás":"Eljárás folyamatban","vezetoi jovahagyas":"Eljárás folyamatban",kiadmányozás:"Eljárás folyamatban",kiadmanyozas:"Eljárás folyamatban",lezárt:"Eljárás befejezve",lezart:"Eljárás befejezve",befejezett:"Eljárás befejezve",jóváhagyva:"Eljárás befejezve",jovahagyva:"Eljárás befejezve",elutasítva:"Eljárás befejezve",elutasitva:"Eljárás befejezve","ügylezáró irat elküldve":"Ügylezáró irat elküldve","ugylezaro irat elkuldve":"Ügylezáró irat elküldve","okmány elküldve":"Okmány elküldve","okmany elkuldve":"Okmány elküldve","okmány átadva":"Okmány átadva","okmany atadva":"Okmány átadva"}[t]||e},PE=e=>{const t=e.hataridok?typeof e.hataridok=="string"?JSON.parse(e.hataridok):e.hataridok:null;return{id:e.id,ugytuekId:"",ugytuekKod:e.ugytuek_kod,ugytuekNev:e.ugytuek_kod,ugyAzonosito:e.ugy_azonosito,iktatoszam:e.iktatoszam||void 0,statusz:e.statusz,prioritas:e.prioritas||"közepes",workflow_fazis:e.workflow_fazis||"",workflow_adatok:e.workflow_adatok,letrehozva:e.created_at||"",modositva:e.updated_at||"",hataridoDatum:(t==null?void 0:t.fő_határidő)||"",ugyfelNev:"",ugyfelEmail:"",uj:!1,dontesi_dokumentum:void 0}},Zh=e=>["Eljárás befejezve","Ügylezáró irat elküldve","Okmány elküldve","Okmány átadva","Lezárt"].includes(uz(e));function IE(){const[e,t]=B.useState(null),[a,r]=B.useState("lista"),[n,i]=B.useState("lista"),[l,o]=B.useState(null),[c,d]=B.useState(!1),[h,g]=B.useState("A beadványt sikeresen rögzítettük. Értesítést fog kapni email címére."),[p,f]=B.useState("folyamatban"),[k,_]=B.useState(""),[w,x]=B.useState("created_at"),[j,z]=B.useState("desc"),[N,$]=B.useState(1),[q]=B.useState(10),[G,D]=B.useState([]),[I,R]=B.useState([]),[y,A]=B.useState(!1),[E,L]=B.useState(0),M=G_.filter(te=>te.modul==="vasúti"&&te.aktiv);B.useEffect(()=>{e&&(ce(),V(),ee())},[e]);const ee=async()=>{try{const te=await vm.ujNemMegtekintettSzamlakSzama("demo@vasut.hu");L(te)}catch(te){console.error("Új számlák számának betöltési hiba:",te)}},ce=async()=>{if(e){A(!0);try{const te=await Gn.osszes({ugytuek_kod:e.kod,kerelmező_email:"demo@vasut.hu"});console.log("Betöltött ügyek száma:",te.length),D(te)}catch(te){console.error("Ügyek betöltési hiba:",te),D([])}finally{A(!1)}}},V=async()=>{if(e)try{const{data:te,error:pe}=await xe.from("kerelem_piszkozatok").select("*").eq("ugytuek_kod",e.kod).order("utolso_mentes",{ascending:!1});if(pe){console.error("Piszkozatok betöltési hiba:",pe),R([]);return}R(te||[])}catch(te){console.error("Piszkozatok betöltési hiba:",te),R([])}},le=B.useMemo(()=>{const te=I.map((ve,je)=>{const ne=`PISZKOZAT-${String(I.length-je).padStart(4,"0")}`;return{id:`piszkozat-${ve.id}`,ugy_azonosito:ne,ugytuek_kod:ve.ugytuek_kod,statusz:"Piszkozat",created_at:ve.created_at,updated_at:ve.updated_at,hataridok:null,iktatoszam:null,kerelem_id:null,piszkozat:!0,prioritas:"közepes",workflow_fazis:ve.workflow_lepes}});let _e=[...G,...te].filter(ve=>e?ve.ugytuek_kod===e.kod:!1);if(p==="folyamatban"?_e=_e.filter(ve=>!Zh(ve.statusz)&&ve.statusz!=="Piszkozat"):p==="lezart"?_e=_e.filter(ve=>Zh(ve.statusz)):p==="piszkozatok"&&(_e=_e.filter(ve=>ve.statusz==="Piszkozat")),k){const ve=k.toLowerCase();_e=_e.filter(je=>{var ne;return je.ugy_azonosito.toLowerCase().includes(ve)||((ne=je.iktatoszam)==null?void 0:ne.toLowerCase().includes(ve))})}return _e.sort((ve,je)=>{let ne=ve[w],J=je[w];if(w==="created_at")ne=ne?new Date(ne).getTime():0,J=J?new Date(J).getTime():0;else if(w==="hataridok"){const Ke=ne?typeof ne=="string"?JSON.parse(ne):ne:null,qe=J?typeof J=="string"?JSON.parse(J):J:null;ne=Ke!=null&&Ke.fő_határidő?new Date(Ke.fő_határidő).getTime():0,J=qe!=null&&qe.fő_határidő?new Date(qe.fő_határidő).getTime():0}return typeof ne=="string"&&typeof J=="string"&&(ne=ne.toLowerCase(),J=J.toLowerCase()),ne<J?j==="asc"?-1:1:ne>J?j==="asc"?1:-1:0}),_e},[G,I,e,k,p,w,j]),ye=Math.ceil(le.length/q),be=B.useMemo(()=>{const te=(N-1)*q;return le.slice(te,te+q)},[le,N,q]),C=B.useMemo(()=>G.filter(te=>!Zh(te.statusz)&&(e?te.ugytuek_kod===e.kod:!1)).length,[G,e]),H=B.useMemo(()=>G.filter(te=>Zh(te.statusz)&&(e?te.ugytuek_kod===e.kod:!1)).length,[G,e]),W=B.useMemo(()=>I.filter(te=>e?te.ugytuek_kod===e.kod:!1).length,[I,e]),Q=B.useMemo(()=>G.filter(pe=>e?pe.ugytuek_kod===e.kod:!1).length+W,[G,W,e]),re=()=>{_(""),$(1)};if(!e)return s.jsx(J_,{ugytipusok:M,onSelect:t,title:"Vasúti Hatósági Rendszer - Ügyfél",subtitle:"Válasszon az alábbi vasúti eljárástípusok közül"});if(a==="uj-kerelem")return s.jsx(Yj,{modusz:"kitoltes",onSubmit:async te=>{console.log("KÉRELEM LAP benyújtva:",te);try{const pe=`V044-${Date.now()}`;await Gn.letrehoz({kerelem_id:pe,ugy_azonosito:pe,ugytuek_kod:(e==null?void 0:e.kod)||"V-044",statusz:"Benyújtva",prioritas:"közepes",workflow_fazis:"kérelem_benyújtva",workflow_adatok:{kerelmező_email:"demo@vasut.hu",kerelem_adatok:te,benyujtas_datum:new Date().toISOString()}});try{await Lp.torlesUgytipusAlapjan("demo@vasut.hu",(e==null?void 0:e.kod)||"V-044")}catch(_e){console.error("Piszkozat törlési hiba:",_e)}r("lista"),d(!0),g(`Kérelem sikeresen benyújtva!
Ügyazonosító: ${pe}
Kérelmező: ${te.kérelmező.cegNeve}
Munkavállaló: ${te.munkavállaló.nev}`),setTimeout(()=>d(!1),5e3),await ce(),await V()}catch(pe){console.error("Hiba a kérelem benyújtásakor:",pe),d(!0),g("Hiba történt a kérelem benyújtása során. Kérjük próbálja újra!"),setTimeout(()=>d(!1),5e3)}},onCancel:()=>r("lista")});if(a==="uj-kerelem-workflow")return s.jsx(YA,{onComplete:te=>{console.log("Kérelem workflow befejezve:",te),r("lista"),d(!0),g(`Kérelem sikeresen benyújtva!
VIHAR azonosító: ${te.viharAzonosito}
Iktatószám: ${te.iktatoszam}`),setTimeout(()=>d(!1),8e3),V()},onCancel:()=>{r("lista"),V()}});if(a==="ugy-reszletek"&&l)return s.jsx(Qj,{ugy:l,onClose:()=>{r("lista"),o(null)},onHianypotlasInditas:()=>r("hianypotlas"),onTenyallasInditas:()=>r("tenyallas-tisztazas")});if(a==="hianypotlas"&&l)return s.jsx(F6,{ugyAzonosito:l.ugyAzonosito,hianyzosDokumentumok:["Lakcímet igazoló hatósági igazolvány másolata hiányzik","Tanúsító szervezet tanúsítványának dátuma nem olvasható - kérjük töltse fel újra"],hataridoDatum:l.hataridoDatum,onSubmit:te=>{console.log("Hiánypótlás benyújtva:",te),r("ugy-reszletek"),g("Hiánypótlás sikeresen benyújtva! Az ügyintéző hamarosan ellenőrzi a dokumentumokat."),d(!0),setTimeout(()=>d(!1),5e3)},onCancel:()=>r("ugy-reszletek")});if(a==="dokumentumtar"&&e)return s.jsx(yE,{ugytuekKod:e.kod,ugytuekNev:e.nev,onClose:()=>r("lista")});if(a==="dijfizetesek")return s.jsx(bE,{onClose:()=>{r("lista"),ee()}});if(a==="tenyallas-tisztazas"&&l)return s.jsx(K6,{ugyAzonosito:l.ugyAzonosito,felszolitasTipus:"nyilatkozat",felszolitasSzoveg:`Tisztelt ${l.ugyfelNev}!

A benyújtott kérelmével kapcsolatban az alábbi kérdésekben kérjük nyilatkozatát:

1. Kérjük, nyilatkozzon arról, hogy az elmúlt 5 évben részesült-e bármilyen egészségügyi kezelésben, amely befolyásolhatja a mozdonyvezetői tevékenység ellátását.

2. Nyilatkozzon arról, hogy a tanúsító szervezet által kiállított alkalmassági tanúsítvány kiállítása óta történt-e egészségi állapotában olyan változás, amely a mozdonyvezetésre való alkalmasságát befolyásolja.

3. Ismertet-e olyan körülményt, amely miatt a kérelemben foglalt adatok nem lennének teljes körűek vagy pontosak.

Kérjük, válaszát részletesen, minden vonatkozó információt feltüntetve adja meg.

A nyilatkozattétel határideje: ${l.hataridoDatum}

Tisztelettel:
ÉKM Vasúti Hatósági Főosztály`,hataridoDatum:l.hataridoDatum,onSubmit:te=>{console.log("Tényállás tisztázás benyújtva:",te),r("ugy-reszletek"),g("Nyilatkozat sikeresen benyújtva! Az ügyintéző hamarosan áttekinti."),d(!0),setTimeout(()=>d(!1),5e3)},onCancel:()=>r("ugy-reszletek")});const ue=[{key:"ugy_azonosito",label:"Ügy azonosító"},{key:"iktatoszam",label:"Iktatószám",render:te=>te||"-"},{key:"created_at",label:"Benyújtva",render:te=>te?new Date(te).toLocaleDateString("hu-HU"):"-"},{key:"statusz",label:"Aktuális státusz",render:(te,pe)=>{const _e=uz(pe.statusz);return s.jsx(oa,{type:"statusz",value:_e})}},{key:"uj_feladat",label:"Új feladat",render:(te,pe)=>pe.piszkozat?"-":["Hiánypótlás szükséges","Nyilatkozat szükséges"].includes(pe.statusz)?s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-warning-100 text-warning-800",children:"Teendő"}):"-"},{key:"hataridok",label:"Határidő",render:te=>{if(!te)return"-";const pe=typeof te=="string"?JSON.parse(te):te;return pe!=null&&pe.fő_határidő?new Date(pe.fő_határidő).toLocaleDateString("hu-HU"):"-"}}],me=te=>{if(te.piszkozat){console.log("Piszkozat folytatása:",te),r("uj-kerelem-workflow");return}o(te),r("ugy-reszletek")};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c&&s.jsx("div",{className:"mb-6 bg-success-50 border-2 border-success-400 rounded-lg p-4 animate-fade-in",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pe,{className:"h-6 w-6 text-success-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-success-900",children:"Sikeres művelet"}),s.jsx("p",{className:"text-sm text-success-800",children:h})]})]})}),s.jsx("div",{className:"mb-6 bg-primary-50 border border-primary-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xs font-mono bg-primary-600 text-white px-2 py-1 rounded",children:e.kod}),s.jsx("h2",{className:"text-lg font-bold text-neutral-900",children:e.nev})]})}),s.jsx("button",{onClick:()=>t(null),className:"px-4 py-2 bg-white border border-neutral-300 text-neutral-700 rounded-md hover:bg-neutral-50 font-medium focus:outline-none focus:ring-2 focus:ring-primary-500","aria-label":"Visszalépés az eljárástípus választóhoz",children:"← Eljárástípus váltás"})]})}),s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h3",{className:"text-2xl font-bold text-neutral-900",children:"Saját ügyeim"}),s.jsx(Jx,{aktualisNezet:n,onNezetValtas:i})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>r("dijfizetesek"),className:"px-4 py-2 bg-success-600 text-white rounded-md hover:bg-success-700 flex items-center gap-2 font-semibold focus:outline-none focus:ring-2 focus:ring-success-500 relative",children:[s.jsx(vp,{className:"h-5 w-5","aria-hidden":"true"}),"Díjfizetések",E>0&&s.jsx("span",{className:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-error-600 rounded-full animate-pulse",children:E})]}),s.jsxs("button",{onClick:()=>r("dokumentumtar"),className:"px-4 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 flex items-center gap-2 font-semibold focus:outline-none focus:ring-2 focus:ring-accent-500",children:[s.jsx(Vx,{className:"h-5 w-5","aria-hidden":"true"}),"Dokumentumtár"]}),s.jsxs("button",{onClick:()=>r("uj-kerelem-workflow"),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 font-semibold focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx(rl,{className:"h-5 w-5","aria-hidden":"true"}),"Új kérelem benyújtása"]})]})]}),s.jsx(se,{className:"mb-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"border-b border-neutral-200",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsxs("button",{onClick:()=>{f("folyamatban"),$(1)},className:`px-6 py-3 font-semibold text-sm border-b-2 transition-colors ${p==="folyamatban"?"border-primary-600 text-primary-700 bg-primary-50":"border-transparent text-neutral-600 hover:text-neutral-900 hover:border-neutral-300"}`,children:["Folyamatban lévő ügyek",C>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold rounded-full bg-primary-600 text-white",children:C})]}),s.jsxs("button",{onClick:()=>{f("lezart"),$(1)},className:`px-6 py-3 font-semibold text-sm border-b-2 transition-colors ${p==="lezart"?"border-success-600 text-success-700 bg-success-50":"border-transparent text-neutral-600 hover:text-neutral-900 hover:border-neutral-300"}`,children:["Lezárt ügyek",H>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold rounded-full bg-success-600 text-white",children:H})]}),s.jsxs("button",{onClick:()=>{f("piszkozatok"),$(1)},className:`px-6 py-3 font-semibold text-sm border-b-2 transition-colors ${p==="piszkozatok"?"border-warning-600 text-warning-700 bg-warning-50":"border-transparent text-neutral-600 hover:text-neutral-900 hover:border-neutral-300"}`,children:["Piszkozatok",W>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold rounded-full bg-warning-600 text-white",children:W})]}),s.jsxs("button",{onClick:()=>{f("osszes"),$(1)},className:`px-6 py-3 font-semibold text-sm border-b-2 transition-colors ${p==="osszes"?"border-neutral-600 text-neutral-700 bg-neutral-50":"border-transparent text-neutral-600 hover:text-neutral-900 hover:border-neutral-300"}`,children:["Összes",Q>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold rounded-full bg-neutral-600 text-white",children:Q})]})]})}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:k,onChange:te=>{_(te.target.value),$(1)},placeholder:"Keresés ügy azonosító vagy iktatószám alapján...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),k&&s.jsx("button",{onClick:()=>_(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:s.jsx(es,{className:"h-5 w-5"})})]})})]})}),be.length===0?s.jsxs(se,{className:"bg-neutral-50 text-center py-12",children:[s.jsx(De,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4","aria-hidden":"true"}),s.jsx("p",{className:"text-neutral-600 mb-2",children:k?"Nincs találat a megadott keresési feltételekkel":"Még nincs benyújtott ügy"}),k?s.jsx("button",{onClick:re,className:"mt-4 px-6 py-2 bg-neutral-600 text-white rounded-md hover:bg-neutral-700 font-semibold",children:"Keresés törlése"}):s.jsx("button",{onClick:()=>r("uj-kerelem-workflow"),className:"mt-4 px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold",children:"Új kérelem benyújtása"})]}):s.jsxs(s.Fragment,{children:[n==="lista"?s.jsx(se,{className:"bg-white",children:s.jsx(Qi,{columns:ue,data:be,onRowClick:me})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:be.map(te=>s.jsx(W_,{ugy:PE(te),onClick:()=>me(te),showUgyfelNev:!1},te.id))}),ye>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-neutral-600",children:[(N-1)*q+1,"-",Math.min(N*q,le.length)," / ",le.length," ügy"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>$(te=>Math.max(1,te-1)),disabled:N===1,className:"px-4 py-2 border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Előző"}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:ye},(te,pe)=>pe+1).filter(te=>te===1||te===ye||Math.abs(te-N)<=1).map((te,pe,_e)=>{const ve=_e[pe-1],je=ve&&te-ve>1;return s.jsxs("div",{className:"flex gap-1",children:[je&&s.jsx("span",{className:"px-2 py-2 text-neutral-400",children:"..."}),s.jsx("button",{onClick:()=>$(te),className:`px-4 py-2 border rounded-md font-medium ${N===te?"bg-primary-600 text-white border-primary-600":"border-neutral-300 hover:bg-neutral-50"}`,children:te})]},te)})}),s.jsx("button",{onClick:()=>$(te=>Math.min(ye,te+1)),disabled:N===ye,className:"px-4 py-2 border border-neutral-300 rounded-md hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Következő"})]})]})]})]})}const DE={szervezetek:{kod:"TORZS-SZERVEZETEK",nev:"Szervezetek törzsadatok",leiras:"Vasúti társaságok, üzemeltetők, képzőszervezetek és szolgáltatók nyilvántartása (Már implementálva)",icon:cu,szin:"blue"},szemelyek:{kod:"TORZS-SZEMELYEK",nev:"Személyek törzsadatok",leiras:"Vasúti szakemberek (járművezetők, oktatók, orvosok, pszichológusok) törzsadatai (Már implementálva)",icon:Ca,szin:"green"},vny002:{kod:"VNY002",nev:"Működési engedélyek",leiras:"Vasúti társaságok és pályahálózat üzemeltetők működési engedélyeinek nyilvántartása",icon:De,szin:"green"},vny011:{kod:"VNY011",nev:"Vasúti járművezetői engedélyek",leiras:"Mozdonyvezetői engedélyek, jogosítványok és alkalmassági vizsgálatok nyilvántartása",icon:Ca,szin:"green"},vny012:{kod:"VNY012",nev:"Visszavont/felfüggesztett engedélyek",leiras:"Szankcionált járművezetői engedélyek (visszavonás, felfüggesztés, bevonás) nyilvántartása",icon:De,szin:"red"},vny013:{kod:"VNY013",nev:"Időszakos oktatást végző szolgáltatók",leiras:"Időszakos oktatási engedéllyel rendelkező szolgáltatók nyilvántartása",icon:De,szin:"purple"},vny014:{kod:"VNY014",nev:"Képzési engedéllyel rendelkező szervezetek",leiras:"Alapképzést, átképzést és továbbképzést végző szervezetek nyilvántartása",icon:cu,szin:"purple"},vny022:{kod:"VNY022",nev:"Vasútegészségügyi akkreditált orvosok",leiras:"Vasútegészségügyi alkalmassági vizsgálatot végző orvosok nyilvántartása",icon:lb,szin:"pink"},vny023:{kod:"VNY023",nev:"Vasútegészségügyi akkreditált pszichológusok",leiras:"Vasúti pszichológiai alkalmassági vizsgálatot végző pszichológusok nyilvántartása",icon:A_,szin:"pink"},vny024:{kod:"VNY024",nev:"Vasútegészségügyi adatok",leiras:"Orvosi alkalmassági vizsgálatok eredményeinek nyilvántartása (Már implementálva)",icon:lb,szin:"gray"},vny009:{kod:"VNY009",nev:"Balesetek és rendkívüli események",leiras:"Vasúti balesetek, kisiklások, ütközések és egyéb rendkívüli események nyilvántartása",icon:Jt,szin:"red"},vny015:{kod:"VNY015",nev:"RID kazánbiztosok",leiras:"RID kazánbiztos hatósági személyek nyilvántartása (Már implementálva)",icon:Mf,szin:"purple"},vny019:{kod:"VNY019",nev:"Vasúti vizsgabiztosok",leiras:"Vasúti vizsgabiztosok nyilvántartása (Már implementálva)",icon:Mf,szin:"blue"},vny020:{kod:"VNY020",nev:"Alapképzést végző szolgáltatók",leiras:"Járművezetők alapképzését végző akkreditált képzőszervezetek nyilvántartása",icon:Mf,szin:"purple"},vny021:{kod:"VNY021",nev:"Hatósági szabályzatok",leiras:"Jóváhagyott vasúti üzletszabályzatok és biztonsági szabályzatok nyilvántartása",icon:S_,szin:"blue"},vny030:{kod:"VNY030",nev:"Kötélpályák",leiras:"Libegők, felvonók és síliftek műszaki és üzemeltetési nyilvántartása",icon:M_,szin:"green"},vny032:{kod:"VNY032",nev:"Panaszok",leiras:"Beérkezett panaszok, kivizsgálások és válaszok nyilvántartása",icon:qr,szin:"pink"},vny040:{kod:"VNY040",nev:"Felügyeleti díjak",leiras:"Hálózati hozzáférési és felügyeleti díjak nyilvántartása",icon:Hx,szin:"green"}};function ME({onNyilvantartasValasztas:e}){const[t,a]=B.useState("mind"),r=[{value:"mind",label:"Összes nyilvántartás"},{value:"torzs",label:"Törzsadatok"},{value:"engedely",label:"Engedélyek"},{value:"kepzes",label:"Képzés és oktatás"},{value:"egeszsegugy",label:"Egészségügy"},{value:"baleset",label:"Balesetek"},{value:"dijak",label:"Díjak és panaszok"}],n={blue:"bg-blue-50 border-blue-200 hover:border-blue-400 hover:bg-blue-100",green:"bg-success-50 border-success-200 hover:border-success-400 hover:bg-success-100",red:"bg-error-50 border-error-200 hover:border-error-400 hover:bg-error-100",purple:"bg-purple-50 border-purple-200 hover:border-purple-400 hover:bg-purple-100",pink:"bg-pink-50 border-pink-200 hover:border-pink-400 hover:bg-pink-100",gray:"bg-neutral-100 border-neutral-300 hover:border-neutral-400 hover:bg-neutral-200"},i={blue:"bg-blue-100 text-blue-700",green:"bg-success-100 text-success-700",red:"bg-error-100 text-error-700",purple:"bg-purple-100 text-purple-700",pink:"bg-pink-100 text-pink-700",gray:"bg-neutral-200 text-neutral-600"},l=Object.entries(DE).filter(([o,c])=>t==="mind"?!0:t==="torzs"?o.startsWith("szervezetek")||o.startsWith("szemelyek"):t==="engedely"?o==="vny002"||o==="vny011"||o==="vny012":t==="kepzes"?o==="vny013"||o==="vny014"||o==="vny020"||o==="vny021":t==="egeszsegugy"?o==="vny022"||o==="vny023"||o==="vny024":t==="baleset"?o==="vny009":t==="dijak"?o==="vny030"||o==="vny032"||o==="vny040":!0);return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:"Vasúti Nyilvántartások"}),s.jsx("p",{className:"text-neutral-600",children:"A vasúti hatóság által vezetett nyilvántartások kezelése és karbantartása"})]}),s.jsx(se,{className:"mb-6",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(o=>s.jsx("button",{onClick:()=>a(o.value),className:`px-4 py-2 rounded-md font-medium transition-colors ${t===o.value?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:o.label},o.value))})}),s.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(se,{className:"bg-primary-50 border border-primary-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-100 p-3 rounded-lg",children:s.jsx(De,{className:"h-6 w-6 text-primary-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-primary-700 font-semibold uppercase",children:"Nyilvántartások"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:l.length})]})]})}),s.jsx(se,{className:"bg-success-50 border border-success-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-success-100 p-3 rounded-lg",children:s.jsx(Ca,{className:"h-6 w-6 text-success-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-success-700 font-semibold uppercase",children:"Szakemberek"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:"~100+"})]})]})}),s.jsx(se,{className:"bg-accent-50 border border-accent-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-accent-100 p-3 rounded-lg",children:s.jsx(cu,{className:"h-6 w-6 text-accent-700"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-accent-700 font-semibold uppercase",children:"Szervezetek"}),s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:"~50+"})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(([o,c])=>{const d=c.icon;return s.jsxs("button",{onClick:()=>e(o),className:`text-left border-2 rounded-lg p-6 transition-all ${n[c.szin]}`,disabled:o==="vny024",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${i[c.szin]}`,children:s.jsx(d,{className:"h-6 w-6"})}),o!=="vny024"&&s.jsx(Ws,{className:"h-5 w-5 text-neutral-400"})]}),s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:"text-xs font-mono font-semibold text-neutral-600",children:c.kod})}),s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-2",children:c.nev}),s.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed",children:c.leiras}),c.rekordokSzama!==void 0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-200",children:s.jsxs("p",{className:"text-xs text-neutral-500",children:[s.jsx("span",{className:"font-semibold text-neutral-700",children:c.rekordokSzama})," rekord"]})}),o==="vny024"&&s.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-300",children:s.jsx("p",{className:"text-xs text-neutral-500 italic",children:"Ez a nyilvántartás már implementálva van a rendszerben"})})]},o)})}),l.length===0&&s.jsxs(se,{className:"bg-neutral-50 text-center py-12",children:[s.jsx(De,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600 mb-2",children:"Nincs megjeleníthető nyilvántartás"}),s.jsx("button",{onClick:()=>a("mind"),className:"mt-4 px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold",children:"Összes megjelenítése"})]})]})}class FE{constructor(){this.NYILVANTARTASOK=[{kod:"VNY009",megnevezes:"Események nyilvántartása",leiras:"Vasúti balesetek, rendkívüli események nyilvántartása",tabla_nev:"vny009_esemenyek",aktiv:!0},{kod:"VNY015",megnevezes:"RID kazánbiztosok",leiras:"RID kazánbiztosok nyilvántartása",tabla_nev:"vny015_rid_kazanbiztosok",aktiv:!0},{kod:"VNY019",megnevezes:"Vasúti vizsgabiztosok",leiras:"Vasúti járművezetői vizsgabiztosok nyilvántartása",tabla_nev:"vny019_vasuti_vizsgabiztosok",aktiv:!0},{kod:"VNY020",megnevezes:"Képzők nyilvántartása",leiras:"Vasúti képzést végző szervezetek nyilvántartása",tabla_nev:"vny020_kepzok",aktiv:!0},{kod:"VNY021",megnevezes:"Szabályzatok nyilvántartása",leiras:"Vasúti szabályzatok, utasítások nyilvántartása",tabla_nev:"vny021_szabalyzatok",aktiv:!0},{kod:"VNY024",megnevezes:"Vasútegészségügyi adatok",leiras:"Orvosi alkalmassági vizsgálatok nyilvántartása",tabla_nev:"vny024_vasutegeszegugyi_nyilvantartas",aktiv:!0},{kod:"VNY027",megnevezes:"Képzési nyilvántartás",leiras:"Vasúti szakmai képzések nyilvántartása",tabla_nev:"vny027_kepzesek",aktiv:!0},{kod:"VNY030",megnevezes:"Szakértők nyilvántartása",leiras:"Vasúti szakértők nyilvántartása",tabla_nev:"vny030_szakertok",aktiv:!0},{kod:"VNY032",megnevezes:"Panaszok nyilvántartása",leiras:"Vasúti közlekedéssel kapcsolatos panaszok",tabla_nev:"vny032_panaszok",aktiv:!0},{kod:"VNY040",megnevezes:"Engedélyek nyilvántartása",leiras:"Vasúti engedélyek, tanúsítványok nyilvántartása",tabla_nev:"vny040_engedelyek",aktiv:!0}]}getNyilvantartasok(){return this.NYILVANTARTASOK.filter(t=>t.aktiv)}getNyilvantartas(t){return this.NYILVANTARTASOK.find(a=>a.kod===t)}async getStatisztika(t){const a=this.getNyilvantartas(t);if(!a)return null;try{const{count:r,error:n}=await xe.from(a.tabla_nev).select("*",{count:"exact",head:!0});if(n)throw n;let i=r||0;try{const{count:c,error:d}=await xe.from(a.tabla_nev).select("*",{count:"exact",head:!0}).eq("aktiv",!0);!d&&c!==null&&(i=c)}catch{}const{data:l,error:o}=await xe.from(a.tabla_nev).select("updated_at").order("updated_at",{ascending:!1}).limit(1).maybeSingle();return{kod:a.kod,megnevezes:a.megnevezes,osszes_rekord:r||0,aktiv_rekord:i,utolso_modositas:l==null?void 0:l.updated_at}}catch(r){return console.error(`Hiba a ${t} statisztika lekérdezésekor:`,r),{kod:a.kod,megnevezes:a.megnevezes,osszes_rekord:0,aktiv_rekord:0}}}async getOsszesStatisztika(){const t=[];for(const a of this.NYILVANTARTASOK)if(a.aktiv){const r=await this.getStatisztika(a.kod);r&&t.push(r)}return t}async kereses(t,a,r){const n=this.getNyilvantartas(t);if(!n)return[];try{const{data:i,error:l}=await xe.from(n.tabla_nev).select("*").ilike(a,`%${r}%`).limit(100);if(l)throw l;return i||[]}catch(i){return console.error(`Hiba a kereséskor (${t}):`,i),[]}}async getRekord(t,a){const r=this.getNyilvantartas(t);if(!r)return null;try{const{data:n,error:i}=await xe.from(r.tabla_nev).select("*").eq("id",a).maybeSingle();if(i)throw i;return n}catch(n){return console.error(`Hiba a rekord lekérdezésekor (${t}, ${a}):`,n),null}}async letrehoz(t,a){const r=this.getNyilvantartas(t);if(!r)return null;try{const{data:n,error:i}=await xe.from(r.tabla_nev).insert([a]).select().single();if(i)throw i;return n}catch(n){throw console.error(`Hiba a rekord létrehozásakor (${t}):`,n),n}}async frissit(t,a,r){const n=this.getNyilvantartas(t);if(!n)return null;try{const{data:i,error:l}=await xe.from(n.tabla_nev).update(r).eq("id",a).select().single();if(l)throw l;return i}catch(i){throw console.error(`Hiba a rekord frissítésekor (${t}, ${a}):`,i),i}}async torol(t,a){const r=this.getNyilvantartas(t);if(!r)return!1;try{const{error:n}=await xe.from(r.tabla_nev).update({aktiv:!1}).eq("id",a);if(!n)return!0;const{error:i}=await xe.from(r.tabla_nev).delete().eq("id",a);if(i)throw i;return!0}catch(n){return console.error(`Hiba a rekord törlésekor (${t}, ${a}):`,n),!1}}async getLista(t,a=1,r=50,n){const i=this.getNyilvantartas(t);if(!i)return{data:[],osszes:0,oldal:1,oldalMeret:r,osszesOldal:0};try{const l=(a-1)*r,o=l+r-1;let c=xe.from(i.tabla_nev).select("*",{count:"exact"});n&&Object.entries(n).forEach(([k,_])=>{_!=null&&(c=c.eq(k,_))});const{data:d,error:h,count:g}=await c.range(l,o).order("created_at",{ascending:!1});if(h)throw h;const p=g||0,f=Math.ceil(p/r);return{data:d||[],osszes:p,oldal:a,oldalMeret:r,osszesOldal:f}}catch(l){return console.error(`Hiba a lista lekérdezésekor (${t}):`,l),{data:[],osszes:0,oldal:1,oldalMeret:r,osszesOldal:0}}}async exportCSV(t){const a=this.getNyilvantartas(t);if(!a)return"";try{const{data:r,error:n}=await xe.from(a.tabla_nev).select("*");if(n)throw n;if(!r||r.length===0)return"";const i=Object.keys(r[0]),l=i.join(","),o=r.map(c=>i.map(d=>{const h=c[d];return h==null?"":typeof h=="string"&&h.includes(",")?`"${h}"`:h}).join(","));return[l,...o].join(`
`)}catch(r){return console.error(`Hiba a CSV exportáláskor (${t}):`,r),""}}async globalKereses(t){const a=[];for(const r of this.NYILVANTARTASOK)if(r.aktiv)try{const{data:n,error:i}=await xe.from(r.tabla_nev).select("*").or(`nev.ilike.%${t}%,megnevezes.ilike.%${t}%,leiras.ilike.%${t}%`).limit(10);!i&&n&&n.length>0&&a.push({nyilvantartas:`${r.kod} - ${r.megnevezes}`,talalatok:n})}catch(n){console.debug(`Keresés kihagyva ${r.kod}-ban:`,n)}return a}async getDashboard(){const t=await this.getOsszesStatisztika(),a=t.reduce((i,l)=>i+l.osszes_rekord,0),r=t.sort((i,l)=>l.osszes_rekord-i.osszes_rekord).slice(0,5).map(i=>({kod:i.kod,megnevezes:i.megnevezes,rekordok:i.osszes_rekord})),n=t.filter(i=>i.utolso_modositas).sort((i,l)=>{const o=i.utolso_modositas?new Date(i.utolso_modositas).getTime():0;return(l.utolso_modositas?new Date(l.utolso_modositas).getTime():0)-o}).slice(0,5).map(i=>({kod:i.kod,megnevezes:i.megnevezes,datum:i.utolso_modositas||""}));return{osszes_nyilvantartas:this.NYILVANTARTASOK.filter(i=>i.aktiv).length,osszes_rekord:a,legaktivabb:r,legujabb_modositasok:n}}async getJarmuvezetoiEngedlyek(){try{const{data:t,error:a}=await xe.from("vny011_jarmuvezetoi_engedelyek").select("*").order("created_at",{ascending:!1});if(a)throw a;return t||[]}catch(t){return console.error("Járművezetői engedélyek lekérdezési hiba:",t),[]}}async getVasutegeszsegugyiOrvosok(){try{const{data:t,error:a}=await xe.from("vny022_vasutegeszegugyi_orvosok").select("*").order("created_at",{ascending:!1});if(a)throw a;return t||[]}catch(t){return console.error("Vasútegészségügyi orvosok lekérdezési hiba:",t),[]}}}const jg=new FE;function il(){var p,f;const[e,t]=B.useState(!0),[a,r]=B.useState([]),[n,i]=B.useState(null),[l,o]=B.useState(""),[c,d]=B.useState([]);B.useEffect(()=>{h()},[]);const h=async()=>{try{t(!0);const[k,_]=await Promise.all([jg.getOsszesStatisztika(),jg.getDashboard()]);r(k),i(_)}catch(k){console.error("Hiba az adatok betöltésekor:",k)}finally{t(!1)}},g=async()=>{if(!l.trim()){d([]);return}try{const k=await jg.globalKereses(l);d(k)}catch(k){console.error("Keresési hiba:",k)}};return e?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"Nyilvántartások betöltése..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Vasúti Nyilvántartások"}),s.jsx("p",{className:"text-neutral-600 mt-1",children:"Központi nyilvántartás kezelő modul"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[s.jsx(cm,{className:"h-8 w-8"}),s.jsx("span",{className:"text-2xl font-bold",children:(n==null?void 0:n.osszes_nyilvantartas)||0})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Va,{className:"h-5 w-5 text-primary-600"}),"Globális keresés az összes nyilvántartásban"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"text",value:l,onChange:k=>o(k.target.value),onKeyPress:k=>k.key==="Enter"&&g(),placeholder:"Keresés név, megnevezés vagy leírás alapján...",className:"flex-1 px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),s.jsxs("button",{onClick:g,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium flex items-center gap-2",children:[s.jsx(Va,{className:"h-4 w-4"}),"Keresés"]})]}),c.length>0&&s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("p",{className:"text-sm font-semibold text-neutral-700",children:["Találatok: ",c.reduce((k,_)=>k+_.talalatok.length,0)," db"]}),c.map((k,_)=>s.jsxs("div",{className:"p-3 bg-neutral-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-neutral-900 mb-2",children:k.nyilvantartas}),s.jsx("div",{className:"space-y-1",children:k.talalatok.map((w,x)=>s.jsx("div",{className:"text-sm text-neutral-700 pl-4 border-l-2 border-primary-200",children:w.nev||w.megnevezes||w.leiras||"Részletek..."},x))})]},_))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(se,{className:"bg-gradient-to-br from-primary-500 to-primary-600 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-primary-100 text-sm font-medium",children:"Összes nyilvántartás"}),s.jsx("p",{className:"text-3xl font-bold mt-1",children:(n==null?void 0:n.osszes_nyilvantartas)||0})]}),s.jsx(cm,{className:"h-12 w-12 text-primary-200"})]})}),s.jsx(se,{className:"bg-gradient-to-br from-success-500 to-success-600 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-success-100 text-sm font-medium",children:"Összes rekord"}),s.jsx("p",{className:"text-3xl font-bold mt-1",children:((n==null?void 0:n.osszes_rekord)||0).toLocaleString("hu-HU")})]}),s.jsx(De,{className:"h-12 w-12 text-success-200"})]})}),s.jsx(se,{className:"bg-gradient-to-br from-accent-500 to-accent-600 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-accent-100 text-sm font-medium",children:"Átlagos rekordszám"}),s.jsx("p",{className:"text-3xl font-bold mt-1",children:Math.round(((n==null?void 0:n.osszes_rekord)||0)/((n==null?void 0:n.osszes_nyilvantartas)||1))})]}),s.jsx(pp,{className:"h-12 w-12 text-accent-200"})]})})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(Wm,{className:"h-5 w-5 text-success-600"}),"Legaktívabb nyilvántartások"]}),s.jsx("div",{className:"space-y-3",children:(p=n==null?void 0:n.legaktivabb)==null?void 0:p.map((k,_)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 text-primary-700 flex items-center justify-center font-bold text-sm",children:_+1}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-900",children:k.kod}),s.jsx("p",{className:"text-sm text-neutral-600",children:k.megnevezes})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-primary-600",children:k.rekordok.toLocaleString("hu-HU")}),s.jsx("p",{className:"text-xs text-neutral-500",children:"rekord"})]})]},_))})]}),s.jsxs(se,{className:"bg-white",children:[s.jsxs("h3",{className:"text-lg font-bold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(bt,{className:"h-5 w-5 text-accent-600"}),"Legújabb módosítások"]}),s.jsx("div",{className:"space-y-2",children:(f=n==null?void 0:n.legujabb_modositasok)==null?void 0:f.map((k,_)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border-l-4 border-accent-300 bg-accent-50 rounded-r-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-neutral-900",children:k.kod}),s.jsx("p",{className:"text-sm text-neutral-600",children:k.megnevezes})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-neutral-900",children:new Date(k.datum).toLocaleDateString("hu-HU")}),s.jsx("p",{className:"text-xs text-neutral-500",children:new Date(k.datum).toLocaleTimeString("hu-HU",{hour:"2-digit",minute:"2-digit"})})]})]},_))})]}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Összes nyilvántartás"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(k=>s.jsxs("div",{className:"p-4 border-2 border-neutral-200 rounded-lg hover:border-primary-300 hover:shadow-md transition-all cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-neutral-900",children:k.kod}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:k.megnevezes})]}),s.jsx(cm,{className:"h-6 w-6 text-primary-600"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 pt-3 border-t border-neutral-200",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-500",children:"Összes rekord"}),s.jsx("p",{className:"text-lg font-bold text-neutral-900",children:k.osszes_rekord})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-neutral-500",children:"Aktív rekord"}),s.jsx("p",{className:"text-lg font-bold text-success-600",children:k.aktiv_rekord})]})]}),k.utolso_modositas&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-neutral-200",children:[s.jsx("p",{className:"text-xs text-neutral-500",children:"Utolsó módosítás"}),s.jsx("p",{className:"text-sm font-medium text-neutral-700",children:new Date(k.utolso_modositas).toLocaleString("hu-HU")})]})]},k.kod))})]})]})}const OE=il,RE=il,BE=il,UE=il,$E=il,HE=il,VE=il,KE=il;function qE({view:e}){const[t,a]=B.useState("ugyek"),[r,n]=B.useState(null),[i,l]=B.useState(null),[o,c]=B.useState("lista"),[d,h]=B.useState(""),[g,p]=B.useState(""),[f,k]=B.useState(""),[_,w]=B.useState(""),[x,j]=B.useState("V-044"),[z,N]=B.useState([]),[$,q]=B.useState(!0),[G,D]=B.useState(!0);B.useEffect(()=>{R(),I()},[x]);const I=async()=>{D(!0)},R=async()=>{q(!0);try{const H=(await Gn.osszes({ugytuek_kod:x})).map(W=>{var Q,re;return{id:W.id,ugyAzonosito:W.ugy_azonosito,ugytuekKod:W.ugytuek_kod,ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",statusz:W.statusz,prioritas:W.prioritas,ugyfelNev:((Q=W.workflow_adatok)==null?void 0:Q.ugyfel_nev)||"Ismeretlen",ugyintezoNev:((re=W.workflow_adatok)==null?void 0:re.ugyintezo_nev)||"",letrehozva:W.created_at||new Date().toISOString(),hataridoDatum:W.hatarido_datum,iktatoszam:W.iktatoszam,workflow_fazis:W.workflow_fazis,workflow_adatok:W.workflow_adatok,dontesi_dokumentum:W.dontesi_dokumentum,dontesi_datum:W.dontesi_datum}});N(H)}catch(C){console.error("Ügyek betöltési hiba:",C),N([])}finally{q(!1)}},y=B.useMemo(()=>z.filter(C=>{const H=!d||C.ugyAzonosito.toLowerCase().includes(d.toLowerCase())||C.ugyfelNev.toLowerCase().includes(d.toLowerCase());let W=!g;g==="új"?W=C.statusz==="beküldött"||C.statusz==="beérkezett":g==="folyamatban"?W=C.statusz==="folyamatban"||C.statusz==="hiánypótlás"||C.statusz==="döntéshozatal":g==="lezárt"?W=C.statusz==="lezárt"||C.statusz==="elutasítva":g==="aktív"&&(W=C.statusz!=="lezárt"&&C.statusz!=="elutasítva");const Q=!f||C.prioritas===f,re=!_||C.ugyintezoNev===_;return H&&W&&Q&&re}),[z,d,g,f,_]),A=B.useMemo(()=>{const C=new Date,H=z.filter(me=>new Date(me.letrehozva).toDateString()===C.toDateString()).length,W=z.filter(me=>{if(!me.hataridoDatum)return!1;const te=new Date(me.hataridoDatum),pe=Math.ceil((te.getTime()-C.getTime())/(1e3*60*60*24));return pe>=0&&pe<=7}).length,Q=z.filter(me=>me.statusz==="Formai és tartalmi vizsgálat"||me.statusz==="Hiánypótlás").length,re=z.filter(me=>me.statusz==="Lezárva").length,ue=z.reduce((me,te)=>(me[te.statusz]=(me[te.statusz]||0)+1,me),{});return{osszes:z.length,maBeerkezett:H,lejaroHataridok:W,vizsgalatAlatt:Q,kiadottEngedely:re,statuszMegoszlas:ue}},[z]),E=async(C,H)=>{if(H.stopPropagation(),!!confirm(`Biztosan visszaadod a szignálást? Az ügy "${C.ugyAzonosito}" visszakerül a beérkezett ügyek közé.`))try{await Gn.szignalVisszaadas(C.id),alert("Szignálás sikeresen visszaadva!"),await R()}catch(W){console.error("Hiba a szignálás visszaadásakor:",W),alert("Hiba történt a szignálás visszaadásakor.")}},L=[{key:"ugyAzonosito",label:"Ügy azonosító",className:"font-mono text-sm"},{key:"ugyfelNev",label:"Ügyfél"},{key:"statusz",label:"Státusz",render:C=>s.jsx(oa,{type:"statusz",value:String(C)})},{key:"prioritas",label:"Prioritás",render:C=>s.jsx(oa,{type:"prioritas",value:String(C)})},{key:"hataridoDatum",label:"Határidő",render:C=>{if(!C)return s.jsx("span",{className:"text-neutral-400",children:"-"});const H=new Date(C),W=new Date,Q=Math.ceil((H.getTime()-W.getTime())/(1e3*60*60*24));return s.jsxs("span",{className:`flex items-center gap-1 ${Q<0?"text-error-600 font-semibold":Q<=3?"text-warning-600 font-semibold":"text-neutral-700"}`,children:[s.jsx(bt,{className:"h-4 w-4"}),Q<0?`${Math.abs(Q)} napja lejárt`:`${Q} nap`]})}},{key:"muveletek",label:"Műveletek",render:(C,H)=>!H.ugyintezoNev||H.ugyintezoNev==="Nem szignált"?s.jsx("span",{className:"text-neutral-400",children:"-"}):s.jsxs("button",{onClick:W=>E(H,W),className:"px-3 py-1.5 bg-warning-100 text-warning-700 rounded-md hover:bg-warning-200 transition-colors flex items-center gap-1.5 text-sm font-medium",title:"Szignálás visszaadása",children:[s.jsx(uu,{className:"h-4 w-4"}),"Visszaad"]})}],M=()=>{c("lista"),l(null)},ee=()=>i?y.findIndex(C=>C.id===i.id):-1,ce=()=>{const C=ee();C>0&&l(y[C-1])},V=()=>{const C=ee();C>=0&&C<y.length-1&&l(y[C+1])},le=()=>ee()>0,ye=()=>{const C=ee();return C>=0&&C<y.length-1},be=async C=>{try{const H=await Gn.letrehoz({ugytipus_kod:C.ugytipusKod,statusz:"beküldött",prioritas:C.prioritas||"normál",workflow_fazis:"erkeztetes",workflow_adatok:{ugyfel_nev:C.ugyfelNev,ugyfel_email:C.ugyfelEmail,kerelemzo_nev:C.kerelmozoNev,kerelem_targy:C.targy}});alert("Új ügy sikeresen rögzítve! Ügy azonosító: "+H.ugy_azonosito),await R(),M()}catch(H){console.error("Hiba az ügy létrehozásakor:",H),alert("Hiba történt az ügy rögzítése során.")}};if(o==="egyseges-workflow"&&i){const C=ee(),H=y.length;return s.jsx(mE,{ugy:i,onBefejez:M,onMegse:M,currentIndex:C,totalUgyek:H,onElozoUgy:le()?ce:void 0,onKovetkezoUgy:ye()?V:void 0})}return o==="ugy-reszletek"&&i?s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("button",{onClick:M,className:"flex items-center gap-2 text-neutral-600 hover:text-neutral-900 transition-colors mb-4",children:[s.jsx(ei,{className:"h-5 w-5"}),"Vissza az ügyek listájához"]}),s.jsx(Qj,{ugy:i,onClose:M})]})}):o==="uj-ugy-rogzites"?s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("button",{onClick:M,className:"flex items-center gap-2 text-neutral-600 hover:text-neutral-900 transition-colors mb-4",children:[s.jsx(ei,{className:"h-5 w-5"}),"Vissza az ügyek listájához"]}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Új ügy rögzítése"}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Töltse ki az alábbi űrlapot új ügy indításához"})]})]}),s.jsx(hE,{onMentes:be,onMegse:M})]})}):o==="ekeidr-ugyek"?s.jsx(xE,{onVissza:M,onUgyAtveve:C=>{M(),R()}}):s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx("div",{className:"bg-white border-b border-neutral-200",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Belső rendszer"}),s.jsx("p",{className:"text-neutral-600 mt-1",children:"VHF Ügyintézői munkaterület"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600",children:[s.jsx(Ca,{className:"h-4 w-4"}),s.jsx("span",{children:"Bejelentkezve: Ügyintéző"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(se,{className:"bg-primary-50 border-primary-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary-600 p-3 rounded-lg",children:s.jsx(rc,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-primary-700 font-medium",children:"Összes ügy"}),s.jsx("p",{className:"text-2xl font-bold text-primary-900",children:A.osszes})]})]})}),s.jsx(se,{className:"bg-success-50 border-success-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-success-600 p-3 rounded-lg",children:s.jsx(Wm,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-success-700 font-medium",children:"Ma beérkezett"}),s.jsx("p",{className:"text-2xl font-bold text-success-900",children:A.maBeerkezett})]})]})}),s.jsx(se,{className:"bg-warning-50 border-warning-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-warning-600 p-3 rounded-lg",children:s.jsx(bt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-warning-700 font-medium",children:"Lejáró határidők"}),s.jsx("p",{className:"text-2xl font-bold text-warning-900",children:A.lejaroHataridok})]})]})}),s.jsx(se,{className:"bg-accent-50 border-accent-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-accent-600 p-3 rounded-lg",children:s.jsx(vj,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-accent-700 font-medium",children:"Vizsgálat alatt"}),s.jsx("p",{className:"text-2xl font-bold text-accent-900",children:A.vizsgalatAlatt})]})]})})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s.jsx("div",{className:"mb-6 border-b border-neutral-200",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>a("ugyek"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${t==="ugyek"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(De,{className:"inline h-5 w-5 mr-2","aria-hidden":"true"}),"Ügyek kezelése"]}),G&&s.jsxs("button",{onClick:()=>a("nyilvantartasok"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${t==="nyilvantartasok"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(rc,{className:"inline h-5 w-5 mr-2","aria-hidden":"true"}),"Nyilvántartások"]})]})}),t==="ugyek"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Ügyek kezelése"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>c("ekeidr-ugyek"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(ys,{className:"h-5 w-5"}),"EKEIDR érkeztetett ügyek"]}),s.jsxs("button",{onClick:()=>c("uj-ugy-rogzites"),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2",children:[s.jsx(rl,{className:"h-5 w-5"}),"Új ügy rögzítése"]})]})]}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",placeholder:"Keresés ügy azonosító vagy ügyfél név alapján...",value:d,onChange:C=>h(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsxs("select",{value:g,onChange:C=>p(C.target.value),className:"pl-10 pr-8 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 appearance-none bg-white",children:[s.jsx("option",{value:"",children:"Minden státusz"}),s.jsx("option",{value:"aktív",children:"Aktív"}),s.jsx("option",{value:"új",children:"Új"}),s.jsx("option",{value:"folyamatban",children:"Folyamatban"}),s.jsx("option",{value:"lezárt",children:"Lezárt"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(bc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsxs("select",{value:f,onChange:C=>k(C.target.value),className:"pl-10 pr-8 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 appearance-none bg-white",children:[s.jsx("option",{value:"",children:"Minden prioritás"}),s.jsx("option",{value:"normál",children:"Normál"}),s.jsx("option",{value:"sürgős",children:"Sürgős"}),s.jsx("option",{value:"rendkívüli",children:"Rendkívüli"})]})]})]})]}),s.jsx(se,{className:"bg-white",children:$?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"Ügyek betöltése..."})]})}):s.jsx(Qi,{columns:L,data:y,onRowClick:C=>{l(C),c("egyseges-workflow")}})})]}),t==="nyilvantartasok"&&s.jsx(s.Fragment,{children:r?r==="vny024"?s.jsxs("div",{children:[s.jsx("button",{onClick:()=>n(null),className:"mb-4 px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 font-medium",children:"← Vissza a nyilvántartásokhoz"}),s.jsx(pE,{})]}):r==="vny009"?s.jsx(OE,{onClose:()=>n(null)}):r==="vny015"?s.jsx(RE,{onClose:()=>n(null)}):r==="vny019"?s.jsx(BE,{onClose:()=>n(null)}):r==="vny020"?s.jsx(UE,{onClose:()=>n(null)}):r==="vny021"?s.jsx($E,{onClose:()=>n(null)}):r==="vny032"?s.jsx(HE,{onClose:()=>n(null)}):r==="szervezetek"?s.jsx(VE,{onClose:()=>n(null)}):r==="szemelyek"?s.jsx(KE,{onClose:()=>n(null)}):s.jsxs("div",{children:[s.jsx("button",{onClick:()=>n(null),className:"mb-4 px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 font-medium",children:"← Vissza a nyilvántartásokhoz"}),s.jsxs(se,{className:"bg-accent-50 border border-accent-200 p-8 text-center",children:[s.jsx(rc,{className:"h-16 w-16 text-accent-600 mx-auto mb-4"}),s.jsxs("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:[r==null?void 0:r.toUpperCase()," Nyilvántartás"]}),s.jsx("p",{className:"text-neutral-600 mb-4",children:"Ez a nyilvántartás jelenleg fejlesztés alatt áll."}),s.jsx("p",{className:"text-sm text-neutral-500",children:"A teljes CRUD funkciók hamarosan elérhetők lesznek."})]})]}):s.jsx(ME,{onNyilvantartasValasztas:C=>n(C)})})]})]})}function WE({view:e,onBackToHome:t}){return s.jsx(kE,{onVissza:t||(()=>{})})}function JE({view:e,onBackToHome:t}){const[a,r]=B.useState("dashboard"),[n,i]=B.useState("lista"),[l,o]=B.useState(null),[c,d]=B.useState(null),[h,g]=B.useState(null),[p,f]=B.useState("havi"),[k,_]=B.useState([]),[w,x]=B.useState(!0),[j,z]=B.useState(!1),[N,$]=B.useState(""),[q,G]=B.useState(""),[D,I]=B.useState("hataridoDatum"),[R,y]=B.useState("asc");B.useEffect(()=>{A()},[]);const A=async()=>{var C;x(!0);try{const H=await Gn.osszes({ugytuek_kod:"V-044"});console.log("Betöltött ügyek:",H.length,"db"),console.log("Döntéshozatal státuszúak:",H.filter(Q=>Q.statusz==="döntéshozatal").length,"db"),console.log("Első ügy workflow_adatok:",(C=H[0])==null?void 0:C.workflow_adatok);const W=H.map(Q=>{const re=Q.workflow_adatok||{},ue=re.ugyfel_nev||"Ismeretlen ügyfél",me=re.ugyintezo_nev||"Nem szignált";return{id:Q.id,ugytuekId:Q.ugytuek_kod,ugytuekKod:Q.ugytuek_kod,ugytuekNev:"Vasúti járművezetők előzetes alkalmassági vizsgálata",ugyAzonosito:Q.ugy_azonosito,iktatoszam:Q.iktatoszam||"",ugyfelId:"1",ugyfelNev:ue,ugyintezoId:Q.ugyintezo_id||"3",ugyintezoNev:me,statusz:Q.statusz==="döntéshozatal"?"Döntéshozatal":Q.statusz==="folyamatban"?"Folyamatban":Q.statusz==="lezárva"||Q.statusz==="lezárt"?"Lezárva":Q.statusz==="hiánypótlás"?"Hiánypótlás":"Beérkezett",prioritas:Q.prioritas||"Normál",leiras:"",letrehozva:Q.created_at||new Date().toISOString(),hataridoDatum:Q.hatarido_datum}});console.log("Konvertált ügyek:",W.length,"db"),console.log("Döntéshozatal státuszúak konvertálva:",W.filter(Q=>Q.statusz==="Döntéshozatal").length,"db"),console.log("Első konvertált ügy:",W[0]),_(W)}catch(H){console.error("Hiba az ügyek betöltésekor:",H)}finally{x(!1)}},E=B.useMemo(()=>k.filter(C=>C.statusz==="Döntéshozatal"),[k]),L=B.useMemo(()=>{let C=[...E];return N&&(C=C.filter(H=>H.ugyAzonosito.toLowerCase().includes(N.toLowerCase())||H.ugyfelNev.toLowerCase().includes(N.toLowerCase())||H.ugyintezoNev&&H.ugyintezoNev.toLowerCase().includes(N.toLowerCase()))),q&&(C=C.filter(H=>H.prioritas===q)),C.sort((H,W)=>{let Q=H[D],re=W[D];return D==="hataridoDatum"?(Q=Q?new Date(Q).getTime():0,re=re?new Date(re).getTime():0):(Q=(Q==null?void 0:Q.toString().toLowerCase())||"",re=(re==null?void 0:re.toString().toLowerCase())||""),R==="asc"?Q>re?1:-1:Q<re?1:-1}),C},[E,N,q,D,R]),M=B.useMemo(()=>{const C=new Date,H=new Date(C.getTime()-7*24*60*60*1e3),W=new Date(C.getTime()-30*24*60*60*1e3),Q=k.length,re=k.filter(ve=>{const je=ve.lezarva?new Date(ve.lezarva):null;return je&&je.toDateString()===C.toDateString()}).length,ue=k.filter(ve=>{const je=ve.lezarva?new Date(ve.lezarva):null;return je&&je>=H}).length,me=k.filter(ve=>{const je=ve.lezarva?new Date(ve.lezarva):null;return je&&je>=W}).length,te=k.filter(ve=>{if(!ve.hataridoDatum)return!1;const je=new Date(ve.hataridoDatum),ne=Math.ceil((je.getTime()-C.getTime())/(1e3*60*60*24));return ne>=0&&ne<=3&&ve.statusz!=="Lezárva"}).length,pe=25,_e=[{nev:"Kovács János",ugyekSzama:12,jovahagyott:10,atlagIdő:22},{nev:"Nagy Péter",ugyekSzama:15,jovahagyott:13,atlagIdő:28},{nev:"Szabó Anna",ugyekSzama:10,jovahagyott:9,atlagIdő:20},{nev:"Tóth Katalin",ugyekSzama:8,jovahagyott:7,atlagIdő:24}];return{osszesUgy:Q,jovahagyottNapi:re,jovahagyottHeti:ue,jovahagyottHavi:me,kritikusUgyek:te,jovahagyasraVaro:E.length,atlagosUgyintezesiIdo:pe,ugyintezokTeljesitmenye:_e}},[k,E]),ee=[{key:"ugyAzonosito",label:"Ügy azonosító",className:"font-mono text-sm"},{key:"ugyfelNev",label:"Ügyfél"},{key:"ugyintezoNev",label:"Ügyintéző"},{key:"prioritas",label:"Prioritás",render:C=>s.jsx(oa,{type:"prioritas",value:C})},{key:"hataridoDatum",label:"Határidő",render:C=>{if(!C)return s.jsx("span",{className:"text-neutral-400",children:"-"});const H=new Date(C),W=new Date,Q=Math.ceil((H.getTime()-W.getTime())/(1e3*60*60*24));return s.jsxs("span",{className:`flex items-center gap-1 ${Q<0?"text-error-600 font-semibold":Q<=3?"text-warning-600 font-semibold":"text-neutral-700"}`,children:[s.jsx(bt,{className:"h-4 w-4"}),Q<0?`${Math.abs(Q)} napja lejárt`:`${Q} nap`]})}}],ce=async C=>{z(!0),o(C),i("dontesi_javaslat_reszletek");try{const H=await ym.getByUgyIdKiterjesztett(C.id);H||console.error("Nem található döntési javaslat ehhez az ügyhöz:",C.id),d(H)}catch(H){console.error("Hiba a döntési javaslat betöltésekor:",H),d(null)}finally{z(!1)}},V=async()=>{alert("Döntési javaslat jóváhagyva! Az ügy tovább halad a kiadmányozáshoz."),i("lista"),o(null),d(null),await A()},le=C=>{g(C),i("dokumentum_jovahagyas")},ye=()=>{alert("Dokumentum jóváhagyva és kiküldésre került!"),i("dokumentumok_lista"),g(null)},be=()=>{alert("Dokumentum elutasítva és visszaküldve az ügyintézőnek módosításra."),i("dokumentumok_lista"),g(null)};return n==="dokumentum_jovahagyas"&&h?s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(CE,{tervezet:h,onVissza:()=>{i("dokumentumok_lista"),g(null)},onJovahagyva:ye,onElutasitva:be})})}):n==="dokumentumok_lista"?s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx(s2,{onDokumentumValaszt:le}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>i("lista"),className:"px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 transition-colors",children:"Vissza a főoldalra"})})]})}):n==="dontesi_javaslat_reszletek"&&l?j?s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs(se,{className:"bg-white text-center py-12",children:[s.jsx(bt,{className:"h-16 w-16 text-primary-600 mx-auto mb-4 animate-spin"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Döntési javaslat betöltése..."}),s.jsx("p",{className:"text-neutral-600",children:"Kérem várjon."})]})})}):c?s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(LE,{javaslatId:c.id,vezetoNev:"Vezető",onVissza:()=>{i("lista"),o(null),d(null)},onMuveletKesz:async()=>{await V()}})})}):s.jsx("div",{className:"min-h-screen bg-neutral-50 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs(se,{className:"bg-error-50 border-error-200 text-center py-12",children:[s.jsx(Jt,{className:"h-16 w-16 text-error-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-error-900 mb-2",children:"Nincs döntési javaslat"}),s.jsx("p",{className:"text-error-700 mb-4",children:"Ehhez az ügyhöz még nem készült döntési javaslat."}),s.jsx("button",{onClick:()=>{i("lista"),o(null),d(null)},className:"px-4 py-2 bg-error-600 text-white rounded-lg hover:bg-error-700 transition-colors",children:"Vissza a listához"})]})})}):s.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary-700 to-accent-600 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Vezetői Irányítópult"}),s.jsx("p",{className:"text-primary-100 mt-2",children:"VHF Vasúti Hatósági Főosztály"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[t&&s.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg transition-colors",children:[s.jsx(Eu,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Főoldal"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Wx,{className:"h-5 w-5"}),s.jsx("span",{children:"Bejelentkezve: Vezető"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4 border border-white border-opacity-20",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rc,{className:"h-8 w-8"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-primary-100",children:"Összes ügy"}),s.jsx("p",{className:"text-2xl font-bold",children:M.osszesUgy})]})]})}),s.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4 border border-white border-opacity-20",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bt,{className:"h-8 w-8"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-primary-100",children:"Jóváhagyásra vár"}),s.jsx("p",{className:"text-2xl font-bold",children:M.jovahagyasraVaro})]})]})}),s.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4 border border-white border-opacity-20",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jt,{className:"h-8 w-8"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-primary-100",children:"Kritikus ügyek"}),s.jsx("p",{className:"text-2xl font-bold",children:M.kritikusUgyek})]})]})}),s.jsx("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4 border border-white border-opacity-20",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wm,{className:"h-8 w-8"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-primary-100",children:"Átlagos ügyintézési idő"}),s.jsxs("p",{className:"text-2xl font-bold",children:[M.atlagosUgyintezesiIdo," nap"]})]})]})})]})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s.jsx("div",{className:"mb-6 border-b border-neutral-200",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>r("dashboard"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${a==="dashboard"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(pp,{className:"inline h-5 w-5 mr-2"}),"Áttekintés"]}),s.jsxs("button",{onClick:()=>{r("jovahagyas"),i("dontesi_javaslat_lista")},className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors relative ${a==="jovahagyas"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(Pe,{className:"inline h-5 w-5 mr-2"}),"Vezetői véleményezésre váró ügyek",M.jovahagyasraVaro>0&&s.jsx("span",{className:"absolute -top-1 -right-2 bg-error-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:M.jovahagyasraVaro})]}),s.jsxs("button",{onClick:()=>{r("dokumentumok"),i("dokumentumok_lista")},className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${a==="dokumentumok"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(De,{className:"inline h-5 w-5 mr-2"}),"Dokumentumok"]}),s.jsxs("button",{onClick:()=>r("statisztikak"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${a==="statisztikak"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(R_,{className:"inline h-5 w-5 mr-2"}),"Statisztikák"]}),s.jsxs("button",{onClick:()=>r("teljesitmeny"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${a==="teljesitmeny"?"border-primary-600 text-primary-600":"border-transparent text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(vj,{className:"inline h-5 w-5 mr-2"}),"Teljesítmény"]})]})}),a==="dashboard"&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Jóváhagyott ügyek"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-success-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-success-700 font-medium",children:"Mai nap"}),s.jsx("p",{className:"text-2xl font-bold text-success-900",children:M.jovahagyottNapi})]}),s.jsx(cr,{className:"h-8 w-8 text-success-600"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-primary-700 font-medium",children:"Ez a hét"}),s.jsx("p",{className:"text-2xl font-bold text-primary-900",children:M.jovahagyottHeti})]}),s.jsx(Wm,{className:"h-8 w-8 text-primary-600"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-accent-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-accent-700 font-medium",children:"Ez a hónap"}),s.jsx("p",{className:"text-2xl font-bold text-accent-900",children:M.jovahagyottHavi})]}),s.jsx(pp,{className:"h-8 w-8 text-accent-600"})]})]})]}),s.jsxs(se,{className:"bg-white",children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-4",children:"Figyelmeztetések"}),s.jsxs("div",{className:"space-y-3",children:[M.jovahagyasraVaro>0&&s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-warning-50 border-l-4 border-warning-500 rounded",children:[s.jsx(bt,{className:"h-5 w-5 text-warning-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-warning-900",children:[M.jovahagyasraVaro," ügy vár jóváhagyásra"]}),s.jsx("p",{className:"text-xs text-warning-700 mt-1",children:"Döntéshozatali szakaszban"})]})]}),M.kritikusUgyek>0&&s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-error-50 border-l-4 border-error-500 rounded",children:[s.jsx(Jt,{className:"h-5 w-5 text-error-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-error-900",children:[M.kritikusUgyek," ügy kritikus határidővel"]}),s.jsx("p",{className:"text-xs text-error-700 mt-1",children:"3 napon belül lejár"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-success-50 border-l-4 border-success-500 rounded",children:[s.jsx(Pe,{className:"h-5 w-5 text-success-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-success-900",children:["Átlagos ügyintézési idő: ",M.atlagosUgyintezesiIdo," nap"]}),s.jsx("p",{className:"text-xs text-success-700 mt-1",children:"Célérték: 30 nap alatt"})]})]})]})]})]})}),a==="dokumentumok"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(se,{className:"bg-gradient-to-r from-accent-50 to-primary-50 border border-accent-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(De,{className:"h-6 w-6 text-accent-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-2",children:"Dokumentum tervezetek jóváhagyása"}),s.jsx("p",{className:"text-sm text-neutral-700 mb-3",children:"Ebben a szekcióban megtekintheti és jóváhagyhatja az ügyintézők által elkészített dokumentum tervezeteket (hiánypótlási felszólítások, végzések, határozatok, stb.)."}),s.jsxs("p",{className:"text-sm text-neutral-700",children:[s.jsx("strong",{children:"Munkafolyamat:"})," Az ügyintéző elkészíti a dokumentumot → EKEIDR iktatószám kérés → Vezetői jóváhagyás → Automatikus kiküldés"]})]})]})}),s.jsx(s2,{onDokumentumValaszt:le})]}),a==="jovahagyas"&&n==="dontesi_javaslat_lista"&&s.jsx(s.Fragment,{children:w?s.jsxs(se,{className:"bg-white text-center py-12",children:[s.jsx(bt,{className:"h-16 w-16 text-primary-600 mx-auto mb-4 animate-spin"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Ügyek betöltése..."}),s.jsx("p",{className:"text-neutral-600",children:"Kérem várjon, amíg az adatokat lekérdezzük az adatbázisból."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Vezetői véleményezésre váró ügyek"}),s.jsxs("p",{className:"text-neutral-600",children:[L.length," ügy vár vezetői véleményezésre",E.length!==L.length&&` (${E.length} összes)`]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",placeholder:"Keresés...",value:N,onChange:C=>$(C.target.value),className:"w-full pl-10 pr-10 py-2.5 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),N&&s.jsx("button",{onClick:()=>$(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:s.jsx(es,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(bc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none"}),s.jsxs("select",{value:q,onChange:C=>G(C.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 appearance-none bg-white",children:[s.jsx("option",{value:"",children:"Minden prioritás"}),s.jsx("option",{value:"sürgős",children:"Sürgős"}),s.jsx("option",{value:"magas",children:"Magas"}),s.jsx("option",{value:"normál",children:"Normál"}),s.jsx("option",{value:"alacsony",children:"Alacsony"})]})]}),s.jsx("div",{className:"relative",children:s.jsxs("select",{value:`${D}-${R}`,onChange:C=>{const[H,W]=C.target.value.split("-");I(H),y(W)},className:"w-full px-4 py-2.5 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 appearance-none bg-white",children:[s.jsx("option",{value:"hataridoDatum-asc",children:"Határidő (korábbi)"}),s.jsx("option",{value:"hataridoDatum-desc",children:"Határidő (későbbi)"}),s.jsx("option",{value:"ugyAzonosito-asc",children:"Ügy azonosító (A-Z)"}),s.jsx("option",{value:"ugyAzonosito-desc",children:"Ügy azonosító (Z-A)"}),s.jsx("option",{value:"ugyfelNev-asc",children:"Ügyfél (A-Z)"}),s.jsx("option",{value:"ugyfelNev-desc",children:"Ügyfél (Z-A)"}),s.jsx("option",{value:"ugyintezoNev-asc",children:"Ügyintéző (A-Z)"}),s.jsx("option",{value:"ugyintezoNev-desc",children:"Ügyintéző (Z-A)"})]})})]}),(N||q)&&s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:()=>{$(""),G("")},className:"text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1",children:[s.jsx(es,{className:"h-4 w-4"}),"Szűrők törlése"]})})]}),L.length===0?s.jsx(se,{className:"bg-white text-center py-12",children:E.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"h-16 w-16 text-success-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Nincs jóváhagyásra váró ügy"}),s.jsx("p",{className:"text-neutral-600",children:"Jelenleg minden ügy feldolgozásra került."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Jt,{className:"h-16 w-16 text-warning-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"Nincs találat"}),s.jsx("p",{className:"text-neutral-600",children:"A megadott szűrési feltételeknek nem felel meg egyetlen ügy sem."}),s.jsx("button",{onClick:()=>{$(""),G("")},className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Szűrők törlése"})]})}):s.jsx(se,{className:"bg-white",children:s.jsx(Qi,{columns:ee,data:L,onRowClick:C=>{ce(C)}})})]})}),a==="statisztikak"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Részletes statisztikák"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>f("napi"),className:`px-4 py-2 rounded-md text-sm font-medium ${p==="napi"?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"Napi"}),s.jsx("button",{onClick:()=>f("heti"),className:`px-4 py-2 rounded-md text-sm font-medium ${p==="heti"?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"Heti"}),s.jsx("button",{onClick:()=>f("havi"),className:`px-4 py-2 rounded-md text-sm font-medium ${p==="havi"?"bg-primary-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"Havi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(se,{className:"bg-gradient-to-br from-success-50 to-success-100 border border-success-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-success-700 font-medium",children:"Jóváhagyott"}),s.jsx("p",{className:"text-3xl font-bold text-success-900",children:p==="napi"?M.jovahagyottNapi:p==="heti"?M.jovahagyottHeti:M.jovahagyottHavi})]}),s.jsx(Pe,{className:"h-8 w-8 text-success-600"})]}),s.jsx("p",{className:"text-xs text-success-700",children:"+12% az előző időszakhoz képest"})]}),s.jsxs(se,{className:"bg-gradient-to-br from-warning-50 to-warning-100 border border-warning-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-warning-700 font-medium",children:"Folyamatban"}),s.jsx("p",{className:"text-3xl font-bold text-warning-900",children:k.filter(C=>C.statusz!=="Lezárva").length})]}),s.jsx(bt,{className:"h-8 w-8 text-warning-600"})]}),s.jsxs("p",{className:"text-xs text-warning-700",children:["Átlagos ügyintézési idő: ",M.atlagosUgyintezesiIdo," nap"]})]}),s.jsxs(se,{className:"bg-gradient-to-br from-error-50 to-error-100 border border-error-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-error-700 font-medium",children:"Elutasított"}),s.jsx("p",{className:"text-3xl font-bold text-error-900",children:"2"})]}),s.jsx(Jt,{className:"h-8 w-8 text-error-600"})]}),s.jsx("p",{className:"text-xs text-error-700",children:"Elutasítási arány: 3.5%"})]})]})]}),a==="teljesitmeny"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Ügyintézők teljesítménye"}),s.jsx("p",{className:"text-neutral-600",children:"Havi összesítés"})]}),s.jsx("div",{className:"space-y-4",children:M.ugyintezokTeljesitmenye.map((C,H)=>s.jsx(se,{className:"bg-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${H===0?"bg-success-600":H===1?"bg-primary-600":H===2?"bg-accent-600":"bg-neutral-600"}`,children:["#",H+1]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-neutral-900",children:C.nev}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Ügyintéző"})]})]}),s.jsxs("div",{className:"flex gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:C.ugyekSzama}),s.jsx("p",{className:"text-xs text-neutral-600",children:"Összes ügy"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-success-900",children:C.jovahagyott}),s.jsx("p",{className:"text-xs text-neutral-600",children:"Jóváhagyott"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-primary-900",children:C.atlagIdő}),s.jsx("p",{className:"text-xs text-neutral-600",children:"Átlag (nap)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-accent-900",children:[Math.round(C.jovahagyott/C.ugyekSzama*100),"%"]}),s.jsx("p",{className:"text-xs text-neutral-600",children:"Hatékonyság"})]})]})]})},C.nev))}),s.jsx(se,{className:"bg-gradient-to-r from-primary-600 to-accent-600 text-white mt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Havi teljesítmény riport"}),s.jsx("p",{className:"text-primary-100",children:"Részletes jelentés letöltése PDF formátumban"})]}),s.jsxs("button",{className:"px-6 py-3 bg-white text-primary-600 rounded-lg font-semibold hover:bg-neutral-100 transition-colors flex items-center gap-2",children:[s.jsx(ys,{className:"h-5 w-5"}),"Riport letöltése"]})]})})]})]})]})}function a2({view:e}){const[t,a]=B.useState("ugyek"),[r,n]=B.useState(null),i=Z_.filter(o=>o.ugytuekKod==="H-052"),l=[{key:"ugyAzonosito",label:"Ügy azonosító"},{key:"ugytuekNev",label:"Ügytípus"},{key:"ugyfelNev",label:"Ügyfél"},{key:"statusz",label:"Státusz",render:o=>s.jsx(oa,{type:"statusz",value:o.statusz})},{key:"prioritas",label:"Prioritás",render:o=>s.jsx(oa,{type:"prioritas",value:o.prioritas})},{key:"hataridoDatum",label:"Határidő"}];return e==="kulso"?s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Saját ügyeim"})}),s.jsx(se,{className:"bg-white",children:s.jsx(Qi,{columns:l,data:i,onRowClick:o=>n(o)})})]}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex gap-4 border-b border-neutral-200",children:[s.jsxs("button",{onClick:()=>a("ugyek"),className:`px-4 py-2 font-medium ${t==="ugyek"?"text-accent-600 border-b-2 border-accent-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(De,{className:"inline h-5 w-5 mr-2","aria-hidden":"true"}),"Ügyek"]}),s.jsxs("button",{onClick:()=>a("nyilvantartas"),className:`px-4 py-2 font-medium ${t==="nyilvantartas"?"text-accent-600 border-b-2 border-accent-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(rc,{className:"inline h-5 w-5 mr-2","aria-hidden":"true"}),"Nyilvántartás"]})]})}),t==="ugyek"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Ügyek kezelése"}),s.jsxs("button",{className:"px-4 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-accent-500",children:[s.jsx(rl,{className:"h-5 w-5","aria-hidden":"true"}),"Új ügy rögzítése"]})]}),s.jsx(se,{className:"bg-white",children:s.jsx(Qi,{columns:l,data:i,onRowClick:o=>n(o)})})]}),t==="nyilvantartas"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Nyilvántartások"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Y_.map(o=>s.jsxs(se,{hover:!0,className:"bg-white",children:[s.jsx("h3",{className:"font-bold text-lg text-neutral-900 mb-2",children:o.nev}),s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:o.leiras}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-neutral-700",children:["Elemek: ",o.elemekSzama]}),s.jsx("button",{className:"text-accent-600 hover:text-accent-700 font-medium",children:"Megnyitás →"})]})]},o.id))})]})]})}function GE(){const[e,t]=B.useState([]),[a,r]=B.useState(null),[n,i]=B.useState(""),[l,o]=B.useState(!0),[c,d]=B.useState("lista");B.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0);const w=await Vn.osszeFelhasznalo();t(w)}catch(w){console.error("Hiba a felhasználók betöltésekor:",w)}finally{o(!1)}},g=async w=>{try{const x=await Vn.felhasznaloJogokkal(w);r(x),d("szerkesztes")}catch(x){console.error("Hiba a felhasználó betöltésekor:",x)}},p=async w=>{try{const x=await Vn.felhasznaloJogokkal(w);r(x),d("jogok")}catch(x){console.error("Hiba a felhasználó betöltésekor:",x)}},f=async w=>{if(confirm("Biztosan törölni szeretné ezt a felhasználót?"))try{await Vn.torolFelhasznalo(w),await h()}catch(x){console.error("Hiba a felhasználó törlésekor:",x),alert("Hiba történt a törlés során!")}},k=async w=>{try{await Vn.frissitFelhasznalo(w.id,{aktiv:!w.aktiv}),await h()}catch(x){console.error("Hiba a felhasználó státusz változtatásakor:",x)}},_=e.filter(w=>w.nev.toLowerCase().includes(n.toLowerCase())||w.email.toLowerCase().includes(n.toLowerCase()));return c==="szerkesztes"&&a?s.jsx(ZE,{felhasznalo:a,onMentes:async()=>{await h(),d("lista"),r(null)},onMegse:()=>{d("lista"),r(null)}}):c==="jogok"&&a?s.jsx(YE,{felhasznalo:a,onMentes:async()=>{await h(),d("lista"),r(null)},onVissza:()=>{d("lista"),r(null)}}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Felhasználókezelés"}),s.jsxs("button",{onClick:()=>{r({id:"",email:"",nev:"",szerepkor:"ügyintéző",aktiv:!0,letrehozva:"",jogosultsagok:[]}),d("szerkesztes")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(rl,{className:"w-5 h-5"}),"Új felhasználó"]})]}),s.jsxs(se,{children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",value:n,onChange:w=>i(w.target.value),placeholder:"Keresés név vagy email alapján...",className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Név"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Szerepkör"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Státusz"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utolsó bejelentkezés"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Műveletek"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Betöltés..."})}):_.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Nincs megjeleníthető felhasználó"})}):_.map(w=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(os,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:w.nev})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:w.email}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${w.szerepkor==="admin"?"bg-purple-100 text-purple-800":w.szerepkor==="vezető"?"bg-blue-100 text-blue-800":w.szerepkor==="ügyintéző"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.szerepkor})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>k(w),className:"flex items-center gap-1",children:w.aktiv?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"text-green-700 text-sm",children:"Aktív"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Qs,{className:"w-5 h-5 text-red-500"}),s.jsx("span",{className:"text-red-700 text-sm",children:"Inaktív"})]})})}),s.jsx("td",{className:"px-6 py-4 text-gray-700 text-sm",children:w.utolso_bejelentkezes?new Date(w.utolso_bejelentkezes).toLocaleString("hu-HU"):"Soha"}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>p(w.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Jogosultságok kezelése",children:s.jsx(kc,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>g(w.id),className:"p-2 text-gray-600 hover:bg-gray-50 rounded",title:"Szerkesztés",children:s.jsx(Ec,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>f(w.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Törlés",children:s.jsx(b0,{className:"w-5 h-5"})})]})})]},w.id))})]})})]})]})}function ZE({felhasznalo:e,onMentes:t,onMegse:a}){const[r,n]=B.useState({nev:e.nev,email:e.email,szerepkor:e.szerepkor,aktiv:e.aktiv}),[i,l]=B.useState(!1),o=async()=>{try{l(!0),e.id?await Vn.frissitFelhasznalo(e.id,r):await Vn.ujFelhasznalo(r),t()}catch(c){console.error("Hiba a mentés során:",c),alert("Hiba történt a mentés során!")}finally{l(!1)}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e.id?"Felhasználó szerkesztése":"Új felhasználó"})}),s.jsx(se,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Név *"}),s.jsx("input",{type:"text",value:r.nev,onChange:c=>n({...r,nev:c.target.value}),className:"w-full px-4 py-2 border rounded-lg",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email cím *"}),s.jsx("input",{type:"email",value:r.email,onChange:c=>n({...r,email:c.target.value}),className:"w-full px-4 py-2 border rounded-lg",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Szerepkör *"}),s.jsxs("select",{value:r.szerepkor,onChange:c=>n({...r,szerepkor:c.target.value}),className:"w-full px-4 py-2 border rounded-lg",children:[s.jsx("option",{value:"ügyfél",children:"Ügyfél"}),s.jsx("option",{value:"ügyintéző",children:"Ügyintéző"}),s.jsx("option",{value:"vezető",children:"Vezető"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"aktiv",checked:r.aktiv,onChange:c=>n({...r,aktiv:c.target.checked}),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"aktiv",className:"text-sm font-medium text-gray-700",children:"Aktív felhasználó"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{onClick:a,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",disabled:i,children:"Mégse"}),s.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:i||!r.nev||!r.email,children:i?"Mentés...":"Mentés"})]})]})})]})}function YE({felhasznalo:e,onMentes:t,onVissza:a}){const[r,n]=B.useState({modul:"vasúti",szerepkor:e.szerepkor,jogok:[],aktiv:!0}),[i,l]=B.useState(!1),o=["kerelem_benyujtas","sajat_ugyek_megtekintes","osszes_ugy_megtekintes","ugy_modositas","donteshozatal","velemenyezes","hianypotlas_kezeles","tenyallas_tisztazas","dokumentum_letoltes","dokumentum_generalas","nyilvantartas_kezeles","osszes_nyilvantartas_kezeles","parameterek_kezeles","jogosultsagok_kezeles","felhasznalok_kezeles","rendszer_beallitasok","statisztikak_megtekintes","riportok_generalasa","audit_log_megtekintes","statusz_lekerdez"],c=async()=>{try{l(!0),await Vn.ujJogosultsag({felhasznalo_id:e.id,...r,ervenyesseg_kezdete:new Date().toISOString()}),t()}catch(g){console.error("Hiba a jogosultság hozzáadásakor:",g),alert("Hiba történt a jogosultság hozzáadása során!")}finally{l(!1)}},d=async g=>{if(confirm("Biztosan törölni szeretné ezt a jogosultságot?"))try{await Vn.torolJogosultsag(g),t()}catch(p){console.error("Hiba a jogosultság törlésekor:",p),alert("Hiba történt a törlés során!")}},h=g=>{n(p=>({...p,jogok:p.jogok.includes(g)?p.jogok.filter(f=>f!==g):[...p.jogok,g]}))};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Jogosultságok kezelése"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:[e.nev," (",e.email,")"]})]}),s.jsx("button",{onClick:a,className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Vissza"})]}),s.jsx(se,{children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Jelenlegi jogosultságok"}),s.jsx("div",{className:"space-y-4",children:e.jogosultsagok.length===0?s.jsx("p",{className:"text-gray-500",children:"Nincs beállított jogosultság"}):e.jogosultsagok.map(g=>s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"font-medium",children:g.modul}),s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${g.szerepkor==="admin"?"bg-purple-100 text-purple-800":g.szerepkor==="vezető"?"bg-blue-100 text-blue-800":g.szerepkor==="ügyintéző"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:g.szerepkor}),g.aktiv?s.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Aktív"}):s.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"Inaktív"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:["Érvényesség kezdete: ",new Date(g.ervenyesseg_kezdete).toLocaleDateString("hu-HU")]}),g.ervenyesseg_vege&&s.jsxs("p",{children:["Érvényesség vége: ",new Date(g.ervenyesseg_vege).toLocaleDateString("hu-HU")]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:g.jogok.map(p=>s.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:p},p))})]}),s.jsx("button",{onClick:()=>d(g.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Törlés",children:s.jsx(b0,{className:"w-5 h-5"})})]})},g.id))})]})}),s.jsx(se,{children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Új jogosultság hozzáadása"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modul"}),s.jsxs("select",{value:r.modul,onChange:g=>n({...r,modul:g.target.value}),className:"w-full px-4 py-2 border rounded-lg",children:[s.jsx("option",{value:"vasúti",children:"Vasúti"}),s.jsx("option",{value:"hajózási",children:"Hajózási"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Szerepkör"}),s.jsxs("select",{value:r.szerepkor,onChange:g=>n({...r,szerepkor:g.target.value}),className:"w-full px-4 py-2 border rounded-lg",children:[s.jsx("option",{value:"ügyfél",children:"Ügyfél"}),s.jsx("option",{value:"ügyintéző",children:"Ügyintéző"}),s.jsx("option",{value:"vezető",children:"Vezető"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jogosultságok"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 p-4 border rounded-lg max-h-64 overflow-y-auto",children:o.map(g=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:r.jogok.includes(g),onChange:()=>h(g),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:g})]},g))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"uj-aktiv",checked:r.aktiv,onChange:g=>n({...r,aktiv:g.target.checked}),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"uj-aktiv",className:"text-sm font-medium text-gray-700",children:"Azonnal aktív"})]}),s.jsx("button",{onClick:c,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:i||r.jogok.length===0,children:i?"Hozzáadás...":"Jogosultság hozzáadása"})]})]})})]})}const r2={kategoria_id:"",nev:"",leiras:"",fajl_nev:"",fajl_tipus:"application/pdf",fajl_meret:0,fajl_url:"",verzio:"1.0",kulcsszavak:"",megjegyzesek:"",aktiv:!0,ugytuek_kod:"V-044",kotelezo:!1,kapcsolat_megjegyzes:"",sorrend:0};function XE({onClose:e}){const[t,a]=B.useState([]),[r,n]=B.useState([]),[i,l]=B.useState(!0),[o,c]=B.useState("lista"),[d,h]=B.useState(null),[g,p]=B.useState(r2),[f,k]=B.useState(""),[_,w]=B.useState(""),[x,j]=B.useState(!1),[z,N]=B.useState("");B.useEffect(()=>{$()},[]);const $=async()=>{l(!0);try{const[y,A]=await Promise.all([Ii.dokumentumokUgytuekKod("V-044"),Ii.kategoriak()]);a(y),n(A)}catch(y){console.error("Dokumentumtár betöltési hiba:",y)}finally{l(!1)}},q=()=>{p(r2),h(null),c("uj")},G=y=>{var A;p({kategoria_id:y.kategoria_id||"",nev:y.nev,leiras:y.leiras||"",fajl_nev:y.fajl_nev,fajl_tipus:y.fajl_tipus,fajl_meret:y.fajl_meret||0,fajl_url:y.fajl_url,verzio:y.verzio,kulcsszavak:((A=y.kulcsszavak)==null?void 0:A.join(", "))||"",megjegyzesek:y.megjegyzesek||"",aktiv:y.aktiv,ugytuek_kod:"V-044",kotelezo:y.kotelezo||!1,kapcsolat_megjegyzes:y.kapcsolat_megjegyzes||"",sorrend:0}),h(y.id),c("szerkesztes")},D=async()=>{try{const y=g.kulcsszavak.split(",").map(A=>A.trim()).filter(A=>A.length>0);if(d){const{error:A}=await xe.from("dokumentumtar_dokumentum").update({kategoria_id:g.kategoria_id||null,nev:g.nev,leiras:g.leiras,fajl_nev:g.fajl_nev,fajl_tipus:g.fajl_tipus,fajl_meret:g.fajl_meret,fajl_url:g.fajl_url,verzio:g.verzio,kulcsszavak:y,megjegyzesek:g.megjegyzesek,aktiv:g.aktiv}).eq("id",d);if(A)throw A;const{error:E}=await xe.from("dokumentumtar_ugytuek_kapcsolat").update({kotelezo:g.kotelezo,megjegyzes:g.kapcsolat_megjegyzes,sorrend:g.sorrend}).eq("dokumentum_id",d).eq("ugytuek_kod",g.ugytuek_kod);if(E)throw E;N("Dokumentum sikeresen frissítve!")}else{const{data:A,error:E}=await xe.from("dokumentumtar_dokumentum").insert({kategoria_id:g.kategoria_id||null,nev:g.nev,leiras:g.leiras,fajl_nev:g.fajl_nev,fajl_tipus:g.fajl_tipus,fajl_meret:g.fajl_meret,fajl_url:g.fajl_url,verzio:g.verzio,kulcsszavak:y,megjegyzesek:g.megjegyzesek,aktiv:g.aktiv}).select().single();if(E)throw E;const{error:L}=await xe.from("dokumentumtar_ugytuek_kapcsolat").insert({dokumentum_id:A.id,ugytuek_kod:g.ugytuek_kod,kotelezo:g.kotelezo,megjegyzes:g.kapcsolat_megjegyzes,sorrend:g.sorrend});if(L)throw L;N("Dokumentum sikeresen létrehozva!")}j(!0),setTimeout(()=>j(!1),3e3),c("lista"),$()}catch(y){console.error("Mentési hiba:",y),alert("Hiba történt a mentés során!")}},I=async y=>{if(confirm("Biztosan törli ezt a dokumentumot?"))try{const{error:A}=await xe.from("dokumentumtar_dokumentum").delete().eq("id",y);if(A)throw A;N("Dokumentum sikeresen törölve!"),j(!0),setTimeout(()=>j(!1),3e3),$()}catch(A){console.error("Törlési hiba:",A),alert("Hiba történt a törlés során!")}},R=t.filter(y=>{var L;const A=!f||y.nev.toLowerCase().includes(f.toLowerCase())||y.fajl_nev.toLowerCase().includes(f.toLowerCase()),E=!_||((L=y.kategoria)==null?void 0:L.kod)===_;return A&&E});return o==="uj"||o==="szerkesztes"?s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:o==="uj"?"Új dokumentum hozzáadása":"Dokumentum szerkesztése"}),s.jsx("button",{onClick:()=>c("lista"),className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-md",children:s.jsx(es,{className:"h-6 w-6"})})]})}),s.jsx(se,{className:"bg-white",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Alapadatok"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Dokumentum neve *"}),s.jsx("input",{type:"text",value:g.nev,onChange:y=>p({...g,nev:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Kategória *"}),s.jsxs("select",{value:g.kategoria_id,onChange:y=>p({...g,kategoria_id:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[s.jsx("option",{value:"",children:"Válasszon kategóriát"}),r.map(y=>s.jsx("option",{value:y.id,children:y.nev},y.id))]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Leírás"}),s.jsx("textarea",{value:g.leiras,onChange:y=>p({...g,leiras:y.target.value}),rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Fájl adatok"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Fájlnév *"}),s.jsx("input",{type:"text",value:g.fajl_nev,onChange:y=>p({...g,fajl_nev:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"dokumentum_v1.pdf",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Fájl típus *"}),s.jsxs("select",{value:g.fajl_tipus,onChange:y=>p({...g,fajl_tipus:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"application/pdf",children:"PDF"}),s.jsx("option",{value:"application/msword",children:"DOC"}),s.jsx("option",{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",children:"DOCX"}),s.jsx("option",{value:"application/vnd.ms-excel",children:"XLS"}),s.jsx("option",{value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",children:"XLSX"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Fájl URL *"}),s.jsx("input",{type:"text",value:g.fajl_url,onChange:y=>p({...g,fajl_url:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"/dokumentumok/vasut/v044/...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Fájl méret (byte)"}),s.jsx("input",{type:"number",value:g.fajl_meret,onChange:y=>p({...g,fajl_meret:parseInt(y.target.value)||0}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Verzió"}),s.jsx("input",{type:"text",value:g.verzio,onChange:y=>p({...g,verzio:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"1.0"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Ügytípushoz kapcsolás"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Ügytípus kód *"}),s.jsx("input",{type:"text",value:g.ugytuek_kod,onChange:y=>p({...g,ugytuek_kod:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"V-044",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Sorrend"}),s.jsx("input",{type:"number",value:g.sorrend,onChange:y=>p({...g,sorrend:parseInt(y.target.value)||0}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"kotelezo",checked:g.kotelezo,onChange:y=>p({...g,kotelezo:y.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded"}),s.jsx("label",{htmlFor:"kotelezo",className:"ml-2 text-sm font-medium text-neutral-700",children:"Kötelező dokumentum"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"aktiv",checked:g.aktiv,onChange:y=>p({...g,aktiv:y.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded"}),s.jsx("label",{htmlFor:"aktiv",className:"ml-2 text-sm font-medium text-neutral-700",children:"Aktív"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Kapcsolat megjegyzés"}),s.jsx("input",{type:"text",value:g.kapcsolat_megjegyzes,onChange:y=>p({...g,kapcsolat_megjegyzes:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Kötelező dokumentum - ..."})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Egyéb adatok"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Kulcsszavak (vesszővel elválasztva)"}),s.jsx("input",{type:"text",value:g.kulcsszavak,onChange:y=>p({...g,kulcsszavak:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"példa, minta, nyilatkozat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Megjegyzések"}),s.jsx("textarea",{value:g.megjegyzesek,onChange:y=>p({...g,megjegyzesek:y.target.value}),rows:3,className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-neutral-200",children:[s.jsx("button",{onClick:()=>c("lista"),className:"px-6 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 font-semibold",children:"Mégse"}),s.jsxs("button",{onClick:D,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 font-semibold flex items-center gap-2",children:[s.jsx(yn,{className:"h-5 w-5"}),"Mentés"]})]})]})})]}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x&&s.jsx("div",{className:"mb-6 bg-success-50 border-2 border-success-400 rounded-lg p-4 animate-fade-in",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ut,{className:"h-6 w-6 text-success-600"}),s.jsx("p",{className:"text-sm text-success-800 font-semibold",children:z})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Dokumentumtár kezelése"}),s.jsx("p",{className:"text-neutral-600 mt-1",children:"Dokumentumok feltöltése és ügytípusokhoz rendelése"})]}),s.jsx("button",{onClick:e,className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-md",children:s.jsx(es,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("button",{onClick:q,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center gap-2 font-semibold",children:[s.jsx(rl,{className:"h-5 w-5"}),"Új dokumentum hozzáadása"]})})]}),s.jsx(se,{className:"mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),s.jsx("input",{type:"text",value:f,onChange:y=>k(y.target.value),placeholder:"Keresés név vagy fájlnév alapján...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("select",{value:_,onChange:y=>w(y.target.value),className:"px-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"Minden kategória"}),r.map(y=>s.jsx("option",{value:y.kod,children:y.nev},y.kod))]})]})}),i?s.jsx(se,{className:"text-center py-12",children:s.jsx("p",{className:"text-neutral-600",children:"Betöltés..."})}):R.length===0?s.jsxs(se,{className:"text-center py-12",children:[s.jsx(De,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"Nincs megjeleníthető dokumentum"})]}):s.jsx("div",{className:"space-y-3",children:R.map(y=>{var A;return s.jsx(se,{className:"bg-white",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-neutral-900",children:y.nev}),y.kotelezo&&s.jsx("span",{className:"px-2 py-0.5 bg-error-100 text-error-800 text-xs font-semibold rounded",children:"Kötelező"}),!y.aktiv&&s.jsx("span",{className:"px-2 py-0.5 bg-neutral-200 text-neutral-700 text-xs font-semibold rounded",children:"Inaktív"}),s.jsx("span",{className:"px-2 py-0.5 bg-primary-100 text-primary-700 text-xs rounded",children:(A=y.kategoria)==null?void 0:A.nev})]}),s.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:y.leiras}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500",children:[s.jsx("span",{className:"font-mono",children:y.fajl_nev}),s.jsx("span",{children:Ii.formatFajlMeret(y.fajl_meret)}),s.jsxs("span",{children:["v",y.verzio]}),s.jsxs("span",{children:[y.letoltes_szam," letöltés"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>G(y),className:"p-2 text-neutral-600 hover:text-primary-600 hover:bg-primary-50 rounded-md",title:"Szerkesztés",children:s.jsx(zj,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>I(y.id),className:"p-2 text-neutral-600 hover:text-error-600 hover:bg-error-50 rounded-md",title:"Törlés",children:s.jsx(b0,{className:"h-5 w-5"})})]})]})},y.id)})})]})}function QE({onBackToHome:e}){const[t,a]=B.useState("parameterek"),[r,n]=B.useState("V-044"),[i,l]=B.useState([]),[o,c]=B.useState("HATARIDOK"),[d,h]=B.useState(null),[g,p]=B.useState({}),[f,k]=B.useState(""),[_,w]=B.useState(!1),x=[{kod:"V-044",nev:"V-044 - Vasúti járművezetők előzetes alkalmassági vizsgálata"},{kod:"V-001",nev:"V-001 - Vasúti működési engedély"},{kod:"V-002",nev:"V-002 - Vasúti biztonsági engedély"},{kod:"V-015",nev:"V-015 - RID kazánbiztosok nyilvántartása"},{kod:"V-019",nev:"V-019 - Vasúti vizsgabiztosok nyilvántartása"},{kod:"V-020",nev:"V-020 - Képzők nyilvántartása"}],j=[{kod:"HATARIDOK",nev:"Határidők",icon:bt,color:"blue"},{kod:"DIJAK",nev:"Díjak",icon:Hx,color:"green"},{kod:"ELLENORZESI_LISTAK",nev:"Ellenőrzési listák",icon:Jn,color:"purple"},{kod:"DOKUMENTUMOK",nev:"Dokumentumok",icon:De,color:"orange"},{kod:"ERTESITESEK",nev:"Értesítések",icon:yj,color:"red"},{kod:"WORKFLOW",nev:"Workflow",icon:Nj,color:"indigo"}];B.useEffect(()=>{r&&z()},[r]);const z=async()=>{w(!0);try{const y=await nc.getUgytuekParameterek(r);l(y)}catch(y){console.error("Ügytípus paraméterek betöltése sikertelen:",y)}finally{w(!1)}},N=async y=>{const A=g[y.id];if(y.parameter)try{await nc.updateUgytuekParameter(r,y.parameter.kod,A),await z(),h(null),p({})}catch(E){console.error("Mentés sikertelen:",E)}},$=async y=>{if(y.parameter)try{await nc.resetUgytuekParameter(r,y.parameter.kod),await z()}catch(A){console.error("Visszaállítás sikertelen:",A)}},q=y=>{const A=y.parameter;if(!A)return null;const E=g[y.id]??(y.felulirja_alapertelmezettet?y.ertek:A.alapertelmezett_ertek);switch(A.adattipus){case"logikai":return s.jsxs("select",{value:String(E),onChange:L=>p({...g,[y.id]:L.target.value==="true"}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"true",children:"Igen"}),s.jsx("option",{value:"false",children:"Nem"})]});case"szam":return s.jsx("input",{type:"number",value:E,onChange:L=>p({...g,[y.id]:Number(L.target.value)}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 w-32"});case"szoveg":return s.jsx("input",{type:"text",value:E,onChange:L=>p({...g,[y.id]:L.target.value}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"});case"lista":if(A.kod==="DONTESHOZO_SZEREPKOR"){const L=typeof E=="string"?E:JSON.stringify(E).replace(/^"|"$/g,"");return s.jsxs("select",{value:L,onChange:M=>p({...g,[y.id]:M.target.value}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"ugyintezo",children:"Csak ügyintéző"}),s.jsx("option",{value:"vezeto",children:"Csak vezető"}),s.jsx("option",{value:"mindketto",children:"Mindkettő"})]})}return s.jsx("input",{type:"text",value:typeof E=="string"?E:JSON.stringify(E),onChange:L=>p({...g,[y.id]:L.target.value}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"});default:return s.jsx("span",{className:"text-neutral-900 font-medium",children:String(E)})}},G=(y,A,E)=>{if(y==null)return"-";if(A==="logikai")return y?"Igen":"Nem";if(A==="szam")return new Intl.NumberFormat("hu-HU").format(y);if(A==="lista"&&E==="DONTESHOZO_SZEREPKOR"){const L=typeof y=="string"?y:JSON.stringify(y).replace(/^"|"$/g,"");return{ugyintezo:"Csak ügyintéző",vezeto:"Csak vezető",mindketto:"Mindkettő"}[L]||L}return typeof y=="string"?y:JSON.stringify(y).replace(/^"|"$/g,"")},D=i.filter(y=>{var L;if(!y.parameter)return!1;const A=((L=y.parameter.kategoria)==null?void 0:L.kod)===o;if(!f)return A;const E=y.parameter.megnevezes.toLowerCase().includes(f.toLowerCase())||y.parameter.kod.toLowerCase().includes(f.toLowerCase())||y.parameter.leiras&&y.parameter.leiras.toLowerCase().includes(f.toLowerCase());return A&&E}).sort((y,A)=>{var E,L,M,ee;return((E=y.parameter)==null?void 0:E.kod)==="DONTESHOZO_SZEREPKOR"?-1:((L=A.parameter)==null?void 0:L.kod)==="DONTESHOZO_SZEREPKOR"?1:(((M=y.parameter)==null?void 0:M.megnevezes)||"").localeCompare(((ee=A.parameter)==null?void 0:ee.megnevezes)||"","hu")}),R=j.map(A=>{const E=i.filter(L=>{var M,ee;return((ee=(M=L.parameter)==null?void 0:M.kategoria)==null?void 0:ee.kod)===A.kod});return{kod:A.kod,nev:A.nev,count:E.length,testreszabott:E.filter(L=>L.felulirja_alapertelmezettet).length}});return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e&&s.jsxs("button",{onClick:e,className:"mb-6 px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 font-medium flex items-center gap-2",children:[s.jsx(Eu,{className:"h-4 w-4"}),"Vissza a főoldalra"]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(wj,{className:"h-8 w-8 text-blue-700"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Vasúti Modul - Adminisztráció"}),s.jsx("p",{className:"text-neutral-600 mt-1",children:"Rendszerbeállítások és jogosultságkezelés"})]})]}),s.jsxs("div",{className:"flex gap-2 border-b border-neutral-200",children:[s.jsxs("button",{onClick:()=>a("parameterek"),className:`px-6 py-3 font-semibold transition-colors flex items-center gap-2 ${t==="parameterek"?"border-b-2 border-primary-600 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(qm,{className:"h-5 w-5"}),"Paraméterek"]}),s.jsxs("button",{onClick:()=>a("jogosultsagok"),className:`px-6 py-3 font-semibold transition-colors flex items-center gap-2 ${t==="jogosultsagok"?"border-b-2 border-primary-600 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(kc,{className:"h-5 w-5"}),"Jogosultságok"]}),s.jsxs("button",{onClick:()=>a("dokumentumtar"),className:`px-6 py-3 font-semibold transition-colors flex items-center gap-2 ${t==="dokumentumtar"?"border-b-2 border-primary-600 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(Vx,{className:"h-5 w-5"}),"Dokumentumtár"]})]})]}),t==="jogosultsagok"?s.jsx(GE,{}):t==="dokumentumtar"?s.jsx(XE,{onClose:()=>a("parameterek")}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[s.jsxs(se,{className:"lg:col-span-1",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-primary-600"}),"Ügytípus kiválasztása"]}),s.jsx("div",{className:"space-y-2",children:x.map(y=>s.jsx("button",{onClick:()=>n(y.kod),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${r===y.kod?"bg-primary-600 text-white font-semibold shadow-md":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:y.nev},y.kod))}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3 text-sm",children:"Statisztika"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Összes paraméter:"}),s.jsx("span",{className:"font-semibold text-neutral-900",children:i.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Testreszabott:"}),s.jsx("span",{className:"font-semibold text-accent-600",children:i.filter(y=>y.felulirja_alapertelmezettet).length})]})]})]})]}),s.jsxs(se,{className:"lg:col-span-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 flex items-center gap-2",children:[s.jsx(qm,{className:"h-5 w-5 text-primary-600"}),"Paraméter kategóriák"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),s.jsx("input",{type:"text",placeholder:"Keresés...",value:f,onChange:y=>k(y.target.value),className:"pl-9 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-6",children:j.map(y=>{const A=R.find(L=>L.kod===y.kod),E=y.icon;return s.jsxs("button",{onClick:()=>c(y.kod),className:`p-4 rounded-lg border-2 transition-all ${o===y.kod?`border-${y.color}-500 bg-${y.color}-50`:"border-neutral-200 bg-white hover:border-neutral-300"}`,children:[s.jsx(E,{className:`h-6 w-6 mb-2 text-${y.color}-600`}),s.jsx("p",{className:"font-semibold text-neutral-900 text-sm",children:y.nev}),s.jsxs("p",{className:"text-xs text-neutral-600 mt-1",children:[(A==null?void 0:A.count)||0," paraméter",A!=null&&A.testreszabott?s.jsxs("span",{className:"text-accent-600 font-semibold",children:[" • ",A.testreszabott," módosítva"]}):null]})]},y.kod)})}),_?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-neutral-600",children:"Betöltés..."})}):D.length===0?s.jsx("div",{className:"text-center py-8 bg-neutral-50 rounded-lg",children:s.jsx("p",{className:"text-neutral-600",children:"Nincs megjeleníthető paraméter ebben a kategóriában"})}):s.jsx("div",{className:"space-y-3",children:D.map(y=>{const A=y.parameter;if(!A)return null;const E=d===y.id,L=y.felulirja_alapertelmezettet,M=L?y.ertek:A.alapertelmezett_ertek,ee=A.kod==="DONTESHOZO_SZEREPKOR";return s.jsx(se,{className:`${ee?"border-l-4 border-l-primary-500 bg-primary-50":L?"border-l-4 border-l-accent-500":""}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-semibold text-neutral-900",children:A.megnevezes}),ee&&s.jsx("span",{className:"px-2 py-0.5 bg-primary-600 text-white text-xs font-semibold rounded",children:"Fontos"}),L&&!ee&&s.jsx("span",{className:"px-2 py-0.5 bg-accent-100 text-accent-700 text-xs font-semibold rounded",children:"Módosítva"})]}),s.jsxs("p",{className:"text-xs text-neutral-500 mb-2",children:["Kód: ",A.kod," • Típus: ",A.adattipus]}),A.leiras&&s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:A.leiras}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-neutral-500",children:"Alapértelmezett:"}),s.jsx("span",{className:"ml-2 text-sm text-neutral-700",children:G(A.alapertelmezett_ertek,A.adattipus,A.kod)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:"Aktuális érték:"}),E?q(y):s.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:G(M,A.adattipus,A.kod)})]})]})]}),s.jsx("div",{className:"flex items-center gap-2 ml-4",children:E?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>N(y),className:"p-2 text-success-600 hover:bg-success-50 rounded-md",title:"Mentés",children:s.jsx(yn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{h(null),p({})},className:"p-2 text-neutral-600 hover:bg-neutral-100 rounded-md",title:"Mégse",children:s.jsx(es,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>h(y.id),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-md",title:"Szerkesztés",children:s.jsx(Ec,{className:"h-4 w-4"})}),L&&s.jsx("button",{onClick:()=>$(y),className:"p-2 text-warning-600 hover:bg-warning-50 rounded-md",title:"Visszaállítás alapértelmezettre",children:s.jsx(uu,{className:"h-4 w-4"})})]})})]})},y.id)})})]})]})]})}const zg={async getKategoriak(){const{data:e,error:t}=await xe.from("parameter_kategoriak").select("*").eq("aktiv",!0).order("sorrend");if(t)throw t;return e||[]},async getParameterek(e){let t=xe.from("parameterek").select(`
        *,
        kategoria:parameter_kategoriak(*)
      `).eq("aktiv",!0);if(e){const{data:n}=await xe.from("parameter_kategoriak").select("id").eq("kod",e).single();n&&(t=t.eq("kategoria_id",n.id))}const{data:a,error:r}=await t.order("megnevezes");if(r)throw r;return a||[]},async getHajozasiUgytipusok(){return["H-001","H-002","H-003"]},async getUgytuekParameterek(e){const{data:t,error:a}=await xe.from("ugytuek_parameterek").select(`
        *,
        parameter:parameterek(
          *,
          kategoria:parameter_kategoriak(*)
        )
      `).eq("ugytuek_kod",e).eq("aktiv",!0);if(a)throw a;return t||[]},async getUgytuekParameterErtekek(e){const t=await this.getUgytuekParameterek(e),a={};return t.forEach(r=>{if(r.parameter){const n=r.felulirja_alapertelmezettet?r.ertek:r.parameter.alapertelmezett_ertek;a[r.parameter.kod]=n}}),a},async updateUgytuekParameter(e,t,a,r){const{data:n}=await xe.from("parameterek").select("id").eq("kod",t).single();if(!n)throw new Error(`Paraméter nem található: ${t}`);const{data:i}=await xe.from("ugytuek_parameterek").select("*").eq("ugytuek_kod",e).eq("parameter_id",n.id).single();if(i){const{data:l,error:o}=await xe.from("ugytuek_parameterek").update({ertek:a,felulirja_alapertelmezettet:!0,modositva:new Date().toISOString()}).eq("id",i.id).select().single();if(o)throw o;return await xe.from("parameter_ertekek_tortenete").insert({ugytuek_parameter_id:i.id,regi_ertek:i.ertek,uj_ertek:a,indoklas:r}),l}else{const{data:l,error:o}=await xe.from("ugytuek_parameterek").insert({ugytuek_kod:e,parameter_id:n.id,ertek:a,felulirja_alapertelmezettet:!0}).select().single();if(o)throw o;return l}},async resetUgytuekParameter(e,t){const{data:a}=await xe.from("parameterek").select("id").eq("kod",t).single();if(!a)throw new Error(`Paraméter nem található: ${t}`);const{error:r}=await xe.from("ugytuek_parameterek").update({felulirja_alapertelmezettet:!1,ertek:null}).eq("ugytuek_kod",e).eq("parameter_id",a.id);if(r)throw r},async getParameterTortenet(e){const{data:t,error:a}=await xe.from("parameter_ertekek_tortenete").select("*").eq("ugytuek_parameter_id",e).order("modositas_datum",{ascending:!1});if(a)throw a;return t||[]},async createParameter(e){const{data:t,error:a}=await xe.from("parameterek").insert(e).select().single();if(a)throw a;return t},async updateParameter(e,t){const{data:a,error:r}=await xe.from("parameterek").update(t).eq("id",e).select().single();if(r)throw r;return a},async deleteParameter(e){const{error:t}=await xe.from("parameterek").update({aktiv:!1}).eq("id",e);if(t)throw t}},Br={async getFelhasznalok(){console.log("Felhasználók lekérdezése...");const{data:e,error:t}=await xe.from("felhasznalok").select("*").order("nev");if(t)throw console.error("Felhasználók lekérdezési hiba:",t),t;return console.log("Felhasználók lekérdezve:",(e==null?void 0:e.length)||0,"db"),e||[]},async getHajozasiFelhasznalok(){const{data:e,error:t}=await xe.from("jogosultsagok").select(`
        felhasznalo:felhasznalok(*)
      `).eq("modul","hajózási").eq("aktiv",!0);if(t)throw t;return(e==null?void 0:e.map(r=>r.felhasznalo).filter(r=>r!==null))||[]},async getJogosultsagok(e){console.log("Jogosultságok lekérdezése modulra:",e);const{data:t,error:a}=await xe.from("jogosultsagok").select(`
        *,
        felhasznalo:felhasznalok(*)
      `).eq("modul",e).eq("aktiv",!0).order("letrehozva",{ascending:!1});if(a)throw console.error("Jogosultságok lekérdezési hiba:",a),a;return console.log("Jogosultságok lekérdezve:",(t==null?void 0:t.length)||0,"db"),t||[]},async createFelhasznalo(e){const{data:t,error:a}=await xe.from("felhasznalok").insert(e).select().single();if(a)throw a;return t},async createJogosultsag(e,t,a,r){const{data:n,error:i}=await xe.from("jogosultsagok").insert({felhasznalo_id:e,modul:t,szerepkor:a,jogok:r,ervenyesseg_kezdete:new Date().toISOString(),aktiv:!0}).select(`
        *,
        felhasznalo:felhasznalok(*)
      `).single();if(i)throw i;return n},async updateJogosultsag(e,t,a){const{data:r,error:n}=await xe.from("jogosultsagok").update({szerepkor:t,jogok:a}).eq("id",e).select(`
        *,
        felhasznalo:felhasznalok(*)
      `).single();if(n)throw n;return r},async revokeJogosultsag(e){const{error:t}=await xe.from("jogosultsagok").update({aktiv:!1,ervenyesseg_vege:new Date().toISOString()}).eq("id",e);if(t)throw t},async activateJogosultsag(e){const{error:t}=await xe.from("jogosultsagok").update({aktiv:!0,ervenyesseg_vege:null}).eq("id",e);if(t)throw t},getElerhetoJogok(e){return{ügyfél:["kerelem_benyujtas","sajat_ugyek_megtekintes","dokumentum_letoltes","statusz_lekerdez"],ügyintéző:["kerelem_benyujtas","osszes_ugy_megtekintes","ugy_modositas","hianypotlas_kezeles","tenyallas_tisztazas","dokumentum_letoltes","dokumentum_generalas","nyilvantartas_kezeles"],vezető:["kerelem_benyujtas","osszes_ugy_megtekintes","ugy_modositas","donteshozatal","velemenyezes","statisztikak_megtekintes","riportok_generalasa","dokumentum_letoltes","dokumentum_generalas","nyilvantartas_kezeles"],admin:["kerelem_benyujtas","osszes_ugy_megtekintes","ugy_modositas","donteshozatal","parameterek_kezeles","jogosultsagok_kezeles","felhasznalok_kezeles","rendszer_beallitasok","osszes_nyilvantartas_kezeles","audit_log_megtekintes"]}[e]||[]}};function eC(){const[e,t]=B.useState([]),[a,r]=B.useState([]),[n,i]=B.useState(!1),[l,o]=B.useState(!1),[c,d]=B.useState(!1),[h,g]=B.useState(null),[p,f]=B.useState({email:"",nev:"",szerepkor:"ügyfél",aktiv:!0}),[k,_]=B.useState({felhasznalo_id:"",szerepkor:"ügyfél",jogok:[]}),[w,x]=B.useState({szerepkor:"ügyfél",jogok:[]});B.useEffect(()=>{j()},[]);const j=async()=>{i(!0);try{const[y,A]=await Promise.all([Br.getJogosultsagok("hajózási"),Br.getFelhasznalok()]);t(y),r(A)}catch(y){console.error("Adatok betöltése sikertelen:",y)}finally{i(!1)}},z=async()=>{try{await Br.createFelhasznalo(p),f({email:"",nev:"",szerepkor:"ügyfél",aktiv:!0}),o(!1),await j()}catch(y){console.error("Felhasználó létrehozása sikertelen:",y)}},N=async()=>{if(k.felhasznalo_id)try{await Br.createJogosultsag(k.felhasznalo_id,"hajózási",k.szerepkor,k.jogok),_({felhasznalo_id:"",szerepkor:"ügyfél",jogok:[]}),d(!1),await j()}catch(y){console.error("Jogosultság létrehozása sikertelen:",y)}},$=async y=>{try{await Br.updateJogosultsag(y,w.szerepkor,w.jogok),g(null),await j()}catch(A){console.error("Jogosultság frissítése sikertelen:",A)}},q=async y=>{if(confirm("Biztosan visszavonja ezt a jogosultságot?"))try{await Br.revokeJogosultsag(y),await j()}catch(A){console.error("Jogosultság visszavonása sikertelen:",A)}},G=async y=>{try{await Br.activateJogosultsag(y),await j()}catch(A){console.error("Jogosultság aktiválása sikertelen:",A)}},D=y=>{g(y.id),x({szerepkor:y.szerepkor,jogok:[...y.jogok]})},I=(y,A,E)=>{A.includes(y)?E(A.filter(L=>L!==y)):E([...A,y])},R=y=>({kerelem_benyujtas:"Kérelem benyújtás",sajat_ugyek_megtekintes:"Saját ügyek megtekintése",osszes_ugy_megtekintes:"Összes ügy megtekintése",ugy_modositas:"Ügy módosítás",hianypotlas_kezeles:"Hiánypótlás kezelés",tenyallas_tisztazas:"Tényállás tisztázás",dokumentum_letoltes:"Dokumentum letöltés",dokumentum_generalas:"Dokumentum generálás",nyilvantartas_kezeles:"Nyilvántartás kezelés",donteshozatal:"Döntéshozatal",velemenyezes:"Véleményezés",statisztikak_megtekintes:"Statisztikák",riportok_generalasa:"Riportok",parameterek_kezeles:"Paraméterek",jogosultsagok_kezeles:"Jogosultságok",felhasznalok_kezeles:"Felhasználók",rendszer_beallitasok:"Rendszerbeállítások",osszes_nyilvantartas_kezeles:"Összes nyilvántartás",audit_log_megtekintes:"Audit log",statusz_lekerdez:"Státusz lekérdezés"})[y]||y;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(kc,{className:"h-6 w-6 text-blue-700"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Jogosultságkezelés"}),s.jsx("p",{className:"text-sm text-neutral-600",children:"Hajózási modul felhasználói és jogosultságai"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium flex items-center gap-2",children:[s.jsx(V_,{className:"h-4 w-4"}),"Új felhasználó"]}),s.jsxs("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium flex items-center gap-2",children:[s.jsx(rl,{className:"h-4 w-4"}),"Új jogosultság"]})]})]}),l&&s.jsxs(se,{className:"bg-green-50 border-2 border-green-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-neutral-900",children:"Új felhasználó létrehozása"}),s.jsx("button",{onClick:()=>o(!1),className:"text-neutral-500 hover:text-neutral-700",children:s.jsx(es,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Név"}),s.jsx("input",{type:"text",value:p.nev,onChange:y=>f({...p,nev:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md",placeholder:"Kovács János"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:p.email,onChange:y=>f({...p,email:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md",placeholder:"kovacs.janos@example.hu"})]})]}),s.jsx("button",{onClick:z,disabled:!p.email||!p.nev,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Felhasználó létrehozása"})]}),c&&s.jsxs(se,{className:"bg-blue-50 border-2 border-blue-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-neutral-900",children:"Új jogosultság létrehozása"}),s.jsx("button",{onClick:()=>d(!1),className:"text-neutral-500 hover:text-neutral-700",children:s.jsx(es,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Felhasználó"}),s.jsxs("select",{value:k.felhasznalo_id,onChange:y=>_({...k,felhasznalo_id:y.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md",children:[s.jsx("option",{value:"",children:"Válasszon..."}),a.map(y=>s.jsxs("option",{value:y.id,children:[y.nev," (",y.email,")"]},y.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Szerepkör"}),s.jsxs("select",{value:k.szerepkor,onChange:y=>{const A=y.target.value;_({...k,szerepkor:A,jogok:Br.getElerhetoJogok(A)})},className:"w-full px-3 py-2 border border-neutral-300 rounded-md",children:[s.jsx("option",{value:"ügyfél",children:"Ügyfél"}),s.jsx("option",{value:"ügyintéző",children:"Ügyintéző"}),s.jsx("option",{value:"vezető",children:"Vezető"}),s.jsx("option",{value:"admin",children:"Admin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Jogosultságok"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Br.getElerhetoJogok(k.szerepkor).map(y=>s.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:k.jogok.includes(y),onChange:()=>I(y,k.jogok,A=>_({...k,jogok:A})),className:"rounded"}),s.jsx("span",{children:R(y)})]},y))})]})]}),s.jsx("button",{onClick:N,disabled:!k.felhasznalo_id,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Jogosultság létrehozása"})]}),s.jsx("div",{className:"space-y-3",children:n?s.jsx(se,{className:"text-center py-8",children:s.jsx("p",{className:"text-neutral-600",children:"Betöltés..."})}):e.length===0?s.jsxs(se,{className:"text-center py-8 bg-neutral-50",children:[s.jsx(Ca,{className:"h-12 w-12 text-neutral-400 mx-auto mb-3"}),s.jsx("p",{className:"text-neutral-600",children:"Még nincs jogosultság rögzítve"})]}):e.map(y=>{var M,ee;const A=h===y.id,E=A?w.jogok:y.jogok,L=A?w.szerepkor:y.szerepkor;return s.jsx(se,{className:`${y.aktiv?"":"bg-neutral-100 opacity-60"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${y.aktiv?"bg-success-100":"bg-neutral-200"}`,children:y.aktiv?s.jsx(Pe,{className:"h-5 w-5 text-success-600"}):s.jsx(Qs,{className:"h-5 w-5 text-neutral-500"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-neutral-900",children:((M=y.felhasznalo)==null?void 0:M.nev)||"Ismeretlen"}),s.jsx("p",{className:"text-sm text-neutral-600",children:(ee=y.felhasznalo)==null?void 0:ee.email})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${L==="admin"?"bg-red-100 text-red-700":L==="vezető"?"bg-purple-100 text-purple-700":L==="ügyintéző"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:A?s.jsxs("select",{value:w.szerepkor,onChange:ce=>{const V=ce.target.value;x({szerepkor:V,jogok:Br.getElerhetoJogok(V)})},className:"bg-transparent border-none text-xs font-semibold",children:[s.jsx("option",{value:"ügyfél",children:"Ügyfél"}),s.jsx("option",{value:"ügyintéző",children:"Ügyintéző"}),s.jsx("option",{value:"vezető",children:"Vezető"}),s.jsx("option",{value:"admin",children:"Admin"})]}):L})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:A?s.jsx("div",{className:"w-full grid grid-cols-3 gap-2",children:Br.getElerhetoJogok(w.szerepkor).map(ce=>s.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",checked:w.jogok.includes(ce),onChange:()=>I(ce,w.jogok,V=>x({...w,jogok:V})),className:"rounded"}),s.jsx("span",{children:R(ce)})]},ce))}):E.map(ce=>s.jsx("span",{className:"px-2 py-1 bg-neutral-100 text-neutral-700 text-xs rounded",children:R(ce)},ce))}),s.jsxs("div",{className:"mt-3 text-xs text-neutral-500",children:[s.jsxs("span",{children:["Érvényes: ",new Date(y.ervenyesseg_kezdete).toLocaleDateString("hu-HU")]}),y.ervenyesseg_vege&&s.jsxs("span",{children:[" - ",new Date(y.ervenyesseg_vege).toLocaleDateString("hu-HU")]})]})]}),s.jsx("div",{className:"flex items-center gap-2 ml-4",children:A?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>$(y.id),className:"p-2 text-success-600 hover:bg-success-50 rounded-md",title:"Mentés",children:s.jsx(yn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>g(null),className:"p-2 text-neutral-600 hover:bg-neutral-100 rounded-md",title:"Mégse",children:s.jsx(es,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>D(y),disabled:!y.aktiv,className:"p-2 text-primary-600 hover:bg-primary-50 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",title:"Szerkesztés",children:s.jsx(Ec,{className:"h-4 w-4"})}),y.aktiv?s.jsx("button",{onClick:()=>q(y.id),className:"p-2 text-error-600 hover:bg-error-50 rounded-md",title:"Visszavonás",children:s.jsx(Qs,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>G(y.id),className:"p-2 text-success-600 hover:bg-success-50 rounded-md",title:"Aktiválás",children:s.jsx(Pe,{className:"h-4 w-4"})})]})})]})},y.id)})})]})}function tC({onBackToHome:e}){const[t,a]=B.useState("parameterek"),[r,n]=B.useState("H-001"),[i,l]=B.useState([]),[o,c]=B.useState("HATARIDOK"),[d,h]=B.useState(null),[g,p]=B.useState({}),[f,k]=B.useState(""),[_,w]=B.useState(!1),x=[{kod:"H-001",nev:"H-001 - Hajózási alkalmassági vizsgálat"},{kod:"H-002",nev:"H-002 - Hajózási működési engedély"},{kod:"H-003",nev:"H-003 - Hajózási biztonsági tanúsítvány"}],j=[{kod:"HATARIDOK",nev:"Határidők",icon:bt,color:"blue"},{kod:"DIJAK",nev:"Díjak",icon:Hx,color:"green"},{kod:"ELLENORZESI_LISTAK",nev:"Ellenőrzési listák",icon:Jn,color:"purple"},{kod:"DOKUMENTUMOK",nev:"Dokumentumok",icon:De,color:"orange"},{kod:"ERTESITESEK",nev:"Értesítések",icon:yj,color:"red"},{kod:"WORKFLOW",nev:"Workflow",icon:Nj,color:"indigo"}];B.useEffect(()=>{r&&z()},[r]);const z=async()=>{w(!0);try{const y=await zg.getUgytuekParameterek(r);l(y)}catch(y){console.error("Ügytípus paraméterek betöltése sikertelen:",y)}finally{w(!1)}},N=async y=>{const A=g[y.id];if(y.parameter)try{await zg.updateUgytuekParameter(r,y.parameter.kod,A),await z(),h(null),p({})}catch(E){console.error("Mentés sikertelen:",E)}},$=async y=>{if(y.parameter)try{await zg.resetUgytuekParameter(r,y.parameter.kod),await z()}catch(A){console.error("Visszaállítás sikertelen:",A)}},q=y=>{const A=y.parameter;if(!A)return null;const E=g[y.id]??(y.felulirja_alapertelmezettet?y.ertek:A.alapertelmezett_ertek);switch(A.adattipus){case"logikai":return s.jsxs("select",{value:String(E),onChange:L=>p({...g,[y.id]:L.target.value==="true"}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"true",children:"Igen"}),s.jsx("option",{value:"false",children:"Nem"})]});case"szam":return s.jsx("input",{type:"number",value:E,onChange:L=>p({...g,[y.id]:Number(L.target.value)}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 w-32"});case"szoveg":return s.jsx("input",{type:"text",value:E,onChange:L=>p({...g,[y.id]:L.target.value}),className:"px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"});default:return s.jsx("span",{className:"text-neutral-900 font-medium",children:String(E)})}},G=(y,A)=>y==null?"-":A==="logikai"?y?"Igen":"Nem":A==="szam"?new Intl.NumberFormat("hu-HU").format(y):String(y),D=i.filter(y=>{var L;if(!y.parameter)return!1;const A=((L=y.parameter.kategoria)==null?void 0:L.kod)===o;if(!f)return A;const E=y.parameter.megnevezes.toLowerCase().includes(f.toLowerCase())||y.parameter.kod.toLowerCase().includes(f.toLowerCase())||y.parameter.leiras&&y.parameter.leiras.toLowerCase().includes(f.toLowerCase());return A&&E}),R=j.map(A=>{const E=i.filter(L=>{var M,ee;return((ee=(M=L.parameter)==null?void 0:M.kategoria)==null?void 0:ee.kod)===A.kod});return{kod:A.kod,nev:A.nev,count:E.length,testreszabott:E.filter(L=>L.felulirja_alapertelmezettet).length}});return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e&&s.jsxs("button",{onClick:e,className:"mb-6 px-4 py-2 bg-neutral-200 text-neutral-700 rounded-md hover:bg-neutral-300 font-medium flex items-center gap-2",children:[s.jsx(Eu,{className:"h-4 w-4"}),"Vissza a főoldalra"]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"bg-cyan-100 p-3 rounded-lg",children:s.jsx(__,{className:"h-8 w-8 text-cyan-700"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-neutral-900",children:"Hajózási Modul - Adminisztráció"}),s.jsx("p",{className:"text-neutral-600 mt-1",children:"Rendszerbeállítások és jogosultságkezelés"})]})]}),s.jsxs("div",{className:"flex gap-2 border-b border-neutral-200",children:[s.jsxs("button",{onClick:()=>a("parameterek"),className:`px-6 py-3 font-semibold transition-colors flex items-center gap-2 ${t==="parameterek"?"border-b-2 border-cyan-600 text-cyan-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(qm,{className:"h-5 w-5"}),"Paraméterek"]}),s.jsxs("button",{onClick:()=>a("jogosultsagok"),className:`px-6 py-3 font-semibold transition-colors flex items-center gap-2 ${t==="jogosultsagok"?"border-b-2 border-cyan-600 text-cyan-600":"text-neutral-600 hover:text-neutral-900"}`,children:[s.jsx(kc,{className:"h-5 w-5"}),"Jogosultságok"]})]})]}),t==="jogosultsagok"?s.jsx(eC,{}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[s.jsxs(se,{className:"lg:col-span-1",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[s.jsx(De,{className:"h-5 w-5 text-cyan-600"}),"Ügytípus kiválasztása"]}),s.jsx("div",{className:"space-y-2",children:x.map(y=>s.jsx("button",{onClick:()=>n(y.kod),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${r===y.kod?"bg-cyan-600 text-white font-semibold shadow-md":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:y.nev},y.kod))}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:[s.jsx("h4",{className:"font-semibold text-neutral-900 mb-3 text-sm",children:"Statisztika"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Összes paraméter:"}),s.jsx("span",{className:"font-semibold text-neutral-900",children:i.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-neutral-600",children:"Testreszabott:"}),s.jsx("span",{className:"font-semibold text-accent-600",children:i.filter(y=>y.felulirja_alapertelmezettet).length})]})]})]})]}),s.jsxs(se,{className:"lg:col-span-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"font-semibold text-neutral-900 flex items-center gap-2",children:[s.jsx(qm,{className:"h-5 w-5 text-cyan-600"}),"Paraméter kategóriák"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400"}),s.jsx("input",{type:"text",placeholder:"Keresés...",value:f,onChange:y=>k(y.target.value),className:"pl-9 pr-4 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500 text-sm"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-6",children:j.map(y=>{const A=R.find(L=>L.kod===y.kod),E=y.icon;return s.jsxs("button",{onClick:()=>c(y.kod),className:`p-4 rounded-lg border-2 transition-all ${o===y.kod?`border-${y.color}-500 bg-${y.color}-50`:"border-neutral-200 bg-white hover:border-neutral-300"}`,children:[s.jsx(E,{className:`h-6 w-6 mb-2 text-${y.color}-600`}),s.jsx("p",{className:"font-semibold text-neutral-900 text-sm",children:y.nev}),s.jsxs("p",{className:"text-xs text-neutral-600 mt-1",children:[(A==null?void 0:A.count)||0," paraméter",A!=null&&A.testreszabott?s.jsxs("span",{className:"text-accent-600 font-semibold",children:[" • ",A.testreszabott," módosítva"]}):null]})]},y.kod)})}),_?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-neutral-600",children:"Betöltés..."})}):D.length===0?s.jsx("div",{className:"text-center py-8 bg-neutral-50 rounded-lg",children:s.jsx("p",{className:"text-neutral-600",children:"Nincs megjeleníthető paraméter ebben a kategóriában"})}):s.jsx("div",{className:"space-y-3",children:D.map(y=>{const A=y.parameter;if(!A)return null;const E=d===y.id,L=y.felulirja_alapertelmezettet,M=L?y.ertek:A.alapertelmezett_ertek;return s.jsx(se,{className:`${L?"border-l-4 border-l-accent-500":""}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-semibold text-neutral-900",children:A.megnevezes}),L&&s.jsx("span",{className:"px-2 py-0.5 bg-accent-100 text-accent-700 text-xs font-semibold rounded",children:"Módosítva"})]}),s.jsxs("p",{className:"text-xs text-neutral-500 mb-2",children:["Kód: ",A.kod," • Típus: ",A.adattipus]}),A.leiras&&s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:A.leiras}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-neutral-500",children:"Alapértelmezett:"}),s.jsx("span",{className:"ml-2 text-sm text-neutral-700",children:G(A.alapertelmezett_ertek,A.adattipus)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-neutral-500",children:"Aktuális érték:"}),E?q(y):s.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:G(M,A.adattipus)})]})]})]}),s.jsx("div",{className:"flex items-center gap-2 ml-4",children:E?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>N(y),className:"p-2 text-success-600 hover:bg-success-50 rounded-md",title:"Mentés",children:s.jsx(yn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{h(null),p({})},className:"p-2 text-neutral-600 hover:bg-neutral-100 rounded-md",title:"Mégse",children:s.jsx(es,{className:"h-4 w-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>h(y.id),className:"p-2 text-cyan-600 hover:bg-cyan-50 rounded-md",title:"Szerkesztés",children:s.jsx(Ec,{className:"h-4 w-4"})}),L&&s.jsx("button",{onClick:()=>$(y),className:"p-2 text-warning-600 hover:bg-warning-50 rounded-md",title:"Visszaállítás alapértelmezettre",children:s.jsx(uu,{className:"h-4 w-4"})})]})})]})},y.id)})})]})]})]})}function sC(){const[e,t]=B.useState("home"),[a,r]=B.useState(null),[n,i]=B.useState(null),[l,o]=B.useState(""),c=(p,f,k)=>{r(k),i(p),o(f),k==="ügyfél"&&p==="vasúti"?t("vasuti-kulso"):k==="ügyfél"&&p==="hajózási"?t("hajozasi-kulso"):k==="ügyintéző"&&p==="vasúti"?t("vasuti-belso"):k==="ügyintéző"&&p==="hajózási"?t("hajozasi-belso"):k==="szignáló"&&p==="vasúti"?t("vasuti-szignalo"):k==="vezető"&&p==="vasúti"?t("vezeto-vasuti"):k==="vezető"&&p==="hajózási"?t("vezeto-hajozasi"):k==="admin"&&p==="vasúti"?t("vasuti-admin"):k==="admin"&&p==="hajózási"&&t("hajozasi-admin")},d=()=>{if(e==="home")return"VAHAP Központi Portál";if(!a)return"VAHAP";const p={ügyfél:"Ügyfél",ügyintéző:"Ügyintéző",szignáló:"Szignáló",vezető:"Vezető",admin:"Rendszergazda"}[a],f=n==="vasúti"?"Vasúti":n==="hajózási"?"Hajózási":"";switch(e){case"vasuti-admin":return"Vasúti Modul - Admin Paraméterezés";case"hajozasi-admin":return"Hajózási Modul - Admin Paraméterezés";case"vasuti-kulso":return`${f} Hatósági Rendszer - ${p}`;case"vasuti-belso":return`${f} Hatósági Rendszer - ${p}`;case"vasuti-szignalo":return`${f} Hatósági Rendszer - ${p}`;case"hajozasi-kulso":return`${f} Hatósági Rendszer - ${p}`;case"hajozasi-belso":return`${f} Hatósági Rendszer - ${p}`;case"vezeto-vasuti":return`${f} Hatósági Rendszer - ${p}`;case"vezeto-hajozasi":return`${f} Hatósági Rendszer - ${p}`;default:return"VAHAP"}},h=()=>{t("home"),r(null),i(null),o("")},g=()=>e==="home"?s.jsx(L6,{onRendszerInditas:c}):e==="vezeto-vasuti"?s.jsx(JE,{view:"vezeto",onBackToHome:h}):e==="vasuti-admin"?s.jsx(QE,{onBackToHome:h}):e==="hajozasi-admin"?s.jsx(tC,{onBackToHome:h}):e==="vasuti-szignalo"?s.jsx(WE,{view:"szignalo",onBackToHome:h}):s.jsxs(s.Fragment,{children:[s.jsx(q_,{title:d(),onBack:h}),s.jsxs("main",{className:"pb-8",children:[e==="vasuti-kulso"&&s.jsx(IE,{}),e==="vasuti-belso"&&s.jsx(qE,{view:"belso"}),e==="hajozasi-kulso"&&s.jsx(a2,{view:"kulso"}),e==="hajozasi-belso"&&s.jsx(a2,{view:"belso"}),e==="vezeto-hajozasi"&&s.jsx("div",{className:"p-8 text-center text-neutral-600",children:"Hajózási vezető modul fejlesztés alatt"})]})]});return s.jsxs("div",{className:"min-h-screen bg-neutral-50 flex flex-col",children:[g(),e!=="home"&&a&&s.jsx("footer",{className:"bg-white border-t border-neutral-200 mt-auto",role:"contentinfo",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("p",{className:"text-center text-sm text-neutral-600",children:["© 2025 VAHAP - Demo Rendszer | Bejelentkezve: ",s.jsx("span",{className:"font-semibold",children:a})," (",l,")"]})})})]})}xj(document.getElementById("root")).render(s.jsx(B.StrictMode,{children:s.jsx(sC,{})}));export{Ot as _,Sr as c,rC as g};
